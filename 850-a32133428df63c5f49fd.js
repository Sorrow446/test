/*! For license information please see 850-a32133428df63c5f49fd.js.LICENSE.txt */
(self.webpackChunkclozemaster = self.webpackChunkclozemaster || []).push([[850], {
    86900: function(e, t, n) {
        var a = {
            "./ActivityLog": 44173,
            "./ActivityLog.jsx": 44173,
            "./Ad": 57955,
            "./Ad.jsx": 57955,
            "./AddSentenceToCollection": 11259,
            "./AddSentenceToCollection.jsx": 11259,
            "./AddSentenceToCollectionBtn": 65935,
            "./AddSentenceToCollectionBtn.jsx": 65935,
            "./AddSentenceToCollectionModal": 78780,
            "./AddSentenceToCollectionModal.jsx": 78780,
            "./AutoScrollablePre": 34527,
            "./AutoScrollablePre.jsx": 34527,
            "./ChatBot": 97227,
            "./ChatBot.jsx": 97227,
            "./Checkbox": 68135,
            "./Checkbox.jsx": 68135,
            "./ClozeSelectable": 46177,
            "./ClozeSelectable.jsx": 46177,
            "./ClozeSentence": 68462,
            "./ClozeSentence.jsx": 68462,
            "./ClozeSentenceSearch": 75922,
            "./ClozeSentenceSearch.jsx": 75922,
            "./ClozeSentenceSearch/BulkAdd": 49982,
            "./ClozeSentenceSearch/BulkAdd.jsx": 49982,
            "./ClozeSentenceSearch/SearchForm": 55621,
            "./ClozeSentenceSearch/SearchForm.jsx": 55621,
            "./ClozeSentenceSearch/SearchResult": 94420,
            "./ClozeSentenceSearch/SearchResult.jsx": 94420,
            "./ClozeSentenceSearchModal": 80931,
            "./ClozeSentenceSearchModal.jsx": 80931,
            "./ClozeText/ClozeTextAddToCollectionBtn": 49021,
            "./ClozeText/ClozeTextAddToCollectionBtn.jsx": 49021,
            "./ClozeText/ClozeTextSentenceSearchBtn": 36142,
            "./ClozeText/ClozeTextSentenceSearchBtn.jsx": 36142,
            "./CollectionClozeSentenceEditor": 98401,
            "./CollectionClozeSentenceEditor.jsx": 98401,
            "./CollectionClozeSentenceEditorModal": 84842,
            "./CollectionClozeSentenceEditorModal.jsx": 84842,
            "./CollectionClozeSentenceExplanation": 7481,
            "./CollectionClozeSentenceExplanation.jsx": 7481,
            "./CollectionSelector": 96991,
            "./CollectionSelector.jsx": 96991,
            "./ConjugationPractice": 90204,
            "./ConjugationPractice.jsx": 90204,
            "./CopySentencePopover": 73677,
            "./CopySentencePopover.jsx": 73677,
            "./DailyGoalModal": 64225,
            "./DailyGoalModal.jsx": 64225,
            "./DailyGoalPanel": 9032,
            "./DailyGoalPanel.jsx": 9032,
            "./DailyGoalPanelV2": 3988,
            "./DailyGoalPanelV2.jsx": 3988,
            "./DailyGoalStats": 48507,
            "./DailyGoalStats.jsx": 48507,
            "./DailyReminderBtn": 79439,
            "./DailyReminderBtn.jsx": 79439,
            "./DailyReminderModal": 53884,
            "./DailyReminderModal.jsx": 53884,
            "./DailyReminderPanel": 92697,
            "./DailyReminderPanel.jsx": 92697,
            "./Dashboard": 71506,
            "./Dashboard.jsx": 71506,
            "./Dashboard/AddClozeFromWordsToCollectionModal": 50408,
            "./Dashboard/AddClozeFromWordsToCollectionModal.jsx": 50408,
            "./Dashboard/AddFileToCollectionModal": 66820,
            "./Dashboard/AddFileToCollectionModal.jsx": 66820,
            "./Dashboard/AddTextToCollectionModal": 16657,
            "./Dashboard/AddTextToCollectionModal.jsx": 16657,
            "./Dashboard/AddToCollectionModal": 44654,
            "./Dashboard/AddToCollectionModal.jsx": 44654,
            "./Dashboard/BulkSentenceCreationEditor": 98164,
            "./Dashboard/BulkSentenceCreationEditor.jsx": 98164,
            "./Dashboard/ChallengeFriendsPanel": 79715,
            "./Dashboard/ChallengeFriendsPanel.jsx": 79715,
            "./Dashboard/ChunkProgressBar": 70550,
            "./Dashboard/ChunkProgressBar.jsx": 70550,
            "./Dashboard/ClozeListeningCollectionComponent": 64688,
            "./Dashboard/ClozeListeningCollectionComponent.jsx": 64688,
            "./Dashboard/ClozeListeningPanel": 95779,
            "./Dashboard/ClozeListeningPanel.jsx": 95779,
            "./Dashboard/CollectionEditor": 70660,
            "./Dashboard/CollectionEditor.jsx": 70660,
            "./Dashboard/CollectionEditorModal": 45133,
            "./Dashboard/CollectionEditorModal.jsx": 45133,
            "./Dashboard/CollectionGroupingsPanel": 10447,
            "./Dashboard/CollectionGroupingsPanel.jsx": 10447,
            "./Dashboard/CollectionPanel": 99689,
            "./Dashboard/CollectionPanel.jsx": 99689,
            "./Dashboard/CollectionProgressBar": 8267,
            "./Dashboard/CollectionProgressBar.jsx": 8267,
            "./Dashboard/CollectionReviewSettingsModal": 97729,
            "./Dashboard/CollectionReviewSettingsModal.jsx": 97729,
            "./Dashboard/CollectionTableRow": 90131,
            "./Dashboard/CollectionTableRow.jsx": 90131,
            "./Dashboard/CollectionsModalTable": 90721,
            "./Dashboard/CollectionsModalTable.jsx": 90721,
            "./Dashboard/Core1kCollectionComponent": 51061,
            "./Dashboard/Core1kCollectionComponent.jsx": 51061,
            "./Dashboard/DeleteLanguagePairingModal": 69367,
            "./Dashboard/DeleteLanguagePairingModal.jsx": 69367,
            "./Dashboard/DownloadFavoritesModal": 93337,
            "./Dashboard/DownloadFavoritesModal.jsx": 93337,
            "./Dashboard/FastTrackComponent": 32835,
            "./Dashboard/FastTrackComponent.jsx": 32835,
            "./Dashboard/FastTrackPanel": 42856,
            "./Dashboard/FastTrackPanel.jsx": 42856,
            "./Dashboard/FastTrackStats": 66203,
            "./Dashboard/FastTrackStats.jsx": 66203,
            "./Dashboard/FastTrackStatsModal": 95164,
            "./Dashboard/FastTrackStatsModal.jsx": 95164,
            "./Dashboard/FastTrackV2Panel": 24868,
            "./Dashboard/FastTrackV2Panel.jsx": 24868,
            "./Dashboard/FavoritesModal": 51913,
            "./Dashboard/FavoritesModal.jsx": 51913,
            "./Dashboard/FollowClozemasterPanel": 51813,
            "./Dashboard/FollowClozemasterPanel.jsx": 51813,
            "./Dashboard/FrequencyCollectionsComponent": 75445,
            "./Dashboard/FrequencyCollectionsComponent.jsx": 75445,
            "./Dashboard/FullHistoryBtn": 71816,
            "./Dashboard/FullHistoryBtn.jsx": 71816,
            "./Dashboard/FullHistoryBtnV2": 44372,
            "./Dashboard/FullHistoryBtnV2.jsx": 44372,
            "./Dashboard/GoogleAdPanel": 33211,
            "./Dashboard/GoogleAdPanel.jsx": 33211,
            "./Dashboard/GooglePanelsAd": 94812,
            "./Dashboard/GooglePanelsAd.jsx": 94812,
            "./Dashboard/GoogleRightSidebarAd": 93719,
            "./Dashboard/GoogleRightSidebarAd.jsx": 93719,
            "./Dashboard/GrammarCollectionsComponent": 39576,
            "./Dashboard/GrammarCollectionsComponent.jsx": 39576,
            "./Dashboard/LanguagePairingSettingsModal": 50227,
            "./Dashboard/LanguagePairingSettingsModal.jsx": 50227,
            "./Dashboard/LanguagePairingSettingsModalV2": 25499,
            "./Dashboard/LanguagePairingSettingsModalV2.jsx": 25499,
            "./Dashboard/LeaderboardModal": 16279,
            "./Dashboard/LeaderboardModal.jsx": 16279,
            "./Dashboard/LeaderboardStatPanel": 5440,
            "./Dashboard/LeaderboardStatPanel.jsx": 5440,
            "./Dashboard/MoreStatsModal": 14296,
            "./Dashboard/MoreStatsModal.jsx": 14296,
            "./Dashboard/MyCollectionsPanel": 82994,
            "./Dashboard/MyCollectionsPanel.jsx": 82994,
            "./Dashboard/RandomCollectionComponent": 44893,
            "./Dashboard/RandomCollectionComponent.jsx": 44893,
            "./Dashboard/RankingsModal": 55047,
            "./Dashboard/RankingsModal.jsx": 55047,
            "./Dashboard/ResetProgressModal": 92024,
            "./Dashboard/ResetProgressModal.jsx": 92024,
            "./Dashboard/ReviewBtnPanel": 10485,
            "./Dashboard/ReviewBtnPanel.jsx": 10485,
            "./Dashboard/ReviewSettings": 74096,
            "./Dashboard/ReviewSettings.jsx": 74096,
            "./Dashboard/ReviewSettingsModal": 91313,
            "./Dashboard/ReviewSettingsModal.jsx": 91313,
            "./Dashboard/ReviewStatPanel": 51319,
            "./Dashboard/ReviewStatPanel.jsx": 51319,
            "./Dashboard/SharedCollection": 79800,
            "./Dashboard/SharedCollection.jsx": 79800,
            "./Dashboard/SharedCollectionsModal": 28358,
            "./Dashboard/SharedCollectionsModal.jsx": 28358,
            "./Dashboard/StatPanel": 95503,
            "./Dashboard/StatPanel.jsx": 95503,
            "./Dashboard/V3ClozeListeningPanel": 48616,
            "./Dashboard/V3ClozeListeningPanel.jsx": 48616,
            "./Dashboard/V3DailyGoalPanel": 16898,
            "./Dashboard/V3DailyGoalPanel.jsx": 16898,
            "./Dashboard/V3LeaderboardPanel": 22267,
            "./Dashboard/V3LeaderboardPanel.jsx": 22267,
            "./Dashboard/V3ReviewPanel": 68738,
            "./Dashboard/V3ReviewPanel.jsx": 68738,
            "./Dashboard/V3ReviewSettings": 92285,
            "./Dashboard/V3ReviewSettings.jsx": 92285,
            "./Dashboard/V3ReviewSettingsModal": 78174,
            "./Dashboard/V3ReviewSettingsModal.jsx": 78174,
            "./Dashboard/V3StreakPanel": 14228,
            "./Dashboard/V3StreakPanel.jsx": 14228,
            "./Dashboard/redux/reducers": 34268,
            "./Dashboard/redux/reducers/": 34268,
            "./Dashboard/redux/reducers/actionTypes": 35231,
            "./Dashboard/redux/reducers/actionTypes.js": 35231,
            "./Dashboard/redux/reducers/collections": 26797,
            "./Dashboard/redux/reducers/collections.js": 26797,
            "./Dashboard/redux/reducers/index": 34268,
            "./Dashboard/redux/reducers/index.js": 34268,
            "./Dashboard/redux/store": 96225,
            "./Dashboard/redux/store.js": 96225,
            "./DashboardV2-FAILED": 32734,
            "./DashboardV2-FAILED.jsx": 32734,
            "./DashboardV3": 58179,
            "./DashboardV3.jsx": 58179,
            "./Discover": 91621,
            "./Discover.jsx": 91621,
            "./DiscussionBtn": 17162,
            "./DiscussionBtn.jsx": 17162,
            "./DownloadAppBanner": 78663,
            "./DownloadAppBanner.jsx": 78663,
            "./ExplanationRequest": 15584,
            "./ExplanationRequest.jsx": 15584,
            "./FadeIn": 61291,
            "./FadeIn.jsx": 61291,
            "./FadeOut": 36460,
            "./FadeOut.jsx": 36460,
            "./FeedbackWidget": 64129,
            "./FeedbackWidget.jsx": 64129,
            "./FlagSprite": 28737,
            "./FlagSprite.jsx": 28737,
            "./Icon": 40727,
            "./Icon.jsx": 40727,
            "./LanguagePairingOrder": 19150,
            "./LanguagePairingOrder.jsx": 19150,
            "./LanguagePairings": 32793,
            "./LanguagePairings.jsx": 32793,
            "./Loading": 73898,
            "./Loading.jsx": 73898,
            "./LoadingOverlay": 74904,
            "./LoadingOverlay.jsx": 74904,
            "./ManageCollectionModal": 94870,
            "./ManageCollectionModal.jsx": 94870,
            "./ManageCollectionModal/CollectionClozeSentence": 20911,
            "./ManageCollectionModal/CollectionClozeSentence.jsx": 20911,
            "./ManageCollectionModal/CollectionClozeSentenceEditableAttribute": 755,
            "./ManageCollectionModal/CollectionClozeSentenceEditableAttribute.jsx": 755,
            "./Markdown": 29419,
            "./Markdown.jsx": 29419,
            "./MarkedAsKnownIcon": 28852,
            "./MarkedAsKnownIcon.jsx": 28852,
            "./MasteredIcon": 9830,
            "./MasteredIcon.jsx": 9830,
            "./MaxPlayedTodayModal": 89726,
            "./MaxPlayedTodayModal.jsx": 89726,
            "./Modal": 40897,
            "./Modal.jsx": 40897,
            "./ModalControl": 3158,
            "./ModalControl.jsx": 3158,
            "./ModalFooterCloseBtn": 508,
            "./ModalFooterCloseBtn.jsx": 508,
            "./ModalProPromo": 61703,
            "./ModalProPromo.jsx": 61703,
            "./NewCollectionForm": 73294,
            "./NewCollectionForm.jsx": 73294,
            "./Onboarding": 52143,
            "./Onboarding.jsx": 52143,
            "./OnboardingWelcome": 90075,
            "./OnboardingWelcome.jsx": 90075,
            "./PaddleCheckout": 55628,
            "./PaddleCheckout.jsx": 55628,
            "./Pagination": 86956,
            "./Pagination.jsx": 86956,
            "./Panel": 18152,
            "./Panel.jsx": 18152,
            "./PlayClozeListening": 8e4,
            "./PlayClozeListening.jsx": 8e4,
            "./PlayClozeListening/ReportModal": 42100,
            "./PlayClozeListening/ReportModal.jsx": 42100,
            "./PlayCollection": 83394,
            "./PlayCollection.jsx": 83394,
            "./PlayCollection/AccentButtons": 94626,
            "./PlayCollection/AccentButtons.jsx": 94626,
            "./PlayCollection/DiscussionModal": 50964,
            "./PlayCollection/DiscussionModal.jsx": 50964,
            "./PlayCollection/GameSettings": 43302,
            "./PlayCollection/GameSettings.jsx": 43302,
            "./PlayCollection/HelpModal": 45895,
            "./PlayCollection/HelpModal.jsx": 45895,
            "./PlayCollection/Hint": 80240,
            "./PlayCollection/Hint.jsx": 80240,
            "./PlayCollection/Incorrect": 52226,
            "./PlayCollection/Incorrect.jsx": 52226,
            "./PlayCollection/IntraRoundAd": 66148,
            "./PlayCollection/IntraRoundAd.jsx": 66148,
            "./PlayCollection/LeveledUpModal": 88622,
            "./PlayCollection/LeveledUpModal.jsx": 88622,
            "./PlayCollection/ListeningControl": 33405,
            "./PlayCollection/ListeningControl.jsx": 33405,
            "./PlayCollection/MultipleChoiceOptions": 19782,
            "./PlayCollection/MultipleChoiceOptions.jsx": 19782,
            "./PlayCollection/Points": 60846,
            "./PlayCollection/Points.jsx": 60846,
            "./PlayCollection/ReportErrorBtn": 93491,
            "./PlayCollection/ReportErrorBtn.jsx": 93491,
            "./PlayCollection/ReportErrorModal": 13104,
            "./PlayCollection/ReportErrorModal.jsx": 13104,
            "./PlayCollection/RoundHistoryModal": 85964,
            "./PlayCollection/RoundHistoryModal.jsx": 85964,
            "./PlayCollection/RoundResults": 89025,
            "./PlayCollection/RoundResults.jsx": 89025,
            "./PlayCollection/ShortcutsList": 23314,
            "./PlayCollection/ShortcutsList.jsx": 23314,
            "./PlayCollection/TeachingCollectionResultsForm": 11088,
            "./PlayCollection/TeachingCollectionResultsForm.jsx": 11088,
            "./PlayCollection/TextToSpeechSettings": 75148,
            "./PlayCollection/TextToSpeechSettings.jsx": 75148,
            "./PlayCollection/Tokens": 74885,
            "./PlayCollection/Tokens.jsx": 74885,
            "./PlayCollectionV2": 63014,
            "./PlayCollectionV2.jsx": 63014,
            "./PlayOptionsModal": 64639,
            "./PlayOptionsModal.jsx": 64639,
            "./PlaySystemTtsButton": 46402,
            "./PlaySystemTtsButton.jsx": 46402,
            "./PlayingIcon": 50715,
            "./PlayingIcon.jsx": 50715,
            "./ProgressBar": 20126,
            "./ProgressBar.jsx": 20126,
            "./PublicRadio": 31842,
            "./PublicRadio.jsx": 31842,
            "./QuickDemo": 64942,
            "./QuickDemo.jsx": 64942,
            "./Radio": 28499,
            "./Radio.jsx": 28499,
            "./Rankings": 89977,
            "./Rankings.jsx": 89977,
            "./ReportedCollectionClozeSentences": 79585,
            "./ReportedCollectionClozeSentences/": 79585,
            "./ReportedCollectionClozeSentences/index": 79585,
            "./ReportedCollectionClozeSentences/index.js": 79585,
            "./ResourceLinks": 4349,
            "./ResourceLinks.jsx": 4349,
            "./SaleCountdownTimer": 70485,
            "./SaleCountdownTimer.jsx": 70485,
            "./SelectionPopover": 72717,
            "./SelectionPopover.jsx": 72717,
            "./SelectionPopoverableLink": 50933,
            "./SelectionPopoverableLink.jsx": 50933,
            "./SelectionSlideout": 92313,
            "./SelectionSlideout.jsx": 92313,
            "./SelectionToken": 27025,
            "./SelectionToken.jsx": 27025,
            "./SelectionTokenText": 58896,
            "./SelectionTokenText.jsx": 58896,
            "./SlideDown": 20997,
            "./SlideDown.jsx": 20997,
            "./Slideout": 18173,
            "./Slideout.jsx": 18173,
            "./SpeechSynthesisBtn": 69204,
            "./SpeechSynthesisBtn.jsx": 69204,
            "./SpeechToText": 46752,
            "./SpeechToText.jsx": 46752,
            "./Strike": 90350,
            "./Strike.jsx": 90350,
            "./TeachingDashboard": 41305,
            "./TeachingDashboard.jsx": 41305,
            "./TeachingDashboard/ClozeSentenceSearch": 75404,
            "./TeachingDashboard/ClozeSentenceSearch.jsx": 75404,
            "./TeachingDashboard/Contributors": 6996,
            "./TeachingDashboard/Contributors.jsx": 6996,
            "./TeachingDashboard/CrosswordViewer": 30854,
            "./TeachingDashboard/CrosswordViewer.jsx": 30854,
            "./TeachingDashboard/EmbedBuilder": 87394,
            "./TeachingDashboard/EmbedBuilder.jsx": 87394,
            "./TeachingDashboard/LinkBuilder": 68989,
            "./TeachingDashboard/LinkBuilder.jsx": 68989,
            "./TeachingDashboard/MyTeachingCollection": 3917,
            "./TeachingDashboard/MyTeachingCollection.jsx": 3917,
            "./TeachingDashboard/ResultsViewer": 39384,
            "./TeachingDashboard/ResultsViewer.jsx": 39384,
            "./TeachingDashboard/SentencesEditor": 49081,
            "./TeachingDashboard/SentencesEditor.jsx": 49081,
            "./Toast": 24367,
            "./Toast.jsx": 24367,
            "./UserProfileAttr": 39359,
            "./UserProfileAttr.jsx": 39359,
            "./WorksheetEditor": 9324,
            "./WorksheetEditor/": 9324,
            "./WorksheetEditor/Block": 65851,
            "./WorksheetEditor/Block.jsx": 65851,
            "./WorksheetEditor/SentenceBlock": 81670,
            "./WorksheetEditor/SentenceBlock.jsx": 81670,
            "./WorksheetEditor/SentenceEditor": 66630,
            "./WorksheetEditor/SentenceEditor.jsx": 66630,
            "./WorksheetEditor/SentenceSearchModal": 2986,
            "./WorksheetEditor/SentenceSearchModal.jsx": 2986,
            "./WorksheetEditor/SentenceSearchResult": 26890,
            "./WorksheetEditor/SentenceSearchResult.jsx": 26890,
            "./WorksheetEditor/SentencesBlock": 65979,
            "./WorksheetEditor/SentencesBlock.jsx": 65979,
            "./WorksheetEditor/TextBlock": 51100,
            "./WorksheetEditor/TextBlock.jsx": 51100,
            "./WorksheetEditor/index": 9324,
            "./WorksheetEditor/index.jsx": 9324,
            "./admin/BlogPostLanguagePairing": 13942,
            "./admin/BlogPostLanguagePairing.jsx": 13942,
            "./admin/ClozeSentenceSearch/SearchForm": 33009,
            "./admin/ClozeSentenceSearch/SearchForm.jsx": 33009,
            "./admin/CollectionClozeSentenceRow": 2e4,
            "./admin/CollectionClozeSentenceRow.jsx": 2e4,
            "./admin/CollectionClozeSentences": 1503,
            "./admin/CollectionClozeSentences.jsx": 1503,
            "./admin/CommonVoiceSentenceTr": 56744,
            "./admin/CommonVoiceSentenceTr.jsx": 56744,
            "./admin/QuickMod": 30579,
            "./admin/QuickMod.jsx": 30579,
            "./admin/QuickMod/Tokens": 28878,
            "./admin/QuickMod/Tokens.jsx": 28878,
            "./admin/StatsReportsLineChart": 76994,
            "./admin/StatsReportsLineChart.jsx": 76994,
            "./admin/TTSVoicesTable": 37574,
            "./admin/TTSVoicesTable.jsx": 37574,
            "./admin/TTSVoicesTableRow": 64100,
            "./admin/TTSVoicesTableRow.jsx": 64100,
            "./admin/Words": 18157,
            "./admin/Words.jsx": 18157,
            "./admin/Words/Word": 28906,
            "./admin/Words/Word.jsx": 28906,
            "./mods/ClozeSentenceEditor": 94513,
            "./mods/ClozeSentenceEditor.jsx": 94513,
            "./mods/ClozeSentenceEntry": 36052,
            "./mods/ClozeSentenceEntry.jsx": 36052,
            "./mods/ClozeSentenceTts": 60011,
            "./mods/ClozeSentenceTts.jsx": 60011,
            "./mods/CollectionClozeSentenceChange": 21270,
            "./mods/CollectionClozeSentenceChange.jsx": 21270,
            "./mods/CollectionClozeSentenceChangesModal": 1988,
            "./mods/CollectionClozeSentenceChangesModal.jsx": 1988,
            "./mods/CollectionClozeSentenceEditor": 10065,
            "./mods/CollectionClozeSentenceEditor.jsx": 10065,
            "./mods/CollectionClozeSentenceTts": 83915,
            "./mods/CollectionClozeSentenceTts.jsx": 83915,
            "./mods/TokensEditor": 57297,
            "./mods/TokensEditor.jsx": 57297,
            "./mods/TokensEditorToken": 19622,
            "./mods/TokensEditorToken.jsx": 19622
        };
        function l(e) {
            var t = s(e);
            return n(t)
        }
        function s(e) {
            if (!n.o(a, e)) {
                var t = new Error("Cannot find module '" + e + "'");
                throw t.code = "MODULE_NOT_FOUND",
                t
            }
            return a[e]
        }
        l.keys = function() {
            return Object.keys(a)
        }
        ,
        l.resolve = s,
        e.exports = l,
        l.id = 86900
    },
    44173: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = (n(21663),
        n(28737))
          , s = n(40727);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    comments: e.comments,
                    commentText: "",
                    likes: e.likes,
                    liking: !1,
                    savingComment: !1
                }
            }
            componentDidMount() {
                $(this.container).tooltip({
                    selector: ".likes .count"
                })
            }
            renderPinContent() {
                const {isLeveledUp: e, languagePairing: t} = this.props;
                return t ? a.createElement("div", {
                    className: "flags"
                }, a.createElement(l.default, {
                    flagIso: t.targetLanguageFlagIso,
                    size: 48
                }), a.createElement(l.default, {
                    flagIso: t.baseLanguageFlagIso,
                    size: 24
                })) : e ? a.createElement("span", {
                    className: "glyphicon glyphicon-arrow-up user-leveled-up"
                }) : void 0
            }
            toggleLike() {
                this.setState({
                    liking: !0
                });
                const e = this.currentUserLike()
                  , t = !!e;
                $.ajax({
                    method: t ? "delete" : "post",
                    url: t ? e.url : this.props.likeUrl
                }).done((n => {
                    this.setState({
                        likes: t ? this.state.likes.filter((t => t.id !== e.id)) : n.activityLogLikes,
                        liking: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating. Please try again and let us know if you see this message again."),
                    this.setState({
                        liking: !1
                    })
                }
                ))
            }
            isLiked() {
                return !!this.currentUserLike()
            }
            currentUserLike() {
                const {likes: e} = this.state
                  , {currentUser: t} = this.props;
                return e.find((e => e.user.username === t.username))
            }
            renderLikes() {
                const {currentUser: e, isSignedIn: t, user: n} = this.props
                  , {likes: l, liking: s} = this.state;
                if (!t)
                    return null;
                const r = l.length ? {
                    "data-toggle": "tooltip",
                    "data-html": "true",
                    title: l.map((e => e.user.username)).join("<br />")
                } : {};
                return a.createElement("div", {
                    className: "likes"
                }, e.username !== n.username && a.createElement("button", {
                    className: "btn " + (this.isLiked() ? "btn-success active" : "btn-default"),
                    disabled: s,
                    onClick: () => this.toggleLike(),
                    style: {
                        marginRight: 10
                    }
                }, "G", this.isLiked() ? "a" : "i", "ve \ud83d\ude4c"), (e.username !== n.username || !!l.length) && a.createElement("small", Object.assign({
                    className: "count"
                }, r), l.length ? l.length + "x \ud83d\ude4c" : "Be the first!"))
            }
            onCommentSubmit(e) {
                if (e.preventDefault(),
                !this.state.commentText || this.state.savingComment)
                    return !1;
                this.setState({
                    savingComment: !0
                }),
                $.ajax({
                    data: {
                        text: this.state.commentText
                    },
                    method: "post",
                    url: this.props.commentUrl
                }).done((e => {
                    if (e.errors)
                        return alert(e.errors),
                        this.setState({
                            savingComment: !1
                        }),
                        !1;
                    this.setState({
                        commentText: "",
                        comments: e.activityLogComments,
                        savingComment: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error saving. Please try again and let us know if you see this message again."),
                    this.setState({
                        savingComment: !1
                    })
                }
                ))
            }
            deleteComment(e) {
                if (!confirm("Are you sure you want to delete this comment? This action cannot be undone."))
                    return !1;
                const t = this.state.comments.slice(0);
                this.setState({
                    comments: this.state.comments.filter((t => t.id !== e.id))
                }),
                $.ajax({
                    method: "delete",
                    url: e.url
                }).fail(( () => {
                    this.setState({
                        comments: t
                    }),
                    alert("Oh no! There was an error deleting the comment. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderComments() {
                return null
            }
            onDeleteClick() {
                if (!confirm("Are you sure? This activity log on your journey to fluency will be lost forever!"))
                    return !1;
                const {url: e} = this.props;
                this.setState({
                    deleted: !0
                }),
                $.ajax({
                    method: "delete",
                    url: e
                }).done(( () => {}
                )).fail(( () => {
                    this.setState({
                        deleted: !1
                    }),
                    alert("Oh no! There was an error deleting the activity log. Sorry about that. Please refresh the page and try again, and let us know if you see this message again.")
                }
                ))
            }
            renderDeleteBtn() {
                const {currentUser: e, isSignedIn: t, user: n} = this.props;
                if (t && e.username === n.username)
                    return a.createElement("button", {
                        className: "btn btn-link btn-sm delete",
                        onClick: () => this.onDeleteClick()
                    }, a.createElement(s.default, {
                        name: "trash"
                    }))
            }
            render() {
                const {createdAtAgo: e, currentUser: t, description: n, user: l} = this.props
                  , {deleted: s} = this.state;
                return s ? null : a.createElement("div", {
                    className: "activity-log",
                    ref: e => this.container = e
                }, a.createElement("div", {
                    className: "pin"
                }, this.renderPinContent()), a.createElement("div", {
                    className: "content"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("span", {
                    className: "username"
                }, a.createElement("a", {
                    href: l.url
                }, l.username)), a.createElement("small", {
                    style: {
                        marginLeft: 10
                    }
                }, e, " ago"), this.renderDeleteBtn()), a.createElement("div", {
                    className: "event"
                }, a.createElement("strong", null, n)), this.renderLikes(), this.renderComments()))
            }
        }
    },
    57955: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            const {ad: t, className: n} = e
              , {callToAction: l, clickUrl: s, copy: r, id: o, imageUrl: i, isCopyAd: c, removeAdsClickUrl: d, url: u} = t
              , m = e => !(!e.match("https://www.clozemaster.com") && !e.match(/^\//))
              , h = t => {
                f(t),
                e.onCopyLinkClick && e.onCopyLinkClick()
            }
              , g = t => {
                f(t),
                e.onCallToActionClick && e.onCallToActionClick()
            }
              , p = t => {
                f(t),
                e.onLinkClick && e.onLinkClick()
            }
              , b = e => {
                e.preventDefault();
                const n = e.currentTarget.getAttribute("href")
                  , a = () => window.location.href = n;
                $.ajax({
                    data: {
                        id: t.id
                    },
                    method: "post",
                    url: d
                }).done(a).fail(a),
                setTimeout(a, 300)
            }
              , f = e => {
                let n = null;
                const a = e.currentTarget.getAttribute("href");
                m(a) && (e.preventDefault(),
                n = () => window.location.href = a,
                setTimeout(n, 300)),
                $.ajax({
                    data: {
                        id: t.id
                    },
                    method: "post",
                    url: s
                }).done(n).fail(n)
            }
            ;
            let E = null;
            return E = c ? a.createElement("span", {
                className: "content",
                ref: e => {
                    $(e).off(".ad").on("click.ad", "a", h),
                    $(e).find("a").each(( (e, t) => {
                        m(t.getAttribute("href")) || $(t).prop("target", "_blank").prop("rel", "noopener")
                    }
                    ))
                }
            }, a.createElement("span", {
                className: "copy",
                dangerouslySetInnerHTML: {
                    __html: r
                }
            }), !!l && a.createElement("a", {
                className: "btn btn-success joystix",
                href: u,
                onClick: g
            }, l)) : a.createElement("a", Object.assign({
                href: u,
                onClick: p
            }, m(u) ? {} : {
                rel: "noopener",
                target: "_blank"
            }), a.createElement("img", {
                src: i,
                style: {
                    maxWidth: "100%"
                }
            })),
            a.createElement("p", {
                className: ["vert", n, c ? "copy-vert" : ""].join(" "),
                style: {
                    textAlign: "center"
                }
            }, E, a.createElement("small", {
                style: {
                    display: "block",
                    marginTop: 5
                }
            }, a.createElement("a", {
                href: "/pro",
                onClick: t => {
                    b(t),
                    e.onRemoveAdsClick && e.onRemoveAdsClick()
                }
            }, "\ud83d\ude80 Remove ads")))
        }
    },
    11259: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(68135)
          , s = n(96991)
          , r = n(98401)
          , o = n(40727)
          , i = n(24367);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collection: null,
                    copied: !1,
                    errors: null,
                    includeProgress: this.isNewSentence() ? null : window.localStorage && "true" === window.localStorage.getItem("add-sentence-include-progress"),
                    saving: !1,
                    sentenceEditorVisible: !1,
                    upsertUrl: null
                }
            }
            componentDidMount() {}
            isNewSentence() {
                return !this.props.collectionClozeSentence
            }
            reset() {
                this.collectionClozeSentenceEditor.reset()
            }
            renderCollectionClozeSentenceEditor() {
                return this.state.sentenceEditorVisible ? a.createElement(r.default, {
                    collectionClozeSentence: this.props.collectionClozeSentence,
                    createUrl: this.state.collection.collectionClozeSentencesUrl,
                    isPro: !0,
                    isTextEditable: !0,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    onUpdate: e => this.props.onSentenceAdded(e, this.state.collection),
                    ref: e => this.collectionClozeSentenceEditor = e
                }) : null
            }
            onCopySubmit(e) {
                e.preventDefault();
                const {collection: t, includeProgress: n} = this.state
                  , {collectionClozeSentence: a, onSentenceAdded: l} = this.props;
                this.setState({
                    errors: null,
                    saving: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        include_progress: n,
                        new_collection_id: t.id
                    }),
                    dataType: "json",
                    method: "post",
                    url: a.copyUrl
                }).done((e => {
                    if (e.errors)
                        return this.setState({
                            errors: e.errors,
                            saving: !1
                        }),
                        !1;
                    this.setState({
                        copied: !0
                    }),
                    l(a, t)
                }
                )).fail(( (e, t, n) => {
                    this.setState({
                        saving: !1
                    }),
                    alert(`Oh no! There was an error adding the sentence. ${t} ${n} Sorry about that. Please try again and let someone know if you see this message again.`)
                }
                ))
            }
            renderControls() {
                const {collectionClozeSentence: e, copyable: t} = this.props
                  , {collection: n, errors: s, includeProgress: r, saving: i, sentenceEditorVisible: c} = this.state;
                return t && !this.isNewSentence() && n ? a.createElement("form", {
                    disabled: i,
                    onSubmit: e => this.onCopySubmit(e)
                }, a.createElement("div", {
                    style: {
                        marginBottom: 15
                    }
                }, !c && !!s && a.createElement("p", {
                    className: "alert alert-danger"
                }, s), !c && a.createElement("div", {
                    style: {
                        display: "inline-block",
                        marginRight: 10
                    }
                }, a.createElement(l.default, {
                    checked: r,
                    disabled: i,
                    label: "Include progress",
                    name: "include_progress",
                    onChange: e => this.setState({
                        includeProgress: e.target.checked
                    }, ( () => {
                        window.localStorage && window.localStorage.setItem("add-sentence-include-progress", "" + this.state.includeProgress)
                    }
                    )),
                    style: {
                        margin: 0
                    }
                })), a.createElement("button", {
                    className: "btn btn-default",
                    disabled: i,
                    onClick: e => {
                        e.preventDefault(),
                        this.setState({
                            sentenceEditorVisible: !c
                        })
                    }
                }, "Edit ", a.createElement(o.default, {
                    name: "chevron-" + (c ? "up" : "down")
                }))), !c && a.createElement("button", {
                    autoFocus: !0,
                    className: "joystix btn btn-lg btn-success btn-block copy-save",
                    disabled: i,
                    ref: e => this.saveBtn = e
                }, "Save")) : null
            }
            renderToast() {
                if (this.state.copied)
                    return a.createElement(i.default, {
                        content: "Saved! \ud83c\udf89",
                        context: "success"
                    })
            }
            render() {
                const {copyable: e} = this.props
                  , {sentenceEditorVisible: t} = this.state;
                return a.createElement("div", null, a.createElement(s.default, {
                    collectionsUrl: this.props.collectionsUrl,
                    initialSelectedCollectionId: this.props.initialSelectedCollectionId,
                    onSelect: n => {
                        this.setState({
                            collection: n,
                            sentenceEditorVisible: !e || t,
                            upsertUrl: n.collectionClozeSentencesUpsertUrl
                        })
                    }
                }), this.renderControls(), this.state.sentenceEditorVisible && a.createElement("hr", null), this.renderCollectionClozeSentenceEditor(), this.renderToast())
            }
        }
    },
    65935: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(78780);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            hideModal() {
                this.addSentenceToCollectionModal.hide()
            }
            renderModal() {
                if (!this.state.modalVisible)
                    return null;
                const {collectionClozeSentence: e, collectionsUrl: t, copyable: n, isPro: s, nextReviewByLevel: r} = this.props;
                return a.createElement(l.default, {
                    collectionClozeSentence: e,
                    collectionsUrl: t,
                    copyable: n,
                    isPro: s,
                    nextReviewByLevel: r,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    onSentenceAdded: () => this.hideModal(),
                    ref: e => this.addSentenceToCollectionModal = e
                })
            }
            render() {
                const {className: e, style: t, text: n, title: l} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    className: e || "btn btn-success",
                    onClick: () => this.setState({
                        modalVisible: !0
                    }),
                    style: t,
                    title: l
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }), !1 === n ? "" : n || " Add to Collection"), this.renderModal())
            }
        }
    },
    78780: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(11259)
          , s = n(40897)
          , r = n(508)
          , o = n(61703);
        class i extends a.Component {
            hide() {
                this.modal.hide()
            }
            renderProPromo() {
                return a.createElement(o.default, {
                    can: "create and play their own custom collections of cloze-sentences.",
                    secondary: "Take control of your learning. Get fluent faster."
                })
            }
            reset() {
                this.addSentenceToCollection.reset(),
                $(".modal").animate({
                    scrollTop: 0
                })
            }
            renderContent() {
                return this.props.isPro ? a.createElement(l.default, {
                    collectionClozeSentence: this.props.collectionClozeSentence,
                    collectionsUrl: this.props.collectionsUrl,
                    copyable: this.props.copyable,
                    initialSelectedCollectionId: this.props.initialSelectedCollectionId,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    onSentenceAdded: this.props.onSentenceAdded,
                    ref: e => this.addSentenceToCollection = e
                }) : this.renderProPromo()
            }
            render() {
                const {collectionClozeSentence: e} = this.props;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, {
                        text: "Cancel"
                    }),
                    id: "add-sentence-to-collection-modal",
                    onHidden: this.props.onHidden,
                    onShown: () => {
                        const t = $("#add-sentence-to-collection-modal")
                          , n = t.find("[name='collection[name]']");
                        if (n.length)
                            return n.focus();
                        t.find(e ? ".copy-save" : "[name=text]").focus()
                    }
                    ,
                    ref: e => this.modal = e,
                    title: "Add Sentence to Collection"
                }, this.renderContent())
            }
        }
    },
    34527: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.preRef = a.createRef(),
                this.state = {
                    autoScroll: !0
                }
            }
            componentDidMount() {
                this.autoScroll()
            }
            componentDidUpdate(e, t) {
                e.children !== this.props.children && this.state.autoScroll && this.autoScroll()
            }
            autoScroll() {
                const e = this.preRef.current;
                $(e).scrollTop(e.scrollHeight || 1e4)
            }
            render() {
                const {children: e, style: t} = this.props
                  , {autoScroll: n} = this.state;
                return a.createElement(a.Fragment, null, a.createElement("pre", {
                    ref: this.preRef,
                    style: Object.assign({
                        height: 300,
                        marginBottom: 10,
                        overflow: "scroll",
                        textAlign: "left"
                    }, t)
                }, e), a.createElement("label", {
                    style: {
                        display: "block",
                        fontSize: 14,
                        textAlign: "left"
                    }
                }, a.createElement("input", {
                    type: "checkbox",
                    checked: n,
                    onChange: e => this.setState({
                        autoScroll: e.target.checked
                    })
                }), " Auto-scroll to bottom"))
            }
        }
    },
    97227: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    input: "",
                    messages: []
                }
            }
            componentDidMount() {}
            onSubmit(e) {
                e.preventDefault();
                const {input: t} = this.state;
                if (!t)
                    return !1;
                this.setState({
                    input: "",
                    messages: this.state.messages.concat([t])
                }),
                $.ajax({
                    data: {
                        input: t
                    },
                    method: "post",
                    url: this.props.url
                }).done((e => {
                    console.log(e),
                    this.setState({
                        messages: this.state.messages.concat([e.chatBotResponse])
                    })
                }
                )).fail(( () => {
                    alert("Failed!")
                }
                ))
            }
            renderMessage(e) {
                return "string" === typeof e || e instanceof String ? a.createElement(a.Fragment, null, a.createElement("strong", null, "Me:"), " ", e) : a.createElement(a.Fragment, null, a.createElement("strong", null, "\ud83e\udd16:"), " ", e.target_language_response, " ", a.createElement("small", null, a.createElement("em", null, "[", e.en_response, "]")))
            }
            render() {
                return a.createElement("div", null, a.createElement("ul", null, this.state.messages.map(( (e, t) => a.createElement("li", {
                    key: t
                }, a.createElement("p", null, this.renderMessage(e)))))), a.createElement("form", {
                    onSubmit: this.onSubmit.bind(this)
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("input", {
                    className: "form-control",
                    onChange: e => this.setState({
                        input: e.target.value.substring(0, 280)
                    }),
                    type: "text",
                    value: this.state.input
                }), a.createElement("small", null, "Max 280 characters")), a.createElement("button", {
                    className: "btn btn-success joystix"
                }, "Submit")))
            }
        }
    },
    68135: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            render() {
                const {checked: e, id: t, label: n, name: l, onChange: s, style: r, value: o} = this.props;
                return a.createElement("div", {
                    className: "checkbox",
                    style: r
                }, a.createElement("label", null, a.createElement("input", {
                    checked: !!e,
                    id: t,
                    name: l,
                    onChange: s,
                    type: "checkbox",
                    value: o
                }), n))
            }
        }
    },
    46177: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        function s(e) {
            const {onChange: t, text: n} = e
              , {preClozeStr: s, cloze: r, postClozeStr: o} = (0,
            l.UE)(n);
            return a.createElement("span", {
                onMouseUp: e => {
                    const a = window.getSelection().toString().replace(/^\s+|\s+$/g, "");
                    a && n.replace(/\{\{|\}\}/g, "").match(a) && t(n.replace(/\{\{|\}\}/g, "").replace(a, "{{" + a + "}}"))
                }
            }, s, a.createElement("b", null, a.createElement("u", null, r)), o)
        }
    },
    68462: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        class s extends a.Component {
            render() {
                const {preClozeStr: e, cloze: t, postClozeStr: n} = (0,
                l.UE)(this.props.text);
                return a.createElement("span", {
                    className: "cloze-sentence-component"
                }, e, a.createElement("strong", null, a.createElement("u", null, t)), n)
            }
        }
    },
    75922: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(49982)
          , s = n(86956)
          , r = n(55621)
          , o = n(94420);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    addToCollection: null,
                    bulkAddVisible: !1,
                    clozeSentences: null,
                    context: "text",
                    loading: !1,
                    page: 1,
                    perPage: 20,
                    query: e.query || "",
                    selected: new Map,
                    total: 0
                }
            }
            componentDidMount() {
                this.state.query && this.search(),
                setTimeout(this.focusQuery.bind(this), 500)
            }
            focusQuery() {
                $("#cloze-sentences-query").focus()
            }
            search() {
                this.setState({
                    loading: !0
                });
                const {context: e, page: t, perPage: n, query: a} = this.state;
                $.ajax({
                    data: {
                        context: e,
                        page: t,
                        per_page: n,
                        query: a
                    },
                    method: "get",
                    url: this.props.url
                }).done((e => {
                    this.setState({
                        clozeSentences: e.clozeSentences,
                        loading: !1,
                        selected: new Map,
                        total: e.total
                    }, this.focusQuery.bind(this))
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error searching sentences. Please try again and let us know if you see this error message again.")
                }
                ))
            }
            renderBulkAdd() {
                return !this.state.bulkAddVisible || this.props.addToCollectionDisabled ? null : a.createElement(l.default, {
                    clozeSentences: this.state.clozeSentences,
                    collectionsUrl: this.props.collectionsUrl,
                    onAdd: () => this.setState({
                        selected: new Map,
                        bulkAddVisible: !1
                    }),
                    onCancel: () => this.setState({
                        bulkAddVisible: !1
                    }),
                    selected: this.state.selected
                })
            }
            renderBulkControls() {
                const e = this.state.selected.size
                  , t = this.state.clozeSentences.length;
                return this.state.bulkAddVisible || this.props.addToCollectionDisabled ? null : a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-success btn-xs",
                    disabled: !e,
                    onClick: () => this.setState({
                        bulkAddVisible: !this.state.bulkAddVisible
                    }),
                    style: {
                        marginRight: 10
                    }
                }, "Add ", e, " Selected to Collection"), a.createElement("button", {
                    className: "btn btn-success btn-xs",
                    onClick: () => {
                        t === e ? this.setState({
                            selected: new Map
                        }) : this.setState({
                            selected: new Map(this.state.clozeSentences.map((e => [e.id, !0])))
                        })
                    }
                }, e === t ? "Uns" : "S", "elect All"))
            }
            renderResults() {
                return this.state.loading ? a.createElement("div", null, "Loading...") : this.state.clozeSentences ? a.createElement("div", null, a.createElement("hr", null), this.renderBulkControls(), this.renderBulkAdd(), this.state.clozeSentences.map((e => a.createElement(o.default, {
                    addToCollectionDisabled: this.props.addToCollectionDisabled,
                    collectionsUrl: this.props.collectionsUrl,
                    initialSelectedCollectionId: this.props.initialSelectedCollectionId,
                    key: e.text,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    onSelect: t => {
                        const n = new Map(this.state.selected);
                        t ? n.set(e.id, !0) : n.delete(e.id),
                        this.setState({
                            selected: n
                        })
                    }
                    ,
                    sentence: e,
                    selected: this.state.selected.has(e.id)
                })))) : null
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    page: 1
                }, ( () => this.search()))
            }
            renderPagination() {
                if (!this.state.clozeSentences || this.state.loading)
                    return null;
                const {page: e, perPage: t, total: n, updating: l} = this.state;
                return a.createElement(s.default, {
                    onNextClick: () => this.setState({
                        page: this.state.page + 1
                    }, ( () => this.search())),
                    onPrevClick: () => this.setState({
                        page: this.state.page - 1
                    }, ( () => this.search())),
                    page: e,
                    perPage: t,
                    total: n,
                    updating: l
                })
            }
            render() {
                const {context: e, loading: t, query: n} = this.state;
                return a.createElement("div", {
                    className: "cloze-sentence-search"
                }, a.createElement(r.default, {
                    context: e,
                    disabled: t,
                    onChange: e => this.setState({
                        [e.target.name]: e.target.value
                    }),
                    onSubmit: e => this.onSubmit(e),
                    query: n
                }), this.renderResults(), this.renderPagination())
            }
        }
    },
    49982: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(96991);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collection: null,
                    readyForReview: !0,
                    upsertUrl: null
                }
            }
            add() {
                $.ajax({
                    contentType: "application/json",
                    method: "post",
                    data: JSON.stringify({
                        updates: this.props.clozeSentences.filter((e => this.props.selected.has(e.id))).map((e => ({
                            alternative_answers: e.alternative_answers,
                            cloze_sentence_id: e.id,
                            hint: e.hint,
                            multiple_choice_options: e.multiple_choice_options,
                            next_review: this.state.readyForReview ? s()().format("YYYY-MM-DD") : null,
                            notes: e.notes,
                            pronunciation: e.pronunciation,
                            tatoeba_id: e.tatoeba_id,
                            text: e.text,
                            translation: e.translation
                        })))
                    }),
                    url: this.state.upsertUrl
                }).done(( () => {
                    this.props.onAdd()
                }
                )).fail(( () => {
                    alert("Oh no! There was an error adding the sentences, sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            cancel() {
                this.props.onCancel()
            }
            renderControls() {
                if (!this.state.upsertUrl)
                    return null;
                const e = this.props.selected.size;
                return a.createElement("div", null, a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    type: "checkbox",
                    name: "ready_for_review",
                    checked: this.state.readyForReview,
                    onChange: e => this.setState({
                        readyForReview: e.target.checked
                    })
                }), " Set to Ready for Review")), a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-success",
                    onClick: () => this.add(),
                    style: {
                        marginRight: 10
                    }
                }, "Add ", e, " Selected Sentences"), a.createElement("button", {
                    className: "btn btn-link",
                    onClick: () => this.cancel()
                }, "Cancel")))
            }
            render() {
                return a.createElement("div", null, a.createElement(r.default, {
                    collectionsUrl: this.props.collectionsUrl,
                    initialSelectedCollectionId: this.props.initialSelectedCollectionId,
                    onSelect: e => this.setState({
                        collection: e,
                        upsertUrl: e.collectionClozeSentencesUpsertUrl
                    })
                }), this.renderControls(), a.createElement("hr", null))
            }
        }
    },
    55621: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            const {children: t, context: n, disabled: l, query: s, onChange: r, onSubmit: o} = e;
            return a.createElement("form", {
                onSubmit: o
            }, a.createElement("div", {
                className: "row"
            }, a.createElement("div", {
                className: "col-xs-8"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentences-query"
            }, "Query"), a.createElement("input", {
                className: "form-control",
                disabled: l,
                id: "cloze-sentences-query",
                name: "query",
                onChange: r,
                type: "text",
                value: s
            }))), a.createElement("div", {
                className: "col-xs-4"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentence-search-context"
            }, "Context"), a.createElement("select", {
                className: "form-control",
                disabled: l,
                id: "cloze-sentence-search-context",
                name: "context",
                onChange: r,
                value: n
            }, a.createElement("option", {
                value: "cloze"
            }, "Cloze"), a.createElement("option", {
                value: "text"
            }, "Text"), a.createElement("option", {
                value: "translation"
            }, "Translation"))))), t, a.createElement("button", {
                disabled: l,
                type: "submit",
                className: "btn btn-success btn-sm btn-block joystix"
            }, "Search"))
        }
    },
    94420: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(78780)
          , s = n(40727)
          , r = n(94870);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    addToCollection: !1,
                    collections: null,
                    loadingCollections: !1
                }
            }
            componentDidUpdate(e, t) {}
            loadCollections() {
                this.setState({
                    loadingCollections: !0
                }),
                $.ajax({
                    url: this.props.sentence.collectionsUrl
                }).done((e => {
                    this.setState({
                        collections: e.clozeSentence.collections,
                        languagePairing: e.languagePairing,
                        loadingCollections: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the collections. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        loadingCollections: !1
                    })
                }
                ))
            }
            renderTatoebaBtn() {
                const {tatoebaId: e} = this.props.sentence;
                if (e)
                    return a.createElement("a", {
                        className: "btn btn-xs btn-default",
                        href: "https://tatoeba.org/eng/sentences/show/" + e,
                        style: {
                            marginRight: 5
                        },
                        target: "_blank"
                    }, "Source ", a.createElement(s.default, {
                        name: "new-window"
                    }))
            }
            renderAudioBtn() {
                const {ttsAudioUrl: e} = this.props.sentence;
                if (e)
                    return a.createElement("span", null, a.createElement("button", {
                        className: "btn btn-xs btn-default",
                        onClick: () => this.audio.play(),
                        style: {
                            marginRight: 5
                        }
                    }, a.createElement(s.default, {
                        name: "volume-up"
                    })), a.createElement("audio", {
                        ref: e => this.audio = e,
                        src: e
                    }))
            }
            renderSentence() {
                const {addToCollectionDisabled: e, sentence: t} = this.props
                  , {pronunciation: n, text: l, translation: s} = t
                  , r = l.split("{{");
                return a.createElement("div", {
                    className: "cloze-sentence",
                    style: e ? {
                        paddingLeft: 0
                    } : null
                }, !e && a.createElement(a.Fragment, null, a.createElement("input", {
                    type: "checkbox",
                    checked: this.props.selected,
                    onChange: e => this.props.onSelect(e.target.checked),
                    style: {
                        left: 0,
                        position: "absolute"
                    }
                }), a.createElement("div", {
                    className: "pull-right"
                }, a.createElement("button", {
                    disabled: this.props.disabled,
                    className: "btn btn-xs btn-success add-to-collection",
                    style: {
                        marginLeft: 4
                    },
                    onClick: () => this.setState({
                        addToCollection: !this.state.addToCollection
                    })
                }, "Add to Collection"))), a.createElement("div", {
                    className: "text",
                    style: {
                        fontSize: "2rem"
                    }
                }, a.createElement("span", null, r[0], a.createElement("strong", null, a.createElement("u", null, r[1].split("}}")[0])), r[1].split("}}")[1])), a.createElement("div", null, a.createElement("small", null, s)), n && a.createElement("div", null, a.createElement("small", null, n)), a.createElement("div", null, this.renderAudioBtn(), this.renderTatoebaBtn(), this.renderCollections()))
            }
            renderCollections() {
                return this.state.loadingCollections ? a.createElement("small", null, "Loading...") : this.state.collections ? this.state.collections.length ? a.createElement("small", null, "Collections:", this.state.collections.map((e => a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    key: e.name,
                    onClick: () => this.setState({
                        managingCollection: e
                    }),
                    style: {
                        marginLeft: 5
                    }
                }, e.name)))) : a.createElement("small", null, "Not found in any collections!") : a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    onClick: () => this.loadCollections()
                }, "Collections")
            }
            renderAddToCollection() {
                if (!this.state.addToCollection)
                    return null;
                const e = Object.assign({}, this.props.sentence);
                return delete e.id,
                e.clozeSentenceId = this.props.sentence.id,
                a.createElement(l.default, {
                    collectionClozeSentence: e,
                    collectionsUrl: this.props.collectionsUrl,
                    initialSelectedCollectionId: this.props.initialSelectedCollectionId,
                    isPro: !0,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    onHidden: () => this.setState({
                        addToCollection: !1
                    }),
                    onSentenceAdded: () => {
                        this.addSentenceToCollectionModal.hide(),
                        this.state.collections && this.loadCollections()
                    }
                    ,
                    ref: e => this.addSentenceToCollectionModal = e
                })
            }
            renderManageCollectionModal() {
                const {languagePairing: e, managingCollection: t} = this.state
                  , {sentence: n} = this.props
                  , {text: l} = n;
                if (t)
                    return a.createElement(r.default, Object.assign({}, e, {
                        collectionClozeSentencesUrl: t.collectionClozeSentencesUrl,
                        isPro: !0,
                        onHidden: ({hasCopiedSentences: e, hasDeletedSentences: t}) => {
                            this.setState({
                                managingCollection: null
                            }, ( () => {
                                (e || t) && this.loadCollections()
                            }
                            ))
                        }
                        ,
                        onUpdate: e => {
                            console.log("updatedCollectionClozeSentences", e)
                        }
                        ,
                        query: l.replace(/{{|}}/g, "")
                    }))
            }
            render() {
                return a.createElement("div", {
                    className: "cloze-sentence-search-result",
                    ref: e => this.el = e,
                    style: {
                        opacity: this.props.disabled ? .3 : 1
                    }
                }, this.renderSentence(), this.renderAddToCollection(), this.renderManageCollectionModal())
            }
        }
    },
    80931: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(75922)
          , s = n(40897)
          , r = n(508)
          , o = n(61703);
        class i extends a.Component {
            renderProPromo() {
                return a.createElement(o.default, {
                    can: "search all the sentences available on Clozemaster and create their own collections.",
                    secondary: "Take control of your learning. Get fluent faster."
                })
            }
            renderContent() {
                return this.props.isPro ? a.createElement(l.default, {
                    addToCollectionDisabled: this.props.addToCollectionDisabled,
                    collectionsUrl: this.props.collectionsUrl,
                    initialSelectedCollectionId: this.props.initialSelectedCollectionId,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    query: this.props.query,
                    url: this.props.url
                }) : this.renderProPromo()
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: this.props.onHidden,
                    size: "large",
                    title: "Sentence Search"
                }, this.renderContent())
            }
        }
    },
    49021: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(78780);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            componentDidMount() {
                $("body").on("click", "#translation-popover .add-to-collection.btn", (e => {
                    e.preventDefault();
                    const t = $(".sentence.popovered")
                      , n = t.data("text")
                      , a = $("#translation-popover").find(".selection").text()
                      , l = n.split(a, 2);
                    t.popover("destroy").removeClass("highlight"),
                    this.setState({
                        collectionClozeSentence: {
                            text: l[0] + "{{" + a + "}}" + l[1]
                        },
                        modalVisible: !0
                    })
                }
                )).on("click", ".sentence .add-to-collection", (e => {
                    const t = $(e.currentTarget).data("cloze-sentence");
                    this.setState({
                        collectionClozeSentence: {
                            text: t.preClozeStr + "{{" + t.cloze + "}}" + t.postClozeStr
                        },
                        modalVisible: !0
                    })
                }
                ))
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(l.default, {
                    collectionClozeSentence: this.state.collectionClozeSentence,
                    collectionsUrl: this.props.collectionsUrl,
                    isPro: this.props.isPro,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    onHidden: () => this.setState({
                        modalVisible: !1,
                        collectionClozeSentence: null
                    }),
                    onSentenceAdded: () => this.addSentenceToCollectionModal.hide(),
                    ref: e => this.addSentenceToCollectionModal = e
                }) : null
            }
            render() {
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    className: "btn btn-success btn-block btn-sm joystix",
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }), " Add to Collection"), this.renderModal())
            }
        }
    },
    36142: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(80931);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            componentDidMount() {
                $("body").on("click", "#translation-popover .sentence-search.btn", (e => {
                    e.preventDefault();
                    const t = $(".sentence.popovered")
                      , n = $("#translation-popover").find(".selection").text();
                    t.popover("destroy").removeClass("highlight"),
                    this.setState({
                        query: n,
                        modalVisible: !0
                    })
                }
                ))
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(l.default, {
                    collectionsUrl: this.props.collectionsUrl,
                    isPro: this.props.isPro,
                    onHidden: () => this.setState({
                        modalVisible: !1,
                        query: null
                    }),
                    query: this.state.query,
                    url: this.props.clozeSentencesUrl
                }) : null
            }
            render() {
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    className: "btn btn-success btn-block btn-sm joystix",
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-search"
                }), " Sentence Search"), this.renderModal())
            }
        }
    },
    98401: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(95093)
          , r = n.n(s)
          , o = n(24367);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = Object.assign(this.getSentenceState(e.collectionClozeSentence), {
                    saving: !1
                })
            }
            isRTL() {
                return this.state.text ? (0,
                l.V8)(this.state.text) : this.props.text ? (0,
                l.V8)(this.props.text) : void 0
            }
            isDisabled() {
                return this.state.saving || this.props.disabled
            }
            reset() {
                this.setState(Object.assign(this.state, this.getSentenceState()), ( () => this.textInput.focus()))
            }
            getSentenceState(e) {
                e = e || {};
                const t = {};
                return ["alternativeAnswers", "favorited", "hint", "ignored", "level", "nextReview", "notes", "pronunciation", "text", "translation"].forEach((n => t[n] = "level" === n ? ("" + e[n]).match(/[0-4]/) ? parseInt(e[n]) : 0 : "alternativeAnswers" === n ? (e[n] || []).join(",") : e[n] || "")),
                t
            }
            handleChange(e) {
                const t = {};
                t[e.target.name] = e.target.value,
                this.setState(t)
            }
            onLevelBtnClick(e, t) {
                e.preventDefault();
                const {nextReviewByLevel: n} = this.props
                  , {nextReview: a} = this.state;
                if (this.state.level === t && a)
                    return this.setState({
                        level: 0,
                        nextReview: null
                    }),
                    !0;
                this.setState({
                    level: t,
                    nextReview: r()().add(n[t], "days").format("YYYY-MM-DD")
                })
            }
            getUpdate() {
                const {alternativeAnswers: e, favorited: t, hint: n, ignored: a, level: l, nextReview: s, notes: r, pronunciation: o, text: i, translation: c} = this.state
                  , {clozeSentenceId: d, id: u, tatoebaId: m} = this.props.collectionClozeSentence || {}
                  , h = {
                    alternative_answers: e,
                    cloze_sentence_id: d,
                    favorited: t,
                    hint: n,
                    id: u,
                    ignored: a,
                    level: l,
                    next_review: s,
                    notes: r,
                    pronunciation: o,
                    tatoeba_id: m,
                    text: i,
                    translation: c
                };
                return 0 === l && (h.next_review = s),
                h
            }
            onSubmit(e) {
                e.preventDefault();
                const t = this.getUpdate();
                if (this.setState({
                    errors: null,
                    saving: !0
                }),
                this.props.createUrl)
                    this.sendUpdate(t, this.props.createUrl);
                else if (this.props.upsertUrl)
                    this.sendUpsert(t);
                else {
                    if (!this.props.updateUrl)
                        throw new Error("No url provided!");
                    this.sendUpdate(t, this.props.updateUrl)
                }
            }
            sendUpdate(e, t) {
                $.ajax({
                    contentType: "application/json",
                    method: "post",
                    data: JSON.stringify({
                        collection_cloze_sentence: e
                    }),
                    url: t
                }).done((e => {
                    e.errors ? this.onUpdateErrors(e.errors) : this.onUpdateSuccess(e.collectionClozeSentence)
                }
                )).fail(( () => {
                    this.onUpdateFail()
                }
                ))
            }
            sendUpsert(e) {
                $.ajax({
                    contentType: "application/json",
                    method: "post",
                    data: JSON.stringify({
                        updates: [e]
                    }),
                    url: this.props.upsertUrl
                }).then((e => e.errors ? (this.onUpdateErrors(e.errors),
                null) : $.ajax({
                    method: "post",
                    data: {
                        ids: e.ids
                    },
                    url: e.collectionClozeSentencesBatchUrl
                }))).done((e => {
                    e && this.onUpdateSuccess(e.collectionClozeSentences[0])
                }
                )).fail(( () => {
                    this.onUpdateFail()
                }
                ))
            }
            onUpdateSuccess(e) {
                this.setState(Object.assign({}, this.getSentenceState(e), {
                    savedAt: (new Date).getTime(),
                    saving: !1
                }), ( () => {
                    this.props.onUpdate && this.props.onUpdate(e)
                }
                ))
            }
            onUpdateErrors(e) {
                this.setState({
                    errors: e,
                    saving: !1
                }, ( () => $("html, body, .modal").animate({
                    scrollTop: 0
                })))
            }
            onUpdateFail() {
                alert("Oh no! There was an error saving the sentence. Sorry about that. Please try again and let us know if you see this message again."),
                this.setState({
                    saving: !1
                })
            }
            renderTextFormGroup() {
                const {saving: e, text: t} = this.state
                  , {isTextEditable: n} = this.props;
                return n ? a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "text"
                }, "Text"), a.createElement("input", {
                    autoFocus: !0,
                    disabled: this.isDisabled(),
                    className: "form-control " + (this.isRTL() ? "rtl" : ""),
                    name: "text",
                    ref: e => this.textInput = e,
                    value: t,
                    onChange: e => this.handleChange(e)
                }), a.createElement("small", null, "Wrap the cloze-word in ", a.createElement("code", null, "{{"), a.createElement("code", null, "}}"), ", for example ", a.createElement("code", null, "A ", "{{", "missing", "}}", " word."), ".")) : null
            }
            renderPercentMastered() {
                const {level: e, nextReview: t, saving: n} = this.state
                  , {isPro: l, sentenceOnly: s} = this.props;
                return !t || s ? null : a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", null, "Percent mastered"), a.createElement("div", {
                    className: "btn-group btn-group-justified percent-mastered",
                    role: "group",
                    "aria-label": "Percent mastered"
                }, [0, 1, 2, 3, 4].map((n => a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    key: n
                }, a.createElement("button", {
                    disabled: !l || this.isDisabled(),
                    type: "button",
                    className: "joystix btn btn-" + (t && e === n ? "success active" : "default"),
                    onClick: e => this.onLevelBtnClick(e, n)
                }, 25 * n, "%"))))), !l && a.createElement("small", null, "Change percent mastered with ", a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), "!"), this.renderNextReview())
            }
            renderNextReview() {
                const {level: e, nextReview: t} = this.state
                  , {alreadyMasteredNextReview: n, answerQualityOptionsVisible: l, collectionClozeSentence: s, isPro: o, nextReviewByLevel: i} = this.props;
                if (l && n && 4 === e) {
                    const e = s.easinessFactor || 1.5
                      , t = s.repetitionInterval || i[4]
                      , l = [1, 4, 7];
                    return a.createElement("div", null, "Next review:", a.createElement("ul", null, ["Hard", "Normal", "Easy"].map(( (s, o) => {
                        let c = "srs" === n ? Math.ceil(t * Math.max(e + (.1 - (5 - l[o]) * (.08 + .02 * (5 - l[o]))), 1.2)) : (0 === o ? .5 : o) * i[4];
                        return a.createElement("li", {
                            key: s
                        }, r()().add(c, "days").format("YYYY-MM-DD"), " if ", s, " is selected")
                    }
                    ))))
                }
                return a.createElement("div", {
                    style: {
                        display: "flex",
                        flexDirection: "row",
                        justifyContent: "space-between"
                    }
                }, a.createElement("div", null, "Next review: ", t < r()().format("YYYY-MM-DD") ? "Now!" : t), a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    disabled: !o || this.isDisabled(),
                    onClick: e => {
                        e.preventDefault(),
                        this.setState({
                            level: 0,
                            nextReview: null
                        })
                    }
                    ,
                    style: {
                        marginTop: 2
                    },
                    type: "button"
                }, "Remove from Reviews"))
            }
            renderAddToReviewQueue() {
                const {nextReview: e} = this.state;
                return this.props.sentenceOnly || e ? null : a.createElement("div", {
                    className: "form-group"
                }, a.createElement("button", {
                    className: "btn btn-sm btn-success btn-block joystix",
                    onClick: () => this.setState({
                        level: 0,
                        nextReview: r()().format("YYYY-MM-DD")
                    }),
                    type: "button"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }), " Add to Reviews"))
            }
            renderFavoritedIgnored() {
                const {isPro: e, sentenceOnly: t} = this.props
                  , {saving: n} = this.state;
                return t ? null : a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12 col-sm-6 text-center"
                }, a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: this.state.favorited,
                    disabled: !e || this.isDisabled(),
                    name: "favorited",
                    onChange: e => this.setState({
                        favorited: e.target.checked
                    }),
                    type: "checkbox"
                }), " Favorited"))), a.createElement("div", {
                    className: "col-xs-12 col-sm-6 text-center"
                }, a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: this.state.ignored,
                    disabled: this.isDisabled(),
                    name: "ignored",
                    onChange: e => this.setState({
                        ignored: e.target.checked
                    }),
                    type: "checkbox"
                }), " Ignored"))))
            }
            renderToast() {
                return this.state.savedAt ? a.createElement(o.default, {
                    content: "Saved! \ud83c\udf89",
                    context: "success",
                    key: this.state.savedAt
                }) : null
            }
            onTextMouseUp(e) {
                if (!this.props.isTextEditable)
                    return null;
                const t = window.getSelection().toString();
                t && this.state.text.replace(/\{\{|\}\}/g, "").match(t) && this.setState({
                    text: this.state.text.replace(/\{\{|\}\}/g, "").replace(t, "{{" + t + "}}")
                })
            }
            render() {
                const {alternativeAnswers: e, errors: t, hint: n, level: l, nextReview: s, notes: r, pronunciation: o, saving: i, text: c, translation: d} = this.state
                  , {isPro: u, isTextEditable: m} = this.props;
                let h = c.split("{{");
                const g = h[0];
                h = (h[1] || "").split("}}");
                const p = h[0]
                  , b = h[1];
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, t && a.createElement("p", {
                    className: "alert alert-danger"
                }, t), a.createElement("p", {
                    className: this.isRTL() && "rtl",
                    onMouseUp: e => this.onTextMouseUp(e),
                    style: {
                        fontSize: "1.5em"
                    }
                }, g, a.createElement("b", null, a.createElement("u", null, p)), b), this.renderTextFormGroup(), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "translation"
                }, "Translation"), a.createElement("input", {
                    autoFocus: !m,
                    disabled: !u || this.isDisabled(),
                    className: "form-control",
                    name: "translation",
                    value: d,
                    onChange: e => this.handleChange(e)
                }), !u && a.createElement("small", null, "Edit translations with ", a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), "!")), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "pronunciation"
                }, "Pronunciation"), a.createElement("input", {
                    disabled: !u || this.isDisabled(),
                    className: "form-control",
                    name: "pronunciation",
                    value: o,
                    onChange: e => this.handleChange(e)
                }), !u && a.createElement("small", null, "Edit pronunciations with ", a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), "!")), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "notes"
                }, "Notes ", a.createElement("em", {
                    style: {
                        fontWeight: "normal"
                    }
                }, "(shown after answering)")), a.createElement("input", {
                    disabled: !u || this.isDisabled(),
                    className: "form-control",
                    name: "notes",
                    value: r,
                    onChange: e => this.handleChange(e)
                }), !u && a.createElement("small", null, "Save notes with ", a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), "!")), this.renderAddToReviewQueue(), this.renderPercentMastered(), this.renderFavoritedIgnored(), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "hint"
                }, "Hint ", a.createElement("em", {
                    style: {
                        fontWeight: "normal"
                    }
                }, "(shown before answering)")), a.createElement("input", {
                    disabled: !u || this.isDisabled(),
                    className: "form-control",
                    name: "hint",
                    value: n,
                    onChange: e => this.handleChange(e)
                }), !u && a.createElement("small", null, "Save hints with ", a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), "!")), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "alternativeAnswers"
                }, "Alternative answers (comma-separated list)"), a.createElement("input", {
                    disabled: this.isDisabled(),
                    className: "form-control",
                    name: "alternativeAnswers",
                    value: e,
                    onChange: e => this.handleChange(e)
                })), a.createElement("button", {
                    disabled: this.isDisabled(),
                    className: "joystix btn btn-lg btn-success btn-block"
                }, "Save"), this.renderToast())
            }
        }
    },
    84842: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(98401)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !1
                }
            }
            hide() {
                this.modal.hide()
            }
            onDeleteClick() {
                confirm("Are you sure? This action cannot be undone and will affect *everyone* playing this collection!") && confirm("Just double checking - you're positive you want to delete this sentence?") && this.deleteSentence()
            }
            deleteSentence() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    method: "delete",
                    url: this.props.deleteUrl
                }).done(( () => {
                    this.modal.hide({
                        onHidden: () => this.props.onDelete && this.props.onDelete(this.props.sentence)
                    })
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error deleting the sentence. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderFooter() {
                return this.props.deleteUrl ? a.createElement("div", {
                    style: {
                        display: "flex",
                        justifyContent: "space-between"
                    }
                }, a.createElement("button", {
                    className: "btn btn-danger",
                    onClick: () => this.onDeleteClick()
                }, "Delete"), a.createElement(r.default, {
                    text: "Cancel"
                })) : a.createElement(r.default, {
                    text: "Cancel"
                })
            }
            render() {
                const {isTextEditable: e} = this.props;
                return a.createElement(s.default, {
                    footer: this.renderFooter(),
                    id: "sentence-editor-modal",
                    onHidden: this.props.onHidden,
                    onShown: () => {
                        const t = $("#sentence-editor-modal")
                          , n = t.find("[name='collection[name]']");
                        if (n.length)
                            return n.focus();
                        t.find(`[name=${e ? "text" : "translation"}]`).focus()
                    }
                    ,
                    ref: e => this.modal = e,
                    title: "Edit Sentence"
                }, a.createElement(l.default, {
                    alreadyMasteredNextReview: this.props.alreadyMasteredNextReview,
                    answerQualityOptionsVisible: this.props.answerQualityOptionsVisible,
                    collectionClozeSentence: this.props.sentence,
                    disabled: this.state.loading,
                    isPro: this.props.isPro,
                    isTextEditable: e,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    onUpdate: e => {
                        this.modal.hide({
                            onHidden: () => this.props.onUpdate && this.props.onUpdate(e)
                        })
                    }
                    ,
                    sentenceOnly: this.props.sentenceOnly,
                    updateUrl: this.props.updateUrl,
                    upsertUrl: this.props.upsertUrl
                }))
            }
        }
    },
    7481: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(29419);
        function s({collectionClozeSentence: e, isPro: t, onExplanation: n, test: s}) {
            const [r,o] = a.useState(null)
              , [i,c] = a.useState(null)
              , [d,u] = a.useState(null)
              , [m,h] = a.useState(!1)
              , [g,p] = a.useState(null)
              , [b,f] = a.useState(null)
              , [E,y] = a.useState(!1)
              , [S,v] = a.useState(null);
            a.useEffect(( () => {
                e.explanation ? u(e.explanation) : e.explanationJobUrl ? (h(!0),
                C()) : c("No explanation available! Sorry about that. Please check back later.")
            }
            ), []);
            const C = () => {
                $.ajax({
                    url: e.explanationJobUrl
                }).done(x).fail(( () => {
                    c("There was an error getting the explanation - sorry about that! Please close this modal and try again, and let us know if you see this message again."),
                    console.log("FAILED! getExplanation")
                }
                ))
            }
            ;
            let w = null;
            const x = ({hasPayForExplanationsResponse: e, payForExplanationsResponsesUrl: t, tracker: a, user: l}) => {
                console.log(a, l);
                const {explanation: r, status: i} = a
                  , {countExplanationsThisMonth: d, maxExplanationsPerMonth: m, monthResetsInDays: g} = l;
                return o(d),
                u(r),
                p(m),
                f(g),
                y(e),
                v(t),
                r || i && "pending" !== i || !(d < m - 5) ? (!r && i && "pending" !== i && "failed" !== i || h(!1),
                "complete" === i ? (n(r),
                clearTimeout(w),
                !0) : "failed" === i ? (c("There was an error generating the explanation - sorry about that! Please close this modal and try again, and let us know if you see this message again."),
                console.log("FAILED! handleExplanationResponse"),
                clearTimeout(w),
                !1) : void ("queued" !== i && "working" !== i || (w = setTimeout(( () => C()), s ? 100 : 1e3)))) : (k(),
                !0)
            }
              , k = () => {
                h(!0),
                $.ajax({
                    method: "post",
                    url: e.explanationJobUrl
                }).done(x).fail(( () => {
                    c("There was an error starting the explanation generation - sorry about that! Please close this modal and try again, and let us know if you see this message again."),
                    console.log("FAILED! generateExplanation")
                }
                ))
            }
            ;
            return i ? a.createElement("div", {
                className: "alert alert-danger"
            }, i) : d ? a.createElement(l.default, null, d) : m ? a.createElement("p", null, "Loading...") : a.createElement("div", null, a.createElement("p", null, "Some sentences have an explanation from ChatGPT by default. Explanations for the rest are generated in real-time when you click Explain. There's currently a ", a.createElement("strong", null, "limit of ", g, " per month"), " to help prevent abuse as this is still a new feature. You currently have ", a.createElement("strong", null, Math.max(g - r, 0), " remaining"), ". Month resets in ", b, " days. Need more? ", a.createElement("a", {
                href: "/contact",
                target: "_blank"
            }, "Let us know.")), a.createElement("p", null, a.createElement("button", {
                className: "btn btn-default",
                disabled: r >= g,
                onClick: k
            }, "Generate")))
        }
    },
    96991: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(73294);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    showNewCollectionForm: !1
                }
            }
            componentDidMount() {
                this.loadCollections()
            }
            componentDidUpdate(e, t) {
                const {onSelect: n} = this.props
                  , {collections: a, selectedId: l} = this.state;
                l && l !== t.selectedId && n && n(a.find((e => e.id === l)))
            }
            loadCollections() {
                const {collectionsUrl: e} = this.props;
                $.ajax({
                    data: {
                        filter: "mine",
                        order: "updatedAt"
                    },
                    method: "get",
                    url: e
                }).done((t => {
                    const {initialSelectedCollectionId: n} = this.props
                      , {collections: a} = t;
                    let {selectedId: l} = this.state;
                    !l && n && a.filter((e => e.id === n)).length ? l = n : l && a.filter((e => e.id === l)).length || (l = a[0] && a[0].id),
                    this.setState({
                        collections: a,
                        createCollectionUrl: e,
                        loading: !1,
                        selectedId: l
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading collections. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderNewCollectionForm({cancelable: e}) {
                return a.createElement(l.default, {
                    cancelable: e,
                    createUrl: this.state.createCollectionUrl,
                    onCancel: () => this.setState({
                        showNewCollectionForm: !1
                    }),
                    onCreate: e => {
                        this.setState({
                            collections: JSON.parse(JSON.stringify(this.state.collections)).concat([e]),
                            selectedId: e.id,
                            showNewCollectionForm: !1
                        })
                    }
                })
            }
            renderSelectControl() {
                const {collections: e, selectedId: t} = this.state;
                return a.createElement(a.Fragment, null, a.createElement("label", {
                    htmlFor: "collection_id"
                }, "Collection"), a.createElement("select", {
                    className: "form-control",
                    name: "collection_id",
                    value: t,
                    onChange: e => this.setState({
                        selectedId: parseInt(e.target.value)
                    })
                }, e.map(( (e, t) => a.createElement("option", {
                    key: e.id,
                    value: e.id
                }, e.name)))))
            }
            render() {
                const {collections: e, loading: t, selectedId: n, showNewCollectionForm: l} = this.state;
                return t ? a.createElement("div", null, "Loading...") : e.length ? l ? this.renderNewCollectionForm({
                    cancelable: !0
                }) : a.createElement("div", null, this.renderSelectControl(), a.createElement("div", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-link",
                    onClick: e => {
                        e.preventDefault(),
                        this.setState({
                            showNewCollectionForm: !l
                        })
                    }
                }, "New Collection"))) : this.renderNewCollectionForm({
                    cancelable: !1
                })
            }
        }
    },
    90204: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(69204);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.inputRef = a.createRef(),
                this.state = {
                    answered: !1,
                    correct: !1,
                    correctSoFar: !1,
                    currentAnswer: "",
                    currentIndex: null,
                    history: [],
                    historyVisible: !1,
                    loading: !0
                }
            }
            componentDidMount() {
                this.loadVerbs()
            }
            init() {
                this.focusInput(),
                $(window).on("keydown", (e => {
                    const {answered: t} = this.state;
                    13 === e.which && (e.preventDefault(),
                    e.stopPropagation(),
                    t ? this.next() : this.setState({
                        answered: !0
                    }))
                }
                ))
            }
            loadVerbs() {
                const {verbs: e, verbsUrl: t} = this.props;
                console.log(e.map((e => e.id))),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        ids: e.map((e => e.id))
                    }),
                    method: "post",
                    url: t
                }).done((e => {
                    this.setCandidates(e.inflectionEntries),
                    this.setState({
                        currentIndex: this.getRandomIndex(),
                        loading: !1
                    }, ( () => this.init()))
                }
                )).fail(( () => {}
                ))
            }
            setCandidates(e) {
                const {checked: t} = this.props;
                this.candidates = [],
                e.forEach((e => {
                    e.data.tables.forEach(( (n, a) => {
                        n.columns.forEach(( (l, s) => {
                            l.forEach(( (l, r) => 0 !== s && 0 !== r && (!!t[a][s][r] && void this.candidates.push([e.term, e.translation, n.heading, n.columns[s][0], n.columns[0][r], l]))))
                        }
                        ))
                    }
                    ))
                }
                ))
            }
            focusInput() {
                this.inputRef && this.inputRef.current && this.inputRef.current.focus()
            }
            getRandomIndex() {
                return Math.floor(Math.random() * this.candidates.length)
            }
            next() {
                const {correct: e, currentIndex: t, history: n} = this.state;
                this.setState({
                    answered: !1,
                    correct: !1,
                    correctSoFar: !1,
                    currentAnswer: "",
                    currentIndex: this.getRandomIndex(),
                    history: n.concat([this.candidates[t].concat([e])])
                }, ( () => this.focusInput()))
            }
            renderInput() {
                const {answered: e, correct: t, correctSoFar: n, currentAnswer: l, currentIndex: s} = this.state
                  , r = this.candidates[s];
                return a.createElement("input", {
                    autoFocus: !0,
                    className: "form-control input-lg",
                    disabled: e,
                    onChange: e => this.setState({
                        answered: e.target.value === r[5],
                        correct: e.target.value === r[5],
                        correctSoFar: 0 === r[5].toLowerCase().indexOf(e.target.value.toLowerCase()),
                        currentAnswer: e.target.value
                    }),
                    onKeyDown: t => {
                        console.log(t),
                        13 === t.which && (t.preventDefault(),
                        t.stopPropagation(),
                        e ? this.next() : this.setState({
                            answered: !0
                        }))
                    }
                    ,
                    ref: this.inputRef,
                    style: {
                        backgroundColor: e ? t ? "#dff0d8" : "#f2dede" : null,
                        color: e || !l ? null : n ? "#3fb618" : "#e00",
                        fontWeight: "bold"
                    },
                    type: "text",
                    value: l
                })
            }
            hint() {
                const {correctSoFar: e, currentAnswer: t, currentIndex: n} = this.state
                  , a = this.candidates[n];
                let l = "";
                for (let s = 0; s < a[5].length && (l += a[5][s],
                (t[s] || "") === a[5][s]); s++)
                    ;
                this.setState({
                    answered: l === a[5],
                    correct: l === a[5],
                    correctSoFar: !0,
                    currentAnswer: l
                }, ( () => this.focusInput()))
            }
            render() {
                const {answered: e, correct: t, correctSoFar: n, currentAnswer: s, currentIndex: r, history: o, historyVisible: i, loading: c} = this.state
                  , {languageCode: d, languageIso: u, languagePairingSlug: m, onSettingsClick: h} = this.props;
                if (c)
                    return a.createElement("p", null, "Loading...");
                const g = this.candidates[r];
                return a.createElement("div", null, a.createElement("div", {
                    style: {
                        marginBottom: 20
                    }
                }, a.createElement("div", null, a.createElement("span", {
                    style: {
                        fontSize: "2.5em",
                        fontWeight: "bold"
                    }
                }, g[0]), a.createElement(l.default, {
                    className: "btn btn-default",
                    languageCode: d,
                    languageIso: u,
                    style: {
                        marginLeft: 10,
                        marginTop: -10
                    },
                    text: g[0]
                }), a.createElement("a", {
                    href: `/translate/${m}/${g[0]}`,
                    style: {
                        marginLeft: 10
                    },
                    target: "_blank"
                }, "Translation Entry ", a.createElement("span", {
                    className: "glyphicon glyphicon-new-window"
                })), a.createElement("a", {
                    href: `/conjugate/${m}/${g[0]}`,
                    style: {
                        marginLeft: 10
                    },
                    target: "_blank"
                }, "Conjugation Tables ", a.createElement("span", {
                    className: "glyphicon glyphicon-new-window"
                })), a.createElement("a", {
                    href: `/examples/${m}/${g[0]}`,
                    style: {
                        marginLeft: 10
                    },
                    target: "_blank"
                }, "Example Sentences ", a.createElement("span", {
                    className: "glyphicon glyphicon-new-window"
                }))), a.createElement("div", null, g[1])), a.createElement("div", {
                    style: {
                        fontSize: "1.5em",
                        marginBottom: 20
                    }
                }, g[2], " - ", g[3]), a.createElement("div", {
                    style: {
                        alignItems: "center",
                        display: "flex",
                        flexDirection: "row",
                        fontSize: "1.5em",
                        marginBottom: 20
                    }
                }, a.createElement("div", {
                    style: {
                        paddingRight: 10,
                        whiteSpace: "nowrap"
                    }
                }, g[4]), e && !t && a.createElement("div", {
                    style: {
                        fontWeight: "bold",
                        paddingRight: 10
                    }
                }, g[5]), e && !t && a.createElement(l.default, {
                    className: "btn btn-default",
                    languageCode: d,
                    languageIso: u,
                    style: {
                        marginRight: 10
                    },
                    text: g[5]
                }), a.createElement("div", {
                    style: e && t ? null : {
                        flex: 1
                    }
                }, this.renderInput()), e && a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, t && a.createElement(l.default, {
                    className: "btn btn-default",
                    languageCode: d,
                    languageIso: u,
                    style: {
                        marginLeft: 10
                    },
                    text: g[5]
                }))), a.createElement("p", null, !e && a.createElement("button", {
                    className: "btn btn-lg btn-default joystix",
                    onClick: () => this.setState({
                        answered: !0
                    })
                }, "Show Answer"), !e && a.createElement("button", {
                    className: "btn btn-lg btn-default joystix",
                    onClick: () => this.hint(),
                    style: {
                        marginLeft: 10
                    }
                }, "Hint"), e && a.createElement("button", {
                    className: "btn btn-lg btn-success joystix",
                    onClick: () => this.next(),
                    style: {
                        marginRight: 10
                    }
                }, "Next"), e && a.createElement("span", {
                    style: {
                        fontSize: "2em",
                        verticalAlign: "middle"
                    }
                }, t ? "\ud83c\udf89" : "\u274c")), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-default btn-sm joystix",
                    onClick: h
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-arrow-left"
                }), " Settings"), a.createElement("button", {
                    className: "btn btn-default btn-sm joystix",
                    onClick: () => this.setState({
                        historyVisible: !i
                    }),
                    style: {
                        marginLeft: 10
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-time"
                }), " History")), i && a.createElement("ol", null, o.map(( (e, t) => a.createElement("li", {
                    key: t
                }, a.createElement("div", null, a.createElement("strong", null, e[0]), " ", e[2], " ", e[3], " - ", e[4], " ", a.createElement("strong", null, e[5]), " ", e[6] ? "\ud83c\udf89" : "\u274c"), a.createElement("div", null, a.createElement("small", null, e[1])))))))
            }
        }
        class r extends a.Component {
            constructor(e) {
                super(e),
                console.log(e);
                const t = [];
                e.demoEntry.tables.forEach(( (e, n) => {
                    const a = [];
                    e.columns.forEach(( (e, t) => {
                        const n = [];
                        e.forEach(( (e, a) => {
                            n.push(!!(t > 0 && a > 0 && e) || null)
                        }
                        )),
                        a.push(n)
                    }
                    )),
                    t.push(a)
                }
                ));
                const n = new Map(e.verbs.map((e => [e.id, !0])));
                this.state = {
                    checked: t,
                    verbsMap: n,
                    view: "settings"
                }
            }
            componentDidUpdate(e, t) {
                t.view !== this.state.view && $("html, body").animate({
                    scrollTop: 0
                })
            }
            renderHeading({tableIndex: e}) {
                const {demoEntry: t} = this.props
                  , {checked: n} = this.state;
                let l = !1;
                return n[e].forEach(( (t, a) => {
                    t.forEach(( (t, s) => {
                        if (0 === a || 0 === s)
                            return !1;
                        l = l || n[e][a][s]
                    }
                    ))
                }
                )),
                a.createElement("h2", {
                    style: {
                        fontSize: 20
                    }
                }, a.createElement("label", null, a.createElement("input", {
                    checked: l,
                    onChange: t => {
                        const a = JSON.parse(JSON.stringify(n));
                        a[e].forEach(( (t, n) => {
                            t.forEach(( (t, s) => {
                                n > 0 && s > 0 && (a[e][n][s] = !l)
                            }
                            ))
                        }
                        )),
                        this.setState({
                            checked: a
                        })
                    }
                    ,
                    type: "checkbox"
                }), " ", t.tables[e].heading))
            }
            renderColControl({colIndex: e, rowIndex: t, tableIndex: n}) {
                const {demoEntry: l} = this.props
                  , {checked: s} = this.state;
                let r = null;
                return s[n].forEach(( (e, a) => {
                    e.forEach(( (e, o) => {
                        if (0 === a || 0 === o)
                            return !1;
                        o === t && l.tables[n].columns[a][o] && (r = !!r || s[n][a][o])
                    }
                    ))
                }
                )),
                a.createElement("label", null, null !== r && a.createElement("input", {
                    checked: r,
                    onChange: e => {
                        const a = JSON.parse(JSON.stringify(s));
                        a[n].forEach(( (e, l) => {
                            e.forEach(( (e, s) => {
                                if (0 === l || 0 === s)
                                    return !1;
                                s === t && (a[n][l][s] = !r)
                            }
                            ))
                        }
                        )),
                        this.setState({
                            checked: a
                        })
                    }
                    ,
                    type: "checkbox"
                }), " ", l.tables[n].columns[e][t])
            }
            renderRowControl({colIndex: e, rowIndex: t, tableIndex: n}) {
                const {demoEntry: l} = this.props
                  , {checked: s} = this.state;
                let r = null;
                return s[n].forEach(( (t, a) => {
                    t.forEach(( (t, o) => {
                        if (0 === a || 0 === o)
                            return !1;
                        a === e && l.tables[n].columns[a][o] && (r = !!r || s[n][a][o])
                    }
                    ))
                }
                )),
                a.createElement("label", null, null !== r && a.createElement("input", {
                    checked: r,
                    onChange: t => {
                        const a = JSON.parse(JSON.stringify(s));
                        a[n].forEach(( (t, l) => {
                            t.forEach(( (t, s) => {
                                if (0 === l || 0 === s)
                                    return !1;
                                l === e && (a[n][l][s] = !r)
                            }
                            ))
                        }
                        )),
                        this.setState({
                            checked: a
                        })
                    }
                    ,
                    type: "checkbox"
                }), " ", l.tables[n].columns[e][t])
            }
            renderCell({colIndex: e, rowIndex: t, tableIndex: n}) {
                const {demoEntry: l} = this.props
                  , {checked: s} = this.state;
                if (0 === t && 0 === e)
                    return a.createElement(a.Fragment, null, "\xa0");
                if (0 === e)
                    return this.renderColControl({
                        colIndex: e,
                        rowIndex: t,
                        tableIndex: n
                    });
                if (0 === t)
                    return this.renderRowControl({
                        colIndex: e,
                        rowIndex: t,
                        tableIndex: n
                    });
                const r = l.tables[n].columns[e][t];
                return a.createElement("label", {
                    style: {
                        fontWeight: "normal"
                    }
                }, !!r && a.createElement("input", {
                    type: "checkbox",
                    checked: s[n][e][t],
                    onChange: a => {
                        const l = JSON.parse(JSON.stringify(s));
                        l[n][e][t] = a.target.checked,
                        this.setState({
                            checked: l
                        })
                    }
                }), " ", r)
            }
            renderSettings() {
                const {demoEntry: e, demoEntryTerm: t, verbs: n} = this.props
                  , {checked: l, verbsMap: s} = this.state
                  , r = l.find(( (e, t) => l[t].find(( (e, n) => e.find(( (e, a) => 0 !== n && 0 !== a && l[t][n][a]))))))
                  , o = Array.from(s.values()).filter((e => e)).length;
                return a.createElement("div", null, a.createElement("hr", null), a.createElement("p", null, a.createElement("strong", null, "Example:"), " ", t), e.tables.map(( (e, t) => a.createElement("div", {
                    style: {
                        marginBottom: 40
                    }
                }, this.renderHeading({
                    tableIndex: t
                }), a.createElement("div", {
                    className: "entry-table"
                }, e.columns.map(( (e, n) => a.createElement("div", {
                    className: "entry-table-col"
                }, e.map(( (e, l) => a.createElement("div", {
                    className: "entry-table-row",
                    style: 0 === n ? {
                        borderLeft: "none"
                    } : null
                }, this.renderCell({
                    colIndex: n,
                    rowIndex: l,
                    tableIndex: t
                }))))))))))), a.createElement("hr", null), a.createElement("div", null, a.createElement("h2", {
                    style: {
                        display: "inline-block"
                    }
                }, "Verbs"), a.createElement("label", {
                    style: {
                        marginLeft: 10
                    }
                }, a.createElement("input", {
                    checked: !Array.from(s.values()).filter((e => !e)).length,
                    onChange: e => {
                        Array.from(s.keys()).forEach((t => s.set(t, e.target.checked))),
                        this.setState({
                            verbsMap: new Map(s)
                        })
                    }
                    ,
                    type: "checkbox"
                }), " All")), a.createElement("div", {
                    style: {
                        display: "flex",
                        flexWrap: "wrap"
                    }
                }, n.map((e => a.createElement("div", {
                    style: {
                        paddingBottom: 10,
                        paddingRight: 10
                    }
                }, a.createElement("label", {
                    style: {
                        fontWeight: "normal"
                    }
                }, a.createElement("input", {
                    checked: s.get(e.id),
                    onChange: t => {
                        s.set(e.id, t.target.checked),
                        this.setState({
                            verbsMap: new Map(s)
                        })
                    }
                    ,
                    type: "checkbox"
                }), " ", e.term))))), a.createElement("hr", null), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block btn-lg",
                    disabled: !o || !r,
                    onClick: () => this.setState({
                        view: "game"
                    })
                }, "Play")), !r && a.createElement("p", {
                    className: "text-danger"
                }, "Please select one or more parts of speech!"), !o && a.createElement("p", {
                    className: "text-danger"
                }, "Please select one or more verbs!"))
            }
            render() {
                const {checked: e, verbsMap: t, view: n} = this.state
                  , {languageCode: l, languageIso: r, languagePairingSlug: o, verbs: i, verbsUrl: c} = this.props;
                return "settings" === n ? this.renderSettings() : a.createElement(s, {
                    checked: e,
                    languageCode: l,
                    languageIso: r,
                    languagePairingSlug: o,
                    onSettingsClick: () => this.setState({
                        view: "settings"
                    }),
                    verbs: i.filter((e => t.get(e.id))),
                    verbsUrl: c
                })
            }
        }
    },
    73677: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(68135)
          , s = n(96991);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collection: null,
                    copied: !1,
                    errors: null,
                    includeProgress: !1,
                    loading: !1
                }
            }
            renderControls() {
                const {collection: e, includeProgress: t} = this.state;
                return e ? a.createElement(a.Fragment, null, a.createElement(l.default, {
                    checked: t,
                    label: "Include progress",
                    name: "include_progress",
                    onChange: e => this.setState({
                        includeProgress: e.target.checked
                    })
                }), a.createElement("button", {
                    autoFocus: !0,
                    className: "btn btn-block btn-success joystix",
                    onClick: () => this.onSubmit()
                }, "Copy")) : null
            }
            onSubmit() {
                const {collection: e, includeProgress: t} = this.state
                  , {collectionClozeSentence: n, onClose: a, onCopy: l} = this.props;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        include_progress: t,
                        new_collection_id: e.id
                    }),
                    dataType: "json",
                    method: "post",
                    url: n.copyUrl
                }).done((t => {
                    if (t.errors)
                        return this.setState({
                            errors: t.errors,
                            loading: !1
                        }),
                        !1;
                    l && l({
                        collection: e,
                        collectionClozeSentence: n
                    }),
                    this.setState({
                        copied: !0,
                        loading: !1
                    })
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error copying the sentence. Sorry about that. Please try again and let someone know if you see this message again.")
                }
                ))
            }
            renderContent() {
                const {collectionsUrl: e} = this.props
                  , {copied: t, errors: n, loading: l} = this.state;
                return l ? "Loading..." : t ? a.createElement("div", {
                    className: "alert alert-success",
                    style: {
                        marginBottom: 0,
                        textAlign: "center"
                    }
                }, "Copied! \ud83c\udf89") : a.createElement(a.Fragment, null, !!n && a.createElement("p", {
                    className: "text-danger"
                }, n, "."), a.createElement(s.default, {
                    collectionsUrl: e,
                    onSelect: e => this.setState({
                        collection: e
                    })
                }), this.renderControls())
            }
            render() {
                const {onClose: e, style: t} = this.props;
                return a.createElement("div", {
                    className: "popover",
                    role: "tooltip",
                    style: Object.assign({
                        display: "block",
                        left: "unset",
                        right: 0,
                        top: 30
                    }, t)
                }, a.createElement("div", {
                    className: "arrow"
                }), a.createElement("h3", {
                    className: "popover-title"
                }, a.createElement("button", {
                    type: "button",
                    className: "close",
                    "aria-label": "Close",
                    onClick: () => e(),
                    style: {
                        color: "#000",
                        marginLeft: 10,
                        marginTop: -4
                    }
                }, "\xd7"), "Copy to Collection"), a.createElement("div", {
                    className: "popover-content",
                    style: {
                        width: 220
                    }
                }, this.renderContent()))
            }
        }
    },
    64225: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(40897)
          , o = n(508);
        const i = [["Basic", 10], ["Beginner", 50], ["Casual", 100], ["Regular", 200], ["Serious", 500], ["Hardcore", 1e3]];
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    custom: e.pointsPerDay && !i.map((e => e[1])).includes(e.pointsPerDay),
                    loading: !1,
                    pointsPerDay: e.pointsPerDay || 10,
                    reset: !1
                }
            }
            hide() {
                this.modal.hide()
            }
            renderGoalOptions() {
                const {custom: e, loading: t, pointsPerDay: n} = this.state;
                return [...i, ["Custom", "custom"]].map((t => a.createElement("div", {
                    className: "radio",
                    key: t
                }, a.createElement("label", null, a.createElement("input", {
                    name: "goal",
                    type: "radio",
                    value: t[1],
                    checked: e ? "custom" === t[1] : n === t[1],
                    onChange: e => this.setState("custom" === t[1] ? {
                        custom: !0
                    } : {
                        custom: !1,
                        pointsPerDay: t[1]
                    })
                }), a.createElement("strong", null, t[0]), " ", "custom" === t[1] ? " - set your own!" : `${t[1]} points per day`))))
            }
            onSubmit(e) {
                e.preventDefault();
                const {pointsPerDay: t, reset: n} = this.state;
                if (!t)
                    return !1;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        date: s()().format("YYYY-MM-DD"),
                        points_per_day: t,
                        reset: n
                    }),
                    method: "put",
                    url: this.props.updateUrl
                }).done((e => {
                    const {pointsPerDay: t, streak: n} = e.dailyGoal;
                    this.setState({
                        loading: !1
                    }, ( () => this.props.onUpdate({
                        pointsPerDay: t,
                        streak: n
                    })))
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            renderCustomGoalInput() {
                const {custom: e, pointsPerDay: t} = this.state;
                return e ? a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "daily-goal-custom-text-input"
                }, "Points per day"), a.createElement("input", {
                    className: "form-control",
                    id: "daily-goal-custom-text-input",
                    onChange: e => this.setState({
                        pointsPerDay: e.target.value && Math.min(parseInt(e.target.value), 99999) || null
                    }),
                    type: "text",
                    value: t
                })) : null
            }
            render() {
                const {loading: e, pointsPerDay: t, reset: n} = this.state;
                return a.createElement(r.default, {
                    footer: a.createElement(o.default, {
                        text: "Cancel",
                        disabled: e
                    }),
                    onHidden: () => this.props.onHidden(),
                    ref: e => this.modal = e,
                    size: "small",
                    title: "Daily Goal"
                }, a.createElement("p", null, "Selecting a daily goal will help you stay motivated", !!this.props.targetLanguageName && `while learning ${this.props.targetLanguageName}`, "! You can change your goal at any time."), a.createElement("form", {
                    onSubmit: e => this.onSubmit(e),
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("div", {
                    className: "goals"
                }, this.renderGoalOptions()), this.renderCustomGoalInput(), a.createElement("button", {
                    disabled: e || !t,
                    className: "btn btn-success joystix btn-block"
                }, "Save")))
            }
        }
    },
    9032: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(64225)
          , s = n(48507);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1,
                    pointsPerDay: e.pointsPerDay,
                    streak: e.streak
                }
            }
            renderModal() {
                if (!this.state.modalVisible)
                    return null;
                const {streak: e} = this.props;
                return a.createElement(l.default, {
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    onUpdate: ({pointsPerDay: e, streak: t}) => this.setState({
                        pointsPerDay: e,
                        streak: t
                    }, ( () => this.modal.hide())),
                    pointsPerDay: this.state.pointsPerDay,
                    ref: e => this.modal = e,
                    streak: e,
                    targetLanguageName: this.props.targetLanguageName,
                    updateUrl: this.props.updateUrl
                })
            }
            renderBody() {
                const e = parseInt(this.state.pointsPerDay)
                  , {isSignedIn: t} = this.props;
                if (!e)
                    return a.createElement("div", {
                        className: "text-center"
                    }, "Learning a language requires practice every day. Stay motivated!", a.createElement("button", {
                        className: "btn btn-link wrap",
                        disabled: !t,
                        style: {
                            fontSize: "1.25em",
                            fontWeight: "bold"
                        },
                        onClick: () => this.setState({
                            modalVisible: !0
                        })
                    }, "Set a daily goal"));
                const {streak: n} = this.state
                  , {hoursLeftToday: l, numPointsToday: r, timeZone: o} = this.props;
                return a.createElement(s.default, {
                    hoursLeftToday: l,
                    numPointsToday: r,
                    pointsPerDay: e,
                    streak: n,
                    timeZone: o
                })
            }
            render() {
                return a.createElement("div", {
                    className: "daily-goal panel panel-default clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, a.createElement("div", {
                    className: "pull-right"
                }, a.createElement("button", {
                    disabled: !this.props.isSignedIn,
                    onClick: () => this.setState({
                        modalVisible: !0
                    }),
                    className: "update-daily-goal btn btn-default btn-xs"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cog"
                }))), "Daily Goal"), a.createElement("div", {
                    className: "panel-body"
                }, this.renderBody()), this.renderModal())
            }
        }
    },
    3988: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(64225);
        n(48507);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1,
                    pointsPerDay: e.pointsPerDay,
                    streak: e.streak
                }
            }
            renderModal() {
                if (!this.state.modalVisible)
                    return null;
                const {streak: e} = this.props;
                return a.createElement(l.default, {
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    onUpdate: ({pointsPerDay: e, streak: t}) => this.setState({
                        pointsPerDay: e,
                        streak: t
                    }, ( () => this.modal.hide())),
                    pointsPerDay: this.state.pointsPerDay,
                    ref: e => this.modal = e,
                    streak: e,
                    targetLanguageName: this.props.targetLanguageName,
                    updateUrl: this.props.updateUrl
                })
            }
            renderBody() {
                const e = parseInt(this.state.pointsPerDay)
                  , {isSignedIn: t} = this.props;
                if (!e)
                    return a.createElement("div", {
                        className: "text-center",
                        style: {
                            marginTop: 20
                        }
                    }, a.createElement("button", {
                        className: "btn btn-default btn-block joystix wrap",
                        disabled: !t,
                        onClick: () => this.setState({
                            modalVisible: !0
                        })
                    }, "Set a daily goal"));
                const {streak: n} = this.state
                  , {hoursLeftToday: l, numPointsToday: s, timeZone: r} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "joystix"
                }, a.createElement("span", {
                    style: {
                        color: s > e ? "#5cb85c" : "inherit",
                        fontSize: "2em"
                    }
                }, s), "/", e), a.createElement("div", null, n, " days in a row"), s > e && a.createElement("div", {
                    className: "hidden-xs"
                }, "Includes today \ud83c\udf89"))
            }
            render() {
                return a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-body",
                    style: {
                        height: 128
                    }
                }, a.createElement("h3", {
                    className: "joystix",
                    style: {
                        fontSize: 16,
                        margin: 0
                    }
                }, "Daily Goal", !!this.state.pointsPerDay && a.createElement("button", {
                    onClick: () => this.setState({
                        modalVisible: !0
                    }),
                    className: "btn btn-default btn-xs",
                    style: {
                        marginLeft: 8
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-pencil"
                }))), this.renderBody()), this.renderModal())
            }
        }
    },
    48507: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40727);
        function s(e) {
            const t = parseInt(e.pointsPerDay)
              , n = parseInt(e.numPointsToday)
              , s = n >= t
              , r = (parseInt(e.streak),
            e.hoursLeftToday);
            return a.createElement("div", {
                className: "daily-goal-stats",
                style: e.style
            }, a.createElement("p", {
                className: "points"
            }, a.createElement("strong", {
                className: "stat"
            }, "Points:"), " ", a.createElement("span", {
                className: "joystix"
            }, a.createElement("span", {
                className: "value " + (s ? "success" : "")
            }, n), " / ", t), !!s && a.createElement("span", {
                style: {
                    fontSize: "1.25em",
                    marginLeft: 10
                }
            }, a.createElement(l.default, {
                name: "ok",
                style: {
                    color: "#5cb85c"
                }
            }), " \ud83c\udf89")), a.createElement("p", {
                className: "hours-left"
            }, a.createElement("strong", {
                className: "stat"
            }, "Time remaining:"), a.createElement("span", {
                className: "joystix"
            }, r), " ", a.createElement("small", {
                className: "joystix"
            }, "Hours")), !!e.timeZone && a.createElement("p", {
                className: "time-zone"
            }, a.createElement("strong", {
                className: "stat"
            }, "Time zone:"), a.createElement("span", {
                className: "value joystix"
            }, a.createElement("a", {
                href: "/settings#timezone"
            }, a.createElement("small", null, e.timeZone)))))
        }
    },
    79439: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(53884)
          , s = n(40727);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    dailyReminderEmail: e.dailyReminderEmail,
                    modalVisible: !1
                }
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(l.default, {
                    dailyReminderEmail: this.state.dailyReminderEmail,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    onUpdate: e => {
                        this.setState({
                            dailyReminderEmail: e
                        }, ( () => {
                            this.modal.hide(),
                            this.props.onUpdate && this.props.onUpdate(e)
                        }
                        ))
                    }
                    ,
                    ref: e => this.modal = e,
                    updateUrl: this.props.updateUrl
                }) : null
            }
            render() {
                const {btnClassName: e, children: t, data: n, isSignedIn: l, style: r} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("button", Object.assign({
                    className: e || "btn btn-default btn-lg"
                }, n, {
                    disabled: !l,
                    onClick: () => this.setState({
                        modalVisible: !0
                    }),
                    style: r,
                    title: "Daily reminder"
                }), t || a.createElement(s.default, {
                    name: "bell"
                })), this.renderModal())
            }
        }
    },
    53884: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(40897)
          , s = n(508);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    dailyReminderEmail: e.dailyReminderEmail
                }
            }
            hide() {
                this.modal.hide()
            }
            renderHourOptions() {
                const e = [a.createElement("option", {
                    value: "",
                    key: "blank"
                }, "No reminder.")];
                for (let t, n, l = 0, s = 24; l < s; l++)
                    n = l % 12,
                    t = (0 === n ? 12 : n) + (l > 11 ? "pm" : "am"),
                    e.push(a.createElement("option", {
                        value: t,
                        key: t
                    }, t));
                return e
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        daily_reminder_email: this.state.dailyReminderEmail
                    },
                    method: "put",
                    url: this.props.updateUrl
                }).done(( () => {
                    this.setState({
                        loading: !1
                    }, ( () => this.props.onUpdate(this.state.dailyReminderEmail)))
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            render() {
                const {loading: e} = this.state;
                return a.createElement(l.default, {
                    footer: a.createElement(s.default, {
                        text: "Cancel",
                        disabled: e
                    }),
                    onHidden: () => this.props.onHidden(),
                    ref: e => this.modal = e,
                    size: "small",
                    title: "Daily Reminder"
                }, a.createElement("p", null, "Keep up the great work and master your language faster! Like they say, practice makes perfect and you have to exercise that muscle. \ud83d\udcaa"), a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "daily_reminder_email"
                }, "Email me when I forget to practice by:"), a.createElement("select", {
                    disabled: e,
                    className: "form-control",
                    name: "daily_reminder_email",
                    value: this.state.dailyReminderEmail || "",
                    onChange: e => this.setState({
                        dailyReminderEmail: e.target.value
                    })
                }, this.renderHourOptions())), a.createElement("button", {
                    disabled: e,
                    className: "btn btn-success btn-block joystix"
                }, "Save")))
            }
        }
    },
    92697: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(53884);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    dailyReminderEmail: e.dailyReminderEmail,
                    modalVisible: !1
                }
            }
            renderContent() {
                const {isSignedIn: e, timeZone: t} = this.props
                  , {dailyReminderEmail: n} = this.state;
                return n ? a.createElement("div", {
                    className: "status-text reminder-set"
                }, "Daily reminder email is set for ", n, " ", t, ".", a.createElement("button", {
                    className: "btn btn-link",
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, "Update")) : a.createElement("div", {
                    className: "status-text"
                }, a.createElement("div", {
                    style: {
                        fontSize: "1.25em",
                        fontWeight: "bold"
                    }
                }, "Keep your streak alive!"), a.createElement("button", {
                    className: "btn btn-link btn-lg wrap",
                    disabled: !e,
                    style: {
                        fontWeight: "bold"
                    },
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, "Set a daily reminder email"))
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(l.default, {
                    dailyReminderEmail: this.state.dailyReminderEmail,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    onUpdate: e => this.setState({
                        dailyReminderEmail: e
                    }, ( () => this.modal.hide())),
                    ref: e => this.modal = e,
                    updateUrl: this.props.updateUrl
                }) : null
            }
            render() {
                return a.createElement("div", null, a.createElement("div", {
                    className: "panel panel-default text-center"
                }, a.createElement("div", {
                    className: "panel-body",
                    style: {
                        paddingBottom: 5
                    }
                }, this.renderContent())), this.renderModal())
            }
        }
    },
    71506: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return q
            }
        });
        var a = n(96540)
          , l = (n(40961),
        n(95093))
          , s = n.n(l)
          , r = (n(58108),
        n(57955),
        n(66820))
          , o = n(44654)
          , i = n(78780)
          , c = n(50408)
          , d = n(16657)
          , u = (n(79715),
        n(64688))
          , m = n(95779)
          , h = n(80931)
          , g = n(10447)
          , p = (n(90721),
        n(99689))
          , b = (n(8267),
        n(51061),
        n(9032))
          , f = n(92697)
          , E = n(69367)
          , y = n(93337)
          , S = n(61291)
          , v = n(51913)
          , C = (n(32835),
        n(42856))
          , w = n(24868)
          , x = n(28737)
          , k = n(51813)
          , N = n(75445)
          , T = n(71816)
          , P = n(33211)
          , M = n(94812)
          , R = n(93719)
          , L = n(39576)
          , I = n(40727)
          , z = n(50227)
          , U = n(5440)
          , A = n(73898)
          , j = n(74904)
          , D = n(94870)
          , F = n(9830)
          , V = (n(40897),
        n(508),
        n(14296))
          , B = n(82994)
          , O = (n(52143),
        n(50715))
          , _ = n(64639)
          , H = (n(44893),
        n(92024))
          , G = n(91313)
          , W = n(51319);
        class q extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    aboutToPlayCollection: null,
                    aboutToPlayScope: null,
                    addSentenceToCollectionVisible: !1,
                    favoritesModalVisible: !1,
                    managingCollection: null,
                    managingCollectionScope: null,
                    moreStatsVisible: !1,
                    reviewModalVisible: !1,
                    reviewSettingsModalVisible: !1
                }
            }
            getCollectionsStats(e) {
                let t = 0
                  , n = 0
                  , a = 0
                  , l = 0;
                for (let s = 0, r = e.length; s < r; s++)
                    t += e[s].numPlaying,
                    n += e[s].numMastered,
                    a += e[s].numReadyForReview,
                    l += e[s].numFavorited;
                return {
                    numFavorited: l,
                    numMastered: n,
                    numPlaying: t,
                    numReadyForReview: a
                }
            }
            componentDidMount() {
                const e = $("#dashboard");
                e.popover({
                    selector: '[data-toggle="popover"]'
                }),
                e.on("show.bs.popover", '[data-toggle="popover"]', (function(e) {
                    $('[data-toggle="popover"]').not(this).popover("destroy")
                }
                )),
                e.on("inserted.bs.popover", '[data-toggle="popover"]', (function(e) {
                    $(".popover .popover-title").append('<button type="button" class="close" data-dismiss="popover" aria-label="Close" style="margin-top: -4px"><span aria-hidden="true">&times;</span></button>')
                }
                )),
                e.on("click", ".popover .close", ( () => {
                    $('[data-toggle="popover"]').popover("destroy")
                }
                )),
                $("#dashboard").tooltip({
                    selector: '[data-toggle="tooltip"]'
                }),
                window.clozemaster.systemTtsAvailable(this.props.targetLanguageIso, this.props.targetLanguageCode),
                this.loadLanguagePairing()
            }
            loadLanguagePairing() {
                this.setState({
                    loading: !0
                });
                const {includeFastTrackV2Collections: e, languagePairingUrl: t} = this.props;
                $.ajax({
                    data: {
                        include_fast_track_v2_collections: e
                    },
                    url: t
                }).done((e => {
                    const {collectionGroupings: t, collections: n, languagePairing: a, user: l} = e;
                    console.log(e);
                    const {clozeFromWordsUrl: s, clozeListening: r, clozeSentencesUrl: o, collectionFileImportUrl: i, collectionsUrl: c, currentLevelPoints: d, currentStreakDays: u, currentStreakIncludesToday: m, currentWeekLeaderboardRank: h, dailyGoalHoursLeftToday: g, dailyGoalPointsPerDay: p, dailyGoalStreak: b, dailyGoalUrl: f, dailyReminderEmail: E, dailyReminderEmailUrl: y, dailyStatsWebUrl: S, gameSettingsUrl: v, leaderboardsUrl: C, level: w, listeningTrialExpired: x, moreStatsUrl: k, nextLevelPoints: N, nextReviewByLevel: T, numPointsToday: P, past7DaysNewReview: M, playClozeListeningWebUrl: R, playOptions: L, playWebUrl: I, prevWeekLeaderboardRank: z, progressPerChunk: U, quickClozeUrl: A, rankingsUrl: j, resetProgressUrl: D, reviewSettingsUrl: F, score: V, sharedCollectionsUrl: B, speakingTrialExpired: O, useProgressChunks: _} = a
                      , {isSignedIn: $} = this.props;
                    $ && !l.hasRunPlayTutorial && window.localStorage.getItem("hasRunPlayTutorial") && this.saveHasRunPlayTutorial(),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        clozeFromWordsUrl: s,
                        clozeListening: r,
                        clozeSentencesUrl: o,
                        collectionFileImportUrl: i,
                        collectionGroupings: t,
                        collections: n,
                        collectionsUrl: c,
                        currentLevelPoints: d,
                        currentStreakDays: u,
                        currentStreakIncludesToday: m,
                        currentWeekLeaderboardRank: h,
                        dailyGoalHoursLeftToday: g,
                        dailyGoalPointsPerDay: p,
                        dailyGoalStreak: b,
                        dailyGoalUrl: f,
                        dailyReminderEmail: E,
                        dailyReminderEmailUrl: y,
                        dailyStatsUrl: S,
                        gameSettingsUrl: v,
                        leaderboardsUrl: C,
                        level: w,
                        listeningTrialExpired: x,
                        loading: !1,
                        moreStatsUrl: k,
                        nextLevelPoints: N,
                        nextReviewByLevel: T,
                        numPointsToday: P,
                        past7DaysNewReview: M,
                        playClozeListeningUrl: R,
                        playLanguagePairingWebUrl: I,
                        playOptions: L,
                        prevWeekLeaderboardRank: z,
                        progressPerChunk: U,
                        quickClozeUrl: A,
                        rankingsUrl: j,
                        resetProgressUrl: D,
                        reviewSettingsUrl: F,
                        score: V,
                        sharedCollectionsUrl: B,
                        speakingTrialExpired: O,
                        useProgressChunks: _,
                        user: l
                    }), ( () => this.initPast7DaysChart()))
                }
                ))
            }
            initPast7DaysChart() {
                const {past7DaysNewReview: e} = this.state
                  , t = []
                  , n = []
                  , a = [];
                e.forEach((e => {
                    t.push(s()(e.date, "YYYY-MM-DD").format("ddd MMM D")),
                    n.push(e.numNew),
                    a.push(e.numReview)
                }
                ));
                const l = this.past7DaysCanvas.getContext("2d")
                  , r = {
                    labels: t,
                    datasets: [{
                        label: "New",
                        fillColor: "rgba(20,220,20,0.2)",
                        strokeColor: "rgba(20,220,20,1)",
                        pointColor: "rgba(20,220,20,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(20,220,20,1)",
                        data: n
                    }, {
                        label: "Reviewed",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: a
                    }]
                };
                new Chart(l).Line(r, {
                    multiTooltipTemplate: "<%= datasetLabel %>: <%= value %>"
                })
            }
            getPast7DaysNewReviewAvg(e) {
                const t = this.state.past7DaysNewReview.reduce(( (t, n) => t + n[e]), 0) / 7;
                return Math.round(10 * t) / 10
            }
            saveHasRunPlayTutorial() {
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        user: {
                            has_run_play_tutorial: !0
                        }
                    }),
                    method: "put",
                    url: "/api/v1/users"
                })
            }
            renderStats() {
                const e = this.state
                  , {isSignedIn: t} = this.props;
                return a.createElement("div", {
                    className: "stats-panels-container"
                }, a.createElement("div", {
                    className: "stats-panels-table"
                }, a.createElement("div", {
                    className: "stats-panels"
                }, a.createElement("div", {
                    className: "stat-panel score"
                }, a.createElement("div", {
                    className: "title"
                }, "Score"), a.createElement("div", {
                    className: "value"
                }, e.score.toLocaleString()), a.createElement("div", null, a.createElement("small", null, a.createElement(O.default, {
                    style: {
                        marginRight: 3
                    }
                }), "Playing: ", a.createElement("strong", null, e.numPlaying.toLocaleString()))), a.createElement("div", null, a.createElement("small", null, a.createElement(F.default, {
                    style: {
                        marginRight: 3
                    }
                }), "Mastered: ", a.createElement("strong", null, e.numMastered.toLocaleString())))), a.createElement("div", {
                    className: "stat-panel"
                }, a.createElement("div", {
                    className: "title"
                }, "Level ", a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign",
                    "data-toggle": "tooltip",
                    title: "Score more points to level up"
                })), a.createElement("div", {
                    className: "value"
                }, e.level), a.createElement("div", {
                    className: "level-progress"
                }, a.createElement("div", {
                    className: "progress",
                    style: {
                        height: "10px",
                        marginTop: "0px",
                        marginBottom: "4px"
                    }
                }, a.createElement("div", {
                    className: "progress-bar progress-bar-success progress-bar-striped",
                    style: {
                        width: (e.score - e.currentLevelPoints) / (e.nextLevelPoints - e.currentLevelPoints) * 100 + "%"
                    }
                }))), a.createElement("small", {
                    style: {
                        display: "block",
                        lineHeight: 1.1
                    }
                }, (e.nextLevelPoints - e.score).toLocaleString(), " more points to level ", e.level + 1)), a.createElement("div", {
                    className: "stat-panel streak" + (0 === e.currentStreakDays ? " zero" : "")
                }, a.createElement("div", {
                    className: "title"
                }, "Streak ", a.createElement("small", {
                    style: {
                        fontWeight: "normal"
                    }
                }, a.createElement("a", {
                    href: "/settings#timezone"
                }, this.props.timeZone))), a.createElement("div", {
                    className: "value"
                }, e.currentStreakDays, " Day", 1 === e.currentStreakDays ? "" : "s", e.currentStreakIncludesToday ? a.createElement("span", {
                    className: "glyphicon glyphicon-ok played-today",
                    title: "Streak includes today",
                    "data-toggle": "tooltip"
                }) : ""), a.createElement("div", {
                    className: "averages"
                }, a.createElement("div", {
                    className: "title"
                }, "7-day Av", a.createElement("span", {
                    className: "hidden-sm hidden-md"
                }, "era"), "g", a.createElement("span", {
                    className: "hidden-sm hidden-md"
                }, "e"), a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign",
                    style: {
                        marginLeft: 4
                    },
                    "data-toggle": "tooltip",
                    title: "Average number of sentences played per day for the last 7 days"
                })), a.createElement("span", {
                    className: "average average-new",
                    "data-toggle": "tooltip",
                    title: "New sentences"
                }, a.createElement("small", {
                    className: "glyphicon glyphicon-plus"
                }), a.createElement("span", {
                    className: "count",
                    style: {
                        marginLeft: 4
                    }
                }, this.getPast7DaysNewReviewAvg("numNew"))), a.createElement("span", {
                    className: "average average-review",
                    "data-toggle": "tooltip",
                    title: "Review sentences"
                }, a.createElement("small", {
                    className: "glyphicon glyphicon-refresh"
                }), a.createElement("span", {
                    className: "count",
                    style: {
                        marginLeft: 4
                    }
                }, this.getPast7DaysNewReviewAvg("numReview"))))), a.createElement(W.default, {
                    collections: e.collections,
                    numReadyForReview: e.numReadyForReview,
                    onPlay: e => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: "ready_for_review"
                    }),
                    onReviewSettingsBtnClick: this.onReviewSettingsBtnClick.bind(this),
                    playLanguagePairingUrl: e.playLanguagePairingWebUrl
                }), a.createElement(U.default, {
                    baseLanguageFlagIso: this.props.baseLanguageFlagIso,
                    currentWeekLeaderboardRank: e.currentWeekLeaderboardRank,
                    isSignedIn: t,
                    leaderboardsUrl: e.leaderboardsUrl,
                    prevWeekLeaderboardRank: e.prevDayRanking,
                    ranking: e.ranking,
                    rankingsUrl: e.rankingsUrl,
                    targetLanguageFlagIso: this.props.targetLanguageFlagIso,
                    useRankingsForLeaderboard: this.props.useRankingsForLeaderboard
                }), a.createElement("div", {
                    className: "stat-panel favorites"
                }, a.createElement("div", {
                    className: "title"
                }, "Favorites"), a.createElement("div", {
                    className: "value"
                }, e.numFavorited.toLocaleString()), a.createElement("button", {
                    onClick: () => this.openFavoritesModal("play"),
                    className: "btn btn-success btn-xs joystix btn-block play",
                    disabled: !e.numFavorited,
                    style: {
                        fontSize: "11px",
                        padding: 0
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), a.createElement("table", {
                    style: {
                        width: "100%"
                    }
                }, a.createElement("tbody", null, a.createElement("tr", null, a.createElement("td", {
                    style: {
                        width: "50%",
                        paddingRight: "3px"
                    }
                }, a.createElement("button", {
                    onClick: () => this.openFavoritesModal("view"),
                    disabled: !e.numFavorited,
                    className: "btn btn-default btn-xs btn-block view",
                    style: {
                        padding: 0,
                        marginTop: "4px"
                    }
                }, "View")), a.createElement("td", {
                    style: {
                        width: "50%",
                        paddingLeft: "3px"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-placement": "bottom",
                    title: "Download"
                }, a.createElement("button", {
                    onClick: () => this.openFavoritesModal("download"),
                    disabled: !e.numFavorited,
                    className: "btn btn-primary btn-xs btn-block download",
                    style: {
                        padding: 0,
                        marginTop: "4px"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cloud-download download"
                })))))))))))
            }
            openFavoritesModal(e) {
                this.setState({
                    favoritesModalVisible: e
                })
            }
            renderReviewModal() {
                const {reviewModalVisible: e, collections: t} = this.state
            }
            renderDownloadFavoritesModal() {
                const {downloadFavoritesCollection: e, user: t} = this.state;
                return e ? a.createElement(y.default, {
                    collection: e,
                    isPro: t.isPro,
                    onHidden: () => this.setState({
                        downloadFavoritesCollection: null
                    })
                }) : null
            }
            renderFavoritesModal() {
                const {collections: e, favoritesModalVisible: t, playLanguagePairingWebUrl: n, user: l} = this.state;
                return t ? a.createElement(v.default, {
                    action: t,
                    collections: e,
                    isPro: l.isPro,
                    onDownload: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            downloadFavoritesCollection: e
                        })
                    }),
                    onHidden: () => this.setState({
                        favoritesModalVisible: !1
                    }),
                    onPlay: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            aboutToPlayCollection: e,
                            aboutToPlayScope: "favorited"
                        })
                    }),
                    onView: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            managingCollection: e,
                            managingCollectionScope: "favorited"
                        })
                    }),
                    playLanguagePairingUrl: n,
                    ref: e => this.favoritesModal = e
                }) : null
            }
            renderAnonPlayPanel() {
                return this.props.isSignedIn ? null : this.props.simpleAnonPlayPanel ? a.createElement("div", {
                    className: "alert alert-success anon-play text-center",
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("h2", null, "Get in the game, track your progress, and more!"), a.createElement("a", {
                    href: "/sign-up",
                    className: "btn btn-success joystix btn-lg",
                    style: {
                        minWidth: 280
                    }
                }, "Sign up")) : a.createElement("p", {
                    className: "alert alert-success anon-play"
                }, a.createElement("h2", null, a.createElement("a", {
                    href: "/sign-up",
                    className: "btn btn-success joystix"
                }, "Sign up"), " or ", a.createElement("a", {
                    href: "/login",
                    className: "btn btn-success joystix"
                }, "Login"), " to get in the game, track your progress, and more! Or try out Clozemaster by playing random sentences in anonymous mode.", a.createElement("button", {
                    className: "btn btn-success btn-lg btn-block joystix",
                    onClick: () => this.setState({
                        aboutToPlayCollection: {
                            name: "Random",
                            playWebUrl: this.state.playLanguagePairingWebUrl
                        }
                    }),
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement(I.default, {
                    name: "chevron-right"
                }))))
            }
            renderCore1kCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "Core1kCollection" === e.type));
                return s ? a.createElement(p.default, {
                    className: "core1k-collection",
                    collection: s,
                    fallbackDescription: "Play a collection of the most useful sentences and vocabulary you need to know.",
                    isSignedIn: l,
                    manage: () => this.setState({
                        managingCollection: s
                    }),
                    play: () => this.setState({
                        aboutToPlayCollection: s
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : null
            }
            renderFastTrackPanel({legacy: e=!1}={}) {
                const {collections: t, progressPerChunk: n, useProgressChunks: l} = this.state
                  , {isSignedIn: s} = this.props
                  , r = t.find((e => "FastTrackCollection" === e.type));
                return r ? a.createElement(C.default, {
                    className: "fast-track",
                    collection: r,
                    fallbackDescription: `Play ${r.numSentences.toLocaleString()} sentences with ${r.numSentences.toLocaleString()} unique cloze-words in order of difficulty.`,
                    helpText: "Fast and efficient language learning. Each word in each sentence is matched against a frequency list (a list of words ordered by how often they're likely to occur). The most difficult (least common) word is then selected as the missing word. The Fast Track has one sentence for each missing word, and the sentences are played in order of difficulty, so you're always making progress.",
                    isSignedIn: s,
                    manage: () => this.setState({
                        managingCollection: r
                    }),
                    name: e ? "Legacy Fast Track" : r.name,
                    panelId: e ? "legacy-fast-track" : null,
                    play: () => this.setState({
                        aboutToPlayCollection: r
                    }),
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderLegacyFastTrack() {
                const {collections: e} = this.state;
                if (e.filter((e => "FastTrackV2Collection" === e.type)).length)
                    return this.renderFastTrackPanel({
                        legacy: !0
                    })
            }
            renderMainPanel() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "Core1kCollection" === e.type))
                  , r = e.filter((e => "FastTrackV2Collection" === e.type))
                  , o = e.find((e => "FastTrackCollection" === e.type))
                  , i = e.find((e => "RandomCollection" === e.type));
                return r.length ? a.createElement(a.Fragment, null, a.createElement(w.default, {
                    collections: r,
                    hasFastTrackV1Progress: !!o && o.numPlaying > 0,
                    isSignedIn: l,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: (e, t) => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: t
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }), this.renderCore1kCollection()) : s || o ? a.createElement(a.Fragment, null, this.renderFastTrackPanel(), this.renderCore1kCollection()) : a.createElement(p.default, {
                    className: "random-collection",
                    collection: i,
                    fallbackDescription: `Play ${i.numSentences.toLocaleString()} sentences in random order.`,
                    isSignedIn: l,
                    manage: () => this.setState({
                        managingCollection: i
                    }),
                    play: () => this.setState({
                        aboutToPlayCollection: i
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                })
            }
            renderFrequencyCollectionsPanel() {
                const {collections: e, playLanguagePairingWebUrl: t, progressPerChunk: n, useProgressChunks: l, user: s} = this.state
                  , r = e.filter((e => "FrequencyCollection" === e.type));
                return r.length ? a.createElement(N.default, {
                    collections: r,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: (e, t) => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: t
                    }),
                    playLanguagePairingWebUrl: t,
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderGrammarCollectionsPanel() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n, user: l} = this.state
                  , s = e.filter((e => "GrammarCollection" === e.type));
                return s.length ? a.createElement(L.default, {
                    collections: s,
                    isPro: l.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : null
            }
            renderMyCollectionsPanel() {
                const {collections: e, sharedCollectionsUrl: t, progressPerChunk: n, useProgressChunks: l} = this.state
                  , s = e.filter((e => !e.type));
                return a.createElement(B.default, {
                    add: e => this.setState({
                        addingToCollection: e,
                        addToCollectionVisible: !0
                    }),
                    collections: s,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.user.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    onCollectionCreate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        t.unshift(e),
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onCollectionDelete: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t.splice(n, 1);
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onCollectionUpdate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t[n] = e;
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: n,
                    sharedCollectionsUrl: t,
                    teachingUrl: this.props.teachingUrl,
                    useProgressChunks: l
                })
            }
            renderCollectionGroupingsPanel() {
                const {collectionGroupings: e, collections: t, progressPerChunk: n, useProgressChunks: l, user: s} = this.state;
                return e && e.length ? a.createElement(g.default, {
                    collectionGroupings: e,
                    collections: t,
                    isPro: s.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderRandomCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "Core1kCollection" === e.type))
                  , r = e.find((e => "FastTrackCollection" === e.type))
                  , o = e.find((e => "FastTrackV2Collection" === e.type))
                  , i = e.find((e => "RandomCollection" === e.type));
                if ((s || r || o) && i)
                    return a.createElement(p.default, {
                        className: "random-collection",
                        collection: i,
                        fallbackDescription: `Play ${i.numSentences.toLocaleString()} sentences in random order.`,
                        isSignedIn: l,
                        manage: () => this.setState({
                            managingCollection: i
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: i
                        }),
                        progressPerChunk: t,
                        useProgressChunks: n
                    })
            }
            renderNsfwCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "NsfwCollection" === e.type));
                if (s)
                    return a.createElement(p.default, {
                        className: "nsfw-collection",
                        collection: s,
                        fallbackDescription: "A collection of sentences with swear words, vulgarities, and other NSFW content.",
                        isSignedIn: l,
                        manage: () => this.setState({
                            managingCollection: s
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: s
                        }),
                        progressPerChunk: t,
                        useProgressChunks: n
                    })
            }
            renderPanels() {
                return a.createElement("div", null, this.renderAnonPlayPanel(), this.renderMainPanel(), this.renderPanelsAd(), this.renderFrequencyCollectionsPanel(), this.renderMyCollectionsPanel(), this.renderGrammarCollectionsPanel(), this.renderCollectionGroupingsPanel(), this.renderClozeListeningPanel(), this.renderClozeReadingPanel(), this.renderRandomCollection(), this.renderLegacyFastTrack(), this.renderNsfwCollection())
            }
            renderClozeListeningPanel() {
                if (!this.state.playClozeListeningUrl)
                    return null;
                const {clozeListening: e, collections: t, playClozeListeningUrl: n, progressPerChunk: l, useProgressChunks: s, user: r} = this.state
                  , {isSignedIn: o} = this.props
                  , i = t.find((e => "ClozeListeningCollection" === e.type));
                if (i)
                    return a.createElement(u.default, {
                        collection: i,
                        isSignedIn: o,
                        manage: () => this.setState({
                            managingCollection: i
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: i
                        }),
                        progressPerChunk: l,
                        useProgressChunks: s
                    });
                const {numPlaying: c, numReadyForReview: d, uniqueListeningTimeToday: h, uniqueListeningTimePast7Days: g, uniqueListeningTimePast30Days: p, uniqueListeningTimeTotal: b} = e;
                return a.createElement(m.default, {
                    isPro: r.isPro,
                    numPlaying: c,
                    numReadyForReview: d,
                    uniqueListeningTimeToday: h,
                    uniqueListeningTimePast7Days: g,
                    uniqueListeningTimePast30Days: p,
                    uniqueListeningTimeTotal: b,
                    url: n
                })
            }
            renderClozeReadingPanel() {
                const {clozeReadingPath: e, isSignedIn: t} = this.props;
                return e ? a.createElement("div", {
                    className: "panel panel-default cloze-reading"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-file-text-o fa-4x",
                    "aria-hidden": "true",
                    style: {
                        marginLeft: 4
                    }
                })), a.createElement("h2", {
                    className: "title"
                }, "Cloze-Reading", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": "<p>Take your literacy to the next level! Practice reading native level content on a variety of topics from Wikipedia, or create your own.</p><p>Multiple paragraphs > multiple sentences > one missing word per sentence > select the correct answer > score points.</p><p>Points are saved after playing all sentences in an article and count towards your total score, level, and streak, but don't affect your overall sentences played, mastered, or reviews.</p>",
                    "data-html": "true",
                    "data-title": "Cloze-Reading",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("br", {
                    className: "hidden-xs"
                }), a.createElement("small", null, "Level up your reading skills with longer texts."), a.createElement("a", {
                    className: "btn btn-success joystix",
                    disabled: !t,
                    href: e,
                    style: {
                        marginLeft: 8
                    }
                }, "Go", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))) : null
            }
            renderAddToCollectionModal() {
                const {addingToCollection: e, addToCollectionVisible: t, user: n} = this.state;
                return t ? a.createElement(o.default, {
                    collection: e,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: n.isPro,
                    onFile: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddFileToCollectionModal(e)
                    }),
                    onHidden: () => this.setState({
                        addingToCollection: null,
                        addToCollectionVisible: !1
                    }),
                    onManual: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddSentenceToCollectionModal(e)
                    }),
                    onSearch: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showSentenceSearchModal(e)
                    }),
                    onPaste: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddTextToCollectionModal(e)
                    }),
                    onWords: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddClozeFromWordsToCollectionModal(e)
                    }),
                    ref: e => this.addToCollectionModal = e
                }) : null
            }
            updateMyCollections() {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    data: {
                        filter: "mine"
                    },
                    url: this.state.collectionsUrl
                }).done((e => {
                    const t = e.collections.reduce(( (e, t) => (e[t.id] = t,
                    e)), {});
                    let n = this.state.collections.map((e => {
                        if (t[e.id]) {
                            const n = t[e.id];
                            return delete t[e.id],
                            n
                        }
                        return e
                    }
                    ));
                    n = n.concat(Object.values(t)),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        collections: n,
                        updating: !1
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the dashboard. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            updateCollection(e) {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    url: e.url
                }).done((e => {
                    let t = !1;
                    const n = this.state.collections.map((n => n.id === e.collection.id ? (t = !0,
                    e.collection) : n));
                    t || n.push(e.collection),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        collections: n,
                        updating: !1
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the dashboard. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            renderManageCollectionModal() {
                const {collectionsUrl: e, managingCollection: t, managingCollectionScope: n, user: l} = this.state
                  , {baseLanguageEnglishName: s, targetLanguageCode: r, targetLanguageEnglishName: o, targetLanguageIso: i, targetLanguageName: c} = this.props;
                return t ? a.createElement(D.default, {
                    baseLanguageEnglishName: s,
                    collectionClozeSentencesUrl: t.collectionClozeSentencesUrl,
                    collectionName: t.name,
                    collectionType: t.type,
                    collectionsUrl: e,
                    deleteCollectionProgressUrl: t.deleteProgressUrl,
                    isCollectionEditable: t.isEditable,
                    isPro: l.isPro,
                    onHidden: ({hasCopiedSentences: e}) => {
                        const {managingCollection: t} = this.state;
                        this.setState({
                            managingCollection: null,
                            managingCollectionScope: null
                        }, ( () => {
                            if (e)
                                return this.loadLanguagePairing(),
                                !1;
                            this.updateCollection(t)
                        }
                        ))
                    }
                    ,
                    scope: n,
                    targetLanguageCode: r,
                    targetLanguageEnglishName: o,
                    targetLanguageIso: i,
                    targetLanguageName: c
                }) : null
            }
            showAddSentenceToCollectionModal(e) {
                this.setState({
                    addSentenceToCollectionVisible: !0,
                    addSentenceToCollection: e
                })
            }
            onMoreStatsBtnClick() {
                this.setState({
                    moreStatsVisible: !0
                })
            }
            renderProControls() {
                if (this.state.loading)
                    return null;
                const {isSignedIn: e} = this.props;
                return a.createElement("ul", {
                    className: "list-inline pro-controls",
                    style: {
                        marginRight: -5
                    }
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default btn-lg add-sentence-to-collection",
                    disabled: !e,
                    onClick: () => this.showAddSentenceToCollectionModal(),
                    "data-toggle": "tooltip",
                    title: "Add sentence to collection"
                }, a.createElement(I.default, {
                    name: "plus"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default btn-lg more-stats",
                    disabled: !e,
                    onClick: () => this.onMoreStatsBtnClick(),
                    "data-toggle": "tooltip",
                    title: "More stats"
                }, a.createElement(I.default, {
                    name: "stats"
                }))), a.createElement("li", null, a.createElement("button", {
                    id: "search-sentences",
                    disabled: !e,
                    onClick: () => this.onSearchBtnClick(),
                    className: "btn btn-default btn-lg",
                    "data-toggle": "tooltip",
                    title: "Search sentences"
                }, a.createElement(I.default, {
                    name: "search"
                }))), a.createElement("li", null, a.createElement("button", {
                    onClick: () => this.onReviewSettingsBtnClick(),
                    disabled: !e,
                    className: "btn btn-default btn-lg review-settings",
                    "data-toggle": "tooltip",
                    "data-html": "true",
                    title: "<span style='white-space: nowrap;'>Review settings</span>"
                }, a.createElement(I.default, {
                    name: "time"
                }))))
            }
            onSearchBtnClick() {
                this.showSentenceSearchModal()
            }
            showSentenceSearchModal(e) {
                this.setState({
                    addSentenceToCollection: e,
                    sentenceSearchModalVisible: !0
                })
            }
            onReviewSettingsBtnClick() {
                this.setState({
                    reviewSettingsModalVisible: !0
                })
            }
            renderDailyReminder() {
                return a.createElement(f.default, {
                    dailyReminderEmail: this.state.dailyReminderEmail,
                    isSignedIn: this.props.isSignedIn,
                    timeZone: this.props.timeZone,
                    updateUrl: this.state.dailyReminderEmailUrl
                })
            }
            renderDailyGoal() {
                const {isSignedIn: e, targetLanguageName: t, timeZone: n} = this.props
                  , {dailyGoalHoursLeftToday: l, dailyGoalPointsPerDay: s, dailyGoalStreak: r, dailyGoalUrl: o, numPointsToday: i} = this.state;
                return a.createElement(b.default, {
                    hoursLeftToday: l,
                    isSignedIn: e,
                    numPointsToday: i,
                    pointsPerDay: s,
                    streak: r,
                    targetLanguageName: t,
                    timeZone: n,
                    updateUrl: o
                })
            }
            renderProPromo() {
                return this.state.user.isPro ? null : a.createElement("div", {
                    className: "panel panel-default",
                    style: {
                        background: "#464646",
                        color: "#fff"
                    }
                }, a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("h5", {
                    style: {
                        fontSize: 24,
                        marginTop: 0
                    }
                }, "Get fluent faster."), a.createElement("a", {
                    href: "/pro",
                    className: "btn joystix btn-block btn-attention"
                }, "Clozemaster Pro", a.createElement(I.default, {
                    name: "chevron-right",
                    className: "hidden-md"
                }))))
            }
            renderGiftPro() {
                return this.props.giftsDisabled ? null : a.createElement("div", {
                    className: "panel panel-default gift-pro clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Gift Pro!"), a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("p", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, "Send Clozemaster Pro as a gift and get a free month!"), a.createElement("a", {
                    className: "btn btn-attention joystix btn-block",
                    href: "/gift-pro"
                }, "Learn More", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))
            }
            renderLatestBlogPost() {
                return a.createElement("div", {
                    className: "panel panel-default clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Blog"), a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("strong", null, "Latest blog post:"), a.createElement("div", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, a.createElement("a", {
                    target: "_blank",
                    href: this.props.latestBlogPostUrl
                }, this.props.latestBlogPostTitle))))
            }
            renderChallengeFriends() {
                return null
            }
            renderFollowClozemaster() {
                return a.createElement(k.default, null)
            }
            renderPlayOptionsModal() {
                const {aboutToPlayCollection: e, aboutToPlayScope: t, collections: n, listeningTrialExpired: l, playOptions: s, speakingTrialExpired: r, user: o} = this.state
                  , {isSignedIn: i, isSpeakingSkillAvailable: c, targetLanguageCode: d, targetLanguageIso: u, translateTranscribeAvailable: m} = this.props;
                if (!e)
                    return null;
                let h = !1;
                return e.ttsAvailable ? h = !0 : "All" === e.name && ("ready_for_review" === t ? h = n.filter((e => e.numReadyForReview)).every((e => e.ttsAvailable)) : "favorited" === t && (h = n.filter((e => e.numFavorited)).every((e => e.ttsAvailable)))),
                h = h || o.isPro && window.clozemaster.systemTtsAvailable(u, d),
                a.createElement(_.default, {
                    collection: e,
                    isPro: o.isPro,
                    isListeningSkillAvailable: h,
                    isSignedIn: i,
                    isSpeakingSkillAvailable: c,
                    listeningTrialExpired: l,
                    onHidden: () => this.setState({
                        aboutToPlayCollection: null,
                        aboutToPlayScope: null
                    }),
                    playOptions: s,
                    scope: t,
                    speakingTrialExpired: r,
                    targetLanguageIso: u,
                    translateTranscribeAvailable: m
                })
            }
            renderPast7DaysChart() {
                return a.createElement("div", {
                    className: "text-center",
                    style: {
                        clear: "both",
                        position: "relative"
                    }
                }, a.createElement("canvas", {
                    ref: e => this.past7DaysCanvas = e,
                    style: {
                        width: "95%",
                        height: 100,
                        margin: "10px 0"
                    }
                }), this.renderFullHistoryBtn())
            }
            renderFullHistoryBtn() {
                const {dailyStatsUrl: e, user: t} = this.state
                  , {isSignedIn: n} = this.props;
                return a.createElement(T.default, {
                    dailyStatsUrl: e,
                    disabled: !n,
                    style: {
                        position: "absolute",
                        right: 0,
                        top: 10
                    },
                    user: t
                })
            }
            renderReviewSettingsModal() {
                return this.state.reviewSettingsModalVisible ? a.createElement(G.default, {
                    isPro: this.state.user.isPro,
                    onHidden: () => this.setState({
                        reviewSettingsModalVisible: !1
                    }, ( () => this.loadLanguagePairing())),
                    url: this.state.reviewSettingsUrl
                }) : null
            }
            renderMoreStatsModal() {
                return this.state.moreStatsVisible ? a.createElement(V.default, {
                    isPro: this.state.user.isPro,
                    moreStatsUrl: this.state.moreStatsUrl,
                    onHidden: () => this.setState({
                        moreStatsVisible: !1
                    })
                }) : null
            }
            showAddClozeFromWordsToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addClozeFromWordsToCollectionModalVisible: !0
                })
            }
            showAddTextToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addTextToCollectionModalVisible: !0
                })
            }
            showAddFileToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addFileToCollectionModalVisible: !0
                })
            }
            renderAddClozeFromWordsToCollectionModal() {
                const {addSentencesToCollection: e, addClozeFromWordsToCollectionModalVisible: t, collectionsUrl: n, clozeFromWordsUrl: l, user: s} = this.state;
                return t ? a.createElement(c.default, {
                    collection: e,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addClozeFromWordsToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    clozeFromWordsUrl: l,
                    ref: e => this.addClozeFromWordsToCollectionModal = e
                }) : null
            }
            renderAddTextToCollectionModal() {
                const {addSentencesToCollection: e, addTextToCollectionModalVisible: t, collectionsUrl: n, quickClozeUrl: l, user: s} = this.state;
                return t ? a.createElement(d.default, {
                    collection: e,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addTextToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    quickClozeUrl: l,
                    ref: e => this.addTextToCollectionModal = e
                }) : null
            }
            renderAddFileToCollectionModal() {
                const {addSentencesToCollection: e, addFileToCollectionModalVisible: t, collectionsUrl: n, collectionFileImportUrl: l, user: s} = this.state;
                return t ? a.createElement(r.default, {
                    collection: e,
                    collectionFileImportUrl: l,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addFileToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    ref: e => this.addFileToCollectionModal = e
                }) : null
            }
            renderSentenceSearchModal() {
                return this.state.sentenceSearchModalVisible ? a.createElement(h.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.user.isPro,
                    initialSelectedCollectionId: this.state.addSentenceToCollection && this.state.addSentenceToCollection.id,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => {
                        this.updateMyCollections(),
                        this.setState({
                            sentenceSearchModalVisible: !1,
                            addSentenceToCollection: null
                        })
                    }
                    ,
                    url: this.state.clozeSentencesUrl
                }) : null
            }
            renderAddSentenceToCollectionModal() {
                return this.state.addSentenceToCollectionVisible ? a.createElement(i.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    initialSelectedCollectionId: this.state.addSentenceToCollection && this.state.addSentenceToCollection.id,
                    isPro: this.state.user.isPro,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => this.setState({
                        addSentenceToCollectionVisible: !1,
                        addSentenceToCollection: null
                    }),
                    onSentenceAdded: (e, t) => {
                        this.updateCollection(t),
                        this.addSentenceToCollectionModal.reset()
                    }
                    ,
                    ref: e => this.addSentenceToCollectionModal = e
                }) : null
            }
            renderModals() {
                return a.createElement(a.Fragment, null, this.renderPlayOptionsModal(), this.renderManageCollectionModal(), this.renderAddToCollectionModal(), this.renderAddSentenceToCollectionModal(), this.renderAddTextToCollectionModal(), this.renderAddClozeFromWordsToCollectionModal(), this.renderAddFileToCollectionModal(), this.renderFavoritesModal(), this.renderDownloadFavoritesModal(), this.renderReviewSettingsModal(), this.renderSentenceSearchModal(), this.renderMoreStatsModal(), this.renderLanguagePairingSettingsModal(), this.renderDeleteLanguagePairingModal(), this.renderResetProgressModal())
            }
            renderResetProgressModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, targetLanguageFlagIso: n, targetLanguageName: l} = this.props
                  , {collections: s, resetProgressUrl: r} = this.state;
                return a.createElement(H.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    collections: s.filter((e => e.playing)),
                    resetProgressUrl: r,
                    onResetLanguagePairing: () => this.setState({
                        updating: !0
                    }),
                    onResetCollection: () => this.setState({
                        updating: !0
                    }),
                    targetLanguageFlagIso: n,
                    targetLanguageName: l
                })
            }
            renderDeleteLanguagePairingModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props;
                return a.createElement(E.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    languagePairingUrl: n,
                    onDeleteLanguagePairing: () => this.setState({
                        updating: !0
                    }),
                    targetLanguageFlagIso: l,
                    targetLanguageName: s
                })
            }
            renderLanguagePairingSettingsModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props
                  , {gameSettingsUrl: r, progressPerChunk: o, useProgressChunks: i} = this.state;
                return a.createElement(z.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    gameSettingsUrl: r,
                    languagePairingUrl: n,
                    onProgressChunksChange: ({progressPerChunk: e, useProgressChunks: t}) => {
                        this.setState({
                            progressPerChunk: e,
                            useProgressChunks: t
                        })
                    }
                    ,
                    progressPerChunk: o,
                    targetLanguageFlagIso: l,
                    targetLanguageName: s,
                    useProgressChunks: i
                })
            }
            renderControls() {
                const {isSignedIn: e} = this.props;
                return a.createElement("div", {
                    className: "text-right"
                }, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e,
                    id: "manage-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#manage-language-pairing-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cog"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-danger",
                    disabled: !e,
                    id: "reset-progress-btn",
                    "data-toggle": "modal",
                    "data-target": "#reset-progress-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-erase"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-danger",
                    disabled: !e,
                    id: "delete-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#delete-language-pairing-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-trash"
                })))))
            }
            renderOnboarding() {
                return null
            }
            renderMainContent() {
                return this.state.loading ? a.createElement(A.default, null) : a.createElement(S.default, null, this.renderStats(), this.renderPast7DaysChart(), this.renderPanels(), this.renderControls(), this.renderModals(), this.renderOnboarding())
            }
            renderUpdatingOverlay() {
                return this.state.updating ? a.createElement(j.default, null) : null
            }
            renderRightColumn() {
                return this.state.loading ? null : a.createElement("div", {
                    className: "col-xs-12 col-md-3 right-column"
                }, this.renderProPromo(), this.renderDailyReminder(), this.renderDailyGoal(), this.renderGiftPro(), this.renderLatestBlogPost(), this.renderRightColumnAd(), this.renderChallengeFriends(), this.renderFollowClozemaster(), this.renderUpdatingOverlay())
            }
            renderRightColumnAd() {
                const {user: e} = this.state
                  , {isPro: t} = e
                  , {googleAdsEnabled: n} = this.props;
                return t || !n ? null : a.createElement(P.default, null, a.createElement(R.default, null))
            }
            renderPanelsAd() {
                const {user: e} = this.state
                  , {isPro: t} = e
                  , {googleAdsEnabled: n} = this.props;
                return t || !n ? null : a.createElement(P.default, null, a.createElement(M.default, null))
            }
            renderAnonUserPromo() {
                return this.props.isSignedIn ? null : a.createElement("div", {
                    className: "joystix",
                    style: {
                        background: "#464646",
                        color: "#fff",
                        left: 0,
                        padding: "10px 15px",
                        position: "fixed",
                        right: 0,
                        textAlign: "center",
                        top: 0,
                        zIndex: 994
                    }
                }, a.createElement("div", {
                    className: "hidden-xs",
                    style: {
                        left: 10,
                        lineHeight: 1,
                        position: "absolute",
                        top: 2
                    }
                }, a.createElement("a", {
                    href: "/",
                    style: {
                        color: "#fff",
                        fontSize: "3em"
                    }
                }, "M")), "Get in the game! ", a.createElement("a", {
                    className: "btn btn-success",
                    href: "/sign-up"
                }, "Sign up"), " or ", a.createElement("a", {
                    className: "btn btn-success",
                    href: "/login"
                }, "Login"))
            }
            render() {
                return a.createElement("div", {
                    id: "dashboard",
                    className: "container-fluid",
                    style: {
                        maxWidth: 1400
                    }
                }, a.createElement("div", {
                    className: "row",
                    style: {
                        marginTop: 20
                    }
                }, a.createElement("div", {
                    className: "col-xs-12 " + (this.state.loading ? "" : "col-md-9")
                }, a.createElement("div", {
                    className: "pull-right"
                }, this.renderProControls()), a.createElement("h1", {
                    className: "title",
                    style: {
                        marginTop: 0
                    }
                }, a.createElement("span", {
                    className: "languages"
                }, this.props.targetLanguageName, " ", a.createElement("small", null, "from ", this.props.baseLanguageName)), a.createElement("span", {
                    style: {
                        marginLeft: 10
                    }
                }, a.createElement(x.default, {
                    flagIso: this.props.targetLanguageFlagIso,
                    size: 48
                }), a.createElement(x.default, {
                    flagIso: this.props.baseLanguageFlagIso,
                    size: 48
                })), a.createElement("span", {
                    className: "joystix",
                    style: {
                        fontSize: 16,
                        display: "block",
                        marginTop: 4
                    }
                }, "Dashboard")), this.renderMainContent()), this.renderRightColumn()), this.renderAnonUserPromo())
            }
        }
    },
    50408: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(98164)
          , s = n(73898)
          , r = n(40897)
          , o = n(508)
          , i = n(21663);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    phase: "form",
                    text: "",
                    numSentences: "5"
                }
            }
            hide() {
                this.modal.hide()
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    phase: "processing"
                }),
                $.ajax({
                    data: {
                        text: this.state.text,
                        num_sentences: this.state.numSentences
                    },
                    method: "post",
                    url: this.props.clozeFromWordsUrl
                }).done((e => {
                    this.handleCreateData(e)
                }
                )).fail(( () => {
                    this.setState({
                        phase: "form"
                    }),
                    alert("Oh no! There was an error processing the text - sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            handleCreateData(e) {
                if (e.errors)
                    return alert("Oh no! There was an error processing the text: " + e.errors + " Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        phase: "form"
                    }),
                    !1;
                const t = setInterval(( () => {
                    $.ajax({
                        url: e.url
                    }).done((e => {
                        const {error: n, result: a} = e;
                        n && (clearInterval(t),
                        this.setState({
                            phase: "form"
                        }),
                        alert("Oh no! There was an error processing the text: " + n + " - sorry about that. Please try again and let us know if you see this message again.")),
                        a && (clearInterval(t),
                        this.setState({
                            phase: "edit",
                            result: a.map(( (e, t) => ({
                                id: t,
                                ...e
                            })))
                        }))
                    }
                    )).fail(( () => {
                        this.setState({
                            phase: "form"
                        }),
                        alert("Oh no! There was an error processing the text - sorry about that. Please try again and let us know if you see this message again.")
                    }
                    ))
                }
                ), 5e3)
            }
            renderProcessing() {
                return a.createElement(s.default, null)
            }
            renderForm() {
                const {text: e, numSentences: t} = this.state
                  , n = Math.max(e.length - 1e4, 0);
                return a.createElement("form", {
                    onSubmit: this.onSubmit.bind(this)
                }, a.createElement("p", null, "Paste in your list of words separated by comma or newline. Max ", 1e4 .toLocaleString(), " characters."), a.createElement("div", {
                    className: "form-group" + (n ? " has-error" : "")
                }, a.createElement("select", {
                    name: "numSentences",
                    value: t,
                    onChange: e => this.setState({
                        numSentences: e.target.value
                    }),
                    className: "form-control"
                }, a.createElement("option", {
                    value: "1"
                }, "1 sentence per word"), a.createElement("option", {
                    value: "2"
                }, "2 sentences per word"), a.createElement("option", {
                    value: "3"
                }, "3 sentences per word"), a.createElement("option", {
                    value: "4"
                }, "4 sentences per word"), a.createElement("option", {
                    value: "5"
                }, "5 sentences per word"), a.createElement("option", {
                    value: "6"
                }, "6 sentences per word"), a.createElement("option", {
                    value: "7"
                }, "7 sentences per word"), a.createElement("option", {
                    value: "8"
                }, "8 sentences per word"), a.createElement("option", {
                    value: "9"
                }, "9 sentences per word"), a.createElement("option", {
                    value: "10"
                }, "10 sentences per word")), a.createElement("label", {
                    htmlFor: "text"
                }, "Words"), a.createElement(i.A, {
                    className: "form-control",
                    name: "text",
                    onChange: e => this.setState({
                        text: e.target.value
                    }),
                    value: e
                })), !!n && a.createElement("p", {
                    className: "alert alert-danger"
                }, "Too many characters! Over by ", n, "."), a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !!n
                }, "Submit"))
            }
            renderCreator() {
                return a.createElement(l.default, {
                    collection: this.props.collection,
                    onSentencesAdded: this.props.onSentencesAdded,
                    sentences: this.state.result
                })
            }
            renderContent() {
                const {phase: e} = this.state;
                switch (e) {
                case "form":
                    return this.renderForm();
                case "processing":
                    return this.renderProcessing();
                case "edit":
                    return this.renderCreator();
                default:
                    throw new Error("unrecognized phase!")
                }
            }
            render() {
                return a.createElement(r.default, {
                    dialogStyle: "edit" === this.state.phase ? {
                        width: "95%"
                    } : null,
                    footer: a.createElement(o.default, null),
                    onHidden: this.props.onHidden,
                    ref: e => this.modal = e,
                    size: "large",
                    title: "Paste in Words"
                }, this.renderContent())
            }
        }
    },
    66820: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(34527)
          , s = n(98164)
          , r = n(73898)
          , o = n(40897)
          , i = n(508);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    file: null,
                    separator: null,
                    phase: "form"
                }
            }
            hide() {
                this.modal.hide()
            }
            onSubmit(e) {
                if (e.preventDefault(),
                !this.isValidFile())
                    return !1;
                const t = new FormData;
                t.append("file", this.state.file),
                t.append("separator", this.state.separator),
                this.setState({
                    phase: "processing"
                }),
                $.ajax({
                    contentType: !1,
                    dataType: "json",
                    data: t,
                    method: "post",
                    processData: !1,
                    url: this.props.collectionFileImportUrl
                }).done((e => {
                    this.handleCreateData(e)
                }
                )).fail(( () => {
                    this.setState({
                        phase: "form"
                    }),
                    alert("Oh no! There was an error processing the text - sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            handleCreateData(e) {
                if (e.errors)
                    return alert("Oh no! There was an error processing the text: " + e.errors + " Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        phase: "form"
                    }),
                    !1;
                const t = setInterval(( () => {
                    $.ajax({
                        url: e.url
                    }).done((e => {
                        const {error: n, result: a, status: l} = e;
                        if (n)
                            return clearInterval(t),
                            this.setState({
                                phase: "form"
                            }),
                            alert("Oh no! There was an error processing the text: " + n + " - sorry about that. Please try again and let us know if you see this message again."),
                            !1;
                        "complete" === l ? (clearInterval(t),
                        this.setState({
                            phase: "edit",
                            result: a.map(( (e, t) => ({
                                id: t,
                                ...e
                            })))
                        })) : this.setState({
                            phase: "processing",
                            result: a
                        })
                    }
                    )).fail(( () => {
                        this.setState({
                            phase: "form"
                        }),
                        alert("Oh no! There was an error processing the text - sorry about that. Please try again and let us know if you see this message again.")
                    }
                    ))
                }
                ), 3e3)
            }
            isValidFile() {
                const {file: e, separator: t} = this.state;
                return !(!e || e.size > 1e6 || !e.name.match(/\.srt$|\.tsv$|\.csv$/i) || e.name.match(/\.tsv$|\.csv$/i) && !t)
            }
            renderFileErrors() {
                if (!this.state.file)
                    return null;
                let e = "";
                return this.state.file.name.match(/\.srt$|\.tsv$|\.csv$/i) ? this.state.file.size > 1e6 && (e = "Too big! Max 1MB.") : e = "Please select a .srt, .csv, or .tsv file.",
                e ? a.createElement("p", {
                    className: "alert alert-danger"
                }, e) : void 0
            }
            renderProcessing() {
                const {result: e} = this.state;
                return a.createElement(r.default, null, !!e && a.createElement(l.default, {
                    style: {
                        height: 200,
                        marginTop: 10
                    }
                }, e.map(( (e, t) => t + 1 + ". " + e.text)).join("\n")))
            }
            renderCSVOptions() {
                const {file: e, separator: t} = this.state;
                if (e && e.name.match(/\.tsv$|\.csv$/i))
                    return a.createElement("div", {
                        className: "form-group"
                    }, a.createElement("label", {
                        htmlFor: "text"
                    }, "Column separator:"), "\xa0", a.createElement("input", {
                        name: "separator",
                        type: "radio",
                        id: "comma_separator",
                        value: "comma",
                        checked: "comma" === t,
                        onChange: e => this.setState({
                            separator: e.target.value
                        })
                    }), "\xa0", a.createElement("label", {
                        htmlFor: "comma_separator"
                    }, "Comma"), "\xa0", a.createElement("input", {
                        name: "separator",
                        type: "radio",
                        id: "tab_separator",
                        value: "tab",
                        checked: "tab" === t,
                        onChange: e => this.setState({
                            separator: e.target.value
                        })
                    }), "\xa0", a.createElement("label", {
                        htmlFor: "tab_separator"
                    }, "Tab"))
            }
            renderForm() {
                return a.createElement("form", {
                    onSubmit: this.onSubmit.bind(this)
                }, a.createElement("p", null, "Upload your file. Max 1MB."), a.createElement("p", null, "You can edit sentences and choose different cloze words after uploading and before saving."), a.createElement("p", null, "Supported files are SRT", " and TSV/CSV."), a.createElement("p", null, "TSV/CSV should have the following structure:"), a.createElement("p", null, a.createElement("code", null, "Sentence*,Translation,Cloze,Pronunciation,Note"), a.createElement("br", null), "5 columns, Sentence is mandatory. If Cloze is provided, first matching Cloze in Sentence will be used as the cloze word, otherwise a cloze word will be automatically selected for each sentence"), a.createElement("p", null, 'If the sentence itself contains commas please sure to wrap the sentence in quotes, "".'), a.createElement("p", null, "Anki and Readlang cloze formats are supported."), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "text"
                }, "File"), a.createElement("input", {
                    name: "file",
                    type: "file",
                    onChange: e => this.setState({
                        file: e.target.files[0]
                    })
                })), this.renderCSVOptions(), this.renderFileErrors(), a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !this.isValidFile()
                }, "Submit"))
            }
            renderEditor() {
                return a.createElement(s.default, {
                    collection: this.props.collection,
                    onSentencesAdded: this.props.onSentencesAdded,
                    sentences: this.state.result
                })
            }
            renderContent() {
                const {phase: e} = this.state;
                switch (e) {
                case "form":
                    return this.renderForm();
                case "processing":
                    return this.renderProcessing();
                case "edit":
                    return this.renderEditor();
                default:
                    throw new Error("unrecognized phase!")
                }
            }
            render() {
                return a.createElement(o.default, {
                    dialogStyle: "edit" === this.state.phase ? {
                        width: "95%"
                    } : null,
                    footer: a.createElement(i.default, null),
                    onHidden: this.props.onHidden,
                    ref: e => this.modal = e,
                    title: "Import File"
                }, this.renderContent())
            }
        }
    },
    16657: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(98164)
          , s = n(73898)
          , r = n(40897)
          , o = n(508);
        n(61703);
        class i extends a.Component {
            constructor(e) {
                super(e),
                console.log(e),
                this.state = {
                    phase: "form",
                    text: ""
                }
            }
            hide() {
                this.modal.hide()
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    phase: "processing"
                }),
                $.ajax({
                    data: {
                        text: this.state.text
                    },
                    method: "post",
                    url: this.props.quickClozeUrl
                }).done((e => {
                    this.handleCreateData(e)
                }
                )).fail(( () => {
                    this.setState({
                        phase: "form"
                    }),
                    alert("Oh no! There was an error processing the text - sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            handleCreateData(e) {
                if (console.log(e),
                e.errors)
                    return alert("Oh no! There was an error processing the text: " + e.errors + " Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        phase: "form"
                    }),
                    !1;
                const t = setInterval(( () => {
                    $.ajax({
                        url: e.url
                    }).done((e => {
                        const {error: n, result: a} = e;
                        console.log(e),
                        n && (clearInterval(t),
                        this.setState({
                            phase: "form"
                        }),
                        alert("Oh no! There was an error processing the text: " + n + " - sorry about that. Please try again and let us know if you see this message again.")),
                        a && (clearInterval(t),
                        this.setState({
                            phase: "edit",
                            result: a.map(( (e, t) => ({
                                id: t,
                                ...e
                            })))
                        }))
                    }
                    )).fail(( () => {
                        this.setState({
                            phase: "form"
                        }),
                        alert("Oh no! There was an error processing the text - sorry about that. Please try again and let us know if you see this message again.")
                    }
                    ))
                }
                ), 5e3)
            }
            renderProcessing() {
                return a.createElement(s.default, null)
            }
            renderForm() {
                const {text: e} = this.state
                  , t = Math.max(e.length - 1e4, 0);
                return a.createElement("form", {
                    onSubmit: this.onSubmit.bind(this)
                }, a.createElement("p", null, "Paste in your text or list of sentences. Max ", 1e4 .toLocaleString(), " characters."), a.createElement("div", {
                    className: "form-group" + (t ? " has-error" : "")
                }, a.createElement("label", {
                    htmlFor: "text"
                }, "Text"), a.createElement("textarea", {
                    name: "text",
                    className: "form-control",
                    onChange: e => this.setState({
                        text: e.target.value
                    }),
                    value: e
                })), !!t && a.createElement("p", {
                    className: "alert alert-danger"
                }, "Too many characters! Over by ", t, "."), a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !!t
                }, "Submit"))
            }
            renderEditor() {
                return a.createElement(l.default, {
                    collection: this.props.collection,
                    onSentencesAdded: this.props.onSentencesAdded,
                    sentences: this.state.result
                })
            }
            renderContent() {
                const {phase: e} = this.state;
                switch (e) {
                case "form":
                    return this.renderForm();
                case "processing":
                    return this.renderProcessing();
                case "edit":
                    return this.renderEditor();
                default:
                    throw new Error("unrecognized phase!")
                }
            }
            render() {
                return a.createElement(r.default, {
                    backdrop: "static",
                    dialogStyle: "edit" === this.state.phase ? {
                        width: "95%"
                    } : null,
                    footer: a.createElement(o.default, null),
                    onHidden: this.props.onHidden,
                    ref: e => this.modal = e,
                    size: "large",
                    title: "Paste in Text"
                }, this.renderContent())
            }
        }
    },
    44654: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(40897)
          , r = n(508)
          , o = n(61703);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    via: null
                }
            }
            hide() {
                this.modal.hide(...arguments)
            }
            renderOptions() {
                return a.createElement("div", {
                    className: "text-center"
                }, a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    onClick: this.props.onManual
                }, "Manual Entry ", a.createElement(l.default, {
                    name: "chevron-right"
                })), a.createElement("small", null, "Add your own custom sentences to the collection via text input.")), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    onClick: this.props.onSearch
                }, "Search ", a.createElement(l.default, {
                    name: "chevron-right"
                })), a.createElement("small", null, "Search and select sentences from Clozemaster to copy to the collection.")), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    onClick: this.props.onPaste
                }, "Paste in Text ", a.createElement(l.default, {
                    name: "chevron-right"
                })), a.createElement("small", null, "Paste in a text or list of sentences and we'll select a missing word for each.")), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    onClick: this.props.onWords
                }, "Paste in Words ", a.createElement(l.default, {
                    name: "chevron-right"
                })), a.createElement("small", null, "Paste in a list of words and we'll find sentences.")), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    onClick: this.props.onFile
                }, "Upload File ", a.createElement(l.default, {
                    name: "chevron-right"
                })), a.createElement("small", null, "Upload your own CSV/TSV or SRT", " file.")))
            }
            renderContent() {
                return this.props.isPro ? this.renderOptions() : this.renderProPromo()
            }
            renderProPromo() {
                return a.createElement(o.default, {
                    can: "add sentences to their custom cloze-collections by manually entering their own cloze-sentences or search and adding the cloze-sentences available on Clozemaster.",
                    secondary: "Take control of your learning. Get fluent faster."
                })
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement("div", null, a.createElement(r.default, null), a.createElement("small", {
                        style: {
                            display: "block",
                            float: "left",
                            textAlign: "left"
                        }
                    }, "Need a different option?", a.createElement("br", null), a.createElement("a", {
                        href: "/contact",
                        target: "_blank"
                    }, "Let us know"), ".")),
                    onHidden: this.props.onHidden,
                    ref: e => this.modal = e,
                    size: this.props.isPro ? "small" : "",
                    title: "Add Sentences"
                }, this.renderContent())
            }
        }
    },
    98164: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(34527)
          , s = n(73898)
          , r = n(21663)
          , o = n(86956);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    output: null,
                    page: 1,
                    perPage: 50,
                    saving: !1,
                    sentences: e.sentences,
                    total: e.sentences.length,
                    updating: !1
                }
            }
            componentWillUnmount() {
                clearTimeout(this.handleSaveResultDataTimeout)
            }
            saveResult() {
                this.setState({
                    saving: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        creates_only: !0,
                        updates: this.state.sentences.map((e => ({
                            ...e,
                            id: null
                        })))
                    }),
                    method: "post",
                    url: this.props.collection.bulkCollectionClozeSentencesUpsertsUrl
                }).done((e => {
                    this.handleSaveResultData(e)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error uploading the sentences - sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        saving: !1
                    })
                }
                ))
            }
            handleSaveResultData(e) {
                return console.log(e),
                this.setState({
                    output: e.output
                }),
                e.errors ? (alert("Oh no! There was an error - " + e.errors + ". Sorry about that! Please try again and let us know if you see this message again."),
                this.setState({
                    saving: !1
                }),
                !1) : "complete" === e.status ? (this.props.onSentencesAdded(),
                this.setState({
                    saving: !1
                }),
                !1) : void (this.handleSaveResultDataTimeout = setTimeout(( () => {
                    $.ajax({
                        url: e.bulkCollectionClozeSentencesUpsertUrl
                    }).done((e => {
                        this.handleSaveResultData(e)
                    }
                    )).fail(( () => {
                        alert("Oh no! There was an error saving the sentences - sorry about that. Please try again and let us know if you see this message again."),
                        this.setState({
                            saving: !1
                        })
                    }
                    ))
                }
                ), 3e3))
            }
            onTextMouseUp(e, t) {
                if (this.state.saving)
                    return !1;
                const n = window.getSelection().toString();
                n && t.text.replace(/\{\{|\}\}/g, "").match(n) && this.setState({
                    sentences: this.state.sentences.map((e => t.id === e.id ? {
                        ...t,
                        text: t.text.replace(/\{\{|\}\}/g, "").replace(n, "{{" + n + "}}")
                    } : e))
                })
            }
            renderPaging() {
                const {page: e, perPage: t, total: n, updating: l} = this.state;
                return a.createElement(o.default, {
                    onNextClick: () => this.setState({
                        page: this.state.page + 1
                    }),
                    onPrevClick: () => this.setState({
                        page: this.state.page - 1
                    }),
                    page: e,
                    perPage: t,
                    total: n,
                    updating: l
                })
            }
            recalculateSentences() {
                this.setState({
                    total: this.state.sentences.length
                })
            }
            sentenceTextHasError(e) {
                return !e.match(/\{\{.+\}\}/)
            }
            renderOutput() {
                const {output: e, saving: t} = this.state
                  , n = a.createElement(l.default, {
                    style: {
                        height: 200,
                        marginTop: 10
                    }
                }, e.map(( (e, t) => `${t + 1}. ${e}`)).join("\n"));
                return t ? a.createElement(s.default, null, n) : n
            }
            render() {
                const {onlyShowErrors: e, output: t, sentenceIdsWithAnError: n, sentences: l} = this.state
                  , s = Math.ceil(this.state.total / this.state.perPage)
                  , o = this.state.page * this.state.perPage
                  , i = o - this.state.perPage;
                if (t && t.length)
                    return this.renderOutput();
                const c = l.filter((e => this.sentenceTextHasError(e.text)))
                  , d = c.length;
                return a.createElement("div", null, a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: e,
                    disabled: !e && !d,
                    onChange: () => {
                        this.setState({
                            onlyShowErrors: !e,
                            page: 1,
                            sentenceIdsWithAnError: new Set(c.map((e => e.id)))
                        })
                    }
                    ,
                    type: "checkbox"
                }), " Only show sentences with an issue (", d, " sentences)")), a.createElement("table", {
                    className: "table sentences"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    style: {
                        width: "30%"
                    }
                }, "Text"), a.createElement("th", null, "Translation"), a.createElement("th", null, "Pronunciation"), a.createElement("th", null, "Note"), a.createElement("th", null))), a.createElement("tbody", null, (e ? l.filter((e => n.has(e.id))) : l).slice(i, o).map(( (e, t) => a.createElement("tr", {
                    className: this.sentenceTextHasError(e.text) ? "danger" : "",
                    key: e.id
                }, a.createElement("td", {
                    className: this.sentenceTextHasError(e.text) ? "has-error" : ""
                }, a.createElement(r.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "text",
                    onChange: t => this.setState({
                        sentences: l.map((n => n.id === e.id ? {
                            ...e,
                            text: t.target.value
                        } : n))
                    }),
                    value: e.text
                }), a.createElement("small", {
                    onMouseUp: t => this.onTextMouseUp(t, e),
                    style: {
                        display: "block",
                        marginLeft: 13,
                        marginTop: 5
                    }
                }, e.text.split("{{")[0], a.createElement("strong", null, a.createElement("u", null, (e.text.split("{{")[1] || "").split("}}")[0])), e.text.split("}}")[1])), a.createElement("td", null, a.createElement(r.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "translation",
                    onChange: t => this.setState({
                        sentences: l.map((n => n.id === e.id ? {
                            ...e,
                            translation: t.target.value
                        } : n))
                    }),
                    value: e.translation || ""
                })), a.createElement("td", null, a.createElement(r.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "pronunciation",
                    onChange: t => this.setState({
                        sentences: l.map((n => n.id === e.id ? {
                            ...e,
                            pronunciation: t.target.value
                        } : n))
                    }),
                    value: e.pronunciation || ""
                })), a.createElement("td", null, a.createElement(r.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "notes",
                    onChange: t => this.setState({
                        sentences: l.map((n => n.id === e.id ? {
                            ...e,
                            notes: t.target.value
                        } : n))
                    }),
                    value: e.notes || ""
                })), a.createElement("td", null, a.createElement("button", {
                    className: "btn btn-sm btn-danger delete-sentence",
                    disabled: this.state.saving,
                    onClick: () => {
                        confirm("Are you sure you want to delete this sentence?") && this.setState({
                            sentences: l.filter((t => t.id !== e.id))
                        }, ( () => this.recalculateSentences()))
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-trash"
                })))))))), a.createElement("div", {
                    className: "pull-left"
                }, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: e || this.state.saving,
                    onClick: () => this.setState({
                        sentences: this.state.sentences.concat([{
                            id: Math.random(),
                            text: ""
                        }]),
                        page: s
                    }, ( () => this.recalculateSentences()))
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }), " Add Row")), a.createElement("div", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-success joystix",
                    disabled: this.state.saving || !this.state.sentences.every((e => e.text.match(/\{\{.+\}\}/))),
                    onClick: () => this.saveResult()
                }, "Save")), this.renderPaging())
            }
        }
    },
    79715: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    email: ""
                }
            }
            renderSuccessMessage() {
                return this.state.success ? a.createElement("div", {
                    className: "notice success"
                }, a.createElement("strong", null, "Invite sent to:"), " ", a.createElement("span", {
                    className: "email"
                }, this.state.email), a.createElement("br", null), a.createElement("small", null, "Thanks for sharing Clozemaster!")) : null
            }
            renderErrorMessage() {
                return this.state.error ? a.createElement("div", {
                    className: "notice error"
                }, "Please enter a valid email address.") : null
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    error: !1,
                    loading: !0,
                    success: !1
                }),
                $.ajax({
                    data: {
                        email: this.state.email
                    },
                    method: "post",
                    url: this.props.friendInvitesUrl
                }).done((e => {
                    this.setState({
                        error: e.error,
                        loading: !1,
                        success: !e.error
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error sending the email. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            render() {
                return a.createElement("div", {
                    className: "invite-friend panel panel-default clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Challenge Friends"), a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("strong", null, "Send a personal invite email"), a.createElement("form", {
                    className: "display-table",
                    onSubmit: e => this.onSubmit(e),
                    style: {
                        width: "100%"
                    }
                }, a.createElement("div", {
                    className: "display-table-row"
                }, a.createElement("div", {
                    className: "display-table-cell",
                    style: {
                        width: "100%"
                    }
                }, a.createElement("input", {
                    disabled: !this.props.isSignedIn || this.state.loading,
                    className: "form-control",
                    name: "friend_invite[email]",
                    placeholder: "Email address",
                    value: this.state.email,
                    onChange: e => this.setState({
                        email: e.target.value,
                        error: !1,
                        success: !1
                    })
                })), a.createElement("div", {
                    className: "display-table-cell",
                    style: {
                        paddingLeft: 6
                    }
                }, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !this.props.isSignedIn || this.state.loading
                }, "Send")))), this.renderSuccessMessage(), this.renderErrorMessage(), !this.state.success && !this.state.error && a.createElement("small", null, "Fill in your friends\u2019 email address and we\u2019ll send them a personal invite.")))
            }
        }
    },
    70550: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(9830)
          , r = n(50715)
          , o = n(58108);
        function i(e) {
            const {includePopoverHelperBtn: t, perChunk: n, num: i, pct: c, style: d, total: u, type: m} = e
              , h = "playing" === m
              , g = Math.floor(i / n) * n
              , p = i - g
              , b = Math.min(g + n, u)
              , f = p / (b - g) * 100
              , E = f > 30;
            return a.createElement("div", {
                className: "progress",
                style: {
                    height: 28,
                    marginBottom: 0,
                    position: "relative",
                    ...d
                }
            }, a.createElement("div", {
                className: "progress-bar progress-bar-" + (h ? "warning" : "success"),
                "data-toggle": "tooltip",
                style: {
                    fontSize: 16,
                    lineHeight: "28px",
                    width: f + "%"
                },
                title: (h ? "Playing" : "Mastered") + " " + i.toLocaleString() + " sentences (" + c + ")"
            }, a.createElement("small", {
                style: {
                    paddingLeft: E ? 0 : 10
                }
            }, !E && a.createElement("span", null, h ? a.createElement(r.default, null) : a.createElement(s.default, null), " "), i, " / ", b, " ", !!t && a.createElement("button", {
                className: "btn btn-xs btn-link",
                "data-container": "#dashboard",
                "data-placement": "auto top",
                "data-title": "Progress Chunks",
                "data-toggle": "popover",
                "data-trigger": "focus",
                "data-content": (0,
                o.n2)(n),
                style: {
                    color: "#000"
                }
            }, a.createElement(l.default, {
                name: "question-sign"
            })))))
        }
    },
    64688: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(8267)
          , r = n(40727)
          , o = n(9830)
          , i = n(18152)
          , c = n(50715);
        class d extends a.Component {
            render() {
                const {collection: e, isSignedIn: t, progressPerChunk: n, useProgressChunks: d} = this.props;
                return a.createElement(i.default, {
                    className: "cloze-listening-collection"
                }, a.createElement("div", {
                    className: "pull-right hidden-xs"
                }, a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(),
                    className: "btn btn-success btn-lg btn-block joystix"
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center"
                }, "Sign up!")), a.createElement("h2", null, "Cloze-Listening Collection", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": '\n              Cloze-Listening is the ultimate challenge and the best way to improve your listening skills at the intermediate level and above.\n              <br /><br />\n              There are different accents, background noise, and the audio quality is variable - if you can understand and master these sentences, you\'ll have no problem in the real world.\n              <br /><br />\n              Sentences and audio are from Mozilla\'s <a href="https://commonvoice.mozilla.org/en" target="_blank">Common Voice</a> project (contribute if you can!). Translations are machine generated.\n            ',
                    "data-html": "true",
                    "data-title": "Cloze-Listening",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("button", {
                    "data-toggle": "tooltip",
                    "data-title": "Manage Collection",
                    disabled: !t,
                    onClick: () => this.props.manage(),
                    className: "btn btn-default btn-sm manage-collection",
                    style: {
                        marginLeft: 8
                    }
                }, a.createElement(r.default, {
                    name: "list"
                })), a.createElement("small", {
                    style: {
                        display: "block",
                        marginTop: 8
                    }
                }, "Play ", e.numSentences.toLocaleString(), " sentences with native speaker audio.")), a.createElement(s.default, {
                    collection: e,
                    perChunk: n,
                    style: {
                        marginBottom: 10
                    },
                    useChunks: d
                }), a.createElement("div", null, a.createElement("span", {
                    style: {
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(c.default, null), " Playing ", e.numPlaying.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, "sentences "), "(", (0,
                l.tf)(e, "playing"), ")")), a.createElement("span", {
                    style: {
                        marginLeft: 8,
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(o.default, null), " Mastered ", e.numMastered.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, "sentences "), "(", (0,
                l.tf)(e, "mastered"), ")")), a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(),
                    className: "btn btn-success btn-lg btn-block joystix visible-xs",
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center visible-xs",
                    style: {
                        marginTop: 4
                    }
                }, "Sign up!")))
            }
        }
    },
    95779: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(40727)
          , r = (n(9830),
        n(50715));
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    contentVisible: (0,
                    l.B8)("dashboardClozeListeningVisible", !1)
                }
            }
            componentDidUpdate(e, t) {
                this.state.contentVisible !== t.contentVisible && (0,
                l.HL)("dashboardClozeListeningVisible", this.state.contentVisible)
            }
            renderContent() {
                if (!this.state.contentVisible)
                    return null;
                const {numPlaying: e, numReadyForReview: t, uniqueListeningTimeToday: n, uniqueListeningTimePast7Days: o, uniqueListeningTimePast30Days: i, uniqueListeningTimeTotal: c, url: d} = this.props;
                return a.createElement("div", null, a.createElement("hr", null), a.createElement("ul", null, a.createElement("li", null, "Cloze-Listening is the ultimate challenge and the best way to improve your listening skills at the intermediate level and above."), a.createElement("li", null, "Hear the sentence. Then see it with a word missing. Fill in the missing word. Repeat."), a.createElement("li", null, "There are different accents, background noise, and the audio quality is variable - if you can understand and master these sentences, you'll have no problem in the real world."), a.createElement("li", null, "Sentences and audio are from Mozilla's ", a.createElement("a", {
                    href: "https://commonvoice.mozilla.org/en",
                    target: "_blank"
                }, "Common Voice"), " project (contribute if you can!). Translations are by Google Translate. The spaced-repetition help you train your ear more efficiently."), a.createElement("li", null, "Not quite ready for Cloze-Listening? Most collections offer the listening skill option which lets you practice with slower and clearer text-to-speech.")), a.createElement("hr", null), a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement(s.default, {
                    name: "clock-o",
                    type: "fa"
                }), " Today: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(n))), a.createElement("li", null, "Past 7 days: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(o))), a.createElement("li", null, "Past 30 days: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(i))), a.createElement("li", null, "All-Time: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(c)))), a.createElement("hr", null), a.createElement("ul", {
                    className: "list-inline",
                    style: {
                        marginLeft: -10,
                        marginRight: -10
                    }
                }, a.createElement("li", {
                    style: {
                        fontSize: "1.75rem",
                        fontWeight: "bold",
                        paddingLeft: 10,
                        paddingRight: 10
                    }
                }, a.createElement(r.default, null), " Playing: ", e), a.createElement("li", {
                    style: {
                        fontSize: "1.75rem",
                        fontWeight: "bold",
                        paddingLeft: 10,
                        paddingRight: 10
                    }
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "Ready for "), "Review: ", t), a.createElement("li", {
                    style: {
                        fontSize: "1.75rem",
                        fontWeight: "bold",
                        paddingLeft: 10,
                        paddingRight: 10
                    }
                }, a.createElement("a", {
                    className: "btn btn-success joystix",
                    href: d
                }, "Play ", a.createElement(s.default, {
                    name: "chevron-right"
                })))))
            }
            render() {
                return a.createElement("div", {
                    className: "panel panel-default cloze-listening"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-headphones fa-4x",
                    "aria-hidden": "true",
                    style: {
                        marginLeft: 4
                    }
                })), a.createElement("h2", {
                    className: "title"
                }, a.createElement("span", {
                    style: {
                        display: "inline-block",
                        paddingBottom: 4
                    }
                }, "Cloze-Listening"), a.createElement("br", {
                    className: "hidden-xs"
                }), a.createElement("button", {
                    className: "btn btn-default toggle",
                    onClick: () => this.setState({
                        contentVisible: !this.state.contentVisible
                    })
                }, a.createElement(s.default, {
                    name: "chevron-" + (this.state.contentVisible ? "up" : "down")
                })), a.createElement("small", {
                    style: {
                        marginLeft: 8
                    }
                }, "Level up your listening skills with sentences recorded by native speakers. ", a.createElement("button", {
                    className: "btn btn-sm btn-default",
                    "data-content": 'This feature is currently in beta. We\'re still figuring out what will be most useful, and there may be some bugs. Feedback? <a href="/contact" target="blank">Let us know!</a>',
                    "data-html": "true",
                    "data-toggle": "popover"
                }, "BETA"))), this.renderContent()))
            }
        }
    },
    70660: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(21663)
          , s = n(28499);
        class r extends a.Component {
            constructor(e) {
                super(e);
                const t = e.collection || {};
                this.state = {
                    clozemasterApproved: t.clozemasterApproved || !1,
                    description: t.description || "",
                    errors: null,
                    id: t.id || null,
                    isPublic: t.public || !1,
                    loading: !1,
                    name: t.name || "",
                    playOrder: t.playOrder || "",
                    useClozesAsMultipleChoiceOptions: t.useClozesAsMultipleChoiceOptions || !1
                }
            }
            onSubmit(e) {
                e.preventDefault(),
                this.submit()
            }
            submit() {
                this.setState({
                    loading: !0
                });
                const {description: e, id: t, isPublic: n, name: a, playOrder: l, useClozesAsMultipleChoiceOptions: s} = this.state
                  , {collection: r, collectionsUrl: o} = this.props;
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        collection: {
                            description: e,
                            name: a,
                            play_order: l,
                            public: n,
                            use_clozes_as_multiple_choice_options: s
                        }
                    }),
                    method: t ? "patch" : "post",
                    url: t ? r.url : o
                }).done((e => {
                    if (e.errors)
                        return this.setState({
                            errors: e.errors,
                            loading: !1
                        }, ( () => $(".modal").animate({
                            scrollTop: 0
                        }))),
                        !1;
                    const {collection: n} = e;
                    this.setState({
                        id: n.id,
                        loading: !1,
                        name: n.name
                    }, ( () => {
                        this.props[t ? "onUpdate" : "onCreate"](n)
                    }
                    ))
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error saving the collection. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            render() {
                const {clozemasterApproved: e, description: t, errors: n, isPublic: r, loading: o, name: i, playOrder: c, useClozesAsMultipleChoiceOptions: d} = this.state;
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, !o && n && a.createElement("div", {
                    className: "alert alert-danger",
                    role: "alert"
                }, n), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "collection[name]"
                }, "Name"), a.createElement("input", {
                    disabled: o,
                    autoFocus: !0,
                    name: "collection[name]",
                    className: "form-control",
                    value: i,
                    onChange: e => this.setState({
                        name: e.target.value
                    })
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "collection[description]"
                }, "Description (optional)"), a.createElement(l.A, {
                    className: "form-control",
                    name: "collection[description]",
                    onChange: e => this.setState({
                        description: e.target.value
                    }),
                    value: t
                })), a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("strong", null, "Play in order:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, a.createElement(s.default, {
                    checked: !c,
                    label: "Random",
                    name: "collection[play_order]",
                    onChange: e => this.setState({
                        playOrder: e.target.value
                    }),
                    value: ""
                }), a.createElement(s.default, {
                    checked: "id" === c,
                    label: "Added / created at",
                    name: "collection[play_order]",
                    onChange: e => this.setState({
                        playOrder: e.target.value
                    }),
                    value: "id"
                }), a.createElement(s.default, {
                    checked: "difficulty" === c,
                    label: "Difficulty",
                    name: "collection[play_order]",
                    onChange: e => this.setState({
                        playOrder: e.target.value
                    }),
                    value: "difficulty"
                }))), a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("strong", null, "Multiple choice options:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, a.createElement(s.default, {
                    checked: !d,
                    label: "Random words",
                    name: "collection[use_clozes_as_multiple_choice_options]",
                    onChange: e => this.setState({
                        useClozesAsMultipleChoiceOptions: !e.target.checked
                    }),
                    value: "false"
                }), a.createElement(s.default, {
                    checked: d,
                    label: "Cloze words",
                    name: "collection[use_clozes_as_multiple_choice_options]",
                    onChange: e => this.setState({
                        useClozesAsMultipleChoiceOptions: e.target.checked
                    }),
                    value: "true"
                }))), a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("strong", null, "Visibility:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, a.createElement(s.default, {
                    checked: !r,
                    label: "Private",
                    name: "collection[public]",
                    onChange: e => this.setState({
                        isPublic: !e.target.checked
                    }),
                    value: "false"
                }), a.createElement(s.default, {
                    checked: r,
                    label: "Shared",
                    name: "collection[public]",
                    onChange: e => this.setState({
                        isPublic: e.target.checked
                    }),
                    value: "true"
                })), r && a.createElement("p", {
                    className: "alert alert-danger"
                }, "Other users will be able to see and play this collection. Please only share collections with content that you own or that is from the public domain.")), a.createElement("button", {
                    disabled: o,
                    className: "btn btn-success joystix btn-block"
                }, "Save"))
            }
        }
    },
    45133: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(70660)
          , s = n(40727)
          , r = n(40897)
          , o = n(508)
          , i = n(61703);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    deleting: !1
                }
            }
            deleteCollection() {
                if (!confirm("Are you sure? This will delete the collection and all of its sentences and progress. This action cannot be undone."))
                    return null;
                this.setState({
                    deleting: !0
                }),
                $.ajax({
                    method: "delete",
                    url: this.props.collection.url
                }).done((e => {
                    this.modal.hide({
                        onHidden: () => this.props.onDelete(this.props.collection)
                    })
                }
                )).fail(( () => {
                    this.setState({
                        deleting: !1
                    }),
                    alert("Oh no! There was an error deleting the collection. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderDeleteBtn() {
                const e = this.props.collection;
                if (e && e.id)
                    return a.createElement("button", {
                        onClick: () => this.deleteCollection(),
                        className: "btn btn-sm btn-danger",
                        style: {
                            float: "left"
                        }
                    }, a.createElement(s.default, {
                        name: "trash"
                    }))
            }
            renderFooter() {
                return a.createElement(a.Fragment, null, this.renderDeleteBtn(), a.createElement(o.default, {
                    text: "Cancel"
                }))
            }
            renderProPromo() {
                const {proPromoCan: e, proPromoSecondary: t} = this.props;
                return a.createElement(i.default, {
                    can: e || "create, add sentences to, and play their own custom cloze-collections.",
                    secondary: t || "Take control of your learning. Get fluent faster."
                })
            }
            renderContent() {
                return this.props.isPro ? this.state.deleting ? a.createElement("p", null, "Deleting...") : this.renderCollectionEditor() : this.renderProPromo()
            }
            renderCollectionEditor() {
                const {collection: e, collectionsUrl: t, onCreate: n, onDelete: s, onHidden: r, onUpdate: o} = this.props;
                return a.createElement(l.default, {
                    collection: e,
                    collectionsUrl: t,
                    onCreate: e => {
                        n(e),
                        this.modal.hide()
                    }
                    ,
                    onUpdate: e => {
                        o(e),
                        this.modal.hide()
                    }
                })
            }
            render() {
                const {collection: e, isPro: t, onHidden: n} = this.props;
                return a.createElement(r.default, {
                    footer: this.renderFooter(),
                    onHidden: n,
                    ref: e => this.modal = e,
                    size: t ? "small" : "",
                    title: (e && e.id ? "Edit" : "Create") + " Collection"
                }, this.renderContent())
            }
        }
    },
    10447: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(90131)
          , r = n(40727);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    groupingsVisible: (0,
                    l.B8)("dashboardCollectionGroupingsVisible", !1)
                }
            }
            componentDidUpdate(e, t) {
                this.state.groupingsVisible !== t.groupingsVisible && (0,
                l.HL)("dashboardCollectionGroupingsVisible", this.state.groupingsVisible)
            }
            renderGroupings() {
                if (!this.state.groupingsVisible)
                    return null;
                const {collectionGroupings: e, collections: t, isPro: n, isSignedIn: l, manage: r, play: o, progressPerChunk: i, useProgressChunks: c} = this.props
                  , d = t.reduce(( (e, t) => (t.collectionGroupingId && (e[t.collectionGroupingId] = (e[t.collectionGroupingId] || []).concat([t])),
                e)), {});
                return e.map((e => a.createElement("div", {
                    key: e.id
                }, a.createElement("h3", null, e.name, " ", a.createElement("small", null, e.description)), a.createElement("table", {
                    className: "table table-striped text-center"
                }, a.createElement("tbody", null, d[e.id].sort(( (e, t) => (e.presentationOrder || 0) - (t.presentationOrder || 0))).map((e => a.createElement(s.default, {
                    collection: e,
                    isPro: n,
                    isSignedIn: l,
                    key: e.id,
                    manage: r,
                    play: o,
                    progressPerChunk: i,
                    useProgressChunks: c
                }))))))))
            }
            render() {
                return a.createElement("div", {
                    className: "panel panel-default collection-groupings"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-star fa-4x pro-gold",
                    "aria-hidden": "true",
                    style: {
                        marginLeft: 4
                    }
                })), a.createElement("h2", null, "Pro Groupings", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": "Looking for an extra challenge? This where we put out experimental collections for extra practice on special topics. Currently in beta and exclusively for Pro subscribers!",
                    "data-title": "Pro Groupings",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("span", {
                    style: {
                        display: "block",
                        marginTop: 5
                    }
                }, a.createElement("button", {
                    className: "btn btn-default toggle",
                    onClick: () => this.setState({
                        groupingsVisible: !this.state.groupingsVisible
                    })
                }, a.createElement(r.default, {
                    name: "chevron-" + (this.state.groupingsVisible ? "up" : "down")
                })), a.createElement("small", {
                    style: {
                        marginLeft: 8
                    }
                }, "Custom sentence groupings for focused learning."))), this.renderGroupings()))
            }
        }
    },
    99689: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return u
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(8267)
          , r = n(40727)
          , o = n(28852)
          , i = n(9830)
          , c = n(18152)
          , d = n(50715);
        function u({className: e="", collection: t, extraControls: n=null, fallbackDescription: u="", helpText: m=null, isSignedIn: h, manage: g, name: p=null, panelId: b=null, play: f, progressPerChunk: E, useProgressChunks: y}) {
            return a.createElement(c.default, {
                className: `collection-panel ${e}`,
                id: b
            }, a.createElement("div", {
                className: "pull-right hidden-xs"
            }, a.createElement("button", {
                disabled: !h,
                onClick: f,
                className: "btn btn-success btn-lg btn-block joystix"
            }, "Play ", a.createElement(r.default, {
                name: "chevron-right"
            })), !h && a.createElement("div", {
                className: "joystix text-center"
            }, "Sign up!")), a.createElement("h2", null, a.createElement("span", {
                className: "pull-right visible-xs"
            }, n, a.createElement("button", {
                "data-toggle": "tooltip",
                "data-title": "Manage Collection",
                disabled: !h,
                onClick: g,
                className: "btn btn-default btn-sm manage-collection",
                style: {
                    marginLeft: 8
                }
            }, a.createElement(r.default, {
                name: "list"
            }))), p || t.name, !!m && a.createElement("button", {
                className: "btn btn-xs btn-link",
                "data-content": m,
                "data-title": p || t.name,
                "data-toggle": "popover",
                "data-trigger": "focus",
                style: {
                    fontSize: "65%",
                    marginLeft: 8
                }
            }, a.createElement(r.default, {
                name: "question-sign"
            })), a.createElement("small", {
                style: {
                    display: "block",
                    marginTop: 8
                }
            }, t.description || u)), a.createElement(s.default, {
                collection: t,
                perChunk: E,
                style: {
                    marginBottom: 10
                },
                useChunks: y
            }), a.createElement("div", {
                style: {
                    position: "relative"
                }
            }, a.createElement("div", {
                style: {
                    fontSize: "2rem"
                }
            }, a.createElement("strong", {
                style: {
                    marginRight: 8
                }
            }, a.createElement(d.default, null), " Playing: ", t.numPlaying.toLocaleString(), " ", a.createElement("span", {
                className: "hidden-xs"
            }, " / ", t.numSentences.toLocaleString(), " sentences "), "(", (0,
            l.tf)(t, "playing"), ")"), a.createElement("div", {
                className: "visible-xs"
            }), a.createElement("strong", {
                style: {
                    marginRight: 8
                }
            }, a.createElement(i.default, null), " Mastered: ", t.numMastered.toLocaleString(), " (", (0,
            l.tf)(t, "mastered"), ")"), a.createElement("div", {
                className: "visible-xs"
            }), !!t.numMarkedAsKnown && a.createElement("strong", null, a.createElement(o.default, null), " Marked as Known: ", t.numMarkedAsKnown.toLocaleString())), !!t.numPlaying && a.createElement("div", {
                style: {
                    marginTop: 10
                }
            }, "Played today: ", t.numPlayedToday, " / New: ", t.numNewToday, " / Review: ", t.numPlayedToday - t.numNewToday), a.createElement("div", {
                className: "hidden-xs",
                style: {
                    bottom: 0,
                    position: "absolute",
                    right: 0
                }
            }, n, a.createElement("button", {
                disabled: !h,
                onClick: g,
                className: "btn btn-default btn-xs manage-collection",
                style: {
                    marginLeft: 8
                }
            }, a.createElement(r.default, {
                name: "list"
            }), " Manage")), a.createElement("button", {
                disabled: !h,
                onClick: f,
                className: "btn btn-success btn-lg btn-block joystix visible-xs",
                style: {
                    marginTop: 10
                }
            }, "Play ", a.createElement(r.default, {
                name: "chevron-right"
            })), !h && a.createElement("div", {
                className: "joystix text-center visible-xs",
                style: {
                    marginTop: 4
                }
            }, "Sign up!")))
        }
    },
    8267: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(70550);
        n(40727),
        n(9830),
        n(50715);
        function r(e) {
            const {collection: t, perChunk: n, useChunks: r} = e
              , {numMastered: o, numPlaying: i, numSentences: c} = t
              , d = (0,
            l.tf)(t, "playing")
              , u = (0,
            l.tf)(t, "mastered");
            return r ? a.createElement("div", {
                style: e.style || {
                    marginBottom: 10
                }
            }, a.createElement(s.default, {
                includePopoverHelperBtn: !0,
                num: i,
                pct: d,
                perChunk: n,
                total: c,
                type: "playing"
            }), a.createElement(s.default, {
                num: o,
                pct: u,
                perChunk: n,
                total: c,
                type: "mastered"
            })) : a.createElement("div", {
                className: "progress",
                style: e.style
            }, a.createElement("div", {
                className: "progress-bar progress-bar-success progress-bar-striped",
                "data-toggle": "tooltip",
                style: {
                    width: u
                },
                title: t.numMastered.toLocaleString() + " sentences mastered (" + u + ")"
            }), a.createElement("div", {
                className: "progress-bar progress-bar-warning progress-bar-striped",
                "data-toggle": "tooltip",
                style: {
                    width: parseFloat(d) - parseFloat(u) + "%"
                },
                title: t.numPlaying.toLocaleString() + " sentences played (" + d + ")"
            }))
        }
    },
    97729: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40897)
          , s = n(508)
          , r = (n(61703),
        n(92285));
        class o extends a.Component {
            renderContent() {
                const {isPro: e, url: t} = this.props;
                return a.createElement(r.default, {
                    isPro: this.props.isPro,
                    onUpdate: () => this.reviewSettingsModal.hide(),
                    url: this.props.url
                })
            }
            render() {
                const {collectionName: e, onHidden: t} = this.props;
                return a.createElement(l.default, {
                    footer: a.createElement(s.default, {
                        text: "Cancel"
                    }),
                    onHidden: t,
                    ref: e => this.reviewSettingsModal = e,
                    title: `${e} Review Settings`
                }, this.renderContent())
            }
        }
    },
    90131: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return u
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(45133)
          , r = n(8267)
          , o = n(40727)
          , i = n(28852)
          , c = n(9830)
          , d = n(50715);
        class u extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collectionEditorModalVisible: !1,
                    deleted: !1
                }
            }
            renderCollectionEditorModal() {
                return this.state.collectionEditorModalVisible ? a.createElement(s.default, {
                    collection: this.props.collection,
                    isPro: this.props.isPro,
                    onHidden: () => this.setState({
                        collectionEditorModalVisible: !1
                    }),
                    onDelete: this.props.onCollectionDelete,
                    onUpdate: this.props.onCollectionUpdate
                }) : null
            }
            onDeleteSharedCollectionClick() {
                if (!confirm("Are you sure? This will delete all your progress for this collection. THIS ACTION CANNOT BE UNDONE."))
                    return !1;
                this.setState({
                    deleted: !0
                }),
                $.ajax({
                    method: "delete",
                    url: this.props.collection.userCollectionUrl
                }).done(( () => {
                    this.props.onCollectionDelete(this.props.collection)
                }
                )).fail(( () => {
                    this.setState({
                        deleted: !1
                    }),
                    alert("Oh no! There was an error deleting the collection. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderEditableCollectionControl() {
                const {collection: e, editableCollection: t} = this.props;
                return t ? a.createElement("div", null, a.createElement("small", null, a.createElement(o.default, {
                    name: e.public ? "users" : "lock",
                    type: "fa"
                }), " ", e.public ? "Shared" : "Private"), a.createElement("button", {
                    onClick: () => this.setState({
                        collectionEditorModalVisible: !0
                    }),
                    className: "btn btn-xs btn-link edit-collection"
                }, "Edit"), this.renderCollectionEditorModal()) : e.user ? a.createElement("div", null, a.createElement("small", null, "Created by ", a.createElement("a", {
                    href: "/players/" + e.user.username
                }, e.user.username)), " ", a.createElement("button", {
                    className: "btn btn-link btn-xs delete-shared",
                    onClick: () => this.onDeleteSharedCollectionClick()
                }, a.createElement(o.default, {
                    name: "trash"
                }))) : null
            }
            renderPlayBtn() {
                const {collection: e, isPro: t, isSignedIn: n, play: l} = this.props;
                return !e.proOnly && e.type || t ? a.createElement(a.Fragment, null, a.createElement("button", {
                    className: "btn btn-success joystix btn-sm btn-block",
                    disabled: !e.numSentences || !n,
                    onClick: () => l(e)
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !n && a.createElement("span", {
                    style: {
                        display: "block"
                    },
                    className: "joystix text-center"
                }, "Sign up!")) : a.createElement("span", null, a.createElement("a", {
                    className: "btn btn-success joystix btn-sm btn-block disabled",
                    href: "/pro"
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), a.createElement("span", {
                    style: {
                        display: "block"
                    },
                    className: "joystix text-center"
                }, "Pro!"))
            }
            renderProgress() {
                const {add: e, progressPerChunk: t, useProgressChunks: n} = this.props
                  , s = this.props.collection;
                return !s.numSentences && e ? a.createElement("div", {
                    style: {
                        marginTop: 5,
                        textAlign: "right"
                    }
                }, "Add sentences to get started! ", a.createElement("span", {
                    className: "glyphicon glyphicon-arrow-right"
                })) : a.createElement(a.Fragment, null, a.createElement("div", {
                    style: {
                        display: "flex",
                        flexDirection: "row"
                    }
                }, a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, a.createElement("strong", null, s.numSentences.toLocaleString()), " Sentences"), a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    title: "Playing"
                }, a.createElement(d.default, null)), " ", a.createElement("strong", {
                    className: "num-playing"
                }, s.numPlaying.toLocaleString()), " ", a.createElement("small", null, "(", (0,
                l.tf)(s, "playing"), ")")), a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    title: "Mastered"
                }, a.createElement(c.default, null)), " ", a.createElement("strong", {
                    className: "num-mastered"
                }, s.numMastered.toLocaleString()), " ", a.createElement("small", null, "(", (0,
                l.tf)(s, "mastered"), ")")), !!s.numMarkedAsKnown && a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    title: "Marked as Known"
                }, a.createElement(i.default, null)), " ", a.createElement("strong", {
                    className: "num-marked-as-known"
                }, s.numMarkedAsKnown.toLocaleString()))), a.createElement(r.default, {
                    collection: s,
                    perChunk: t,
                    style: Object.assign({
                        marginBottom: 0,
                        marginTop: 4
                    }, n ? null : {
                        height: 10
                    }),
                    useChunks: n
                }), !!s.numPlaying && a.createElement("div", {
                    style: {
                        marginTop: 4
                    }
                }, a.createElement("small", null, "Played today: ", s.numPlayedToday, " / New: ", s.numNewToday, " / Review: ", s.numPlayedToday - s.numNewToday)))
            }
            renderDescriptionControl() {
                const {collection: e} = this.props;
                return e.description ? a.createElement("button", {
                    className: "btn btn-link",
                    "data-placement": "right",
                    "data-content": e.description,
                    "data-html": e.type ? "true" : "false",
                    "data-title": e.name,
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        color: "#000",
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })) : null
            }
            render() {
                if (this.state.deleted)
                    return null;
                const {add: e, controls: t, isSignedIn: n, manage: l} = this.props
                  , s = this.props.collection;
                return a.createElement("tr", {
                    className: "collection collection-table-row"
                }, a.createElement("td", null, a.createElement("div", {
                    className: "flex-collection"
                }, a.createElement("div", {
                    className: "collection-name-container"
                }, a.createElement("div", null, a.createElement("strong", {
                    style: {
                        fontSize: "2rem"
                    }
                }, s.name, this.renderDescriptionControl()), this.renderEditableCollectionControl()), t || s.subname), a.createElement("div", {
                    className: "collection-progress-container"
                }, this.renderProgress()), a.createElement("div", {
                    className: "collection-controls-container"
                }, !!e && a.createElement("div", {
                    style: {
                        paddingRight: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-sm add-sentences",
                    "data-toggle": "tooltip",
                    "data-title": "Add sentences",
                    onClick: () => e(s)
                }, a.createElement(o.default, {
                    name: "plus"
                }))), a.createElement("div", {
                    style: {
                        paddingRight: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-sm manage-collection",
                    "data-toggle": "tooltip",
                    "data-title": "Manage " + s.name,
                    onClick: () => l(s),
                    disabled: !n
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-list"
                }))), a.createElement("div", {
                    className: "collection-play-btn-container"
                }, this.renderPlayBtn())))))
            }
        }
    },
    90721: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        function s(e) {
            return a.createElement("table", {
                className: "table table-striped collections-modal-table"
            }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", null, "Collection"), a.createElement("th", null, "Count"), a.createElement("th", null))), a.createElement("tbody", null, e.collections.slice(0).sort(l.E).map((t => a.createElement("tr", {
                key: t.slug
            }, a.createElement("td", {
                style: {
                    fontSize: "1.5em",
                    fontWeight: "bold"
                }
            }, t.name), a.createElement("td", {
                style: {
                    fontSize: "1.5em"
                }
            }, t[e.attr]), a.createElement("td", {
                style: {
                    width: "25%"
                }
            }, a.createElement("button", {
                className: "btn btn-block joystix " + (e.btnClassName || "btn-default"),
                onClick: () => e.onBtnClick(t)
            }, e.btnText, !!e.btnIcon && a.createElement("span", {
                style: {
                    marginLeft: 8
                }
            }, e.btnIcon))))))))
        }
    },
    51061: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(8267)
          , r = n(40727)
          , o = n(9830)
          , i = n(18152)
          , c = n(50715);
        class d extends a.Component {
            render() {
                const {collection: e, isSignedIn: t, progressPerChunk: n, useProgressChunks: d} = this.props;
                return a.createElement(i.default, {
                    className: "core1k-collection"
                }, a.createElement("div", {
                    className: "pull-right hidden-xs"
                }, a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(),
                    className: "btn btn-success btn-lg btn-block joystix"
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center"
                }, "Sign up!")), a.createElement("h2", null, e.name, " ", a.createElement("button", {
                    "data-toggle": "tooltip",
                    "data-title": "Manage Collection",
                    disabled: !t,
                    onClick: () => this.props.manage(),
                    className: "btn btn-default btn-sm manage-collection"
                }, a.createElement(r.default, {
                    name: "list"
                })), a.createElement("small", {
                    style: {
                        display: "block",
                        marginTop: 8
                    }
                }, e.description || "Play a collection of the most useful sentences everyone needs to know.")), a.createElement(s.default, {
                    collection: e,
                    perChunk: n,
                    style: {
                        marginBottom: 10
                    },
                    useChunks: d
                }), a.createElement("div", null, a.createElement("span", {
                    style: {
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(c.default, null), " Playing ", e.numPlaying.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, " / ", e.numSentences.toLocaleString(), " sentences "), "(", (0,
                l.tf)(e, "playing"), ")")), a.createElement("span", {
                    style: {
                        marginLeft: 8,
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(o.default, null), " Mastered ", e.numMastered.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, "sentences "), "(", (0,
                l.tf)(e, "mastered"), ")")), a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(),
                    className: "btn btn-success btn-lg btn-block joystix visible-xs",
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center visible-xs",
                    style: {
                        marginTop: 4
                    }
                }, "Sign up!")))
            }
        }
    },
    69367: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(28737)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {}
            }
            deleteLanguagePairing() {
                const {languagePairingUrl: e, onDeleteLanguagePairing: t} = this.props;
                t(),
                this.modal.hide(),
                $.ajax({
                    method: "delete",
                    url: e
                }).done(( () => {
                    window.location.href = "/dashboard"
                }
                )).fail(( () => {
                    alert("Oh no! There was an error. Sorry about that. Please refresh the page and try again.")
                }
                ))
            }
            onDeleteClick() {
                confirm("Are you sure? THIS WILL PERMANENTLY DELETE *ALL* YOUR PROGRESS FOR LEARNING " + this.props.targetLanguageName + " FROM " + this.props.baseLanguageName + ".") && this.deleteLanguagePairing()
            }
            render() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, targetLanguageFlagIso: n, targetLanguageName: o} = this.props;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    id: "delete-language-pairing-modal",
                    ref: e => this.modal = e,
                    show: !1,
                    size: "small",
                    title: a.createElement("span", null, a.createElement(l.default, {
                        flagIso: n,
                        size: 24
                    }), " / ", a.createElement(l.default, {
                        flagIso: e,
                        size: 24
                    }))
                }, a.createElement("div", {
                    className: "alert alert-danger",
                    style: {
                        marginBottom: 0
                    }
                }, a.createElement("h4", {
                    style: {
                        marginTop: 0
                    }
                }, "Delete ", o), a.createElement("p", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("strong", null, "Warning!"), " This will delete ", a.createElement("strong", null, a.createElement("u", null, "all")), " your progress for learning ", o, " from ", t, ". ", a.createElement("strong", null, a.createElement("u", null, "This action is permanent and cannot be undone."))), a.createElement("button", {
                    className: "btn btn-danger btn-block",
                    onClick: () => this.onDeleteClick()
                }, "Delete ", o)))
            }
        }
    },
    93337: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(40897)
          , r = n(508)
          , o = n(61703)
          , i = n(18152);
        class c extends a.Component {
            renderContent() {
                return this.props.isPro ? a.createElement(a.Fragment, null, a.createElement("p", null, "Your favorites for ", this.props.collection.name, " will be generated as a ", a.createElement("strong", null, "TSV (Tab Separated Values) file"), "."), a.createElement(i.default, {
                    heading: "How it works"
                }, a.createElement("p", null, "Each line in the TSV file will contain ", a.createElement("strong", null, "4 columns"), " separated by tabs:"), a.createElement("ol", null, a.createElement("li", null, "column 1 contains the sentence"), a.createElement("li", null, "column 2 contains the cloze word"), a.createElement("li", null, "column 3 contains the sentence and cloze word formatted for a cloze type note in Anki, for example: ", a.createElement("code", null, "Clozemaster is ", "{{c1::awesome}}", ".")), a.createElement("li", null, "column 4 contains the translations")), a.createElement("div", null, "This file can then be used to import your favorites into Anki.")), a.createElement(i.default, {
                    heading: "How to import for Anki"
                }, a.createElement("ol", null, a.createElement("li", null, "Open Anki."), a.createElement("li", null, "Go to File then select Import."), a.createElement("li", null, "Select the downloaded TSV file and click 'Open'."), a.createElement("li", null, "Be sure to select Type 'Cloze' and 'Fields separated by: Tab'."), a.createElement("li", null, "Import options are otherwise up to you and the deck you're using. See the column descriptions above for field mappings."), a.createElement("li", null, "Also be sure to see ", a.createElement("a", {
                    href: "http://ankisrs.net/docs/manual.html#importing",
                    target: "_blank"
                }, "the Anki docs"), " for reference."))), a.createElement("p", {
                    className: "text-center"
                }, a.createElement("a", {
                    href: this.props.collection.downloadFavoritesUrl,
                    className: "btn btn-primary btn-lg btn-block download"
                }, a.createElement(l.default, {
                    name: "cloud-download"
                }), " Download"))) : a.createElement(o.default, {
                    can: "favorite sentences and then practice just their favorites or download their favorites (to print out, for import into Anki, etc.).",
                    secondary: "Take control of your learning. Get fluent faster."
                })
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: this.props.onHidden,
                    title: "Download Favorites"
                }, this.renderContent())
            }
        }
    },
    32835: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(8267)
          , r = n(95164)
          , o = n(40727)
          , i = n(9830)
          , c = n(50715);
        class d extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    statsModalVisible: !1
                }
            }
            renderStatsModal() {
                return this.state.statsModalVisible ? a.createElement(r.default, {
                    collection: this.props.fastTrackCollection,
                    onHidden: () => this.setState({
                        statsModalVisible: !1
                    })
                }) : null
            }
            render() {
                const {fastTrackCollection: e, isSignedIn: t, progressPerChunk: n, useProgressChunks: r} = this.props;
                return a.createElement("div", {
                    className: "panel panel-default fast-track"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", null, a.createElement("div", {
                    className: "pull-right hidden-xs"
                }, a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(e),
                    className: "btn btn-success btn-lg btn-block joystix"
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center"
                }, "Sign up!")), a.createElement("h2", null, "Fluency Fast Track", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": "Fast and efficient language learning. Each word in each sentence is matched against a frequency list (a list of words ordered by how often they're likely to occur). The most difficult (least common) word is then selected as the missing word. The Fast Track has one sentence for each missing word, and the sentences are played in order of difficulty, so you're always making progress.",
                    "data-title": "Fluency Fast Track",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("button", {
                    "data-test-id": "manage-fast-track-btn",
                    "data-toggle": "tooltip",
                    "data-title": "Manage Fast Track",
                    disabled: !t,
                    onClick: () => this.props.manage(e),
                    className: "btn btn-default btn-sm",
                    style: {
                        marginLeft: 8
                    }
                }, a.createElement(o.default, {
                    name: "list"
                })), a.createElement("button", {
                    id: "fast-track-stats-btn",
                    "data-toggle": "tooltip",
                    "data-title": "Fast Track Stats",
                    disabled: !t,
                    onClick: () => this.setState({
                        statsModalVisible: !0
                    }),
                    className: "btn btn-default btn-sm",
                    style: {
                        marginLeft: 8
                    }
                }, a.createElement(o.default, {
                    name: "stats"
                })), a.createElement("small", {
                    style: {
                        display: "block",
                        marginTop: 8
                    }
                }, "Play ", e.numSentences.toLocaleString(), " sentences with ", e.numSentences.toLocaleString(), " unique cloze-words in order of difficulty."))), a.createElement(s.default, {
                    collection: e,
                    perChunk: n,
                    useChunks: r
                }), a.createElement("div", null, a.createElement("span", {
                    style: {
                        marginLeft: 8,
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(c.default, null), " Playing ", e.numPlaying.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, " / ", e.numSentences.toLocaleString(), " sentences "), "(", (0,
                l.tf)(e, "playing"), ")")), a.createElement("span", {
                    style: {
                        marginLeft: 8,
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(i.default, null), " Mastered ", e.numMastered.toLocaleString(), " ", "(", (0,
                l.tf)(e, "mastered"), ")"))), a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(e),
                    className: "btn btn-success btn-lg btn-block joystix visible-xs",
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center visible-xs",
                    style: {
                        marginTop: 4
                    }
                }, "Sign up!")), this.renderStatsModal())
            }
        }
    },
    42856: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(99689)
          , s = n(95164)
          , r = n(40727);
        function o(e) {
            const [t,n] = a.useState(!1);
            return a.createElement(a.Fragment, null, a.createElement(l.default, Object.assign({
                extraControls: a.createElement(a.Fragment, null, a.createElement("button", {
                    className: "btn btn-xs btn-default stats-btn",
                    onClick: () => n(!0)
                }, a.createElement(r.default, {
                    name: "stats"
                })), a.createElement("button", {
                    className: "btn btn-sm btn-default stats-btn",
                    onClick: () => n(!0)
                }, a.createElement(r.default, {
                    name: "stats"
                })))
            }, e)), t && a.createElement(s.default, {
                collection: e.collection,
                onHidden: () => n(!1)
            }))
        }
    },
    66203: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(40727)
          , r = n(73898)
          , o = n(8267);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    stats: null
                }
            }
            componentDidMount() {
                this.loadStats()
            }
            loadStats() {
                this.setState({
                    loading: !0
                });
                const {collection: e} = this.props;
                $.ajax({
                    url: e.statsUrl
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loading: !1,
                        stats: e.stats
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the stats. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            render() {
                return this.state.loading ? a.createElement(r.default, null) : a.createElement("div", null, a.createElement("p", null, "Fast Track stats and progress broken down by word frequency / most common words."), a.createElement("p", null, "The missing word for each sentences on the Fast Track is the least common word on a ", a.createElement("a", {
                    href: "https://en.wikipedia.org/wiki/Word_lists_by_frequency",
                    target: "_blank"
                }, "frequency list ", a.createElement(s.default, {
                    name: "new-window"
                })), " for the language. The Fast Track includes one sentence for each missing word, and the sentences are played in order of difficulty for easiest to hardest, or in other words, from most common words to least common."), a.createElement("p", null, "This breakdown shows the number and percent of incorrect answers and aligns with the Most Common Words collections so you can identify where you might want more practice."), a.createElement("div", null, this.state.stats.map((e => a.createElement("div", {
                    className: "frequency-collection",
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("strong", {
                    style: {
                        fontSize: "1.5em"
                    }
                }, e.name), a.createElement(o.default, {
                    style: {
                        height: 10,
                        marginBottom: 5
                    },
                    collection: {
                        numPlaying: e.numPlaying,
                        numMastered: e.numMastered,
                        numSentences: e.numSentences
                    }
                }), a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, "Sentences: ", e.numSentences), a.createElement("li", null, "Playing: ", e.numPlaying, " (", (0,
                l.Xc)(e.numPlaying, e.numSentences), ")"), a.createElement("li", null, "Mastered: ", e.numMastered, " (", (0,
                l.Xc)(e.numMastered, e.numSentences), ")"), a.createElement("li", null, "Total Played: ", e.totalPlayed), a.createElement("li", null, "Total Incorrect: ", e.totalIncorrect, " (", (0,
                l.Xc)(e.totalIncorrect, e.totalPlayed), ")")))))))
            }
        }
    },
    95164: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(66203)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            render() {
                const {collection: e, onHidden: t} = this.props;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: t,
                    size: "large",
                    title: "Fast Track Stats"
                }, a.createElement(l.default, {
                    collection: e
                }))
            }
        }
    },
    24868: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return u
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(8267)
          , r = n(90131)
          , o = n(40727)
          , i = n(28852)
          , c = n(9830)
          , d = n(50715);
        class u extends a.Component {
            constructor(e) {
                super(e)
            }
            componentDidUpdate(e, t) {}
            renderCollections() {
                const {progressPerChunk: e, useProgressChunks: t} = this.props
                  , n = this.props.collections.sort(( (e, t) => e.presentationOrder - t.presentationOrder)).map((n => a.createElement(r.default, {
                    collection: n,
                    isSignedIn: this.props.isSignedIn,
                    key: n.id,
                    manage: this.props.manage,
                    play: this.props.play,
                    progressPerChunk: e,
                    useProgressChunks: t
                })));
                return a.createElement("div", null, a.createElement("table", {
                    className: "table table-striped text-center"
                }, a.createElement("tbody", null, n)))
            }
            playAll() {
                const {collections: e, play: t} = this.props;
                t(e.find((e => e.numPlaying < e.numSentences)) || e.find((e => e.numMastered < e.numSentences)) || e[0])
            }
            render() {
                const {collections: e, hasFastTrackV1Progress: t, progressPerChunk: n, useProgressChunks: r} = this.props
                  , u = {
                    numMarkedAsKnown: 0,
                    numMastered: 0,
                    numPlaying: 0,
                    numSentences: 0
                };
                return e.forEach((e => {
                    u.numMarkedAsKnown += e.numMarkedAsKnown,
                    u.numMastered += e.numMastered,
                    u.numPlaying += e.numPlaying,
                    u.numSentences += e.numSentences
                }
                )),
                a.createElement("div", {
                    className: "panel panel-default fast-track-v2-collections"
                }, a.createElement("div", {
                    className: "panel-body"
                }, !!t && a.createElement("p", {
                    class: "alert alert-success"
                }, a.createElement("strong", null, a.createElement("i", null, "New!")), " We've released a new version of the Fast Track \ud83c\udf89 10,000 sentences split into collections of 1,000 sentences each with almost all new content. Read more ", a.createElement("a", {
                    href: "https://forum.clozemaster.com/t/difference-between-legacy-and-fast-track-fluency/46204/7",
                    target: "_blank"
                }, "here"), ".", a.createElement("br", null), a.createElement("br", null), "And don't worry! The old Fast Track has simply been renamed to the Legacy Fast Track, and it and all your progress can still be found ", a.createElement("strong", null, a.createElement("a", {
                    href: "#legacy-fast-track"
                }, "here")), "."), a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-lg btn-success joystix",
                    onClick: this.playAll.bind(this)
                }, "Play ", a.createElement(o.default, {
                    name: "chevron-right"
                }))), a.createElement("h2", null, "Fluency Fast Track", a.createElement("button", {
                    className: "btn btn-xs btn-link closeable",
                    "data-content": "Fast and efficient language learning. With the Fast Track collections, sentences are played in order of difficulty (ranking on a frequency list from most common to least common words), so you're always making progress.",
                    "data-title": "Fluency Fast Track",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("span", {
                    style: {
                        display: "block",
                        marginTop: 5
                    }
                }, a.createElement("small", null, "Play ", u.numSentences.toLocaleString(), " sentences in order of difficulty."))), a.createElement(s.default, {
                    collection: u,
                    perChunk: n,
                    style: {
                        marginBottom: 10
                    },
                    useChunks: r
                }), a.createElement("div", {
                    style: {
                        fontSize: "2rem",
                        marginBottom: 15
                    }
                }, a.createElement("strong", {
                    style: {
                        marginRight: 8
                    }
                }, a.createElement(d.default, null), " Playing: ", u.numPlaying.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, " / ", u.numSentences.toLocaleString(), " sentences "), "(", (0,
                l.tf)(u, "playing"), ")"), a.createElement("div", {
                    className: "visible-xs"
                }), a.createElement("strong", {
                    style: {
                        marginRight: 8
                    }
                }, a.createElement(c.default, null), " Mastered: ", u.numMastered.toLocaleString(), " (", (0,
                l.tf)(u, "mastered"), ")"), a.createElement("div", {
                    className: "visible-xs"
                }), !!u.numMarkedAsKnown && a.createElement("strong", null, a.createElement(i.default, null), " Marked as Known: ", u.numMarkedAsKnown.toLocaleString())), this.renderCollections()))
            }
        }
    },
    51913: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(90721)
          , s = n(40727)
          , r = n(40897)
          , o = n(508)
          , i = n(61703);
        class c extends a.Component {
            hide() {
                this.modal.hide(...arguments)
            }
            renderContent() {
                if (!this.props.isPro)
                    return a.createElement(i.default, {
                        can: "favorite sentences and then practice just their favorites or download their favorites (to print out, for import into Anki, etc.).",
                        secondary: "Take control of your learning. Get fluent faster."
                    });
                const {action: e, collections: t, onHidden: n, onDownload: r, onPlay: o, onView: c} = this.props
                  , d = t.filter((e => e.numFavorited));
                return a.createElement(a.Fragment, null, "play" === e && a.createElement("button", {
                    className: "btn btn-lg btn-success btn-block joystix",
                    onClick: () => o({
                        name: "All",
                        playWebUrl: this.props.playLanguagePairingUrl
                    })
                }, "Play All ", a.createElement(s.default, {
                    name: "chevron-right"
                })), a.createElement(l.default, {
                    attr: "numFavorited",
                    btnClassName: "play" === e ? "btn-success" : "download" === e ? "btn-primary" : "btn-default",
                    btnIcon: a.createElement(s.default, {
                        name: "play" === e ? "chevron-right" : "download" === e ? "cloud-download" : ""
                    }),
                    btnText: "play" === e ? "Play" : "download" === e ? "Download" : "View",
                    collections: d,
                    onBtnClick: t => "play" === e ? o(t) : "view" === e ? c(t) : r(t)
                }))
            }
            render() {
                return a.createElement(r.default, {
                    footer: a.createElement(o.default, null),
                    onHidden: this.props.onHidden,
                    ref: e => this.modal = e,
                    title: "Favorites"
                }, this.renderContent())
            }
        }
    },
    51813: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            render() {
                return a.createElement("div", {
                    className: "panel panel-default clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Follow Clozemaster"), a.createElement("div", {
                    className: "panel-body text-center follow-clozemaster"
                }, a.createElement("ul", {
                    className: "list-inline",
                    style: {
                        fontSize: "3em"
                    }
                }, a.createElement("li", null, a.createElement("a", {
                    target: "_blank",
                    href: "https://twitter.com/clozemaster"
                }, a.createElement("i", {
                    className: "fa fa-twitter",
                    "aria-hidden": "true"
                }))), a.createElement("li", null, a.createElement("a", {
                    target: "_blank",
                    href: "https://www.reddit.com/r/clozemaster/"
                }, a.createElement("i", {
                    className: "fa fa-reddit-alien",
                    "aria-hidden": "true"
                }))), a.createElement("li", null, a.createElement("a", {
                    target: "_blank",
                    href: "https://www.instagram.com/clozemaster/"
                }, a.createElement("i", {
                    className: "fa fa-instagram",
                    "aria-hidden": "true"
                }))), a.createElement("li", null, a.createElement("a", {
                    target: "_blank",
                    href: "https://www.facebook.com/clozemaster"
                }, a.createElement("i", {
                    className: "fa fa-facebook",
                    "aria-hidden": "true"
                }))), a.createElement("li", null, a.createElement("a", {
                    target: "_blank",
                    href: "https://www.pinterest.com/clozemaster/"
                }, a.createElement("i", {
                    className: "fa fa-pinterest-p",
                    "aria-hidden": "true"
                }))))))
            }
        }
    },
    75445: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(90131)
          , r = n(40727);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    frequencyCollectionsVisible: (0,
                    l.B8)("dashboardFrequencyCollectionsVisible", !1)
                }
            }
            componentDidUpdate(e, t) {
                this.state.frequencyCollectionsVisible !== t.frequencyCollectionsVisible && (0,
                l.HL)("dashboardFrequencyCollectionsVisible", this.state.frequencyCollectionsVisible)
            }
            renderCollections() {
                if (!this.state.frequencyCollectionsVisible)
                    return null;
                const {progressPerChunk: e, useProgressChunks: t} = this.props
                  , n = this.props.collections.sort(( (e, t) => e.presentationOrder - t.presentationOrder)).map((n => a.createElement(s.default, {
                    collection: n,
                    isSignedIn: this.props.isSignedIn,
                    key: n.id,
                    manage: this.props.manage,
                    play: this.props.play,
                    progressPerChunk: e,
                    useProgressChunks: t
                })));
                return a.createElement("div", null, a.createElement("table", {
                    className: "table table-striped text-center"
                }, a.createElement("tbody", null, n)), a.createElement("p", null, a.createElement("span", {
                    style: {
                        fontSize: "1.25em",
                        fontWeight: "bold"
                    }
                }, "Or play sentences from all these collections selected randomly. ", a.createElement("button", {
                    className: "btn btn-success joystix play-all",
                    disabled: !this.props.isSignedIn,
                    onClick: () => this.props.play({
                        name: "All",
                        playWebUrl: this.props.playLanguagePairingWebUrl
                    }, "frequency_collections")
                }, "Play ", a.createElement(r.default, {
                    name: "chevron-right"
                }))), !this.props.isSignedIn && a.createElement("span", {
                    className: "joystix",
                    style: {
                        marginLeft: 4
                    }
                }, "Sign up!")))
            }
            render() {
                return a.createElement("div", {
                    className: "panel panel-default frequency-collections"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-list-ol fa-5x",
                    "aria-hidden": "true"
                })), a.createElement("h2", null, "Most Common Words", a.createElement("button", {
                    className: "btn btn-xs btn-link closeable",
                    "data-content": "Get more practice at your level. Each word in each sentence is matched against a frequency list (a list of words ordered by how often they're likely to occur). The most difficult (least common) word is then selected as the missing word. The sentences are then grouped by their difficulty. Each missing word occurs a maximum of 10 times per collection, so you get plenty of practice in context.",
                    "data-title": "Most Common Words",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("span", {
                    style: {
                        display: "block",
                        marginTop: 5
                    }
                }, a.createElement("button", {
                    className: "btn btn-default toggle",
                    onClick: () => this.setState({
                        frequencyCollectionsVisible: !this.state.frequencyCollectionsVisible
                    })
                }, a.createElement(r.default, {
                    name: "chevron-" + (this.state.frequencyCollectionsVisible ? "up" : "down")
                })), a.createElement("small", {
                    style: {
                        marginLeft: 8
                    }
                }, "Play sentences grouped by difficulty."))), this.renderCollections()))
            }
        }
    },
    71816: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(40897)
          , r = n(508)
          , o = n(61703);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    proPromoModalVisible: !1
                }
            }
            renderProPromoModal() {
                return this.state.proPromoModalVisible ? a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: () => this.setState({
                        proPromoModalVisible: !1
                    }),
                    title: "Daily Stats"
                }, a.createElement(o.default, {
                    primary: a.createElement(a.Fragment, null, "View your full history and all your daily stats with ", a.createElement("span", {
                        className: "joystix"
                    }, "Clozemaster Pro"), "."),
                    secondary: "Take control of your learning. Get fluent faster."
                })) : null
            }
            render() {
                const {dailyStatsUrl: e, disabled: t, style: n, user: s} = this.props;
                if (!e)
                    return null;
                const r = a.createElement(a.Fragment, null, "Full History ", a.createElement(l.default, {
                    name: "history",
                    type: "fa"
                }))
                  , o = Object.assign({
                    className: "btn btn-default btn-xs"
                }, {
                    disabled: t,
                    style: n
                });
                return s && s.isPro ? a.createElement("a", Object.assign({}, o, {
                    href: e
                }), r) : a.createElement(a.Fragment, null, a.createElement("button", Object.assign({}, o, {
                    onClick: () => this.setState({
                        proPromoModalVisible: !0
                    })
                }), r), this.renderProPromoModal())
            }
        }
    },
    44372: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(40897)
          , r = n(508)
          , o = n(61703);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    proPromoModalVisible: !1
                }
            }
            renderProPromoModal() {
                return this.state.proPromoModalVisible ? a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: () => this.setState({
                        proPromoModalVisible: !1
                    }),
                    title: "Daily Stats"
                }, a.createElement(o.default, {
                    primary: a.createElement(a.Fragment, null, "View your full history and all your daily stats with ", a.createElement("span", {
                        className: "joystix"
                    }, "Clozemaster Pro"), "."),
                    secondary: "Take control of your learning. Get fluent faster."
                })) : null
            }
            render() {
                const {dailyStatsUrl: e, disabled: t, style: n, user: s} = this.props;
                if (!e)
                    return null;
                const r = a.createElement(a.Fragment, null, a.createElement(l.default, {
                    name: "history",
                    type: "fa"
                }))
                  , o = Object.assign({
                    className: "btn btn-default btn-lg",
                    "data-toggle": "tooltip",
                    "data-html": !0,
                    title: "<span style='white-space: nowrap;'>Full history</span>"
                }, {
                    disabled: t,
                    style: n
                });
                return s && s.isPro ? a.createElement("a", Object.assign({}, o, {
                    href: e
                }), r) : a.createElement(a.Fragment, null, a.createElement("button", Object.assign({}, o, {
                    onClick: () => this.setState({
                        proPromoModalVisible: !0
                    })
                }), r), this.renderProPromoModal())
            }
        }
    },
    33211: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(18152);
        function s(e) {
            return a.createElement(l.default, null, e.children, a.createElement("small", {
                style: {
                    display: "block",
                    marginTop: 5,
                    textAlign: "center"
                }
            }, a.createElement("a", {
                href: "/pro"
            }, "\ud83d\ude80 Remove ads")))
        }
    },
    94812: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        class s extends a.Component {
            componentDidMount() {
                (0,
                l.RH)(),
                (window.adsbygoogle = window.adsbygoogle || []).push({})
            }
            render() {
                return a.createElement("ins", {
                    className: "adsbygoogle google-panels-ad",
                    style: {
                        display: "block"
                    },
                    "data-ad-client": "ca-pub-7228983401564876",
                    "data-ad-slot": "9034763599",
                    "data-full-width-responsive": "false"
                })
            }
        }
    },
    93719: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        class s extends a.Component {
            componentDidMount() {
                (0,
                l.RH)(),
                (window.adsbygoogle = window.adsbygoogle || []).push({})
            }
            render() {
                return a.createElement("ins", {
                    className: "adsbygoogle google-right-sidebar-ad",
                    "data-ad-client": "ca-pub-7228983401564876",
                    "data-ad-slot": "6855909541",
                    "data-full-width-responsive": "false"
                })
            }
        }
    },
    39576: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(90131)
          , r = n(40727);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    grammarCollectionsVisible: (0,
                    l.B8)("dashboardGrammarCollectionsVisible", !1)
                }
            }
            componentDidUpdate(e, t) {
                this.state.grammarCollectionsVisible !== t.grammarCollectionsVisible && (0,
                l.HL)("dashboardGrammarCollectionsVisible", this.state.grammarCollectionsVisible)
            }
            renderCollections() {
                if (!this.state.grammarCollectionsVisible)
                    return null;
                const {progressPerChunk: e, useProgressChunks: t} = this.props
                  , n = this.props.collections.map((n => a.createElement(s.default, {
                    collection: n,
                    isPro: this.props.isPro,
                    isSignedIn: this.props.isSignedIn,
                    key: n.id,
                    manage: this.props.manage,
                    play: this.props.play,
                    progressPerChunk: e,
                    useProgressChunks: t
                })));
                return a.createElement("table", {
                    className: "table table-striped text-center"
                }, a.createElement("tbody", null, n))
            }
            render() {
                return a.createElement("div", {
                    className: "panel panel-default grammar-collections"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-trophy fa-5x grammar-challenge-trophy pro-gold",
                    "aria-hidden": "true"
                })), a.createElement("h2", null, "Grammar Challenges", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": "Get fluent faster by practicing difficult grammatical skills in context. Grammar is tough. The Grammar Challenges give you all the practice you need to level up and break through those grammar sticking points.",
                    "data-title": "Grammar Challenges",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("span", {
                    style: {
                        display: "block",
                        marginTop: 5
                    }
                }, a.createElement("button", {
                    className: "btn btn-default toggle",
                    onClick: () => this.setState({
                        grammarCollectionsVisible: !this.state.grammarCollectionsVisible
                    })
                }, a.createElement(r.default, {
                    name: "chevron-" + (this.state.grammarCollectionsVisible ? "up" : "down")
                })), a.createElement("small", {
                    style: {
                        marginLeft: 8
                    }
                }, "Master difficult grammar in context."))), this.renderCollections()))
            }
        }
    },
    50227: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(28737)
          , s = n(40897)
          , r = n(508);
        n(58108);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    progressPerChunk: e.progressPerChunk || 100,
                    theme: $("body").hasClass("dark-mode") ? "dark" : "light",
                    useProgressChunks: !0 === e.useProgressChunks
                }
            }
            setDarkMode(e) {
                const {gameSettingsUrl: t} = this.props;
                $.ajax({
                    url: t,
                    data: {
                        settings: {
                            theme: e
                        }
                    },
                    method: "post"
                }).fail(( () => {}
                )),
                this.setState({
                    theme: e
                }, ( () => {
                    $("body").toggleClass("dark-mode", "dark" === this.state.theme)
                }
                ))
            }
            onProgressChunksToggle(e) {
                this.setState({
                    useProgressChunks: "true" === e.target.value
                }, this.saveProgressChunks.bind(this))
            }
            saveProgressChunks({showAlert: e=!1}={}) {
                const {languagePairingUrl: t, onProgressChunksChange: n} = this.props
                  , {progressPerChunk: a, useProgressChunks: l} = this.state;
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        user_language_pairing: {
                            progress_per_chunk: a,
                            use_progress_chunks: l
                        }
                    }),
                    method: "put",
                    url: t
                }).done((t => {
                    if (t.errors)
                        return alert(t.errors),
                        !1;
                    e && alert("Saved!"),
                    n({
                        progressPerChunk: a,
                        useProgressChunks: l
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error saving the changes. Sorry about that. Please try again and please let someone know if you see this message again.")
                }
                ))
            }
            renderBtnGroup({active: e, onClick: t, values: n}) {
                return a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, n.map((n => a.createElement("button", {
                    className: "btn " + (e === n.value ? "btn-success active" : "btn-default"),
                    key: n.value,
                    type: "button",
                    value: n.value,
                    onClick: t
                }, n.label))))
            }
            render() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, targetLanguageFlagIso: n, targetLanguageName: o} = this.props
                  , {progressPerChunk: i, theme: c, useProgressChunks: d} = this.state;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    id: "manage-language-pairing-modal",
                    ref: e => this.modal = e,
                    show: !1,
                    size: "small",
                    title: a.createElement("span", null, a.createElement(l.default, {
                        flagIso: n,
                        size: 24
                    }), " / ", a.createElement(l.default, {
                        flagIso: e,
                        size: 24
                    }))
                }, a.createElement("div", {
                    className: "text-center"
                }, a.createElement("div", {
                    className: "dark-mode"
                }, a.createElement("div", {
                    className: "joystix",
                    style: {
                        marginBottom: 2
                    }
                }, "Dark Mode"), this.renderBtnGroup({
                    active: c,
                    onClick: e => this.setDarkMode(e.target.value),
                    values: [{
                        label: "On",
                        value: "dark"
                    }, {
                        label: "Off",
                        value: "light"
                    }]
                })), a.createElement("div", {
                    className: "progress-chunks",
                    style: {
                        marginTop: 30
                    }
                }, a.createElement("div", {
                    className: "joystix",
                    style: {
                        marginBottom: 2
                    }
                }, "Progress Chunks"), this.renderBtnGroup({
                    active: d,
                    onClick: this.onProgressChunksToggle.bind(this),
                    values: [{
                        label: "On",
                        value: !0
                    }, {
                        label: "Off",
                        value: !1
                    }]
                }), d && a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "form-group",
                    style: {
                        marginBottom: 10,
                        marginTop: 10
                    }
                }, a.createElement("label", {
                    htmlFor: "progressPerChunk",
                    style: {
                        display: "block"
                    }
                }, "Sentences per chunk"), a.createElement("input", {
                    className: "form-control",
                    max: 1e3,
                    min: 10,
                    name: "progressPerChunk",
                    onChange: e => this.setState({
                        progressPerChunk: e.target.value ? parseInt(e.target.value) : e.target.value
                    }),
                    step: 10,
                    style: {
                        display: "inline-block",
                        marginRight: 10,
                        width: 80
                    },
                    type: "number",
                    value: i
                }), a.createElement("button", {
                    className: "btn btn-success joystix",
                    onClick: () => this.saveProgressChunks({
                        showAlert: !0
                    })
                }, "Save"))), a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, `How do you eat an elephant? \ud83d\udc18 One bite at a time. Turning on Progress Chunks will change your progress bars to show your progress in chunks of ${i} sentences at a time. You can also change your chunk size. Turn off Progress Chunks to switch back to the default absolute progress bars.`))))
            }
        }
    },
    25499: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(28737)
          , s = n(40727)
          , r = n(40897)
          , o = n(508);
        n(58108);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    theme: $("body").hasClass("dark-mode") ? "dark" : "light"
                }
            }
            setDarkMode(e) {
                const {gameSettingsUrl: t} = this.props;
                $.ajax({
                    url: t,
                    data: {
                        settings: {
                            theme: e
                        }
                    },
                    method: "post"
                }).fail(( () => {}
                )),
                this.setState({
                    theme: e
                }, ( () => {
                    $("body").toggleClass("dark-mode", "dark" === this.state.theme)
                }
                ))
            }
            renderBtnGroup({active: e, onClick: t, values: n}) {
                return a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, n.map((n => a.createElement("button", {
                    className: "btn " + (e === n.value ? "btn-success active" : "btn-default"),
                    key: n.value,
                    type: "button",
                    value: n.value,
                    onClick: t
                }, n.label))))
            }
            render() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, onDeleteLanguagePairingClick: n, targetLanguageFlagIso: i, targetLanguageName: c} = this.props
                  , {theme: d} = this.state;
                return a.createElement(r.default, {
                    footer: a.createElement("div", {
                        style: {
                            display: "flex",
                            flexDirection: "row",
                            justifyContent: "space-between"
                        }
                    }, a.createElement("button", {
                        className: "btn btn-danger",
                        onClick: n
                    }, a.createElement(s.default, {
                        name: "trash"
                    }), " Delete"), a.createElement(o.default, null)),
                    id: "manage-language-pairing-modal",
                    ref: e => this.modal = e,
                    show: !1,
                    size: "small",
                    title: a.createElement("span", null, a.createElement(l.default, {
                        flagIso: i,
                        size: 24
                    }), " / ", a.createElement(l.default, {
                        flagIso: e,
                        size: 24
                    }), " Settings")
                }, a.createElement("div", {
                    className: "text-center"
                }, a.createElement("div", {
                    className: "dark-mode"
                }, a.createElement("div", {
                    className: "joystix",
                    style: {
                        marginBottom: 2
                    }
                }, "Dark Mode"), this.renderBtnGroup({
                    active: d,
                    onClick: e => this.setDarkMode(e.target.value),
                    values: [{
                        label: "On",
                        value: "dark"
                    }, {
                        label: "Off",
                        value: "light"
                    }]
                }))))
            }
        }
    },
    16279: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(28737)
          , o = n(40897)
          , i = n(508);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    group: "everyone",
                    loading: !0
                }
            }
            componentDidMount() {
                this.loadLeaderboards(),
                $(this.content).tooltip({
                    selector: '[data-toggle="tooltip"]'
                })
            }
            loadLeaderboards() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    url: this.props.leaderboardsUrl
                }).done((e => {
                    const {everyone: t, following: n} = e.leaderboards;
                    console.log(e),
                    this.setState({
                        everyone: t,
                        following: n,
                        loading: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the leaderboards. Please try again, and please let us know if you see this message again.")
                }
                ))
            }
            renderLeaderboardTable(e) {
                return e && e.length ? a.createElement("table", {
                    className: "table table-striped",
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("tbody", null, e.map((e => a.createElement("tr", {
                    key: e.rank
                }, a.createElement("td", null, e.rank, "."), a.createElement("td", {
                    style: {
                        width: "100%"
                    }
                }, a.createElement("a", {
                    href: "/players/" + encodeURI(e.username),
                    className: "joystix"
                }, e.username), a.createElement("sup", {
                    "data-toggle": "tooltip",
                    title: "Level " + e.level
                }, e.level), "" + e.rank === "1" && a.createElement("span", {
                    style: {
                        marginLeft: 4
                    }
                }, "\ud83c\udfc6")), a.createElement("td", null, e.score.toLocaleString())))))) : a.createElement("div", {
                    className: "text-center"
                }, a.createElement("em", null, "No one yet - be the first!"))
            }
            renderLeaderboards() {
                const {group: e} = this.state
                  , {weekly: t, monthly: n, allTime: l} = this.state[e];
                return a.createElement("div", {
                    className: "text-center"
                }, a.createElement("p", {
                    className: "text-right"
                }, a.createElement("span", {
                    className: "btn-group btn-group-sm",
                    role: "group",
                    "aria-label": "Leaderboard users"
                }, a.createElement("button", {
                    className: "btn btn-default " + ("everyone" === e ? "active" : ""),
                    onClick: () => this.setState({
                        group: "everyone"
                    })
                }, "Everyone"), a.createElement("button", {
                    className: "btn btn-default " + ("everyone" === e ? "" : "active"),
                    onClick: () => this.setState({
                        group: "following"
                    })
                }, "Following"))), a.createElement("div", {
                    className: "current-week"
                }, a.createElement("h4", null, "Weekly", a.createElement("br", null), a.createElement("small", null, "Week of ", s()().utc().startOf("isoWeek").format("MMM D"), "-", s()().utc().endOf("isoWeek").format("MMM D"), ", UTC")), this.renderLeaderboardTable(t)), a.createElement("hr", null), a.createElement("div", {
                    className: "current-month"
                }, a.createElement("h4", null, "Monthly", a.createElement("br", null), a.createElement("small", null, "Month of ", s()().utc().startOf("month").format("MMM D"), "-", s()().utc().endOf("month").format("MMM D"), ", UTC")), this.renderLeaderboardTable(n)), a.createElement("hr", null), a.createElement("div", {
                    className: "all-time"
                }, a.createElement("h4", null, "All Time"), this.renderLeaderboardTable(l)))
            }
            renderSocial() {
                const {group: e} = this.state;
                return null
            }
            renderContent() {
                return this.state.loading ? a.createElement("p", {
                    className: "text-center"
                }, "Loading...") : a.createElement(a.Fragment, null, this.renderLeaderboards(), this.renderSocial())
            }
            render() {
                const {baseLanguageFlagIso: e, onHidden: t, targetLanguageFlagIso: n} = this.props;
                return a.createElement(o.default, {
                    footer: a.createElement(i.default, null),
                    onHidden: t,
                    ref: e => this.modal = e,
                    title: a.createElement(a.Fragment, null, a.createElement(r.default, {
                        size: 24,
                        flagIso: n
                    }), " / ", a.createElement(r.default, {
                        size: 24,
                        flagIso: e
                    }), " Leaderboard")
                }, a.createElement("div", {
                    ref: e => this.content = e
                }, this.renderContent()))
            }
        }
    },
    5440: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(16279)
          , s = n(55047)
          , r = n(95503)
          , o = n(58108);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            renderControls() {
                return a.createElement(a.Fragment, null, a.createElement("small", null, "This week in points"), a.createElement("button", {
                    className: "btn btn-xs btn-default btn-block",
                    disabled: !this.props.isSignedIn,
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, "View"))
            }
            renderModal() {
                if (!this.state.modalVisible)
                    return null;
                const {baseLanguageFlagIso: e, leaderboardsUrl: t, rankingsUrl: n, targetLanguageFlagIso: r, useRankingsForLeaderboard: o} = this.props;
                return o ? a.createElement(s.default, {
                    baseLanguageFlagIso: e,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    rankingsUrl: n,
                    targetLanguageFlagIso: r
                }) : a.createElement(l.default, {
                    baseLanguageFlagIso: e,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    leaderboardsUrl: t,
                    targetLanguageFlagIso: r
                })
            }
            renderValue() {
                const {currentWeekLeaderboardRank: e} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("span", {
                    className: "rank"
                }, e ? a.createElement("span", null, e, a.createElement("sup", null, (0,
                o.fG)(e))) : "N/A"))
            }
            render() {
                return a.createElement(r.default, {
                    className: "leaderboard",
                    title: "Leaderboard",
                    value: this.renderValue()
                }, this.renderControls(), this.renderModal())
            }
        }
    },
    14296: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40897)
          , s = n(508)
          , r = n(61703)
          , o = n(58108);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.clozeMasteryColors = ["224,58,48", "150,61,151", "245,130,31", "253,184,39", "97,187,70"],
                this.state = {
                    loading: !0
                }
            }
            componentDidMount() {}
            initGraphs() {
                this.initClozeMasteryGraph(),
                this.initReviewForecastGraph(),
                this.initStatsPerDayGraph()
            }
            initReviewForecastGraph() {
                const {reviewForecast: e} = this.state
                  , t = this.reviewForecastCanvas.getContext("2d")
                  , n = {
                    labels: e.map((e => e.date)),
                    datasets: [{
                        label: "Reviews",
                        fillColor: "rgba(51, 122, 183, 0.4)",
                        strokeColor: "rgba(51, 122, 183, 1)",
                        highlightFill: "rgba(51, 122, 183, 0.8)",
                        highlightStroke: "rgba(51, 122, 183, 1)",
                        data: e.map((e => parseInt(e.count) || 0))
                    }]
                };
                new Chart(t).Bar(n, {
                    tooltipTemplate: "<%= datasetLabel %>: <%= value %>"
                })
            }
            initClozeMasteryGraph() {
                const {clozeMastery: e} = this.state
                  , t = [];
                for (let a = 0, l = 4; a <= l; a++)
                    t.push({
                        color: "rgba(" + this.clozeMasteryColors[a] + ",0.6)",
                        highlight: "rgba(" + this.clozeMasteryColors[a] + ",1)",
                        label: 25 * a + "% Mastered",
                        value: e[a] || 0
                    });
                const n = this.clozeMasteryCanvas.getContext("2d");
                new Chart(n).Doughnut(t, {
                    responsive: !0
                })
            }
            initStatsPerDayGraph() {
                const {statsPerDay: e} = this.state
                  , t = this.statsPerDayCanvas.getContext("2d")
                  , n = {};
                e.forEach((e => {
                    Object.keys(e).forEach((t => {
                        let a = "";
                        t.match(/^num/) && (a = t.match(/[A-Z][a-z]+/g).join(" ")),
                        "timePlayed" === t && (a = "Time Played"),
                        a && (n[a] = n[a] || [],
                        n[a].push(e[t] || 0))
                    }
                    ))
                }
                ));
                const a = ["72,195,117", "96,5,173", "168,120,73", "217,168,173", "232,141,206", "149,144,38", "32,70,58", "78,162,144", "242,71,208", "117,161,205"]
                  , l = {
                    labels: e.map((e => e.date)),
                    datasets: Object.keys(n).map(( (e, t) => {
                        const l = a[t % a.length];
                        return {
                            label: e,
                            fillColor: "rgba(" + l + ",0.2)",
                            strokeColor: "rgba(" + l + ",1)",
                            pointColor: "rgba(" + l + ",1)",
                            pointStrokeColor: "#fff",
                            pointHighlightFill: "#fff",
                            pointHighlightStroke: "rgba(" + l + ",1)",
                            data: n[e]
                        }
                    }
                    ))
                };
                console.log(l);
                new Chart(t).Line(l, {
                    multiTooltipTemplate: "<%= datasetLabel %>: <%= value %>"
                })
            }
            loadStats() {
                if (!this.props.isPro)
                    return !1;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    url: this.props.moreStatsUrl
                }).done((e => {
                    console.log(e);
                    const {clozeMastery: t, reviewForecast: n, statsPerDay: a, totals: l} = e;
                    this.setState({
                        clozeMastery: t,
                        loading: !1,
                        reviewForecast: n,
                        statsPerDay: a,
                        totals: l
                    }, ( () => this.initGraphs()))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading more stats. Please refresh the page and try again, and let us know if you see this message again.")
                }
                ))
            }
            renderReviewForecast() {
                return a.createElement("div", null, a.createElement("h3", {
                    className: "joystix",
                    style: {
                        marginTop: 0
                    }
                }, "Review Forecast"), a.createElement("canvas", {
                    ref: e => this.reviewForecastCanvas = e,
                    style: {
                        width: "100%",
                        height: 300
                    }
                }))
            }
            renderStatsPerDay() {
                return a.createElement("div", null, a.createElement("h3", {
                    className: "joystix"
                }, "Stats Per Day"), a.createElement("canvas", {
                    ref: e => this.statsPerDayCanvas = e,
                    style: {
                        width: "100%",
                        height: 300
                    }
                }))
            }
            renderTotal(e, t) {
                return a.createElement("li", {
                    style: {
                        padding: "0 15px 15px 10px"
                    }
                }, a.createElement("span", {
                    className: "joystix"
                }, e, ":"), " ", t)
            }
            renderTotals() {
                const {totals: e} = this.state
                  , t = parseInt(e.timePlayed) || 0;
                return a.createElement("div", null, a.createElement("h3", {
                    className: "joystix"
                }, "Totals"), a.createElement("ul", {
                    className: "list-inline text-center totals"
                }, this.renderTotal("Played", e.numPlayed), this.renderTotal("Mastered", e.numMastered), this.renderTotal("Correct", e.numCorrect), this.renderTotal("Incorrect", (parseInt(e.numPlayed) || 0) - (parseInt(e.numCorrect) || 0)), this.renderTotal("Multiple Choice", e.numMultipleChoice), this.renderTotal("Text Input", (parseInt(e.numPlayed) || 0) - (parseInt(e.numMultipleChoice) || 0)), this.renderTotal("Listening", e.numListening), this.renderTotal("Speaking", e.numSpeaking), this.renderTotal("Used Hint", e.numUsedHint), this.renderTotal("Time Played", (0,
                o.YS)(t))))
            }
            renderClozeMastery() {
                const {clozeMastery: e} = this.state;
                return a.createElement("div", null, a.createElement("h3", {
                    className: "joystix"
                }, "Cloze Mastery"), a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("canvas", {
                    ref: e => this.clozeMasteryCanvas = e,
                    style: {
                        width: "100%",
                        height: 250
                    }
                })), a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("table", {
                    className: "table table-striped text-center"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    className: "joystix text-center"
                }, "% Mastered"), a.createElement("th", {
                    className: "joystix text-center"
                }, "Count"))), a.createElement("tbody", null, [0, 1, 2, 3, 4].map((t => a.createElement("tr", {
                    key: t
                }, a.createElement("td", {
                    className: "joystix"
                }, 25 * t, "%"), a.createElement("td", null, a.createElement("strong", {
                    style: {
                        color: "rgb(" + this.clozeMasteryColors[t] + ")"
                    }
                }, e[t] || 0))))))))))
            }
            renderProPromo() {
                return a.createElement(r.default, {
                    can: "see even more stats - review forecast, cloze mastery, progress for the past 90-days, and more."
                })
            }
            renderContent() {
                return this.props.isPro ? this.state.loading ? "Loading..." : a.createElement("div", null, this.renderReviewForecast(), a.createElement("hr", null), this.renderTotals(), a.createElement("hr", null), this.renderClozeMastery(), a.createElement("hr", null), this.renderStatsPerDay()) : this.renderProPromo()
            }
            render() {
                return a.createElement(l.default, {
                    className: "more-stats-modal",
                    footer: a.createElement(s.default, {
                        disabled: this.state.loading
                    }),
                    onHidden: this.props.onHidden,
                    onShown: () => this.loadStats(),
                    size: this.props.isPro ? "large" : "",
                    title: "More Stats"
                }, this.renderContent())
            }
        }
    },
    82994: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(45133)
          , r = n(90131)
          , o = n(40727)
          , i = n(86956)
          , c = n(28358);
        class d extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    contentVisible: (0,
                    l.B8)("dashboardMyCollectionsVisible", !1),
                    createCollectionModalVisible: !1,
                    sharedCollectionsModalVisible: !1,
                    page: 1
                }
            }
            componentDidUpdate(e, t) {
                this.state.contentVisible !== t.contentVisible && (0,
                l.HL)("dashboardMyCollectionsVisible", this.state.contentVisible)
            }
            popoverContentStr() {
                return "<p>Take complete control of your studies on Clozemaster - create and play your own sentence collections using sentences from Clozemaster or sentences you add yourself.</p><p>Add sentences manually or by searching and selecting sentences on Clozemaster.</p>"
            }
            renderHeader() {
                return a.createElement("div", null, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginBottom: 15
                    }
                }, a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !this.props.isSignedIn,
                    onClick: () => this.setState({
                        sharedCollectionsModalVisible: !0
                    }),
                    style: {
                        marginRight: 10
                    }
                }, a.createElement(o.default, {
                    name: "users",
                    type: "fa"
                }), " Shared"), a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !this.props.isSignedIn,
                    onClick: () => this.setState({
                        createCollectionModalVisible: !0
                    })
                }, a.createElement(o.default, {
                    name: "plus"
                }), " Create")), a.createElement("h2", null, "Cloze-Collections", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": this.popoverContentStr(),
                    "data-html": "true",
                    "data-title": "Cloze-Collections",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("span", {
                    style: {
                        display: "block",
                        marginTop: 5
                    }
                }, a.createElement("button", {
                    className: "btn btn-default toggle-collections",
                    onClick: () => this.setState({
                        contentVisible: !this.state.contentVisible
                    })
                }, a.createElement(o.default, {
                    name: "chevron-" + (this.state.contentVisible ? "up" : "down")
                })), a.createElement("small", {
                    style: {
                        marginLeft: 8
                    }
                }, "Play shared collections of cloze sentences or create your own!"))))
            }
            renderContent() {
                return this.state.contentVisible ? a.createElement("div", null, !!this.props.teachingUrl && a.createElement("div", {
                    className: "text-right"
                }, "Are you a teacher? Check out our ", a.createElement("a", {
                    href: this.props.teachingUrl
                }, "teaching collections"), "."), this.renderCollections(), this.renderPagination()) : null
            }
            renderPagination() {
                const {collections: e} = this.props
                  , {page: t} = this.state;
                return e.length <= 10 ? null : a.createElement(i.default, {
                    onNextClick: () => this.setState({
                        page: t + 1
                    }),
                    onPrevClick: () => this.setState({
                        page: t - 1
                    }),
                    page: t,
                    perPage: 10,
                    total: e.length
                })
            }
            renderCollections() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.props;
                if (!e || !e.length)
                    return a.createElement("div", null, "None yet!");
                const {page: l} = this.state
                  , s = e.slice(10 * (l - 1), 10 * l).map((e => a.createElement(r.default, {
                    add: this.props.add,
                    collection: e,
                    isPro: this.props.isPro,
                    isSignedIn: this.props.isSignedIn,
                    editableCollection: e.isEditable,
                    key: e.slug,
                    manage: this.props.manage,
                    onCollectionUpdate: this.props.onCollectionUpdate,
                    onCollectionDelete: this.props.onCollectionDelete,
                    play: this.props.play,
                    progressPerChunk: t,
                    useProgressChunks: n
                })));
                return a.createElement("table", {
                    className: "table table-striped text-center"
                }, a.createElement("tbody", null, s))
            }
            renderSharedCollectionsModal() {
                return this.state.sharedCollectionsModalVisible ? a.createElement(c.default, {
                    isPro: this.props.isPro,
                    play: e => this.sharedCollectionsModal.hide({
                        onHidden: () => this.props.play(e)
                    }),
                    onHidden: () => this.setState({
                        sharedCollectionsModalVisible: !1
                    }),
                    ref: e => this.sharedCollectionsModal = e,
                    url: this.props.sharedCollectionsUrl
                }) : null
            }
            renderCreateCollectionModal() {
                return this.state.createCollectionModalVisible ? a.createElement(s.default, {
                    collectionsUrl: this.props.collectionsUrl,
                    isPro: this.props.isPro,
                    onCreate: e => {
                        this.setState({
                            contentVisible: !0
                        }, ( () => this.props.onCollectionCreate(e)))
                    }
                    ,
                    onHidden: () => this.setState({
                        createCollectionModalVisible: !1
                    })
                }) : null
            }
            render() {
                return a.createElement("div", {
                    className: "panel panel-default my-collections"
                }, a.createElement("div", {
                    className: "panel-body"
                }, this.renderHeader(), this.renderContent(), this.renderCreateCollectionModal(), this.renderSharedCollectionsModal()))
            }
        }
    },
    44893: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(8267)
          , r = n(40727)
          , o = n(9830)
          , i = n(18152)
          , c = n(50715);
        class d extends a.Component {
            render() {
                const {collection: e, isSignedIn: t, progressPerChunk: n, useProgressChunks: d} = this.props;
                return a.createElement(i.default, {
                    className: "random-collection"
                }, a.createElement("div", {
                    className: "pull-right hidden-xs"
                }, a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(),
                    className: "btn btn-success btn-lg btn-block joystix"
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center"
                }, "Sign up!")), a.createElement("h2", null, "Random Collection ", a.createElement("button", {
                    "data-toggle": "tooltip",
                    "data-title": "Manage Collection",
                    disabled: !t,
                    onClick: () => this.props.manage(),
                    className: "btn btn-default btn-sm manage-collection"
                }, a.createElement(r.default, {
                    name: "list"
                })), a.createElement("small", {
                    style: {
                        display: "block",
                        marginTop: 8
                    }
                }, "Play ", e.numSentences.toLocaleString(), " sentences in random order.")), a.createElement(s.default, {
                    collection: e,
                    perChunk: n,
                    style: {
                        marginBottom: 10
                    },
                    useChunks: d
                }), a.createElement("div", null, a.createElement("span", {
                    style: {
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(c.default, null), " Playing ", e.numPlaying.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, "sentences "), "(", (0,
                l.tf)(e, "playing"), ")")), a.createElement("span", {
                    style: {
                        marginLeft: 8,
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(o.default, null), " Mastered ", e.numMastered.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, "sentences "), "(", (0,
                l.tf)(e, "mastered"), ")")), a.createElement("button", {
                    disabled: !t,
                    onClick: () => this.props.play(),
                    className: "btn btn-success btn-lg btn-block joystix visible-xs",
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), !t && a.createElement("div", {
                    className: "joystix text-center visible-xs",
                    style: {
                        marginTop: 4
                    }
                }, "Sign up!")))
            }
        }
    },
    55047: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(28737)
          , s = n(40897)
          , r = n(508)
          , o = n(89977);
        class i extends a.Component {
            render() {
                const {baseLanguageFlagIso: e, onHidden: t, targetLanguageFlagIso: n} = this.props;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: t,
                    ref: e => this.modal = e,
                    title: a.createElement(a.Fragment, null, a.createElement(l.default, {
                        size: 24,
                        flagIso: n
                    }), " / ", a.createElement(l.default, {
                        size: 24,
                        flagIso: e
                    }), " Leaderboard")
                }, a.createElement(o.default, this.props))
            }
        }
    },
    92024: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(90721)
          , s = n(28737)
          , r = n(40897)
          , o = n(508);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {}
            }
            resetLanguagePairing() {
                const {onResetLanguagePairing: e, resetProgressUrl: t} = this.props;
                e(),
                this.modal.hide(),
                $.ajax({
                    method: "post",
                    url: t
                }).done(( () => {
                    window.location.href = ""
                }
                )).fail(( () => {
                    alert("Oh no! There was an error. Sorry about that. Please refresh the page and try again.")
                }
                ))
            }
            resetCollectionProgress(e) {
                const {onResetCollection: t} = this.props;
                t(),
                this.modal.hide(),
                $.ajax({
                    method: "post",
                    url: e.resetProgressUrl
                }).done(( () => {
                    window.location.href = ""
                }
                )).fail(( () => {
                    alert("Oh no! There was an error. Sorry about that. Please refresh the page and try again.")
                }
                ))
            }
            onResetCollectionClick(e) {
                confirm("Are you sure? THIS WILL PERMANENTLY RESET YOUR PROGRESS for " + e.name + ". This action cannot be undone.") && this.resetCollectionProgress(e)
            }
            onResetLanguagePairingClick() {
                confirm("Are you sure? THIS WILL PERMANENTLY RESET *ALL* YOUR PROGRESS.") && this.resetLanguagePairing()
            }
            renderCollections() {
                return this.props.collections.length ? a.createElement(a.Fragment, null, a.createElement("hr", null), a.createElement("div", {
                    style: {
                        marginBottom: 0
                    }
                }, a.createElement(l.default, {
                    attr: "numPlaying",
                    btnClassName: "btn-danger btn-sm",
                    btnText: "Reset",
                    collections: this.props.collections,
                    onBtnClick: e => this.onResetCollectionClick(e)
                }))) : null
            }
            render() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, targetLanguageFlagIso: n, targetLanguageName: l} = this.props;
                return a.createElement(r.default, {
                    footer: a.createElement(o.default, null),
                    id: "reset-progress-modal",
                    ref: e => this.modal = e,
                    show: !1,
                    title: a.createElement("span", null, a.createElement(s.default, {
                        flagIso: n,
                        size: 24
                    }), " / ", a.createElement(s.default, {
                        flagIso: e,
                        size: 24
                    }))
                }, a.createElement("div", {
                    className: "alert alert-danger",
                    style: {
                        marginBottom: 0
                    }
                }, a.createElement("h4", {
                    style: {
                        marginTop: 0
                    }
                }, "Reset all ", l, " progress"), a.createElement("p", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("strong", null, "Warning!"), " This will reset ", a.createElement("strong", null, a.createElement("u", null, "all")), " your progress for learning ", l, " from ", t, ". ", a.createElement("strong", null, a.createElement("u", null, "This action is permanent and cannot be undone."))), a.createElement("button", {
                    className: "btn btn-danger btn-block",
                    onClick: () => this.onResetLanguagePairingClick()
                }, "Reset all progress")), this.renderCollections())
            }
        }
    },
    10485: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(90721)
          , s = n(40727)
          , r = n(40897);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            onReviewModalBtnClick() {
                const e = this.props.collections.filter((e => e.numReadyForReview));
                e.length > 1 ? this.setState({
                    modalVisible: !0
                }) : this.props.onPlay(e[0])
            }
            onReviewClick(e) {
                this.modal.hide({
                    onHidden: () => this.props.onPlay(e)
                })
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(r.default, {
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    ref: e => this.modal = e,
                    title: "Ready for Review"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-default btn-block joystix",
                    onClick: () => this.onReviewClick({
                        name: "All",
                        playWebUrl: this.props.playLanguagePairingUrl
                    })
                }, "Review All ", a.createElement(s.default, {
                    name: "chevron-right"
                })), a.createElement(l.default, {
                    attr: "numReadyForReview",
                    btnClassName: "btn-default",
                    btnIcon: a.createElement(s.default, {
                        name: "chevron-right"
                    }),
                    btnText: "Review",
                    collections: this.props.collections.filter((e => e.numReadyForReview)),
                    onBtnClick: e => this.onReviewClick(e)
                })) : null
            }
            render() {
                const {numReadyForReview: e, todayNumReview: t} = this.props;
                return a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-body",
                    style: {
                        height: 128
                    }
                }, a.createElement("h3", {
                    className: "joystix",
                    style: {
                        fontSize: 16,
                        margin: 0
                    }
                }, a.createElement("span", {
                    className: "hidden-xs hidden-md"
                }, "Ready for "), "Review"), a.createElement("div", {
                    className: "joystix",
                    style: {
                        fontSize: "2em"
                    }
                }, t > 0 && 0 === e && a.createElement(a.Fragment, null, "\ud83d\ude4c "), e, t > 0 && 0 === e && a.createElement(a.Fragment, null, " \ud83d\ude4c")), a.createElement("button", {
                    className: "btn btn-default btn-block joystix",
                    disabled: !e,
                    onClick: () => this.onReviewModalBtnClick()
                }, "Review"), this.renderModal()))
            }
        }
    },
    74096: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(68135)
          , s = n(28499);
        const r = function({disabled: e, onChange: t, value: n}) {
            return a.createElement("div", {
                className: "form-inline",
                style: {
                    marginBottom: 15
                }
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "default_max_reviews_per_collection_per_day",
                style: {
                    marginRight: 5
                }
            }, "Max reviews per collection per day"), a.createElement(l.default, {
                checked: null != n && n >= 0,
                disabled: e,
                label: " Enabled",
                name: "default_max_reviews_per_collection_per_day_enabled",
                onChange: e => t(e.target.checked ? 20 : -1),
                style: {
                    marginRight: 5
                }
            }), a.createElement("input", {
                className: "form-control",
                disabled: e || null == n || n < 0,
                name: "default_max_reviews_per_collection_per_day",
                min: "0",
                max: "9999",
                onChange: e => t(e.target.value),
                type: "number",
                value: null == n || n < 0 ? "" : n
            })))
        };
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    alreadyMasteredNextReview: "",
                    defaultMaxReviewsPerCollectionPerDay: null,
                    level0: 0,
                    level1: 1,
                    level2: 10,
                    level3: 30,
                    level4: 180,
                    loading: !0,
                    maxReviewsPerRound: 5,
                    nextReviewFuzzEnabled: !0,
                    reviewsOrderedBy: "next_review ASC"
                }
            }
            componentDidMount() {
                this.loadReviewSettings()
            }
            componentDidUpdate(e, t) {
                t.level4 !== this.state.level4 && this.state.level4 === parseInt(36500) && this.setState({
                    alreadyMasteredNextReview: ""
                })
            }
            loadReviewSettings() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    method: "get",
                    url: this.props.url
                }).done((e => {
                    const {customSettings: t} = e
                      , n = {
                        loading: !1
                    };
                    if (null != t.maxReviewsPerRound && (n.maxReviewsPerRound = t.maxReviewsPerRound),
                    t.nextReviewByLevel)
                        for (let a in t.nextReviewByLevel)
                            n["level" + a] = t.nextReviewByLevel[a];
                    null != t.reviewsOrderedBy && (n.reviewsOrderedBy = t.reviewsOrderedBy),
                    null != t.alreadyMasteredNextReview && (n.alreadyMasteredNextReview = t.alreadyMasteredNextReview),
                    n.defaultMaxReviewsPerCollectionPerDay = t.defaultMaxReviewsPerCollectionPerDay,
                    n.nextReviewFuzzEnabled = t.nextReviewFuzzEnabled,
                    this.setState(n)
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            onSubmit(e) {
                e.preventDefault(),
                this.saveReviewSettings()
            }
            showErrorMessage(e) {
                alert("Oh no! There was an error updating the review settings" + (e ? ": " + e : "") + ". Sorry about that. Please try again and let us know if you see this message again.")
            }
            saveReviewSettings() {
                this.setState({
                    loading: !0
                });
                const {alreadyMasteredNextReview: e, defaultMaxReviewsPerCollectionPerDay: t, level0: n, level1: a, level2: l, level3: s, level4: r, maxReviewsPerRound: o, nextReviewFuzzEnabled: i, reviewsOrderedBy: c} = this.state;
                $.ajax({
                    data: {
                        custom_settings: {
                            already_mastered_next_review: e,
                            default_max_reviews_per_collection_per_day: t,
                            max_reviews_per_round: o,
                            next_review_by_level: {
                                0: n,
                                1: a,
                                2: l,
                                3: s,
                                4: r
                            },
                            next_review_fuzz_enabled: i,
                            reviews_ordered_by: c
                        }
                    },
                    method: "put",
                    url: this.props.url
                }).done((e => {
                    e.errors ? (this.showErrorMessage(e.errors),
                    this.setState({
                        loading: !1
                    })) : this.setState({
                        loading: !1
                    }, ( () => this.props.onUpdate()))
                }
                )).fail(( () => {
                    this.showErrorMessage(),
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            renderIntervalOptions(e) {
                const t = Array.from(Array(30), ( (e, t) => t + 1)).concat(Array.from(Array(12), ( (e, t) => 30 + 5 * (t + 1)))).concat(Array.from(Array(8), ( (e, t) => 90 + 30 * (t + 1)))).concat([365]).map((e => a.createElement("option", {
                    value: e,
                    key: e
                }, e, " days")));
                return 0 === e && t.push(a.createElement("option", {
                    value: "0",
                    key: "0"
                }, "0 days")),
                4 === e && t.push(a.createElement("option", {
                    value: "36500",
                    key: "never"
                }, "Never")),
                t
            }
            renderAlreadyMasteredNextReview() {
                const {alreadyMasteredNextReview: e, level4: t} = this.state;
                return 36500 === parseInt(t) ? null : a.createElement("div", null, a.createElement("p", null, "For sentences answered correctly that are ", a.createElement("strong", null, "already"), " ", a.createElement("span", {
                    className: "joystix"
                }, "100% Mastered"), ":"), a.createElement(s.default, {
                    checked: "srs" === e,
                    id: "already-mastered-next-review-srs",
                    label: "Use an always increasing next review interval with Hard/Normal/Easy buttons after answering to modify the rate of increase",
                    name: "already_mastered_next_review",
                    onChange: e => this.setState({
                        alreadyMasteredNextReview: e.target.value
                    }),
                    value: "srs"
                }), a.createElement(s.default, {
                    checked: "static" === e,
                    id: "already-mastered-next-review-static",
                    label: "Use Hard/Normal/Easy buttons after answering to set next review to 50/100/200% of 100% Mastered review interval setting",
                    name: "already_mastered_next_review",
                    onChange: e => this.setState({
                        alreadyMasteredNextReview: e.target.value
                    }),
                    value: "static"
                }), a.createElement(s.default, {
                    checked: !e,
                    id: "already-mastered-next-review",
                    label: "Always use 100% Mastered review interval setting",
                    name: "already_mastered_next_review",
                    onChange: e => this.setState({
                        alreadyMasteredNextReview: e.target.value
                    }),
                    value: ""
                }))
            }
            render() {
                const {defaultMaxReviewsPerCollectionPerDay: e, loading: t, maxReviewsPerRound: n, nextReviewFuzzEnabled: s, reviewsOrderedBy: o} = this.state;
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("div", {
                    className: "form-inline"
                }, a.createElement("div", {
                    className: "form-group",
                    style: {
                        marginBottom: 15
                    }
                }, a.createElement("label", {
                    htmlFor: "max_reviews_per_round",
                    style: {
                        marginRight: 5
                    }
                }, "Max reviews per round when playing new sentences"), a.createElement("select", {
                    className: "form-control",
                    name: "max_reviews_per_round",
                    disabled: t,
                    value: n,
                    onChange: e => this.setState({
                        maxReviewsPerRound: e.target.value
                    })
                }, [...new Array(51)].map(( (e, t) => a.createElement("option", {
                    key: t,
                    value: t
                }, t)))))), a.createElement("div", {
                    className: "form-inline"
                }, a.createElement("div", {
                    className: "form-group",
                    style: {
                        marginBottom: 15
                    }
                }, a.createElement("label", {
                    htmlFor: "reviews_ordered_by",
                    style: {
                        marginRight: 5
                    }
                }, "Play review sentences ordered by"), a.createElement("select", {
                    className: "form-control",
                    name: "reviews_ordered_by",
                    disabled: t,
                    value: o,
                    onChange: e => this.setState({
                        reviewsOrderedBy: e.target.value
                    })
                }, a.createElement("option", {
                    value: "next_review ASC"
                }, "due date, oldest first"), a.createElement("option", {
                    value: "next_review DESC"
                }, "due date, most recent first"), a.createElement("option", {
                    value: "level ASC"
                }, "percent mastered, 0% first"), a.createElement("option", {
                    value: "level DESC"
                }, "percent mastered, 100% first"), a.createElement("option", {
                    value: "random()"
                }, "random")))), a.createElement(r, {
                    disabled: t,
                    onChange: e => this.setState({
                        defaultMaxReviewsPerCollectionPerDay: e
                    }),
                    value: e
                }), a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-heading joystix text-center"
                }, "Review Intervals"), a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("table", {
                    className: "levels table"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    className: "text-center"
                }, "A sentence that is"), a.createElement("th", null, "will be seen again in"))), a.createElement("tbody", null, [...new Array(5)].map(( (e, n) => a.createElement("tr", {
                    key: n,
                    className: "level"
                }, a.createElement("td", {
                    className: "text-center pct-mastered joystix"
                }, a.createElement("label", {
                    htmlFor: "settings[next_review_by_level][" + n + "][value]"
                }, 25 * n, "% Mastered")), a.createElement("td", null, a.createElement("select", {
                    disabled: t,
                    name: "settings[next_review_by_level][" + n + "][value]",
                    value: this.state["level" + n],
                    onChange: e => this.setState({
                        ["level" + n]: e.target.value
                    }),
                    className: "value form-control"
                }, this.renderIntervalOptions(n)))))))), this.renderAlreadyMasteredNextReview(), a.createElement("hr", null), a.createElement("div", null, a.createElement("p", null, 'If the next interval is \u22658 days in the future, a small amount of "fuzz", a random +/-5% of the interval, can be added to prevent clusters of sentences always coming up for review on the same day.'), a.createElement(l.default, {
                    checked: s,
                    label: "Next review fuzz enabled",
                    name: "settings[next_review_fuzz_enabled]",
                    onChange: e => this.setState({
                        nextReviewFuzzEnabled: e.target.checked
                    })
                })))), a.createElement("button", {
                    className: "btn btn-success btn-block joystix"
                }, "Save"))
            }
        }
    },
    91313: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40897)
          , s = n(508)
          , r = n(61703)
          , o = n(74096);
        class i extends a.Component {
            renderProPromo() {
                return a.createElement(r.default, {
                    can: "customize their review intervals and set the number of reviews per round.",
                    secondary: "Take control of your learning. Get fluent faster."
                })
            }
            renderContent() {
                return this.props.isPro ? a.createElement(o.default, {
                    onUpdate: () => this.reviewSettingsModal.hide(),
                    url: this.props.url
                }) : this.renderProPromo()
            }
            render() {
                return a.createElement(l.default, {
                    footer: a.createElement(s.default, {
                        text: "Cancel"
                    }),
                    onHidden: this.props.onHidden,
                    ref: e => this.reviewSettingsModal = e,
                    title: "Review Settings"
                }, this.renderContent())
            }
        }
    },
    51319: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(90721)
          , s = n(40727)
          , r = n(40897)
          , o = n(95503);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            onReviewModalBtnClick() {
                const e = this.props.collections.filter((e => e.numReadyForReview));
                e.length > 1 ? this.setState({
                    modalVisible: !0
                }) : this.props.onPlay(e[0])
            }
            renderControls() {
                const {numReadyForReview: e} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    onClick: () => this.onReviewModalBtnClick(),
                    className: "btn btn-primary btn-block joystix review default",
                    disabled: !e
                }, "Review", a.createElement(s.default, {
                    name: "chevron-right"
                })), a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    "data-html": "true",
                    title: "Reviews",
                    "data-placement": "auto right",
                    "data-content": 'Clozemaster uses a <a href="https://en.wikipedia.org/wiki/Spaced_repetition" target="_blank">spaced repetition system</a> to help you remember what you learn. Intervals are set to 1 day (25% Mastered), 10 days (50% Mastered), 30 days (75% Mastered), and 180 days (100% Mastered) by default. <a href="/pro">Clozemaster Pro</a> users can customize the intervals. You can also manually master or reset sentences while playing.'
                }, "How reviews work"))
            }
            onReviewClick(e) {
                this.modal.hide({
                    onHidden: () => this.props.onPlay(e)
                })
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(r.default, {
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    ref: e => this.modal = e,
                    title: "Ready for Review"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-primary btn-block joystix",
                    onClick: () => this.onReviewClick({
                        name: "All",
                        playWebUrl: this.props.playLanguagePairingUrl
                    })
                }, "Review All ", a.createElement(s.default, {
                    name: "chevron-right"
                })), a.createElement(l.default, {
                    attr: "numReadyForReview",
                    btnClassName: "btn-primary",
                    btnIcon: a.createElement(s.default, {
                        name: "chevron-right"
                    }),
                    btnText: "Review",
                    collections: this.props.collections.filter((e => e.numReadyForReview)),
                    onBtnClick: e => this.onReviewClick(e)
                })) : null
            }
            render() {
                const {numReadyForReview: e} = this.props;
                return a.createElement(o.default, {
                    className: "review",
                    title: "Ready for Review",
                    value: e
                }, this.renderControls(), this.renderModal())
            }
        }
    },
    79800: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(86956)
          , r = n(58108);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loadingSentences: !1,
                    page: 1,
                    sentences: null,
                    sentencesVisible: !1,
                    total: 0
                }
            }
            componentDidUpdate(e, t) {
                t.sentencesVisible || !this.state.sentencesVisible || this.state.sentences || this.state.loadingSentences || this.loadSentences()
            }
            loadSentences() {
                $.ajax({
                    data: {
                        page: this.state.page
                    },
                    url: this.props.collection.collectionClozeSentencesUrl
                }).done((e => {
                    this.setState({
                        loadingSentences: !1,
                        sentences: e.collectionClozeSentences,
                        total: e.total
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the sentences. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        loadingSentences: !1,
                        page: 1,
                        sentences: null,
                        sentencesVisible: !1
                    })
                }
                ))
            }
            renderSentences() {
                const {loadingSentences: e, page: t, sentences: n, sentencesVisible: l, total: o} = this.state;
                return l ? !n || e ? a.createElement("p", {
                    style: {
                        marginTop: 10
                    }
                }, "Loading sentences...") : a.createElement("div", {
                    className: "sentences-container"
                }, a.createElement("div", {
                    className: "sentences scrollbar-always-visible"
                }, n.map((e => {
                    const t = (0,
                    r.UE)(e.text);
                    return a.createElement("div", {
                        className: "sentence",
                        key: e.id
                    }, a.createElement("div", {
                        className: "text"
                    }, t.preClozeStr, a.createElement("strong", null, a.createElement("u", null, t.cloze)), t.postClozeStr), a.createElement("div", {
                        className: "translation"
                    }, a.createElement("small", null, e.translation)))
                }
                ))), a.createElement(s.default, {
                    onNextClick: () => this.setState({
                        page: t + 1
                    }, ( () => this.loadSentences())),
                    onPrevClick: () => this.setState({
                        page: t - 1
                    }, ( () => this.loadSentences())),
                    page: t,
                    perPage: 20,
                    total: o,
                    updating: e
                }), a.createElement("div", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        sentencesVisible: !1
                    })
                }, "Hide Sentences"))) : null
            }
            render() {
                const {collection: e} = this.props;
                return a.createElement("div", {
                    className: "shared-collection",
                    style: {
                        borderBottom: "1px solid #efefef",
                        marginBottom: 10,
                        paddingBottom: 10
                    }
                }, a.createElement("div", {
                    className: "pull-right"
                }, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        sentencesVisible: !this.state.sentencesVisible
                    }),
                    style: {
                        marginRight: 10,
                        verticalAlign: "top"
                    }
                }, "Sentences"), a.createElement("div", {
                    style: {
                        display: "inline-block",
                        textAlign: "center"
                    }
                }, a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !this.props.isPro,
                    onClick: () => this.props.play(e)
                }, "Play ", a.createElement(l.default, {
                    name: "chevron-right"
                })), !this.props.isPro && a.createElement("div", {
                    className: "joystix"
                }, "Pro!"))), a.createElement("h3", null, e.name), a.createElement("div", null, e.numSentences, " sentences / Created by ", a.createElement("a", {
                    href: e.user.url,
                    target: "_blank"
                }, e.user.username)), a.createElement("div", null, e.description), this.renderSentences())
            }
        }
    },
    28358: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(73898)
          , s = n(40897)
          , r = n(508)
          , o = n(86956)
          , i = n(79800);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collections: [],
                    loading: !0,
                    page: 1
                }
            }
            componentDidMount() {
                this.loadCollections()
            }
            loadCollections() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    url: this.props.url
                }).done((e => {
                    this.setState({
                        collections: e.collections,
                        loading: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the collections. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderSharedCollection(e) {
                return this.props.renderSharedCollection ? this.props.renderSharedCollection(e) : a.createElement(i.default, {
                    collection: e,
                    isPro: this.props.isPro,
                    key: e.id,
                    play: this.props.play
                })
            }
            renderContent() {
                const {collections: e, loading: t, page: n} = this.state;
                if (t)
                    return a.createElement(l.default, null);
                if (!e.length)
                    return a.createElement("h3", {
                        className: "text-center"
                    }, "No shared collections yet! Be the first - create and share your own!");
                return a.createElement("div", {
                    id: "shared-collections-modal"
                }, !this.props.isPro && a.createElement("p", {
                    className: "alert alert-success"
                }, "Only Clozemaster Pro subscribers can play shared collections. ", a.createElement("strong", null, a.createElement("a", {
                    href: "/pro"
                }, "Get Pro today!"))), e.slice(10 * (n - 1), 10 * n).map((e => this.renderSharedCollection(e))), a.createElement(o.default, {
                    onNextClick: () => this.setState({
                        page: n + 1
                    }),
                    onPrevClick: () => this.setState({
                        page: n - 1
                    }),
                    page: n,
                    perPage: 10,
                    total: e.length
                }))
            }
            hide(e) {
                this.modal.hide(e)
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, {
                        text: "Cancel"
                    }),
                    onHidden: this.props.onHidden,
                    ref: e => this.modal = e,
                    size: "large",
                    title: "Shared Collections"
                }, this.renderContent())
            }
        }
    },
    95503: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return a.createElement("div", {
                className: "stat-panel " + e.className
            }, a.createElement("div", {
                className: "title"
            }, e.title), a.createElement("div", {
                className: "value"
            }, e.value), e.children)
        }
    },
    48616: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(40727)
          , r = (n(9830),
        n(18152))
          , o = n(50715);
        class i extends a.Component {
            constructor(e) {
                super(e)
            }
            componentDidUpdate(e, t) {}
            renderContent() {
                const {numPlaying: e, numReadyForReview: t, uniqueListeningTimeToday: n, uniqueListeningTimePast7Days: r, uniqueListeningTimePast30Days: i, uniqueListeningTimeTotal: c, url: d} = this.props;
                return a.createElement("div", null, a.createElement("hr", null), a.createElement("ul", null, a.createElement("li", null, "Cloze-Listening is the ultimate challenge and the best way to improve your listening skills at the intermediate level and above."), a.createElement("li", null, "Hear the sentence. Then see it with a word missing. Fill in the missing word. Repeat."), a.createElement("li", null, "There are different accents, background noise, and the audio quality is variable - if you can understand and master these sentences, you'll have no problem in the real world."), a.createElement("li", null, "Sentences and audio are from Mozilla's ", a.createElement("a", {
                    href: "https://commonvoice.mozilla.org/en",
                    target: "_blank"
                }, "Common Voice"), " project (contribute if you can!). Translations are by Google Translate. The spaced-repetition help you train your ear more efficiently."), a.createElement("li", null, "Not quite ready for Cloze-Listening? Most collections offer the listening skill option which lets you practice with slower and clearer text-to-speech.")), a.createElement("hr", null), a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement(s.default, {
                    name: "clock-o",
                    type: "fa"
                }), " Today: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(n))), a.createElement("li", null, "Past 7 days: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(r))), a.createElement("li", null, "Past 30 days: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(i))), a.createElement("li", null, "All-Time: ", a.createElement("span", {
                    className: "joystix"
                }, (0,
                l.YS)(c)))), a.createElement("hr", null), a.createElement("ul", {
                    className: "list-inline",
                    style: {
                        marginLeft: -10,
                        marginRight: -10
                    }
                }, a.createElement("li", {
                    style: {
                        fontSize: "1.75rem",
                        fontWeight: "bold",
                        paddingLeft: 10,
                        paddingRight: 10
                    }
                }, a.createElement(o.default, null), " Playing: ", e), a.createElement("li", {
                    style: {
                        fontSize: "1.75rem",
                        fontWeight: "bold",
                        paddingLeft: 10,
                        paddingRight: 10
                    }
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "Ready for "), "Review: ", t), a.createElement("li", {
                    style: {
                        fontSize: "1.75rem",
                        fontWeight: "bold",
                        paddingLeft: 10,
                        paddingRight: 10
                    }
                }, a.createElement("a", {
                    className: "btn btn-success joystix",
                    href: d
                }, "Play ", a.createElement(s.default, {
                    name: "chevron-right"
                })))))
            }
            render() {
                return a.createElement(r.default, null, a.createElement("div", {
                    className: "tw-text-5xl tw-font-bold"
                }, "Cloze-Listening"), a.createElement("p", null, "Level up your listening skills with sentences recorded by native speakers. ", a.createElement("button", {
                    className: "btn btn-sm btn-default",
                    "data-content": 'This feature is currently in beta. We\'re still figuring out what will be most useful, and there may be some bugs. Feedback? <a href="/contact" target="blank">Let us know!</a>',
                    "data-html": "true",
                    "data-toggle": "popover"
                }, "BETA")), this.renderContent())
            }
        }
    },
    16898: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(64225)
          , s = n(40727)
          , r = n(18152);
        function o({activeMobilePanels: e, hoursLeft: t, numPointsToday: n, pointsPerDay: o, updateUrl: i}) {
            const [c,d] = a.useState(!1)
              , [u,m] = a.useState(o);
            let h = null;
            return a.createElement(r.default, {
                className: `tw-mb-0 ${1 === e ? "tw-hidden" : ""} md:tw-block`,
                bodyClassName: "tw-p-4"
            }, a.createElement("div", {
                className: "tw-flex tw-flex-row"
            }, a.createElement("div", {
                className: "tw-font-bold tw-flex-1 tw-uppercase"
            }, "Daily Goal"), u && a.createElement("button", {
                className: "btn btn-default btn-xs",
                onClick: () => d(!0)
            }, a.createElement(s.default, {
                name: "cog"
            }))), u && a.createElement(a.Fragment, null, a.createElement("div", {
                className: "tw-my-2.5"
            }, a.createElement("span", {
                className: "joystix"
            }, a.createElement("span", {
                className: "tw-text-4xl " + (n >= u ? "tw-color-success" : "")
            }, n), " / ", u)), a.createElement("div", null, "Points today")), !u && a.createElement(a.Fragment, null, a.createElement("div", null, "Learning a language requires practice every day. Stay motivated!"), a.createElement("button", {
                className: "btn btn-default joystix btn-xs btn-block tw-mt-2",
                onClick: () => d(!0)
            }, "Set ", a.createElement("span", {
                className: "tw-hidden sm:tw-inline"
            }, "a daily "), "goal")), c && a.createElement(l.default, {
                onHidden: () => d(!1),
                onUpdate: ({pointsPerDay: e}) => {
                    m(e),
                    h.hide()
                }
                ,
                pointsPerDay: u,
                ref: e => h = e,
                targetLanguageName: "",
                updateUrl: i
            }))
        }
    },
    22267: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(18152)
          , r = n(55047)
          , o = n(58108);
        function i({activeMobilePanels: e, baseLanguageFlagIso: t, currentWeekLeaderboardRank: n, rankingsUrl: i, targetLanguageFlagIso: c}) {
            const [d,u] = a.useState(!1);
            return a.createElement(s.default, {
                className: `tw-mb-0 ${0 === e ? "tw-hidden" : ""} md:tw-block`,
                bodyClassName: "tw-p-4"
            }, a.createElement("div", {
                className: "tw-flex tw-flex-row tw-justify-between"
            }, a.createElement("span", {
                className: "tw-font-bold tw-uppercase"
            }, "Leaderboard"), a.createElement("span", {
                "data-toggle": "tooltip",
                title: "This week in points, UTC"
            }, a.createElement(l.default, {
                name: "question-sign"
            }))), a.createElement("div", {
                className: "joystix tw-my-2.5"
            }, a.createElement("span", {
                className: "tw-text-4xl"
            }, n ? n.toLocaleString() : "N/A"), n && (0,
            o.fG)(n)), a.createElement("button", {
                className: "btn btn-default btn-block joystix btn-xs",
                onClick: () => u(!0)
            }, "View"), d && a.createElement(r.default, {
                baseLanguageFlagIso: t,
                onHidden: () => u(!1),
                rankingsUrl: i,
                targetLanguageFlagIso: c
            }))
        }
    },
    68738: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(90721)
          , s = n(40727)
          , r = n(40897)
          , o = n(18152);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            onReviewModalBtnClick() {
                const e = this.props.collections.filter((e => e.numReadyForReview));
                e.length > 1 ? this.setState({
                    modalVisible: !0
                }) : this.props.onPlay(e[0])
            }
            onReviewClick(e) {
                this.modal.hide({
                    onHidden: () => this.props.onPlay(e)
                })
            }
            renderModal() {
                return this.state.modalVisible ? a.createElement(r.default, {
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    ref: e => this.modal = e,
                    title: "Ready for Review"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-success btn-block joystix",
                    onClick: () => this.onReviewClick({
                        name: "All",
                        playWebUrl: this.props.playLanguagePairingUrl
                    })
                }, "Review All ", a.createElement(s.default, {
                    name: "chevron-right"
                })), a.createElement(l.default, {
                    attr: "numReadyForReview",
                    btnClassName: "btn-success",
                    btnIcon: a.createElement(s.default, {
                        name: "chevron-right"
                    }),
                    btnText: "Review",
                    collections: this.props.collections.filter((e => e.numReadyForReview)),
                    onBtnClick: e => this.onReviewClick(e)
                })) : null
            }
            render() {
                const {activeMobilePanels: e, onReviewSettingsBtnClick: t, numReadyForReview: n, todayNumReview: l} = this.props;
                return a.createElement(o.default, {
                    className: `tw-mb-0 ${1 === e ? "tw-hidden" : ""} md:tw-block`,
                    bodyClassName: "tw-p-4"
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-items-start"
                }, a.createElement("div", {
                    className: "tw-font-bold tw-flex-1 tw-uppercase"
                }, "Ready for Review"), a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    onClick: () => t()
                }, a.createElement(s.default, {
                    name: "cog"
                }))), a.createElement("div", {
                    className: "joystix tw-text-4xl tw-my-2.5"
                }, n.toLocaleString(), " ", l > 0 && 0 === n && a.createElement(a.Fragment, null, "\ud83d\ude4c")), a.createElement("button", {
                    className: `btn btn-success${n ? "" : "-outline"} joystix btn-block btn-sm`,
                    disabled: !n,
                    onClick: () => this.onReviewModalBtnClick()
                }, "Review"), this.renderModal())
            }
        }
    },
    92285: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(68135)
          , s = n(28499);
        const r = function({disabled: e, onChange: t, value: n}) {
            return a.createElement("div", {
                className: "form-inline",
                style: {
                    marginBottom: 15
                }
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "default_max_reviews_per_collection_per_day",
                style: {
                    marginRight: 5
                }
            }, "Max reviews per collection per day"), a.createElement(l.default, {
                checked: null != n && n >= 0,
                disabled: e,
                label: " Enabled",
                name: "default_max_reviews_per_collection_per_day_enabled",
                onChange: e => t(e.target.checked ? 20 : -1),
                style: {
                    marginRight: 5
                }
            }), a.createElement("input", {
                className: "form-control",
                disabled: e || null == n || n < 0,
                name: "default_max_reviews_per_collection_per_day",
                min: "0",
                max: "9999",
                onChange: e => t(e.target.value),
                type: "number",
                value: null == n || n < 0 ? "" : n
            })))
        };
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    alreadyMasteredNextReview: "",
                    defaultMaxReviewsPerCollectionPerDay: null,
                    level0: 0,
                    level1: 1,
                    level2: 10,
                    level3: 30,
                    level4: 180,
                    loading: !0,
                    maxReviewsPerRound: 5,
                    nextReviewFuzzEnabled: !0,
                    reviewsOrderedBy: "next_review ASC"
                }
            }
            componentDidMount() {
                this.loadReviewSettings()
            }
            componentDidUpdate(e, t) {
                t.level4 !== this.state.level4 && this.state.level4 === parseInt(36500) && this.setState({
                    alreadyMasteredNextReview: ""
                })
            }
            loadReviewSettings() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    method: "get",
                    url: this.props.url
                }).done((e => {
                    const {customSettings: t} = e
                      , n = {
                        loading: !1
                    };
                    if (null != t.maxReviewsPerRound && (n.maxReviewsPerRound = t.maxReviewsPerRound),
                    t.nextReviewByLevel)
                        for (let a in t.nextReviewByLevel)
                            n["level" + a] = t.nextReviewByLevel[a];
                    null != t.reviewsOrderedBy && (n.reviewsOrderedBy = t.reviewsOrderedBy),
                    null != t.alreadyMasteredNextReview && (n.alreadyMasteredNextReview = t.alreadyMasteredNextReview),
                    n.defaultMaxReviewsPerCollectionPerDay = t.defaultMaxReviewsPerCollectionPerDay,
                    n.nextReviewFuzzEnabled = t.nextReviewFuzzEnabled,
                    this.setState(n)
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            onSubmit(e) {
                e.preventDefault();
                const {isPro: t} = this.props;
                t && this.saveReviewSettings()
            }
            showErrorMessage(e) {
                alert("Oh no! There was an error updating the review settings" + (e ? ": " + e : "") + ". Sorry about that. Please try again and let us know if you see this message again.")
            }
            saveReviewSettings() {
                this.setState({
                    loading: !0
                });
                const {alreadyMasteredNextReview: e, defaultMaxReviewsPerCollectionPerDay: t, level0: n, level1: a, level2: l, level3: s, level4: r, maxReviewsPerRound: o, nextReviewFuzzEnabled: i, reviewsOrderedBy: c} = this.state;
                $.ajax({
                    data: {
                        custom_settings: {
                            already_mastered_next_review: e,
                            default_max_reviews_per_collection_per_day: t,
                            max_reviews_per_round: o,
                            next_review_by_level: {
                                0: n,
                                1: a,
                                2: l,
                                3: s,
                                4: r
                            },
                            next_review_fuzz_enabled: i,
                            reviews_ordered_by: c
                        }
                    },
                    method: "put",
                    url: this.props.url
                }).done((e => {
                    e.errors ? (this.showErrorMessage(e.errors),
                    this.setState({
                        loading: !1
                    })) : this.setState({
                        loading: !1
                    }, ( () => this.props.onUpdate()))
                }
                )).fail(( () => {
                    this.showErrorMessage(),
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            renderIntervalOptions(e) {
                const t = Array.from(Array(30), ( (e, t) => t + 1)).concat(Array.from(Array(12), ( (e, t) => 30 + 5 * (t + 1)))).concat(Array.from(Array(8), ( (e, t) => 90 + 30 * (t + 1)))).concat([365]).map((e => a.createElement("option", {
                    value: e,
                    key: e
                }, e, " days")));
                return 0 === e && t.push(a.createElement("option", {
                    value: "0",
                    key: "0"
                }, "0 days")),
                4 === e && t.push(a.createElement("option", {
                    value: "36500",
                    key: "never"
                }, "Never")),
                t
            }
            renderAlreadyMasteredNextReview() {
                const {alreadyMasteredNextReview: e, level4: t} = this.state;
                return 36500 === parseInt(t) ? null : a.createElement("div", null, a.createElement("p", null, "For sentences answered correctly that are ", a.createElement("strong", null, "already"), " ", a.createElement("span", {
                    className: "joystix"
                }, "100% Mastered"), ":"), a.createElement(s.default, {
                    checked: "srs" === e,
                    id: "already-mastered-next-review-srs",
                    label: "Use an always increasing next review interval with Hard/Normal/Easy buttons after answering to modify the rate of increase",
                    name: "already_mastered_next_review",
                    onChange: e => this.setState({
                        alreadyMasteredNextReview: e.target.value
                    }),
                    value: "srs"
                }), a.createElement(s.default, {
                    checked: "static" === e,
                    id: "already-mastered-next-review-static",
                    label: "Use Hard/Normal/Easy buttons after answering to set next review to 50/100/200% of 100% Mastered review interval setting",
                    name: "already_mastered_next_review",
                    onChange: e => this.setState({
                        alreadyMasteredNextReview: e.target.value
                    }),
                    value: "static"
                }), a.createElement(s.default, {
                    checked: !e,
                    id: "already-mastered-next-review",
                    label: "Always use 100% Mastered review interval setting",
                    name: "already_mastered_next_review",
                    onChange: e => this.setState({
                        alreadyMasteredNextReview: e.target.value
                    }),
                    value: ""
                }))
            }
            render() {
                const {isPro: e} = this.props
                  , {defaultMaxReviewsPerCollectionPerDay: t, loading: n, maxReviewsPerRound: s, nextReviewFuzzEnabled: o, reviewsOrderedBy: i} = this.state;
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("p", null, "Clozemaster uses a ", a.createElement("a", {
                    href: "https://en.wikipedia.org/wiki/Spaced_repetition",
                    target: "_blank"
                }, "spaced repetition system"), " to help you remember what you learn."), !e && a.createElement("div", {
                    className: "alert alert-success tw-mb-5"
                }, a.createElement("div", {
                    className: "tw-mb-5"
                }, "Clozemaster Pro users can customize their review intervals and set the number of reviews per round."), a.createElement("div", {
                    className: "tw-mb-5"
                }, "Take control of your learning. Get fluent faster."), a.createElement("a", {
                    href: "/pro",
                    className: "joystix btn btn-success btn-block btn-lg"
                }, "Get Pro Today!")), a.createElement("fieldset", {
                    disabled: !e
                }, a.createElement("div", {
                    className: "form-inline"
                }, a.createElement("div", {
                    className: "form-group",
                    style: {
                        marginBottom: 15
                    }
                }, a.createElement("label", {
                    htmlFor: "max_reviews_per_round",
                    style: {
                        marginRight: 5
                    }
                }, "Max reviews per round when playing new sentences"), a.createElement("select", {
                    className: "form-control",
                    name: "max_reviews_per_round",
                    disabled: n,
                    value: s,
                    onChange: e => this.setState({
                        maxReviewsPerRound: e.target.value
                    })
                }, [...new Array(51)].map(( (e, t) => a.createElement("option", {
                    key: t,
                    value: t
                }, t)))))), a.createElement("div", {
                    className: "form-inline"
                }, a.createElement("div", {
                    className: "form-group",
                    style: {
                        marginBottom: 15
                    }
                }, a.createElement("label", {
                    htmlFor: "reviews_ordered_by",
                    style: {
                        marginRight: 5
                    }
                }, "Play review sentences ordered by"), a.createElement("select", {
                    className: "form-control",
                    name: "reviews_ordered_by",
                    disabled: n,
                    value: i,
                    onChange: e => this.setState({
                        reviewsOrderedBy: e.target.value
                    })
                }, a.createElement("option", {
                    value: "next_review ASC"
                }, "due date, oldest first"), a.createElement("option", {
                    value: "next_review DESC"
                }, "due date, most recent first"), a.createElement("option", {
                    value: "level ASC"
                }, "percent mastered, 0% first"), a.createElement("option", {
                    value: "level DESC"
                }, "percent mastered, 100% first"), a.createElement("option", {
                    value: "random()"
                }, "random")))), a.createElement(r, {
                    disabled: n,
                    onChange: e => this.setState({
                        defaultMaxReviewsPerCollectionPerDay: e
                    }),
                    value: t
                }), a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-heading joystix text-center"
                }, "Review Intervals"), a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("table", {
                    className: "levels table"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    className: "text-center"
                }, "A sentence that is"), a.createElement("th", null, "will be seen again in"))), a.createElement("tbody", null, [...new Array(5)].map(( (e, t) => a.createElement("tr", {
                    key: t,
                    className: "level"
                }, a.createElement("td", {
                    className: "text-center pct-mastered joystix"
                }, a.createElement("label", {
                    htmlFor: "settings[next_review_by_level][" + t + "][value]"
                }, 25 * t, "% Mastered")), a.createElement("td", null, a.createElement("select", {
                    disabled: n,
                    name: "settings[next_review_by_level][" + t + "][value]",
                    value: this.state["level" + t],
                    onChange: e => this.setState({
                        ["level" + t]: e.target.value
                    }),
                    className: "value form-control"
                }, this.renderIntervalOptions(t)))))))), this.renderAlreadyMasteredNextReview(), a.createElement("hr", null), a.createElement("div", null, a.createElement("p", null, 'If the next interval is \u22658 days in the future, a small amount of "fuzz", a random +/-5% of the interval, can be added to prevent clusters of sentences always coming up for review on the same day.'), a.createElement(l.default, {
                    checked: o,
                    label: "Next review fuzz enabled",
                    name: "settings[next_review_fuzz_enabled]",
                    onChange: e => this.setState({
                        nextReviewFuzzEnabled: e.target.checked
                    })
                })))), a.createElement("button", {
                    className: "btn btn-success btn-block joystix"
                }, "Save")))
            }
        }
    },
    78174: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40897)
          , s = n(508)
          , r = (n(61703),
        n(92285));
        class o extends a.Component {
            renderContent() {
                return a.createElement(r.default, {
                    isPro: this.props.isPro,
                    onUpdate: () => this.reviewSettingsModal.hide(),
                    url: this.props.url
                })
            }
            render() {
                return a.createElement(l.default, {
                    footer: a.createElement(s.default, {
                        text: "Cancel"
                    }),
                    onHidden: this.props.onHidden,
                    ref: e => this.reviewSettingsModal = e,
                    title: "Default Review Settings"
                }, this.renderContent())
            }
        }
    },
    14228: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return u
            }
        });
        var a = n(96540)
          , l = n(53884)
          , s = n(40727)
          , r = n(40897)
          , o = n(18152)
          , i = n(28499);
        const c = ({dailyReminderEmail: e, dailyReminderEmailUrl: t}) => {
            const [n,r] = a.useState(!1)
              , [o,i] = a.useState(e);
            console.log(e, t);
            let c = null;
            return a.createElement(a.Fragment, null, a.createElement("button", {
                className: `btn btn-default ${o ? "active" : ""} btn-xs tw-mr-2`,
                onClick: () => r(!0)
            }, a.createElement(s.default, {
                name: "bell"
            })), n && a.createElement(l.default, {
                dailyReminderEmail: o,
                onHidden: () => r(!1),
                onUpdate: e => {
                    i(e),
                    c.hide()
                }
                ,
                ref: e => c = e,
                updateUrl: t
            }))
        }
          , d = ({languagePairingUrl: e, onChange: t, showDaysPlayedInsteadOfStreak: n}) => {
            const [l,o] = a.useState(n)
              , [c,d] = a.useState(!1)
              , [u,m] = a.useState(!1);
            return a.createElement(a.Fragment, null, a.createElement("button", {
                className: "btn btn-default btn-xs",
                onClick: () => d(!0)
            }, a.createElement(s.default, {
                name: "cog"
            })), c && a.createElement(r.default, {
                id: "streak-toggle-btn-modal",
                onHidden: () => d(!1),
                size: "small",
                title: "Toggle Streak"
            }, a.createElement("p", null, "Don't care for streaks? Switch to show total days played instead."), a.createElement(i.default, {
                checked: !l,
                disabled: u,
                label: "Streak",
                name: "showDaysPlayedInsteadOfStreak",
                onChange: () => o(!1)
            }), a.createElement(i.default, {
                checked: l,
                disabled: u,
                label: "Days Played",
                name: "showDaysPlayedInsteadOfStreak",
                onChange: () => o(!0)
            }), a.createElement("button", {
                className: "btn btn-success btn-block joystix",
                disabled: u,
                onClick: () => (m(!0),
                void $.ajax({
                    data: {
                        user_language_pairing: {
                            show_days_played_instead_of_streak: l
                        }
                    },
                    method: "put",
                    url: e
                }).done(( () => {
                    m(!1),
                    $("#streak-toggle-btn-modal").modal("hide"),
                    t(l)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error saving the change. Sorry about that. Please try again and let us know if you see this message again.")
                }
                )))
            }, "Save")))
        }
        ;
        function u({activeMobilePanels: e, currentStreakDays: t, currentStreakIncludesToday: n, dailyReminderEmail: l, dailyReminderEmailUrl: r, daysPlayedCount: i, languagePairingUrl: u, onShowDaysPlayedInsteadOfStreakChange: m, showDaysPlayedInsteadOfStreak: h, timeZone: g}) {
            return a.createElement(o.default, {
                className: `tw-mb-0 ${1 === e ? "tw-hidden" : ""} md:tw-block`,
                bodyClassName: "tw-p-4"
            }, a.createElement("div", {
                className: "tw-flex tw-flex-row tw-items-start"
            }, a.createElement("div", {
                className: "tw-font-bold tw-flex-1 tw-uppercase"
            }, h ? "Days Played" : "Streak", " ", a.createElement("small", {
                style: {
                    fontWeight: "normal"
                }
            }, a.createElement("a", {
                href: "/settings#timezone"
            }, "(", g, ")"))), a.createElement(c, {
                dailyReminderEmail: l,
                dailyReminderEmailUrl: r
            }), a.createElement(d, {
                languagePairingUrl: u,
                onChange: m,
                showDaysPlayedInsteadOfStreak: h
            })), !h && a.createElement("div", {
                className: "joystix tw-my-2.5 " + (n ? "tw-color-streak-active" : "")
            }, a.createElement("span", {
                className: "tw-text-4xl"
            }, t.toLocaleString()), " Day", 1 === t ? "" : "s"), h && a.createElement("div", {
                className: "joystix tw-my-2.5 " + (n ? "tw-color-streak-active" : "")
            }, a.createElement("span", {
                className: "tw-text-4xl"
            }, i.toLocaleString()), " Day", 1 === i ? "" : "s"), n && a.createElement("div", null, "Includes today! ", a.createElement(s.default, {
                style: {
                    color: "#27bb4e"
                },
                name: "ok"
            })))
        }
    },
    35231: function() {},
    26797: function() {},
    34268: function() {},
    96225: function() {},
    32734: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return K
            }
        });
        var a = n(96540)
          , l = (n(40961),
        n(95093))
          , s = n.n(l)
          , r = n(58108)
          , o = n(57955)
          , i = n(66820)
          , c = n(44654)
          , d = n(78780)
          , u = n(50408)
          , m = n(16657)
          , h = n(79715)
          , g = n(64688)
          , p = n(95779)
          , b = n(80931)
          , f = n(10447)
          , E = (n(90721),
        n(8267))
          , y = n(3988)
          , S = n(79439)
          , v = (n(92697),
        n(69367))
          , C = n(93337)
          , w = n(61291)
          , x = n(51913)
          , k = n(32835)
          , N = n(28737)
          , T = n(51813)
          , P = n(75445)
          , M = n(44372)
          , R = n(39576)
          , L = n(40727)
          , I = n(25499)
          , z = n(5440)
          , U = n(73898)
          , A = n(74904)
          , j = n(94870)
          , D = n(9830)
          , F = n(40897)
          , V = (n(508),
        n(14296))
          , B = n(82994)
          , O = (n(52143),
        n(18152))
          , _ = n(50715)
          , H = n(64639)
          , G = n(44893)
          , W = n(92024)
          , q = n(91313)
          , Y = n(10485);
        class K extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    aboutToPlayCollection: null,
                    aboutToPlayScope: null,
                    addSentenceToCollectionVisible: !1,
                    favoritesModalVisible: !1,
                    managingCollection: null,
                    managingCollectionScope: null,
                    moreControlsVisible: !1,
                    moreStatsVisible: !1,
                    reviewModalVisible: !1,
                    reviewSettingsModalVisible: !1
                }
            }
            getCollectionsStats(e) {
                let t = 0
                  , n = 0
                  , a = 0
                  , l = 0;
                for (let s = 0, r = e.length; s < r; s++)
                    t += e[s].numPlaying,
                    n += e[s].numMastered,
                    a += e[s].numReadyForReview,
                    l += e[s].numFavorited;
                return {
                    numFavorited: l,
                    numMastered: n,
                    numPlaying: t,
                    numReadyForReview: a
                }
            }
            componentDidMount() {
                $("#dashboard");
                $("body").popover({
                    selector: '[data-toggle="popover"]'
                }),
                $("body").on("show.bs.popover", '[data-toggle="popover"]', (function(e) {
                    $('[data-toggle="popover"]').not(this).popover("destroy")
                }
                )),
                $("body").on("inserted.bs.popover", '[data-toggle="popover"]', (function(e) {
                    $(".popover .popover-title").append('<button type="button" class="close" data-dismiss="popover" aria-label="Close" style="margin-top: -4px"><span aria-hidden="true">&times;</span></button>')
                }
                )),
                $("body").on("click", ".popover .close", ( () => {
                    $('[data-toggle="popover"]').popover("destroy")
                }
                )),
                $("body").tooltip({
                    selector: '[data-toggle="tooltip"]'
                }),
                window.clozemaster.systemTtsAvailable(this.props.targetLanguageIso, this.props.targetLanguageCode),
                this.setState({
                    moreControlsVisible: "true" === localStorage.getItem("dashboardMoreControlsVisible")
                }),
                this.loadLanguagePairing()
            }
            componentDidUpdate(e, t) {
                t.moreControlsVisible !== this.state.moreControlsVisible && localStorage.setItem("dashboardMoreControlsVisible", this.state.moreControlsVisible ? "true" : "")
            }
            loadLanguagePairing() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    url: this.props.languagePairingUrl
                }).done((e => {
                    const {collectionGroupings: t, collections: n, languagePairing: a, user: l} = e;
                    console.log(e);
                    const {clozeFromWordsUrl: s, clozeListening: r, clozeSentencesUrl: o, collectionFileImportUrl: i, collectionsUrl: c, currentLevelPoints: d, currentStreakDays: u, currentStreakIncludesToday: m, currentWeekLeaderboardRank: h, dailyGoalHoursLeftToday: g, dailyGoalPointsPerDay: p, dailyGoalStreak: b, dailyGoalUrl: f, dailyReminderEmail: E, dailyReminderEmailUrl: y, dailyStatsWebUrl: S, gameSettingsUrl: v, leaderboardsUrl: C, level: w, listeningTrialExpired: x, moreStatsUrl: k, nextLevelPoints: N, nextReviewByLevel: T, numPointsToday: P, past7DaysNewReview: M, playClozeListeningWebUrl: R, playOptions: L, playWebUrl: I, prevWeekLeaderboardRank: z, progressPerChunk: U, quickClozeUrl: A, rankingsUrl: j, reviewSettingsUrl: D, score: F, sharedCollectionsUrl: V, speakingTrialExpired: B, useProgressChunks: O} = a
                      , {isSignedIn: _} = this.props;
                    _ && !l.hasRunPlayTutorial && window.localStorage.getItem("hasRunPlayTutorial") && this.saveHasRunPlayTutorial(),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        clozeFromWordsUrl: s,
                        clozeListening: r,
                        clozeSentencesUrl: o,
                        collectionFileImportUrl: i,
                        collectionGroupings: t,
                        collections: n,
                        collectionsUrl: c,
                        currentLevelPoints: d,
                        currentStreakDays: u,
                        currentStreakIncludesToday: m,
                        currentWeekLeaderboardRank: h,
                        dailyGoalHoursLeftToday: g,
                        dailyGoalPointsPerDay: p,
                        dailyGoalStreak: b,
                        dailyGoalUrl: f,
                        dailyReminderEmail: E,
                        dailyReminderEmailUrl: y,
                        dailyStatsUrl: S,
                        gameSettingsUrl: v,
                        leaderboardsUrl: C,
                        level: w,
                        listeningTrialExpired: x,
                        loading: !1,
                        moreStatsUrl: k,
                        nextLevelPoints: N,
                        nextReviewByLevel: T,
                        numPointsToday: P,
                        past7DaysNewReview: M,
                        playClozeListeningUrl: R,
                        playLanguagePairingWebUrl: I,
                        playOptions: L,
                        prevWeekLeaderboardRank: z,
                        progressPerChunk: U,
                        quickClozeUrl: A,
                        rankingsUrl: j,
                        reviewSettingsUrl: D,
                        score: F,
                        sharedCollectionsUrl: V,
                        speakingTrialExpired: B,
                        useProgressChunks: O,
                        user: l
                    }))
                }
                ))
            }
            initPast7DaysChart() {
                const {past7DaysNewReview: e} = this.state
                  , t = []
                  , n = []
                  , a = [];
                e.forEach((e => {
                    t.push(s()(e.date, "YYYY-MM-DD").format("ddd MMM D")),
                    n.push(e.numNew),
                    a.push(e.numReview)
                }
                ));
                const l = this.past7DaysCanvas.getContext("2d")
                  , r = {
                    labels: t,
                    datasets: [{
                        label: "New",
                        fillColor: "rgba(20,220,20,0.2)",
                        strokeColor: "rgba(20,220,20,1)",
                        pointColor: "rgba(20,220,20,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(20,220,20,1)",
                        data: n
                    }, {
                        label: "Reviewed",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: a
                    }]
                };
                new Chart(l).Line(r, {
                    multiTooltipTemplate: "<%= datasetLabel %>: <%= value %>"
                })
            }
            getPast7DaysNewReviewAvg(e) {
                const t = this.state.past7DaysNewReview.reduce(( (t, n) => t + n[e]), 0) / 7;
                return Math.round(10 * t) / 10
            }
            saveHasRunPlayTutorial() {
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        user: {
                            has_run_play_tutorial: !0
                        }
                    }),
                    method: "put",
                    url: "/api/v1/users"
                })
            }
            renderStats() {
                const e = this.state
                  , {isSignedIn: t} = this.props
                  , n = e.past7DaysNewReview[e.past7DaysNewReview.length - 1];
                return a.createElement("div", {
                    className: "text-center"
                }, a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-6 col-md-3"
                }, a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-body",
                    style: {
                        height: 128
                    }
                }, a.createElement("h3", {
                    className: "joystix",
                    style: {
                        fontSize: 16,
                        margin: 0
                    }
                }, "Played Today"), a.createElement("div", {
                    className: "joystix",
                    style: {
                        fontSize: "2em"
                    }
                }, n.numNew + n.numReview), n.numNew, " New / ", n.numReview, " Review"))), a.createElement("div", {
                    className: "col-xs-6 col-md-3"
                }, a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-body",
                    style: {
                        height: 128
                    }
                }, a.createElement("h3", {
                    className: "joystix",
                    style: {
                        fontSize: 16,
                        margin: 0
                    }
                }, "Streak"), a.createElement("div", {
                    className: "joystix",
                    style: {
                        color: e.currentStreakIncludesToday ? "#ff6600" : "inherit",
                        fontSize: "2em"
                    }
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, e.currentStreakIncludesToday ? "\ud83c\udf89 " : ""), e.currentStreakDays, a.createElement("span", {
                    className: "hidden-xs"
                }, e.currentStreakIncludesToday ? " \ud83c\udf89" : "")), a.createElement("div", null, "Days in a row"), e.currentStreakDays > 0 && a.createElement("div", null, e.currentStreakIncludesToday ? "Includes today \ud83c\udf89" : a.createElement(a.Fragment, null, "Does ", a.createElement("u", null, "NOT"), " include today"))))), a.createElement("div", {
                    className: "col-xs-6 col-md-3"
                }, a.createElement(Y.default, {
                    collections: e.collections,
                    numReadyForReview: e.numReadyForReview,
                    onPlay: e => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: "ready_for_review"
                    }),
                    playLanguagePairingUrl: e.playLanguagePairingWebUrl,
                    todayNumReview: n.numReview
                })), a.createElement("div", {
                    className: "col-xs-6 col-md-3"
                }, this.renderDailyGoal())))
            }
            openFavoritesModal(e) {
                this.setState({
                    favoritesModalVisible: e
                })
            }
            renderReviewModal() {
                const {reviewModalVisible: e, collections: t} = this.state
            }
            renderDownloadFavoritesModal() {
                const {downloadFavoritesCollection: e, user: t} = this.state;
                return e ? a.createElement(C.default, {
                    collection: e,
                    isPro: t.isPro,
                    onHidden: () => this.setState({
                        downloadFavoritesCollection: null
                    })
                }) : null
            }
            renderFavoritesModal() {
                const {collections: e, favoritesModalVisible: t, playLanguagePairingWebUrl: n, user: l} = this.state;
                return t ? a.createElement(x.default, {
                    action: t,
                    collections: e,
                    isPro: l.isPro,
                    onDownload: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            downloadFavoritesCollection: e
                        })
                    }),
                    onHidden: () => this.setState({
                        favoritesModalVisible: !1
                    }),
                    onPlay: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            aboutToPlayCollection: e,
                            aboutToPlayScope: "favorited"
                        })
                    }),
                    onView: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            managingCollection: e,
                            managingCollectionScope: "favorited"
                        })
                    }),
                    playLanguagePairingUrl: n,
                    ref: e => this.favoritesModal = e
                }) : null
            }
            renderAnonPlayPanel() {
                return this.props.isSignedIn ? null : a.createElement("p", {
                    className: "alert alert-success anon-play"
                }, a.createElement("h2", null, a.createElement("a", {
                    href: "/sign-up",
                    className: "btn btn-success joystix"
                }, "Sign up"), " or ", a.createElement("a", {
                    href: "/login",
                    className: "btn btn-success joystix"
                }, "Login"), " to get in the game, track your progress, and more! Or try out Clozemaster by playing random sentences in anonymous mode.", a.createElement("button", {
                    className: "btn btn-success btn-lg btn-block joystix",
                    onClick: () => this.setState({
                        aboutToPlayCollection: {
                            name: "Random",
                            playWebUrl: this.state.playLanguagePairingWebUrl
                        }
                    }),
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement(L.default, {
                    name: "chevron-right"
                }))))
            }
            renderMainPanel() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "RandomCollection" === e.type))
                  , r = e.find((e => "FastTrackCollection" === e.type));
                return r ? a.createElement(k.default, {
                    fastTrackCollection: r,
                    isSignedIn: !0,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : a.createElement(G.default, {
                    collection: s,
                    isSignedIn: !0,
                    manage: () => this.setState({
                        managingCollection: s
                    }),
                    play: () => this.setState({
                        aboutToPlayCollection: s
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                })
            }
            renderFrequencyCollectionsPanel() {
                const {collections: e, playLanguagePairingWebUrl: t, progressPerChunk: n, useProgressChunks: l, user: s} = this.state
                  , r = e.filter((e => "FrequencyCollection" === e.type));
                return r.length ? a.createElement(P.default, {
                    collections: r,
                    isSignedIn: !0,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: (e, t) => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: t
                    }),
                    playLanguagePairingWebUrl: t,
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderGrammarCollectionsPanel() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n, user: l} = this.state
                  , s = e.filter((e => "GrammarCollection" === e.type));
                return s.length ? a.createElement(R.default, {
                    collections: s,
                    isPro: l.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : null
            }
            renderMyCollectionsPanel() {
                const {collections: e, sharedCollectionsUrl: t, progressPerChunk: n, useProgressChunks: l} = this.state
                  , s = e.filter((e => !e.type));
                return a.createElement(B.default, {
                    add: e => this.setState({
                        addingToCollection: e,
                        addToCollectionVisible: !0
                    }),
                    collections: s,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.user.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    onCollectionCreate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        t.unshift(e),
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onCollectionDelete: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t.splice(n, 1);
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onCollectionUpdate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t[n] = e;
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: n,
                    sharedCollectionsUrl: t,
                    teachingUrl: this.props.teachingUrl,
                    useProgressChunks: l
                })
            }
            renderCollectionGroupingsPanel() {
                const {collectionGroupings: e, collections: t, progressPerChunk: n, useProgressChunks: l, user: s} = this.state;
                return e && e.length ? a.createElement(f.default, {
                    collectionGroupings: e,
                    collections: t,
                    isPro: s.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderRandomCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "RandomCollection" === e.type));
                if (e.find((e => "FastTrackCollection" === e.type)) && s)
                    return a.createElement(G.default, {
                        collection: s,
                        isSignedIn: !0,
                        manage: () => this.setState({
                            managingCollection: s
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: s
                        }),
                        progressPerChunk: t,
                        useProgressChunks: n
                    })
            }
            renderDashboardCollection(e) {
                const {isSignedIn: t} = this.props;
                return a.createElement(O.default, {
                    className: "dashboard-collection"
                }, a.createElement("div", null, a.createElement("div", {
                    className: "pull-right hidden-xs"
                }, a.createElement("button", {
                    onClick: () => this.setState({
                        aboutToPlayCollection: e
                    }),
                    className: "btn btn-success btn-lg btn-block joystix",
                    style: {
                        marginTop: -5,
                        width: 200
                    }
                }, "Play ", a.createElement(L.default, {
                    name: "chevron-right"
                }))), a.createElement("h2", null, e.name)), a.createElement(E.default, {
                    collection: e,
                    perChunk: 0,
                    useChunks: !1
                }), a.createElement("div", null, a.createElement("div", {
                    className: "pull-right"
                }, a.createElement("button", {
                    "aria-label": "Manage collection",
                    "data-toggle": "tooltip",
                    "data-title": "Manage collection",
                    disabled: !t,
                    onClick: () => this.setState({
                        managingCollection: e
                    }),
                    className: "btn btn-default btn-sm"
                }, a.createElement(L.default, {
                    name: "list"
                })), a.createElement("button", {
                    "aria-label": "More options",
                    className: "btn btn-default btn-sm more-options",
                    "data-toggle": "tooltip",
                    "data-title": "More options",
                    disabled: !t,
                    onClick: () => this.setState({
                        moreOptionsCollection: e
                    }),
                    style: {
                        marginLeft: 10
                    }
                }, a.createElement(L.default, {
                    name: "option-horizontal"
                }))), a.createElement("span", {
                    style: {
                        fontSize: "1.75rem",
                        marginRight: 8
                    }
                }, a.createElement("strong", null, a.createElement(_.default, null), " Playing ", e.numPlaying.toLocaleString(), " ", a.createElement("span", {
                    className: "hidden-xs"
                }, " / ", e.numSentences.toLocaleString(), " sentences "), "(", (0,
                r.tf)(e, "playing"), ")")), a.createElement("br", {
                    className: "visible-xs"
                }), a.createElement("span", {
                    style: {
                        fontSize: "1.75rem"
                    }
                }, a.createElement("strong", null, a.createElement(D.default, null), " Mastered ", e.numMastered.toLocaleString(), " ", "(", (0,
                r.tf)(e, "mastered"), ")"))), a.createElement("button", {
                    onClick: () => this.setState({
                        aboutToPlayCollection: e
                    }),
                    className: "btn btn-success btn-lg btn-block joystix visible-xs",
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })))
            }
            renderDashboardCollections() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , l = e.filter((e => e.dashboardCollection))
                  , s = e.find((e => "FastTrackCollection" === e.type))
                  , o = e.find((e => "RandomCollection" === e.type))
                  , i = e.filter((e => "FrequencyCollection" === e.type));
                if (!l.length) {
                    if (!i.length) {
                        if (s)
                            return this.renderDashboardCollection(s);
                        if (o)
                            return this.renderDashboardCollection(o)
                    }
                    const e = i[0]
                      , t = i[Math.min(4, i.length - 1)]
                      , n = i[Math.min(7, i.length - 1)];
                    return a.createElement("div", {
                        className: "joystix text-center"
                    }, a.createElement("h3", null, "What's your level?"), a.createElement("div", {
                        className: "row"
                    }, a.createElement("div", {
                        className: "col-xs-12 col-sm-6 col-md-4 col-md-offset-2"
                    }, a.createElement(O.default, null, a.createElement("h4", null, "Got the basics?"), a.createElement("p", null, a.createElement("strong", null, a.createElement("em", null, e.name, " Words"))), a.createElement("p", null, a.createElement("strong", null, e.numSentences.toLocaleString(), " Sentences")), a.createElement("button", {
                        className: "btn btn-success joystix btn-block",
                        onClick: () => this.setState({
                            aboutToPlayCollection: e
                        })
                    }, "Play"))), a.createElement("div", {
                        className: "col-xs-12 col-sm-6 col-md-4"
                    }, a.createElement(O.default, null, a.createElement("h4", null, "Intermediate?"), a.createElement("p", null, a.createElement("strong", null, a.createElement("em", null, t.name, " Words"))), a.createElement("p", null, a.createElement("strong", null, t.numSentences.toLocaleString(), " Sentences")), a.createElement("button", {
                        className: "btn btn-success joystix btn-block",
                        onClick: () => this.setState({
                            aboutToPlayCollection: t
                        })
                    }, "Play")))), a.createElement("div", {
                        className: "row"
                    }, a.createElement("div", {
                        className: "col-xs-12 col-sm-6 col-md-4 col-md-offset-2"
                    }, a.createElement(O.default, null, a.createElement("h4", null, "Advanced?"), a.createElement("p", null, a.createElement("strong", null, a.createElement("em", null, n.name, " Words"))), a.createElement("p", null, a.createElement("strong", null, n.numSentences.toLocaleString(), " Sentences")), a.createElement("button", {
                        className: "btn btn-success joystix btn-block",
                        onClick: () => this.setState({
                            aboutToPlayCollection: n
                        })
                    }, "Play"))), a.createElement("div", {
                        className: "col-xs-12 col-sm-6 col-md-4"
                    }, a.createElement(O.default, null, a.createElement("h4", null, "Basics ", a.createElement(L.default, {
                        name: "arrow-right"
                    }), " Advanced"), a.createElement("p", null, a.createElement("strong", null, a.createElement("em", null, s.name))), a.createElement("p", null, a.createElement("strong", null, s.numSentences.toLocaleString(), " Sentences")), a.createElement("button", {
                        className: "btn btn-success joystix btn-block",
                        onClick: () => this.setState({
                            aboutToPlayCollection: s
                        })
                    }, "Play")))), a.createElement("h4", null, "Or check out all the collections!"), a.createElement("button", {
                        className: "btn btn-lg btn-default joystix",
                        onClick: () => this.setState({
                            allCollectionsVisible: !0
                        })
                    }, "All Collections"))
                }
                return a.createElement(a.Fragment, null, l.sort(( (e, t) => (0,
                r.Qd)(e.name, t.name))).map((e => this.renderDashboardCollection(e))), a.createElement("p", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.setState({
                        allCollectionsVisible: !0
                    })
                }, "All Collections ", a.createElement(L.default, {
                    name: "chevron-right"
                }))))
            }
            renderPanels() {
                return a.createElement("div", null, this.renderMainPanel(), this.renderFrequencyCollectionsPanel(), this.renderMyCollectionsPanel(), this.renderGrammarCollectionsPanel(), this.renderCollectionGroupingsPanel(), this.renderClozeListeningPanel(), this.renderClozeReadingPanel(), this.renderRandomCollection())
            }
            renderClozeListeningPanel() {
                if (!this.state.playClozeListeningUrl)
                    return null;
                const {clozeListening: e, collections: t, playClozeListeningUrl: n, progressPerChunk: l, useProgressChunks: s, user: r} = this.state
                  , {isSignedIn: o} = this.props
                  , i = t.find((e => "ClozeListeningCollection" === e.type));
                if (i)
                    return a.createElement(g.default, {
                        collection: i,
                        isSignedIn: o,
                        manage: () => this.setState({
                            managingCollection: i
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: i
                        }),
                        progressPerChunk: l,
                        useProgressChunks: s
                    });
                const {numPlaying: c, numReadyForReview: d, uniqueListeningTimeToday: u, uniqueListeningTimePast7Days: m, uniqueListeningTimePast30Days: h, uniqueListeningTimeTotal: b} = e;
                return a.createElement(p.default, {
                    isPro: r.isPro,
                    numPlaying: c,
                    numReadyForReview: d,
                    uniqueListeningTimeToday: u,
                    uniqueListeningTimePast7Days: m,
                    uniqueListeningTimePast30Days: h,
                    uniqueListeningTimeTotal: b,
                    url: n
                })
            }
            renderClozeReadingPanel() {
                const {clozeReadingPath: e, isSignedIn: t} = this.props;
                return e ? a.createElement("div", {
                    className: "panel panel-default cloze-reading"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-file-text-o fa-4x",
                    "aria-hidden": "true",
                    style: {
                        marginLeft: 4
                    }
                })), a.createElement("h2", {
                    className: "title"
                }, "Cloze-Reading", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": "<p>Take your literacy to the next level! Practice reading native level content on a variety of topics from Wikipedia, or create your own.</p><p>Multiple paragraphs > multiple sentences > one missing word per sentence > select the correct answer > score points.</p><p>Points are saved after playing all sentences in an article and count towards your total score, level, and streak, but don't affect your overall sentences played, mastered, or reviews.</p>",
                    "data-html": "true",
                    "data-title": "Cloze-Reading",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("br", {
                    className: "hidden-xs"
                }), a.createElement("small", null, "Level up your reading skills with longer texts."), a.createElement("a", {
                    className: "btn btn-success joystix",
                    disabled: !t,
                    href: e,
                    style: {
                        marginLeft: 8
                    }
                }, "Go", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))) : null
            }
            renderAddToCollectionModal() {
                const {addingToCollection: e, addToCollectionVisible: t, user: n} = this.state;
                return t ? a.createElement(c.default, {
                    collection: e,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: n.isPro,
                    onFile: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddFileToCollectionModal(e)
                    }),
                    onHidden: () => this.setState({
                        addingToCollection: null,
                        addToCollectionVisible: !1
                    }),
                    onManual: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddSentenceToCollectionModal(e)
                    }),
                    onSearch: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showSentenceSearchModal(e)
                    }),
                    onPaste: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddTextToCollectionModal(e)
                    }),
                    onWords: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddClozeFromWordsToCollectionModal(e)
                    }),
                    ref: e => this.addToCollectionModal = e
                }) : null
            }
            updateMyCollections() {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    data: {
                        filter: "mine"
                    },
                    url: this.state.collectionsUrl
                }).done((e => {
                    const t = e.collections.reduce(( (e, t) => (e[t.id] = t,
                    e)), {});
                    let n = this.state.collections.map((e => {
                        if (t[e.id]) {
                            const n = t[e.id];
                            return delete t[e.id],
                            n
                        }
                        return e
                    }
                    ));
                    n = n.concat(Object.values(t)),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        collections: n,
                        updating: !1
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the dashboard. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            unpinCollection(e) {
                this.setState({
                    moreOptionsCollection: null,
                    updating: !0
                }),
                $.ajax({
                    method: "post",
                    url: e.unpinFromDashboardUrl
                }).done(( () => {
                    this.updateCollection(e)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the collection. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            onResetCollectionClick(e) {
                return confirm("Are you sure? Resetting your progress cannot be undone.") && confirm("Are you really sure? There's no going back.") ? (this.setState({
                    moreOptionsCollection: null,
                    updating: !0
                }),
                void $.ajax({
                    method: "post",
                    url: e.resetProgressUrl
                }).done(( () => {
                    this.updateCollection(e)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error resetting the collection. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))) : null
            }
            onDeleteCollectionClick(e) {
                return confirm("Are you sure? This action cannot be undone.") && confirm("Are you really sure? There's no going back.") ? (this.setState({
                    moreOptionsCollection: null,
                    updating: !0
                }),
                void $.ajax({
                    method: "delete",
                    url: e.deleteProgressUrl
                }).done(( () => {
                    this.updateCollection(e)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error deleting the collection. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))) : null
            }
            updateCollection(e) {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    url: e.url
                }).done((e => {
                    let t = !1;
                    const n = this.state.collections.map((n => n.id === e.collection.id ? (t = !0,
                    e.collection) : n));
                    t || n.push(e.collection),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        collections: n,
                        updating: !1
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the dashboard. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            renderManageCollectionModal() {
                const {collectionsUrl: e, managingCollection: t, managingCollectionScope: n, user: l} = this.state
                  , {baseLanguageEnglishName: s, isSignedIn: r, targetLanguageCode: o, targetLanguageEnglishName: i, targetLanguageIso: c, targetLanguageName: d} = this.props;
                return t ? a.createElement(j.default, {
                    baseLanguageEnglishName: s,
                    collectionClozeSentencesUrl: t.collectionClozeSentencesUrl,
                    collectionName: t.name,
                    collectionType: t.type,
                    collectionsUrl: e,
                    deleteCollectionProgressUrl: t.deleteProgressUrl,
                    isCollectionEditable: t.isEditable,
                    isPro: l.isPro,
                    isSignedIn: r,
                    onHidden: ({hasCopiedSentences: e}) => {
                        const {managingCollection: t} = this.state;
                        this.setState({
                            managingCollection: null,
                            managingCollectionScope: null
                        }, ( () => {
                            if (e)
                                return this.loadLanguagePairing(),
                                !1;
                            this.updateCollection(t)
                        }
                        ))
                    }
                    ,
                    scope: n,
                    targetLanguageCode: o,
                    targetLanguageEnglishName: i,
                    targetLanguageIso: c,
                    targetLanguageName: d
                }) : null
            }
            showAddSentenceToCollectionModal(e) {
                this.setState({
                    addSentenceToCollectionVisible: !0,
                    addSentenceToCollection: e
                })
            }
            onMoreStatsBtnClick() {
                this.setState({
                    moreStatsVisible: !0
                })
            }
            renderExtraControls() {
                if (this.state.loading)
                    return null;
                const {isSignedIn: e} = this.props;
                return a.createElement("ul", {
                    className: "list-inline pro-controls",
                    style: {
                        marginRight: -5,
                        marginBottom: 20
                    }
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default btn-lg add-sentence-to-collection",
                    disabled: !e,
                    onClick: () => this.showAddSentenceToCollectionModal(),
                    "data-toggle": "tooltip",
                    title: "Add sentence to collection"
                }, a.createElement(L.default, {
                    name: "plus"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default btn-lg more-stats",
                    disabled: !e,
                    onClick: () => this.onMoreStatsBtnClick(),
                    "data-toggle": "tooltip",
                    title: "More stats"
                }, a.createElement(L.default, {
                    name: "stats"
                }))), a.createElement("li", null, a.createElement("button", {
                    id: "search-sentences",
                    disabled: !e,
                    onClick: () => this.onSearchBtnClick(),
                    className: "btn btn-default btn-lg",
                    "data-toggle": "tooltip",
                    title: "Search sentences"
                }, a.createElement(L.default, {
                    name: "search"
                }))), a.createElement("li", null, a.createElement("button", {
                    onClick: () => this.onReviewSettingsBtnClick(),
                    disabled: !e,
                    className: "btn btn-default btn-lg review-settings",
                    "data-toggle": "tooltip",
                    "data-html": "true",
                    title: "<span style='white-space: nowrap;'>Review settings</span>"
                }, a.createElement(L.default, {
                    name: "time"
                }))), a.createElement("li", null, this.renderFullHistoryBtn()), a.createElement("li", null, this.renderDailyReminder()), a.createElement("li", null, a.createElement("button", {
                    onClick: () => $("#manage-language-pairing-modal").modal("show"),
                    disabled: !e,
                    className: "btn btn-default btn-lg review-settings",
                    "data-toggle": "tooltip",
                    "data-html": "true",
                    title: "<span style='white-space: nowrap;'>Dashboard settings</span>"
                }, a.createElement(L.default, {
                    name: "cog"
                }))))
            }
            onSearchBtnClick() {
                this.showSentenceSearchModal()
            }
            showSentenceSearchModal(e) {
                this.setState({
                    addSentenceToCollection: e,
                    sentenceSearchModalVisible: !0
                })
            }
            onReviewSettingsBtnClick() {
                this.setState({
                    reviewSettingsModalVisible: !0
                })
            }
            renderDailyReminder() {
                return a.createElement(S.default, {
                    dailyReminderEmail: this.state.dailyReminderEmail,
                    data: {
                        "data-html": !0,
                        "data-toggle": "tooltip"
                    },
                    isSignedIn: this.props.isSignedIn,
                    onUpdate: e => this.setState({
                        dailyReminderEmail: e
                    }),
                    timeZone: this.props.timeZone,
                    updateUrl: this.state.dailyReminderEmailUrl
                })
            }
            renderDailyGoal() {
                const {isSignedIn: e, targetLanguageName: t, timeZone: n} = this.props
                  , {dailyGoalHoursLeftToday: l, dailyGoalPointsPerDay: s, dailyGoalStreak: r, dailyGoalUrl: o, numPointsToday: i} = this.state;
                return a.createElement(y.default, {
                    hoursLeftToday: l,
                    isSignedIn: e,
                    numPointsToday: i,
                    pointsPerDay: s,
                    streak: r,
                    targetLanguageName: t,
                    timeZone: n,
                    updateUrl: o
                })
            }
            renderProPromo() {
                return this.state.user.isPro ? null : a.createElement("div", {
                    className: "panel panel-default",
                    style: {
                        background: "#464646",
                        color: "#fff"
                    }
                }, a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("h5", {
                    style: {
                        fontSize: 24,
                        marginTop: 0
                    }
                }, "Get fluent faster."), a.createElement("a", {
                    href: "/pro",
                    className: "btn joystix btn-block btn-attention"
                }, "Clozemaster Pro", a.createElement(L.default, {
                    name: "chevron-right",
                    className: "hidden-md"
                }))))
            }
            renderGiftPro() {
                return this.props.giftsDisabled ? null : a.createElement("div", {
                    className: "panel panel-default gift-pro clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Gift Pro!"), a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("p", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, "Send Clozemaster Pro as a gift and get a free month!"), a.createElement("a", {
                    className: "btn btn-attention joystix btn-block",
                    href: "/gift-pro"
                }, "Learn More", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))
            }
            renderLatestBlogPost() {
                return a.createElement("div", {
                    className: "panel panel-default clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Blog"), a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("strong", null, "Latest blog post:"), a.createElement("div", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, a.createElement("a", {
                    target: "_blank",
                    href: this.props.latestBlogPostUrl
                }, this.props.latestBlogPostTitle))))
            }
            renderChallengeFriends() {
                return this.props.isSignedIn ? a.createElement(h.default, {
                    friendInvitesUrl: this.props.friendInvitesUrl,
                    isSignedIn: this.props.isSignedIn
                }) : null
            }
            renderFollowClozemaster() {
                return a.createElement(T.default, null)
            }
            renderPlayOptionsModal() {
                const {aboutToPlayCollection: e, aboutToPlayScope: t, collections: n, listeningTrialExpired: l, playOptions: s, speakingTrialExpired: r, user: o} = this.state
                  , {isSignedIn: i, isSpeakingSkillAvailable: c, targetLanguageCode: d, targetLanguageIso: u, translateTranscribeAvailable: m} = this.props;
                if (!e)
                    return null;
                let h = !1;
                return e.ttsAvailable ? h = !0 : "All" === e.name && ("ready_for_review" === t ? h = n.filter((e => e.numReadyForReview)).every((e => e.ttsAvailable)) : "favorited" === t && (h = n.filter((e => e.numFavorited)).every((e => e.ttsAvailable)))),
                h = h || o.isPro && window.clozemaster.systemTtsAvailable(u, d),
                a.createElement(H.default, {
                    collection: e,
                    isPro: o.isPro,
                    isListeningSkillAvailable: h,
                    isSignedIn: i,
                    isSpeakingSkillAvailable: c,
                    listeningTrialExpired: l,
                    onHidden: () => this.setState({
                        aboutToPlayCollection: null,
                        aboutToPlayScope: null
                    }),
                    playOptions: s,
                    scope: t,
                    speakingTrialExpired: r,
                    targetLanguageIso: u,
                    translateTranscribeAvailable: m
                })
            }
            renderPast7DaysChart() {
                return a.createElement("div", {
                    className: "text-center",
                    style: {
                        clear: "both",
                        position: "relative"
                    }
                }, a.createElement("canvas", {
                    ref: e => this.past7DaysCanvas = e,
                    style: {
                        width: "95%",
                        height: 100,
                        margin: "10px 0"
                    }
                }), this.renderFullHistoryBtn())
            }
            renderFullHistoryBtn() {
                const {dailyStatsUrl: e, user: t} = this.state
                  , {isSignedIn: n} = this.props;
                return a.createElement(M.default, {
                    dailyStatsUrl: e,
                    disabled: !n,
                    user: t
                })
            }
            renderReviewSettingsModal() {
                return this.state.reviewSettingsModalVisible ? a.createElement(q.default, {
                    isPro: this.state.user.isPro,
                    onHidden: () => this.setState({
                        reviewSettingsModalVisible: !1
                    }),
                    url: this.state.reviewSettingsUrl
                }) : null
            }
            renderMoreStatsModal() {
                return this.state.moreStatsVisible ? a.createElement(V.default, {
                    isPro: this.state.user.isPro,
                    moreStatsUrl: this.state.moreStatsUrl,
                    onHidden: () => this.setState({
                        moreStatsVisible: !1
                    })
                }) : null
            }
            showAddClozeFromWordsToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addClozeFromWordsToCollectionModalVisible: !0
                })
            }
            showAddTextToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addTextToCollectionModalVisible: !0
                })
            }
            showAddFileToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addFileToCollectionModalVisible: !0
                })
            }
            renderAddClozeFromWordsToCollectionModal() {
                const {addSentencesToCollection: e, addClozeFromWordsToCollectionModalVisible: t, collectionsUrl: n, clozeFromWordsUrl: l, user: s} = this.state;
                return t ? a.createElement(u.default, {
                    collection: e,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addClozeFromWordsToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    clozeFromWordsUrl: l,
                    ref: e => this.addClozeFromWordsToCollectionModal = e
                }) : null
            }
            renderAddTextToCollectionModal() {
                const {addSentencesToCollection: e, addTextToCollectionModalVisible: t, collectionsUrl: n, quickClozeUrl: l, user: s} = this.state;
                return t ? a.createElement(m.default, {
                    collection: e,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addTextToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    quickClozeUrl: l,
                    ref: e => this.addTextToCollectionModal = e
                }) : null
            }
            renderAddFileToCollectionModal() {
                const {addSentencesToCollection: e, addFileToCollectionModalVisible: t, collectionsUrl: n, collectionFileImportUrl: l, user: s} = this.state;
                return t ? a.createElement(i.default, {
                    collection: e,
                    collectionFileImportUrl: l,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addFileToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    ref: e => this.addFileToCollectionModal = e
                }) : null
            }
            renderSentenceSearchModal() {
                return this.state.sentenceSearchModalVisible ? a.createElement(b.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.user.isPro,
                    initialSelectedCollectionId: this.state.addSentenceToCollection && this.state.addSentenceToCollection.id,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => {
                        this.updateMyCollections(),
                        this.setState({
                            sentenceSearchModalVisible: !1,
                            addSentenceToCollection: null
                        })
                    }
                    ,
                    url: this.state.clozeSentencesUrl
                }) : null
            }
            renderAddSentenceToCollectionModal() {
                return this.state.addSentenceToCollectionVisible ? a.createElement(d.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    initialSelectedCollectionId: this.state.addSentenceToCollection && this.state.addSentenceToCollection.id,
                    isPro: this.state.user.isPro,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => this.setState({
                        addSentenceToCollectionVisible: !1,
                        addSentenceToCollection: null
                    }),
                    onSentenceAdded: (e, t) => {
                        this.updateCollection(t),
                        this.addSentenceToCollectionModal.reset()
                    }
                    ,
                    ref: e => this.addSentenceToCollectionModal = e
                }) : null
            }
            renderAllCollectionsModal() {
                const {allCollectionsVisible: e} = this.state;
                return e ? a.createElement(F.default, {
                    onHidden: () => this.setState({
                        allCollectionsVisible: !1
                    }),
                    onShow: () => $("#fast-track-stats-btn").remove(),
                    size: "large",
                    title: "All Collections",
                    visible: e
                }, this.renderPanels()) : null
            }
            renderMoreOptionsModal() {
                const {moreOptionsCollection: e} = this.state;
                return a.createElement(F.default, {
                    onHidden: () => this.setState({
                        moreOptionsCollection: null
                    }),
                    ref: e => this.moreOptionsModal = e,
                    show: !!e,
                    size: "small",
                    title: e && e.name
                }, a.createElement("p", {
                    className: "text-center"
                }, a.createElement("button", {
                    className: "btn btn-block btn-default joystix",
                    onClick: () => this.unpinCollection(e)
                }, a.createElement(L.default, {
                    name: "pushpin"
                }), " Unpin"), "Unpin this collection from the dashboard (but keep your progress)"), a.createElement("p", {
                    className: "text-center"
                }, a.createElement("button", {
                    className: "btn btn-block btn-default joystix",
                    onClick: () => this.onResetCollectionClick(e)
                }, a.createElement(L.default, {
                    name: "off"
                }), " Reset"), "Reset your progress (but keep custom alternative answers, hints, and notes)"), a.createElement("div", {
                    className: "text-center"
                }, a.createElement("button", {
                    className: "btn btn-block btn-default joystix",
                    onClick: () => this.onDeleteCollectionClick(e)
                }, a.createElement(L.default, {
                    name: "trash"
                }), " Delete"), "Delete all your progress and remove this collection from the dashboard"))
            }
            renderModals() {
                return a.createElement(a.Fragment, null, this.renderAllCollectionsModal(), this.renderPlayOptionsModal(), this.renderManageCollectionModal(), this.renderAddToCollectionModal(), this.renderAddSentenceToCollectionModal(), this.renderAddTextToCollectionModal(), this.renderAddClozeFromWordsToCollectionModal(), this.renderAddFileToCollectionModal(), this.renderFavoritesModal(), this.renderDownloadFavoritesModal(), this.renderReviewSettingsModal(), this.renderSentenceSearchModal(), this.renderMoreOptionsModal(), this.renderMoreStatsModal(), this.renderLanguagePairingSettingsModal(), this.renderDeleteLanguagePairingModal(), this.renderResetProgressModal())
            }
            renderResetProgressModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props
                  , {collections: r} = this.state;
                return a.createElement(W.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    collections: r.filter((e => e.playing)),
                    languagePairingUrl: n,
                    onResetLanguagePairing: () => this.setState({
                        updating: !0
                    }),
                    onResetCollection: () => this.setState({
                        updating: !0
                    }),
                    targetLanguageFlagIso: l,
                    targetLanguageName: s
                })
            }
            renderDeleteLanguagePairingModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props;
                return a.createElement(v.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    languagePairingUrl: n,
                    onDeleteLanguagePairing: () => this.setState({
                        updating: !0
                    }),
                    targetLanguageFlagIso: l,
                    targetLanguageName: s
                })
            }
            renderLanguagePairingSettingsModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props
                  , {gameSettingsUrl: r, progressPerChunk: o, useProgressChunks: i} = this.state;
                return a.createElement(I.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    gameSettingsUrl: r,
                    languagePairingUrl: n,
                    onDeleteLanguagePairingClick: () => $("#delete-language-pairing-modal").modal("show"),
                    targetLanguageFlagIso: l,
                    targetLanguageName: s
                })
            }
            renderControls() {
                const {isSignedIn: e} = this.props;
                return a.createElement("div", {
                    className: "text-right"
                }, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e,
                    id: "manage-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#manage-language-pairing-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cog"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-danger",
                    disabled: !e,
                    id: "reset-progress-btn",
                    "data-toggle": "modal",
                    "data-target": "#reset-progress-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-erase"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-danger",
                    disabled: !e,
                    id: "delete-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#delete-language-pairing-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-trash"
                })))))
            }
            renderOnboarding() {
                return null
            }
            renderMainContent() {
                return this.state.loading ? a.createElement(U.default, null) : a.createElement(w.default, null, this.renderStats(), this.renderDashboardCollections(), this.renderModals())
            }
            renderUpdatingOverlay() {
                return this.state.updating ? a.createElement(A.default, null) : null
            }
            renderRightColumn() {
                return this.state.loading ? null : a.createElement("div", {
                    className: "col-xs-12 col-md-3 right-column"
                }, this.renderProPromo(), this.renderDailyReminder(), this.renderLatestBlogPost(), this.renderUpdatingOverlay())
            }
            renderRightColumnAd() {
                const {user: e} = this.state
                  , {isPro: t} = e
                  , {rightColumnAd: n} = this.props;
                return t || !n ? null : a.createElement(o.default, {
                    ad: n,
                    className: "right-column-vert"
                })
            }
            renderPanelsAd() {
                const {user: e} = this.state
                  , {isPro: t} = e
                  , {panelsAd: n} = this.props;
                return t || !n ? null : a.createElement(o.default, {
                    ad: n,
                    className: "panels-vert"
                })
            }
            renderAnonUserPromo() {
                return this.props.isSignedIn ? null : a.createElement("div", {
                    className: "joystix",
                    style: {
                        background: "#464646",
                        color: "#fff",
                        left: 0,
                        padding: "10px 15px",
                        position: "fixed",
                        right: 0,
                        textAlign: "center",
                        top: 0,
                        zIndex: 994
                    }
                }, a.createElement("div", {
                    className: "hidden-xs",
                    style: {
                        left: 10,
                        lineHeight: 1,
                        position: "absolute",
                        top: 2
                    }
                }, a.createElement("a", {
                    href: "/",
                    style: {
                        color: "#fff",
                        fontSize: "3em"
                    }
                }, "M")), "Get in the game! ", a.createElement("a", {
                    className: "btn btn-success",
                    href: "/sign-up"
                }, "Sign up"), " or ", a.createElement("a", {
                    className: "btn btn-success",
                    href: "/login"
                }, "Login"))
            }
            renderMoreControls() {
                const {loading: e, moreControlsVisible: t} = this.state;
                if (e || !t)
                    return null;
                const {baseLanguageFlagIso: n, isSignedIn: l, targetLanguageFlagIso: s, timeZone: r, useRankingsForLeaderboard: o} = this.props
                  , {currentLevelPoints: i, currentWeekLeaderboardRank: c, leaderboardsUrl: d, level: u, nextLevelPoints: m, numMastered: h, numPlaying: g, past7DaysNewReview: p, prevDayRanking: b, ranking: f, rankingsUrl: E, score: y} = this.state;
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "text-center",
                    style: {
                        display: "flex",
                        flexDirection: "row",
                        flexWrap: "wrap"
                    }
                }, a.createElement(O.default, {
                    style: {
                        marginRight: 10
                    }
                }, a.createElement("div", {
                    className: "joystix title"
                }, a.createElement("strong", null, "Score")), a.createElement("div", {
                    className: "joystix value"
                }, y.toLocaleString()), a.createElement("div", null, a.createElement("small", null, a.createElement(_.default, {
                    style: {
                        marginRight: 3
                    }
                }), "Playing: ", a.createElement("strong", null, g.toLocaleString()))), a.createElement("div", null, a.createElement("small", null, a.createElement(D.default, {
                    style: {
                        marginRight: 3
                    }
                }), "Mastered: ", a.createElement("strong", null, h.toLocaleString())))), a.createElement(O.default, {
                    style: {
                        marginRight: 10
                    }
                }, a.createElement("div", {
                    className: "title"
                }, a.createElement("strong", {
                    className: "joystix"
                }, "Level"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign",
                    "data-toggle": "tooltip",
                    title: "Score more points to level up"
                })), a.createElement("div", {
                    className: "joystix value"
                }, u), a.createElement("div", {
                    className: "level-progress"
                }, a.createElement("div", {
                    className: "progress",
                    style: {
                        height: "10px",
                        marginTop: "0px",
                        marginBottom: "4px"
                    }
                }, a.createElement("div", {
                    className: "progress-bar progress-bar-success progress-bar-striped",
                    style: {
                        width: (y - i) / (m - i) * 100 + "%"
                    }
                }))), a.createElement("small", {
                    style: {
                        display: "block",
                        lineHeight: 1.1
                    }
                }, (m - y).toLocaleString(), " more points to level ", u + 1)), a.createElement(O.default, {
                    style: {
                        marginRight: 10
                    }
                }, a.createElement("div", {
                    className: "joystix"
                }, a.createElement("strong", null, "7-Day Average")), a.createElement("div", null, a.createElement("span", {
                    className: "joystix"
                }, Math.round(p.reduce(( (e, t) => e + (t.numNew + t.numReview)), 0) / 7 * 10) / 10), " ", a.createElement("small", null, "Sentences")), a.createElement("div", null, a.createElement("small", null, "New: ", a.createElement("strong", null, this.getPast7DaysNewReviewAvg("numNew")))), a.createElement("div", null, a.createElement("small", null, "Review: ", a.createElement("strong", null, this.getPast7DaysNewReviewAvg("numReview"))))), a.createElement(O.default, {
                    style: {
                        marginRight: 10
                    }
                }, a.createElement(z.default, {
                    baseLanguageFlagIso: n,
                    currentWeekLeaderboardRank: c,
                    isSignedIn: l,
                    leaderboardsUrl: d,
                    prevWeekLeaderboardRank: b,
                    ranking: f,
                    rankingsUrl: E,
                    targetLanguageFlagIso: s,
                    useRankingsForLeaderboard: o
                })), this.renderExtraControls()), a.createElement("hr", {
                    style: {
                        marginTop: 0
                    }
                }))
            }
            render() {
                const {dailyReminderEmail: e, loading: t, moreControlsVisible: n, user: l} = this.state
                  , {isSignedIn: s} = this.props;
                return a.createElement("div", {
                    id: "dashboard",
                    className: "container-fluid",
                    style: {
                        maxWidth: 1400
                    }
                }, a.createElement("div", {
                    className: "container",
                    style: {
                        marginTop: 20
                    }
                }, a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginBottom: 10
                    }
                }, s && !t && !e && a.createElement(a.Fragment, null, a.createElement(S.default, {
                    btnClassName: "btn btn-warning joystix",
                    dailyReminderEmail: e,
                    isSignedIn: this.props.isSignedIn,
                    onUpdate: e => this.setState({
                        dailyReminderEmail: e
                    }),
                    style: {
                        marginBottom: 10,
                        marginRight: 10
                    },
                    timeZone: this.props.timeZone,
                    updateUrl: this.state.dailyReminderEmailUrl
                }, a.createElement(L.default, {
                    name: "bell"
                }), " Set a Daily Reminder"), a.createElement("br", {
                    className: "visible-sm"
                })), !t && (!l || !l.isPro) && a.createElement("a", {
                    href: "/pro",
                    className: "btn btn-attention joystix",
                    style: {
                        verticalAlign: "top"
                    }
                }, "Clozemaster Pro ", a.createElement(L.default, {
                    name: "chevron-right"
                }))), a.createElement("h1", {
                    className: "title",
                    style: {
                        margin: 0
                    }
                }, a.createElement("span", {
                    className: "languages"
                }, this.props.targetLanguageName, " ", a.createElement("small", null, "from ", this.props.baseLanguageName)), a.createElement("span", {
                    style: {
                        marginLeft: 10
                    }
                }, a.createElement(N.default, {
                    flagIso: this.props.targetLanguageFlagIso,
                    size: 48
                }), a.createElement(N.default, {
                    flagIso: this.props.baseLanguageFlagIso,
                    size: 48
                }))), a.createElement("div", {
                    style: {
                        marginBottom: 20
                    }
                }, a.createElement("span", {
                    className: "joystix",
                    style: {
                        fontSize: 16,
                        marginRight: 8
                    }
                }, "Dashboard"), a.createElement("button", {
                    className: "btn btn-sm btn-default",
                    id: "toggle-more-controls",
                    "aria-label": "toggle more control",
                    onClick: () => this.setState({
                        moreControlsVisible: !n
                    })
                }, a.createElement(L.default, {
                    name: "chevron-" + (n ? "up" : "down")
                }))), this.renderMoreControls(), this.renderMainContent()))), this.renderAnonUserPromo())
            }
        }
    },
    58179: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return ge
            }
        });
        var a = n(96540)
          , l = (n(40961),
        n(95093))
          , s = n.n(l)
          , r = n(58108)
          , o = (n(57955),
        n(66820))
          , i = n(44654)
          , c = n(78780)
          , d = n(50408)
          , u = n(16657)
          , m = (n(79715),
        n(64688),
        n(48616))
          , h = n(80931)
          , g = n(10447)
          , p = (n(90721),
        n(45133))
          , b = n(99689)
          , f = (n(8267),
        n(97729))
          , E = (n(51061),
        n(9032))
          , y = n(92697)
          , S = n(69367)
          , v = n(91621)
          , C = n(78663)
          , w = n(93337)
          , x = n(61291)
          , k = n(51913)
          , N = (n(32835),
        n(42856))
          , T = n(24868)
          , P = n(28737)
          , M = n(51813)
          , R = n(75445)
          , L = n(71816)
          , I = n(33211)
          , z = n(94812)
          , U = n(93719)
          , A = n(39576)
          , j = n(40727)
          , D = n(50227)
          , F = n(22267)
          , V = n(5440)
          , B = n(73898)
          , O = n(74904)
          , _ = n(94870)
          , H = n(9830)
          , G = n(40897)
          , W = n(508)
          , q = n(14296)
          , Y = n(82994)
          , K = (n(52143),
        n(18152))
          , J = n(50715)
          , Q = n(64639)
          , Z = (n(44893),
        n(92024))
          , X = n(78174)
          , ee = n(51319)
          , te = n(68738)
          , ne = n(28358)
          , ae = n(14228)
          , le = n(16898);
        const se = ({collection: e}) => {
            if (!e.numPlaying)
                return null;
            const t = e;
            return a.createElement(a.Fragment, null, !!t.numPlayedToday && a.createElement("span", {
                className: "tw-block md:tw-inline"
            }, a.createElement(j.default, {
                name: "ok",
                style: {
                    color: "#27bb4e"
                }
            }), " "), a.createElement("span", {
                className: "tw-block md:tw-inline"
            }, "Played today: ", t.numPlayedToday), !!t.numPlayedToday && a.createElement(a.Fragment, null, a.createElement("span", {
                className: "tw-hidden md:tw-inline"
            }, " / "), a.createElement("span", {
                className: "tw-block md:tw-inline"
            }, "New: ", t.numNewToday), a.createElement("span", {
                className: "tw-hidden md:tw-inline"
            }, " / "), a.createElement("span", {
                className: "tw-block md:tw-inline"
            }, "Review: ", t.numReviewedToday)))
        }
          , re = ({active: e, className: t="", onClick: n, style: l={}, values: s}) => a.createElement("div", {
            className: "btn-group",
            "data-toggle": "buttons"
        }, s.map((s => a.createElement("button", {
            className: `btn btn-default ${e === s.value ? "active" : ""} ${t}`,
            key: s.value,
            style: l,
            type: "button",
            value: s.value,
            onClick: n
        }, s.label))))
          , oe = ({gameSettingsUrl: e}) => {
            const [t,n] = a.useState($("body").hasClass("dark-mode") ? "dark" : "light");
            return a.createElement("div", null, a.createElement("div", {
                className: "tw-mb-2"
            }, "Dark Mode"), a.createElement(re, {
                active: t,
                className: "btn-xs joystix",
                onClick: t => (t => {
                    $.ajax({
                        data: {
                            settings: {
                                theme: t
                            }
                        },
                        method: "post",
                        url: e
                    }).fail(( () => {}
                    )),
                    n(t),
                    $("body").toggleClass("dark-mode", "dark" === t)
                }
                )(t.target.value),
                style: {
                    width: 44
                },
                values: [{
                    label: "On",
                    value: "dark"
                }, {
                    label: "Off",
                    value: "light"
                }]
            }))
        }
          , ie = ({languagePairingNotification: e, onPlayClick: t}) => {
            const {dismissUrl: n, collectionId: l, notification: s} = e;
            return a.createElement("div", {
                className: "alert alert-success tw-mb-5 tw-flex tw-flex-row tw-items-start tw-gap-6"
            }, a.createElement("div", {
                className: "tw-flex-1"
            }, a.createElement("div", {
                className: "tw-flex tw-items-start md:tw-items-center tw-gap-6"
            }, a.createElement("div", {
                style: {
                    fontSize: 18,
                    fontWeight: "bold"
                }
            }, "\ud83c\udf89 ", s), !!l && a.createElement("button", {
                className: "btn btn-success joystix",
                onClick: () => t(l)
            }, "Play")), a.createElement("div", null, "Or view all updates ", a.createElement("a", {
                href: "/updates"
            }, "here"), ".")), a.createElement("button", {
                type: "button",
                className: "close",
                "data-dismiss": "alert",
                "aria-label": "Close",
                onClick: () => {
                    $.ajax({
                        method: "post",
                        url: n
                    })
                }
            }, a.createElement("span", {
                "aria-hidden": "true"
            }, "\xd7")))
        }
          , ce = ({button: e, lis: t, right: n=!1}) => a.createElement("div", {
            className: "dropdown"
        }, e, a.createElement("ul", {
            className: `dropdown-menu ${n && "dropdown-menu-right"}`
        }, t))
          , de = ({collection: e, done: t= () => null, fail: n= () => alert("Error saving! Sorry about that. Please let someone know.")}) => {
            $.ajax({
                data: {
                    user_collection: {
                        dashboard_collection: !e.dashboardCollection
                    }
                },
                method: "put",
                url: e.userCollectionUrl
            }).done(t).fail(n)
        }
          , ue = ({collection: e}) => {
            const t = e;
            return a.createElement(a.Fragment, null, a.createElement("div", {
                className: "tw-flex tw-flex-row"
            }, a.createElement("div", {
                className: "tw-w-52 tw-mr-4"
            }, a.createElement(J.default, null), " Playing: ", t.numPlaying.toLocaleString()), a.createElement("div", {
                className: "tw-flex-1"
            }, a.createElement("div", {
                className: "progress tw-mb-5"
            }, a.createElement("div", {
                className: "progress-bar progress-bar-warning",
                "data-toggle": "tooltip",
                style: {
                    width: (t.numSentences ? t.numPlaying / t.numSentences * 100 : 0) + "%"
                }
            }, a.createElement("div", {
                className: "tw-ml-2.5"
            }, (0,
            r.tf)(t, "playing")))))), a.createElement("div", {
                className: "tw-flex tw-flex-row"
            }, a.createElement("div", {
                className: "tw-w-52 tw-mr-4"
            }, a.createElement(H.default, null), " Mastered: ", t.numMastered.toLocaleString()), a.createElement("div", {
                className: "tw-flex-1"
            }, a.createElement("div", {
                className: "progress tw-mb-5"
            }, a.createElement("div", {
                className: "progress-bar progress-bar-success",
                "data-toggle": "tooltip",
                style: {
                    width: (t.numSentences ? t.numMastered / t.numSentences * 100 : 0) + "%"
                }
            }, a.createElement("div", {
                className: "tw-ml-2.5"
            }, (0,
            r.tf)(t, "mastered")))))))
        }
          , me = ({isPro: e, play: t, sharedCollectionsUrl: n, showCollectionEditor: l}) => {
            const [s,r] = a.useState(!1)
              , o = a.useRef(null);
            return a.createElement(a.Fragment, null, a.createElement("div", {
                className: "tw-mt-5 tw-flex tw-flex-row tw-gap-5 tw-mb-3"
            }, a.createElement("button", {
                className: "btn btn-success-outline btn-lg joystix",
                onClick: l
            }, "Create"), a.createElement("button", {
                className: "btn btn-success-outline btn-lg joystix",
                onClick: () => r(!0)
            }, "Shared")), s && a.createElement(ne.default, {
                isPro: e,
                play: e => o.current.hide({
                    onHidden: () => t({
                        collection: e
                    })
                }),
                onHidden: () => r(!1),
                ref: o,
                url: n
            }))
        }
          , he = ({collections: e, collectionType: t=null, customCollectionsPanel: n=!1, description: l=null, first: s=!1, isPro: r, manage: o, name: i=null, play: c, sharedCollectionsUrl: d, showAddToCollectionModal: u, showCollectionEditor: m, totalNumPlaying: h, update: g}) => {
            if (!e.length && !n)
                return null;
            const [p,b] = a.useState(s)
              , [f,E] = a.useState(!1);
            a.useEffect(( () => {
                console.log("open", p)
            }
            ), [p]);
            const y = e => {
                E(!0),
                de({
                    collection: e,
                    done: e => {
                        E(!1),
                        g(e.collection)
                    }
                })
            }
            ;
            return a.createElement(K.default, {
                className: p ? "open" : "",
                attrs: {
                    "data-type": t
                }
            }, a.createElement("div", {
                className: "tw-flex tw-flex-row tw-items-start tw-justify-start tw-gap-5"
            }, a.createElement("button", {
                className: "btn btn-default toggle-open",
                onClick: () => b(!p)
            }, a.createElement(j.default, {
                name: "chevron-" + (p ? "up" : "down")
            })), a.createElement("div", {
                className: "md:tw-flex md:tw-flex-row md:tw-gap-5 md:tw-items-center"
            }, a.createElement("div", {
                className: "tw-text-5xl tw-font-bold"
            }, i || e[0].name), a.createElement("div", null, e.length > 1 && a.createElement(a.Fragment, null, e.length, " Collections / "), e.reduce(( (e, t) => e + t.numSentences), 0).toLocaleString(), " Sentences"))), p && a.createElement("div", {
                className: "tw-mt-5"
            }, l && a.createElement("p", null, l), n && a.createElement(me, {
                isPro: r,
                play: c,
                sharedCollectionsUrl: d,
                showCollectionEditor: m
            }), e.map(( (t, l) => a.createElement("div", {
                className: `${e.length > 1 ? "tw-py-10" : ""} tw-border-0 ${0 === l ? "" : "tw-border-t tw-border-solid tw-border-divider"}`
            }, a.createElement("div", {
                className: "tw-flex tw-flex-row tw-mb-5"
            }, a.createElement("div", {
                className: "tw-flex-1 tw-flex tw-flex-col tw-flex-wrap md:tw-flex-row md:tw-items-center"
            }, (e.length > 1 || n) && a.createElement("div", {
                className: "tw-text-4xl tw-font-bold tw-mr-5"
            }, t.name), a.createElement("div", {
                className: "tw-flex tw-flex-row-reverse md:tw-flex-row tw-justify-end md:tw-justify-start tw-items-center tw-gap-5 tw-mr-5 tw-flex-wrap tw-mt-2 md:tw-mt-0"
            }, e.length > 1 && a.createElement("div", {
                className: ""
            }, t.numSentences.toLocaleString(), " Sentences"), !!t.description && a.createElement("div", null, a.createElement("button", {
                className: "btn btn-default btn-xs",
                "data-content": t.description,
                "data-html": "true",
                "data-toggle": "popover",
                "data-trigger": "focus"
            }, a.createElement(j.default, {
                name: "info-sign"
            }))))), a.createElement("div", {
                className: "tw-flex tw-flex-row tw-gap-5 tw-items-start"
            }, a.createElement("button", {
                className: "tw-hidden md:tw-inline-block btn btn-default btn-sm " + (t.dashboardCollection ? "active" : ""),
                disabled: f,
                onClick: () => y(t)
            }, a.createElement(j.default, {
                name: "pushpin"
            }), " ", t.dashboardCollection ? "Unpin from" : "Pin to", " Dashboard"), a.createElement(ce, {
                button: a.createElement("button", {
                    className: "btn btn-default btn-sm",
                    "data-toggle": "dropdown"
                }, a.createElement(j.default, {
                    name: "option-horizontal"
                })),
                lis: a.createElement(a.Fragment, null, a.createElement("li", {
                    className: "md:tw-hidden"
                }, a.createElement("a", {
                    "data-target": "#",
                    role: "button",
                    onClick: () => y(t)
                }, a.createElement(j.default, {
                    name: "pushpin"
                }), " ", t.dashboardCollection ? "Unpin from" : "Pin to", " Dashboard")), t.isEditable && a.createElement("li", null, a.createElement("a", {
                    "data-target": "#",
                    role: "button",
                    onClick: () => u(t)
                }, a.createElement(j.default, {
                    name: "plus"
                }), a.createElement("span", {
                    className: "tw-ml-5"
                }, "Add Sentences"))), a.createElement("li", null, a.createElement("a", {
                    "data-target": "#",
                    role: "button",
                    onClick: () => o(t)
                }, a.createElement(j.default, {
                    name: "list"
                }), a.createElement("span", {
                    className: "tw-ml-5"
                }, "Manage Sentences"))), t.isEditable && a.createElement("li", null, a.createElement("a", {
                    "data-target": "#",
                    role: "button",
                    onClick: () => m(t)
                }, a.createElement(j.default, {
                    name: "pencil"
                }), a.createElement("span", {
                    className: "tw-ml-5"
                }, "Edit Collection")))),
                right: !0
            }))), a.createElement(ue, {
                collection: t
            }), a.createElement("div", {
                className: "tw-flex tw-flex-col sm:tw-flex-row tw-gap-5 tw-mb-5"
            }, a.createElement("button", {
                className: "btn btn-success btn-block joystix",
                disabled: (t.proOnly || !t.type) && !r,
                onClick: () => c({
                    collection: t
                })
            }, "Play ", a.createElement(j.default, {
                name: "chevron-right"
            })), !!t.numPlaying && a.createElement("div", {
                className: "tw-flex sm:tw-min-w-96"
            }, a.createElement("button", {
                className: "btn btn-success-outline btn-sm joystix tw-flex-1",
                disabled: !t.numReadyForReview,
                onClick: () => c({
                    collection: t,
                    scope: "ready_for_review"
                })
            }, "Review (", t.numReadyForReview, ")"))), (t.proOnly || !t.type) && !r && a.createElement("div", {
                className: "tw-text-center tw-mb-5"
            }, a.createElement("a", {
                href: "/pro",
                className: "btn btn-default btn-sm joystix"
            }, a.createElement(j.default, {
                name: "lock"
            }), " Pro!")), s && 0 === h && 0 === l && a.createElement("div", {
                className: "tw-text-center joystix tw-mb-5"
            }, "\ud83d\udc49\ud83d\udc49\ud83d\udc49 Not sure where to start? Start here! \ud83d\udc48\ud83d\udc48\ud83d\udc48"), a.createElement("div", {
                className: "tw-flex tw-flex-row tw-justify-end"
            }, a.createElement("div", {
                className: "tw-flex-1"
            }, !!t.user && a.createElement("div", null, a.createElement(j.default, {
                name: t.public ? "users" : "lock",
                type: "fa"
            }), " ", t.public ? "Shared" : "Private"), !!t.user && !t.isEditable && a.createElement("div", null, "Created by ", a.createElement("a", {
                href: `/players/${t.user.username}`,
                target: "_blank"
            }, t.user.username)), a.createElement(se, {
                collection: t
            })), !!t.numMarkedAsKnown && a.createElement("div", null, "Marked as Known: ", t.numMarkedAsKnown)))))))
        }
        ;
        class ge extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    activeTab: "dashboard",
                    activeMobilePanels: 0,
                    aboutToPlayCollection: null,
                    aboutToPlayScope: null,
                    addingToCollection: null,
                    addSentenceToCollectionVisible: !1,
                    collectionEditorCollection: null,
                    collectionEditorModalVisible: !1,
                    favoritesModalVisible: !1,
                    loading: !0,
                    managingCollection: null,
                    managingCollectionScope: null,
                    moreStatsVisible: !1,
                    reviewModalVisible: !1,
                    reviewSettingsModalVisible: !1
                }
            }
            getCollectionsStats(e) {
                let t = 0
                  , n = 0
                  , a = 0
                  , l = 0;
                for (let s = 0, r = e.length; s < r; s++)
                    t += e[s].numPlaying,
                    n += e[s].numMastered,
                    a += e[s].numReadyForReview,
                    l += e[s].numFavorited;
                return {
                    numFavorited: l,
                    numMastered: n,
                    numPlaying: t,
                    numReadyForReview: a
                }
            }
            componentDidMount() {
                const e = $('[data-react-class="DashboardV3"]');
                e.popover({
                    selector: '[data-toggle="popover"]'
                }),
                e.on("show.bs.popover", '[data-toggle="popover"]', (function(e) {
                    $('[data-toggle="popover"]').not(this).popover("destroy")
                }
                )),
                e.on("inserted.bs.popover", '[data-toggle="popover"]', (function(e) {
                    $(".popover .popover-title").append('<button type="button" class="close" data-dismiss="popover" aria-label="Close" style="margin-top: -4px"><span aria-hidden="true">&times;</span></button>')
                }
                )),
                e.on("click", ".popover .close", ( () => {
                    $('[data-toggle="popover"]').popover("destroy")
                }
                )),
                $("body").tooltip({
                    selector: '[data-toggle="tooltip"]'
                }),
                window.clozemaster.systemTtsAvailable(this.props.targetLanguageIso, this.props.targetLanguageCode),
                this.loadLanguagePairing()
            }
            loadLanguagePairing() {
                this.setState({
                    loading: !0
                });
                const {includeDiscover: e, includeFastTrackV2Collections: t, languagePairingUrl: n} = this.props;
                $.ajax({
                    data: {
                        include_discover: e,
                        include_fast_track_v2_collections: t
                    },
                    url: n
                }).done((e => {
                    const {collectionGroupings: t, collections: n, languagePairing: a, user: l} = e;
                    console.log(e);
                    const {clozeFromWordsUrl: s, clozeListening: r, clozeSentencesUrl: o, collectionFileImportUrl: i, collectionsUrl: c, currentLevelPoints: d, currentStreakDays: u, currentStreakIncludesToday: m, currentWeekLeaderboardRank: h, dailyGoalHoursLeftToday: g, dailyGoalPointsPerDay: p, dailyGoalStreak: b, dailyGoalUrl: f, dailyReminderEmail: E, dailyReminderEmailUrl: y, dailyStatsWebUrl: S, daysPlayedCount: v, discoverMediasUrl: C, gameSettingsUrl: w, leaderboardsUrl: x, level: k, listeningTrialExpired: N, maxReviewsPerRound: T, moreStatsUrl: P, nextLevelPoints: M, nextReviewByLevel: R, notification: L, numPointsToday: I, past7DaysNewReview: z, playClozeListeningWebUrl: U, playOptions: A, playWebUrl: j, prevWeekLeaderboardRank: D, progressPerChunk: F, quickClozeUrl: V, rankingsUrl: B, resetProgressUrl: O, reviewSettingsUrl: _, score: $, sharedCollectionsUrl: H, showDaysPlayedInsteadOfStreak: G, speakingTrialExpired: W, useProgressChunks: q} = a
                      , {isSignedIn: Y} = this.props;
                    Y && !l.hasRunPlayTutorial && window.localStorage.getItem("hasRunPlayTutorial") && this.saveHasRunPlayTutorial(),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        clozeFromWordsUrl: s,
                        clozeListening: r,
                        clozeSentencesUrl: o,
                        collectionFileImportUrl: i,
                        collectionGroupings: t,
                        collections: n,
                        collectionsUrl: c,
                        currentLevelPoints: d,
                        currentStreakDays: u,
                        currentStreakIncludesToday: m,
                        currentWeekLeaderboardRank: h,
                        dailyGoalHoursLeftToday: g,
                        dailyGoalPointsPerDay: p,
                        dailyGoalStreak: b,
                        dailyGoalUrl: f,
                        dailyReminderEmail: E,
                        dailyReminderEmailUrl: y,
                        dailyStatsUrl: S,
                        daysPlayedCount: v,
                        discoverMediasUrl: C,
                        gameSettingsUrl: w,
                        languagePairingNotification: L,
                        leaderboardsUrl: x,
                        level: k,
                        listeningTrialExpired: N,
                        loading: !1,
                        maxReviewsPerRound: T,
                        moreStatsUrl: P,
                        nextLevelPoints: M,
                        nextReviewByLevel: R,
                        numPointsToday: I,
                        past7DaysNewReview: z,
                        playClozeListeningUrl: U,
                        playLanguagePairingWebUrl: j,
                        playOptions: A,
                        prevWeekLeaderboardRank: D,
                        progressPerChunk: F,
                        quickClozeUrl: V,
                        rankingsUrl: B,
                        resetProgressUrl: O,
                        reviewSettingsUrl: _,
                        score: $,
                        sharedCollectionsUrl: H,
                        showDaysPlayedInsteadOfStreak: G,
                        speakingTrialExpired: W,
                        useProgressChunks: q,
                        user: l
                    }), ( () => this.initPast7DaysChart()))
                }
                ))
            }
            componentDidUpdate(e, t) {
                "dashboard" === this.state.activeTab && "dashboard" !== t.activeTab && this.initPast7DaysChart(),
                this.state.activeTab !== t.activeTab && window.scrollTo(0, 0)
            }
            initPast7DaysChart() {
                const {past7DaysNewReview: e} = this.state
                  , t = []
                  , n = []
                  , a = [];
                e.forEach((e => {
                    t.push(s()(e.date, "YYYY-MM-DD").format("ddd MMM D")),
                    n.push(e.numNew),
                    a.push(e.numReview)
                }
                ));
                const l = this.past7DaysCanvas.getContext("2d")
                  , r = {
                    labels: t,
                    datasets: [{
                        label: "New",
                        fillColor: "rgba(20,220,20,0.2)",
                        strokeColor: "rgba(20,220,20,1)",
                        pointColor: "rgba(20,220,20,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(20,220,20,1)",
                        data: n
                    }, {
                        label: "Reviewed",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: a
                    }]
                };
                new Chart(l).Line(r, {
                    multiTooltipTemplate: "<%= datasetLabel %>: <%= value %>"
                })
            }
            getPast7DaysNewReviewAvg(e) {
                const t = this.state.past7DaysNewReview.reduce(( (t, n) => t + n[e]), 0) / 7;
                return Math.round(10 * t) / 10
            }
            saveHasRunPlayTutorial() {
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        user: {
                            has_run_play_tutorial: !0
                        }
                    }),
                    method: "put",
                    url: "/api/v1/users"
                })
            }
            renderStats() {
                const e = this.state
                  , {isSignedIn: t} = this.props;
                return a.createElement("div", {
                    className: "stats-panels-container"
                }, a.createElement("div", {
                    className: "stats-panels-table"
                }, a.createElement("div", {
                    className: "stats-panels"
                }, a.createElement("div", {
                    className: "stat-panel score"
                }, a.createElement("div", {
                    className: "title"
                }, "Score"), a.createElement("div", {
                    className: "value"
                }, e.score.toLocaleString()), a.createElement("div", null, a.createElement("small", null, a.createElement(J.default, {
                    style: {
                        marginRight: 3
                    }
                }), "Playing: ", a.createElement("strong", null, e.numPlaying.toLocaleString()))), a.createElement("div", null, a.createElement("small", null, a.createElement(H.default, {
                    style: {
                        marginRight: 3
                    }
                }), "Mastered: ", a.createElement("strong", null, e.numMastered.toLocaleString())))), a.createElement("div", {
                    className: "stat-panel"
                }, a.createElement("div", {
                    className: "title"
                }, "Level ", a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign",
                    "data-toggle": "tooltip",
                    title: "Score more points to level up"
                })), a.createElement("div", {
                    className: "value"
                }, e.level), a.createElement("div", {
                    className: "level-progress"
                }, a.createElement("div", {
                    className: "progress",
                    style: {
                        height: "10px",
                        marginTop: "0px",
                        marginBottom: "4px"
                    }
                }, a.createElement("div", {
                    className: "progress-bar progress-bar-success progress-bar-striped",
                    style: {
                        width: (e.score - e.currentLevelPoints) / (e.nextLevelPoints - e.currentLevelPoints) * 100 + "%"
                    }
                }))), a.createElement("small", {
                    style: {
                        display: "block",
                        lineHeight: 1.1
                    }
                }, (e.nextLevelPoints - e.score).toLocaleString(), " more points to level ", e.level + 1)), a.createElement("div", {
                    className: "stat-panel streak" + (0 === e.currentStreakDays ? " zero" : "")
                }, a.createElement("div", {
                    className: "title"
                }, "Streak ", a.createElement("small", {
                    style: {
                        fontWeight: "normal"
                    }
                }, a.createElement("a", {
                    href: "/settings#timezone"
                }, this.props.timeZone))), a.createElement("div", {
                    className: "value"
                }, e.currentStreakDays, " Day", 1 === e.currentStreakDays ? "" : "s", e.currentStreakIncludesToday ? a.createElement("span", {
                    className: "glyphicon glyphicon-ok played-today",
                    title: "Streak includes today",
                    "data-toggle": "tooltip"
                }) : ""), a.createElement("div", {
                    className: "averages"
                }, a.createElement("div", {
                    className: "title"
                }, "7-day Av", a.createElement("span", {
                    className: "hidden-sm hidden-md"
                }, "era"), "g", a.createElement("span", {
                    className: "hidden-sm hidden-md"
                }, "e"), a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign",
                    style: {
                        marginLeft: 4
                    },
                    "data-toggle": "tooltip",
                    title: "Average number of sentences played per day for the last 7 days"
                })), a.createElement("span", {
                    className: "average average-new",
                    "data-toggle": "tooltip",
                    title: "New sentences"
                }, a.createElement("small", {
                    className: "glyphicon glyphicon-plus"
                }), a.createElement("span", {
                    className: "count",
                    style: {
                        marginLeft: 4
                    }
                }, this.getPast7DaysNewReviewAvg("numNew"))), a.createElement("span", {
                    className: "average average-review",
                    "data-toggle": "tooltip",
                    title: "Review sentences"
                }, a.createElement("small", {
                    className: "glyphicon glyphicon-refresh"
                }), a.createElement("span", {
                    className: "count",
                    style: {
                        marginLeft: 4
                    }
                }, this.getPast7DaysNewReviewAvg("numReview"))))), a.createElement(ee.default, {
                    collections: e.collections,
                    numReadyForReview: e.numReadyForReview,
                    onPlay: e => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: "ready_for_review"
                    }),
                    onReviewSettingsBtnClick: this.onReviewSettingsBtnClick.bind(this),
                    playLanguagePairingUrl: e.playLanguagePairingWebUrl
                }), a.createElement(V.default, {
                    baseLanguageFlagIso: this.props.baseLanguageFlagIso,
                    currentWeekLeaderboardRank: e.currentWeekLeaderboardRank,
                    isSignedIn: t,
                    leaderboardsUrl: e.leaderboardsUrl,
                    prevWeekLeaderboardRank: e.prevDayRanking,
                    ranking: e.ranking,
                    rankingsUrl: e.rankingsUrl,
                    targetLanguageFlagIso: this.props.targetLanguageFlagIso,
                    useRankingsForLeaderboard: this.props.useRankingsForLeaderboard
                }), a.createElement("div", {
                    className: "stat-panel favorites"
                }, a.createElement("div", {
                    className: "title"
                }, "Favorites"), a.createElement("div", {
                    className: "value"
                }, e.numFavorited.toLocaleString()), a.createElement("button", {
                    onClick: () => this.openFavoritesModal("play"),
                    className: "btn btn-success btn-xs joystix btn-block play",
                    disabled: !e.numFavorited,
                    style: {
                        fontSize: "11px",
                        padding: 0
                    }
                }, "Play ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })), a.createElement("table", {
                    style: {
                        width: "100%"
                    }
                }, a.createElement("tbody", null, a.createElement("tr", null, a.createElement("td", {
                    style: {
                        width: "50%",
                        paddingRight: "3px"
                    }
                }, a.createElement("button", {
                    onClick: () => this.openFavoritesModal("view"),
                    disabled: !e.numFavorited,
                    className: "btn btn-default btn-xs btn-block view",
                    style: {
                        padding: 0,
                        marginTop: "4px"
                    }
                }, "View")), a.createElement("td", {
                    style: {
                        width: "50%",
                        paddingLeft: "3px"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-placement": "bottom",
                    title: "Download"
                }, a.createElement("button", {
                    onClick: () => this.openFavoritesModal("download"),
                    disabled: !e.numFavorited,
                    className: "btn btn-primary btn-xs btn-block download",
                    style: {
                        padding: 0,
                        marginTop: "4px"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cloud-download download"
                })))))))))))
            }
            openFavoritesModal(e) {
                this.setState({
                    favoritesModalVisible: e
                })
            }
            renderReviewModal() {
                const {reviewModalVisible: e, collections: t} = this.state
            }
            renderDownloadFavoritesModal() {
                const {downloadFavoritesCollection: e, user: t} = this.state;
                return e ? a.createElement(w.default, {
                    collection: e,
                    isPro: t.isPro,
                    onHidden: () => this.setState({
                        downloadFavoritesCollection: null
                    })
                }) : null
            }
            renderFavoritesModal() {
                const {collections: e, favoritesModalVisible: t, playLanguagePairingWebUrl: n, user: l} = this.state;
                return t ? a.createElement(k.default, {
                    action: t,
                    collections: e,
                    isPro: l.isPro,
                    onDownload: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            downloadFavoritesCollection: e
                        })
                    }),
                    onHidden: () => this.setState({
                        favoritesModalVisible: !1
                    }),
                    onPlay: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            aboutToPlayCollection: e,
                            aboutToPlayScope: "favorited"
                        })
                    }),
                    onView: e => this.favoritesModal.hide({
                        onHidden: () => this.setState({
                            managingCollection: e,
                            managingCollectionScope: "favorited"
                        })
                    }),
                    playLanguagePairingUrl: n,
                    ref: e => this.favoritesModal = e
                }) : null
            }
            renderAnonPlayPanel() {
                return this.props.isSignedIn ? null : this.props.simpleAnonPlayPanel ? a.createElement("div", {
                    className: "alert alert-success anon-play text-center",
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("h2", null, "Get in the game, track your progress, and more!"), a.createElement("a", {
                    href: "/sign-up",
                    className: "btn btn-success joystix btn-lg",
                    style: {
                        minWidth: 280
                    }
                }, "Sign up")) : a.createElement("p", {
                    className: "alert alert-success anon-play"
                }, a.createElement("h2", null, a.createElement("a", {
                    href: "/sign-up",
                    className: "btn btn-success joystix"
                }, "Sign up"), " or ", a.createElement("a", {
                    href: "/login",
                    className: "btn btn-success joystix"
                }, "Login"), " to get in the game, track your progress, and more! Or try out Clozemaster by playing random sentences in anonymous mode.", a.createElement("button", {
                    className: "btn btn-success btn-lg btn-block joystix",
                    onClick: () => this.setState({
                        aboutToPlayCollection: {
                            name: "Random",
                            playWebUrl: this.state.playLanguagePairingWebUrl
                        }
                    }),
                    style: {
                        marginTop: 10
                    }
                }, "Play ", a.createElement(j.default, {
                    name: "chevron-right"
                }))))
            }
            renderCore1kCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "Core1kCollection" === e.type));
                return s ? a.createElement(b.default, {
                    className: "core1k-collection",
                    collection: s,
                    fallbackDescription: "Play a collection of the most useful sentences and vocabulary you need to know.",
                    isSignedIn: l,
                    manage: () => this.setState({
                        managingCollection: s
                    }),
                    play: () => this.setState({
                        aboutToPlayCollection: s
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : null
            }
            renderFastTrackPanel({legacy: e=!1}={}) {
                const {collections: t, progressPerChunk: n, useProgressChunks: l} = this.state
                  , {isSignedIn: s} = this.props
                  , r = t.find((e => "FastTrackCollection" === e.type));
                return r ? a.createElement(N.default, {
                    className: "fast-track",
                    collection: r,
                    fallbackDescription: `Play ${r.numSentences.toLocaleString()} sentences with ${r.numSentences.toLocaleString()} unique cloze-words in order of difficulty.`,
                    helpText: "Fast and efficient language learning. Each word in each sentence is matched against a frequency list (a list of words ordered by how often they're likely to occur). The most difficult (least common) word is then selected as the missing word. The Fast Track has one sentence for each missing word, and the sentences are played in order of difficulty, so you're always making progress.",
                    isSignedIn: s,
                    manage: () => this.setState({
                        managingCollection: r
                    }),
                    name: e ? "Legacy Fast Track" : r.name,
                    panelId: e ? "legacy-fast-track" : null,
                    play: () => this.setState({
                        aboutToPlayCollection: r
                    }),
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderLegacyFastTrack() {
                const {collections: e} = this.state;
                if (e.filter((e => "FastTrackV2Collection" === e.type)).length)
                    return this.renderFastTrackPanel({
                        legacy: !0
                    })
            }
            renderMainPanel() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "Core1kCollection" === e.type))
                  , r = e.filter((e => "FastTrackV2Collection" === e.type))
                  , o = e.find((e => "FastTrackCollection" === e.type))
                  , i = e.find((e => "RandomCollection" === e.type));
                return r.length ? a.createElement(a.Fragment, null, a.createElement(T.default, {
                    collections: r,
                    hasFastTrackV1Progress: !!o && o.numPlaying > 0,
                    isSignedIn: l,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: (e, t) => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: t
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }), this.renderCore1kCollection()) : s || o ? a.createElement(a.Fragment, null, this.renderFastTrackPanel(), this.renderCore1kCollection()) : i ? a.createElement(b.default, {
                    className: "random-collection",
                    collection: i,
                    fallbackDescription: `Play ${i.numSentences.toLocaleString()} sentences in random order.`,
                    isSignedIn: l,
                    manage: () => this.setState({
                        managingCollection: i
                    }),
                    play: () => this.setState({
                        aboutToPlayCollection: i
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : null
            }
            renderFrequencyCollectionsPanel() {
                const {collections: e, playLanguagePairingWebUrl: t, progressPerChunk: n, useProgressChunks: l, user: s} = this.state
                  , r = e.filter((e => "FrequencyCollection" === e.type));
                return r.length ? a.createElement(R.default, {
                    collections: r,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: (e, t) => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: t
                    }),
                    playLanguagePairingWebUrl: t,
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderGrammarCollectionsPanel() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n, user: l} = this.state
                  , s = e.filter((e => "GrammarCollection" === e.type));
                return s.length ? a.createElement(A.default, {
                    collections: s,
                    isPro: l.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: t,
                    useProgressChunks: n
                }) : null
            }
            showAddToCollectionModal(e) {
                this.setState({
                    addingToCollection: e,
                    addToCollectionVisible: !0
                })
            }
            showCollectionEditor(e) {
                this.setState({
                    collectionEditorCollection: e,
                    collectionEditorModalVisible: !0
                })
            }
            renderMyCollectionsPanel() {
                const {collections: e, sharedCollectionsUrl: t, progressPerChunk: n, useProgressChunks: l} = this.state
                  , s = e.filter((e => !e.type));
                return a.createElement(Y.default, {
                    add: e => this.setState({
                        addingToCollection: e,
                        addToCollectionVisible: !0
                    }),
                    collections: s,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.user.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    onCollectionCreate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        t.unshift(e),
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onCollectionDelete: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t.splice(n, 1);
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onCollectionUpdate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t[n] = e;
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: n,
                    sharedCollectionsUrl: t,
                    teachingUrl: this.props.teachingUrl,
                    useProgressChunks: l
                })
            }
            renderCollectionGroupingsPanel() {
                const {collectionGroupings: e, collections: t, progressPerChunk: n, useProgressChunks: l, user: s} = this.state;
                return e && e.length ? a.createElement(g.default, {
                    collectionGroupings: e,
                    collections: t,
                    isPro: s.isPro,
                    isSignedIn: this.props.isSignedIn,
                    manage: e => this.setState({
                        managingCollection: e
                    }),
                    play: e => this.setState({
                        aboutToPlayCollection: e
                    }),
                    progressPerChunk: n,
                    useProgressChunks: l
                }) : null
            }
            renderRandomCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "Core1kCollection" === e.type))
                  , r = e.find((e => "FastTrackCollection" === e.type))
                  , o = e.find((e => "FastTrackV2Collection" === e.type))
                  , i = e.find((e => "RandomCollection" === e.type));
                if ((s || r || o) && i)
                    return a.createElement(b.default, {
                        className: "random-collection",
                        collection: i,
                        fallbackDescription: `Play ${i.numSentences.toLocaleString()} sentences in random order.`,
                        isSignedIn: l,
                        manage: () => this.setState({
                            managingCollection: i
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: i
                        }),
                        progressPerChunk: t,
                        useProgressChunks: n
                    })
            }
            renderNsfwCollection() {
                const {collections: e, progressPerChunk: t, useProgressChunks: n} = this.state
                  , {isSignedIn: l} = this.props
                  , s = e.find((e => "NsfwCollection" === e.type));
                if (s)
                    return a.createElement(b.default, {
                        className: "nsfw-collection",
                        collection: s,
                        fallbackDescription: "A collection of sentences with swear words, vulgarities, and other NSFW content.",
                        isSignedIn: l,
                        manage: () => this.setState({
                            managingCollection: s
                        }),
                        play: () => this.setState({
                            aboutToPlayCollection: s
                        }),
                        progressPerChunk: t,
                        useProgressChunks: n
                    })
            }
            renderPanels() {
                return a.createElement("div", null, this.renderAnonPlayPanel(), this.renderMainPanel(), this.renderPanelsAd(), this.renderFrequencyCollectionsPanel(), this.renderMyCollectionsPanel(), this.renderGrammarCollectionsPanel(), this.renderCollectionGroupingsPanel(), this.renderClozeListeningPanel(), this.renderClozeReadingPanel(), this.renderRandomCollection(), this.renderLegacyFastTrack(), this.renderNsfwCollection())
            }
            renderClozeListeningPanel() {
                if (!this.state.playClozeListeningUrl)
                    return null;
                const {clozeListening: e, collections: t, playClozeListeningUrl: n, progressPerChunk: l, useProgressChunks: s, user: r} = this.state
                  , {isSignedIn: o} = this.props
                  , {numPlaying: i, numReadyForReview: c, uniqueListeningTimeToday: d, uniqueListeningTimePast7Days: u, uniqueListeningTimePast30Days: h, uniqueListeningTimeTotal: g} = e;
                return i ? a.createElement(m.default, {
                    isPro: r.isPro,
                    numPlaying: i,
                    numReadyForReview: c,
                    uniqueListeningTimeToday: d,
                    uniqueListeningTimePast7Days: u,
                    uniqueListeningTimePast30Days: h,
                    uniqueListeningTimeTotal: g,
                    url: n
                }) : null
            }
            renderClozeReadingPanel() {
                const {clozeReadingPath: e, isSignedIn: t} = this.props;
                return e ? a.createElement("div", {
                    className: "panel panel-default cloze-reading"
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-file-text-o fa-4x",
                    "aria-hidden": "true",
                    style: {
                        marginLeft: 4
                    }
                })), a.createElement("h2", {
                    className: "title"
                }, "Cloze-Reading", a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    "data-content": "<p>Take your literacy to the next level! Practice reading native level content on a variety of topics from Wikipedia, or create your own.</p><p>Multiple paragraphs > multiple sentences > one missing word per sentence > select the correct answer > score points.</p><p>Points are saved after playing all sentences in an article and count towards your total score, level, and streak, but don't affect your overall sentences played, mastered, or reviews.</p>",
                    "data-html": "true",
                    "data-title": "Cloze-Reading",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    style: {
                        fontSize: "65%",
                        marginLeft: 8,
                        textDecoration: "none"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-question-sign"
                })), a.createElement("br", {
                    className: "hidden-xs"
                }), a.createElement("small", null, "Level up your reading skills with longer texts."), a.createElement("a", {
                    className: "btn btn-success joystix",
                    disabled: !t,
                    href: e,
                    style: {
                        marginLeft: 8
                    }
                }, "Go", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))) : null
            }
            renderAddToCollectionModal() {
                const {addingToCollection: e, addToCollectionVisible: t, user: n} = this.state;
                return t ? a.createElement(i.default, {
                    collection: e,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: n.isPro,
                    onFile: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddFileToCollectionModal(e)
                    }),
                    onHidden: () => this.setState({
                        addingToCollection: null,
                        addToCollectionVisible: !1
                    }),
                    onManual: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddSentenceToCollectionModal(e)
                    }),
                    onSearch: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showSentenceSearchModal(e)
                    }),
                    onPaste: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddTextToCollectionModal(e)
                    }),
                    onWords: () => this.addToCollectionModal.hide({
                        onHidden: () => this.showAddClozeFromWordsToCollectionModal(e)
                    }),
                    ref: e => this.addToCollectionModal = e
                }) : null
            }
            updateMyCollections() {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    data: {
                        filter: "mine"
                    },
                    url: this.state.collectionsUrl
                }).done((e => {
                    const t = e.collections.reduce(( (e, t) => (e[t.id] = t,
                    e)), {});
                    let n = this.state.collections.map((e => {
                        if (t[e.id]) {
                            const n = t[e.id];
                            return delete t[e.id],
                            n
                        }
                        return e
                    }
                    ));
                    n = n.concat(Object.values(t)),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        collections: n,
                        updating: !1
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the dashboard. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            updateCollection(e) {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    url: e.url
                }).done((e => {
                    let t = !1;
                    const n = this.state.collections.map((n => n.id === e.collection.id ? (t = !0,
                    e.collection) : n));
                    t || n.push(e.collection),
                    this.setState(Object.assign(this.getCollectionsStats(n), {
                        collections: n,
                        updating: !1
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating the dashboard. Sorry about that. Please refresh the page and let us know if you see this message again."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            renderManageCollectionModal() {
                const {collectionsUrl: e, managingCollection: t, managingCollectionScope: n, user: l} = this.state
                  , {baseLanguageEnglishName: s, targetLanguageCode: r, targetLanguageEnglishName: o, targetLanguageIso: i, targetLanguageName: c} = this.props;
                return t ? a.createElement(_.default, {
                    baseLanguageEnglishName: s,
                    collectionClozeSentencesUrl: t.collectionClozeSentencesUrl,
                    collectionName: t.name,
                    collectionType: t.type,
                    collectionsUrl: e,
                    deleteCollectionProgressUrl: t.deleteProgressUrl,
                    isCollectionEditable: t.isEditable,
                    isPro: l.isPro,
                    onHidden: ({hasCopiedSentences: e}) => {
                        const {managingCollection: t} = this.state;
                        this.setState({
                            managingCollection: null,
                            managingCollectionScope: null
                        }, ( () => {
                            if (e)
                                return this.loadLanguagePairing(),
                                !1;
                            this.updateCollection(t)
                        }
                        ))
                    }
                    ,
                    scope: n,
                    targetLanguageCode: r,
                    targetLanguageEnglishName: o,
                    targetLanguageIso: i,
                    targetLanguageName: c
                }) : null
            }
            showAddSentenceToCollectionModal(e) {
                this.setState({
                    addSentenceToCollectionVisible: !0,
                    addSentenceToCollection: e
                })
            }
            onMoreStatsBtnClick() {
                this.setState({
                    moreStatsVisible: !0
                })
            }
            renderProControls() {
                if (this.state.loading)
                    return null;
                const {isSignedIn: e} = this.props;
                return a.createElement("ul", {
                    className: "list-inline pro-controls",
                    style: {
                        marginRight: -5
                    }
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default btn-lg add-sentence-to-collection",
                    disabled: !e,
                    onClick: () => this.showAddSentenceToCollectionModal(),
                    "data-toggle": "tooltip",
                    title: "Add sentence to collection"
                }, a.createElement(j.default, {
                    name: "plus"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default btn-lg more-stats",
                    disabled: !e,
                    onClick: () => this.onMoreStatsBtnClick(),
                    "data-toggle": "tooltip",
                    title: "More stats"
                }, a.createElement(j.default, {
                    name: "stats"
                }))), a.createElement("li", null, a.createElement("button", {
                    id: "search-sentences",
                    disabled: !e,
                    onClick: () => this.onSearchBtnClick(),
                    className: "btn btn-default btn-lg",
                    "data-toggle": "tooltip",
                    title: "Search sentences"
                }, a.createElement(j.default, {
                    name: "search"
                }))), a.createElement("li", null, a.createElement("button", {
                    onClick: () => this.onReviewSettingsBtnClick(),
                    disabled: !e,
                    className: "btn btn-default btn-lg review-settings",
                    "data-toggle": "tooltip",
                    "data-html": "true",
                    title: "<span style='white-space: nowrap;'>Review settings</span>"
                }, a.createElement(j.default, {
                    name: "time"
                }))))
            }
            onSearchBtnClick() {
                this.showSentenceSearchModal()
            }
            showSentenceSearchModal(e) {
                this.setState({
                    addSentenceToCollection: e,
                    sentenceSearchModalVisible: !0
                })
            }
            onReviewSettingsBtnClick() {
                this.setState({
                    reviewSettingsModalVisible: !0
                })
            }
            renderDailyReminder() {
                return a.createElement(y.default, {
                    dailyReminderEmail: this.state.dailyReminderEmail,
                    isSignedIn: this.props.isSignedIn,
                    timeZone: this.props.timeZone,
                    updateUrl: this.state.dailyReminderEmailUrl
                })
            }
            renderDailyGoal() {
                const {isSignedIn: e, targetLanguageName: t, timeZone: n} = this.props
                  , {dailyGoalHoursLeftToday: l, dailyGoalPointsPerDay: s, dailyGoalStreak: r, dailyGoalUrl: o, numPointsToday: i} = this.state;
                return a.createElement(E.default, {
                    hoursLeftToday: l,
                    isSignedIn: e,
                    numPointsToday: i,
                    pointsPerDay: s,
                    streak: r,
                    targetLanguageName: t,
                    timeZone: n,
                    updateUrl: o
                })
            }
            renderProPromo() {
                return this.state.user.isPro ? null : a.createElement("div", {
                    className: "panel panel-default",
                    style: {
                        background: "#464646",
                        color: "#fff"
                    }
                }, a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("h5", {
                    style: {
                        fontSize: 24,
                        marginTop: 0
                    }
                }, "Get fluent faster."), a.createElement("a", {
                    href: "/pro",
                    className: "btn joystix btn-block btn-attention"
                }, "Clozemaster Pro", a.createElement(j.default, {
                    name: "chevron-right",
                    className: "hidden-md"
                }))))
            }
            renderGiftPro() {
                return this.props.giftsDisabled ? null : a.createElement("div", {
                    className: "panel panel-default gift-pro clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Gift Pro!"), a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("p", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, "Send Clozemaster Pro as a gift and get a free month!"), a.createElement("a", {
                    className: "btn btn-attention joystix btn-block",
                    href: "/gift-pro"
                }, "Learn More", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))
            }
            renderLatestBlogPost() {
                return a.createElement("div", {
                    className: "panel panel-default clozemaster"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, "Blog"), a.createElement("div", {
                    className: "panel-body text-center"
                }, a.createElement("strong", null, "Latest blog post:"), a.createElement("div", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, a.createElement("a", {
                    target: "_blank",
                    href: this.props.latestBlogPostUrl
                }, this.props.latestBlogPostTitle))))
            }
            renderChallengeFriends() {
                return null
            }
            renderFollowClozemaster() {
                return a.createElement(M.default, null)
            }
            renderPlayOptionsModal() {
                const {aboutToPlayCollection: e, aboutToPlayScope: t, collections: n, listeningTrialExpired: l, playOptions: s, speakingTrialExpired: r, user: o} = this.state
                  , {isSignedIn: i, isSpeakingSkillAvailable: c, targetLanguageCode: d, targetLanguageIso: u, translateTranscribeAvailable: m} = this.props;
                if (!e)
                    return null;
                let h = !1;
                return e.ttsAvailable ? h = !0 : "All" === e.name && ("ready_for_review" === t ? h = n.filter((e => e.numReadyForReview)).every((e => e.ttsAvailable)) : "favorited" === t && (h = n.filter((e => e.numFavorited)).every((e => e.ttsAvailable)))),
                h = h || o.isPro && window.clozemaster.systemTtsAvailable(u, d),
                a.createElement(Q.default, {
                    collection: e,
                    isPro: o.isPro,
                    isListeningSkillAvailable: h,
                    isSignedIn: i,
                    isSpeakingSkillAvailable: c,
                    listeningTrialExpired: l,
                    onHidden: () => this.setState({
                        aboutToPlayCollection: null,
                        aboutToPlayScope: null
                    }),
                    playOptions: s,
                    scope: t,
                    speakingTrialExpired: r,
                    targetLanguageIso: u,
                    translateTranscribeAvailable: m
                })
            }
            renderPast7DaysChart() {
                const {dailyStatsUrl: e, user: t} = this.state
                  , {isSignedIn: n} = this.props;
                return a.createElement("div", {
                    className: "text-center",
                    style: {
                        clear: "both",
                        position: "relative"
                    }
                }, a.createElement("canvas", {
                    ref: e => this.past7DaysCanvas = e,
                    style: {
                        width: "95%",
                        height: 100,
                        margin: "10px 0"
                    }
                }), a.createElement(L.default, {
                    dailyStatsUrl: e,
                    disabled: !n,
                    style: {
                        position: "absolute",
                        right: 0,
                        top: 10
                    },
                    user: t
                }))
            }
            renderReviewSettingsModal() {
                return this.state.reviewSettingsModalVisible ? a.createElement(X.default, {
                    isPro: this.state.user.isPro,
                    onHidden: () => this.setState({
                        reviewSettingsModalVisible: !1
                    }, ( () => this.loadLanguagePairing())),
                    url: this.state.reviewSettingsUrl
                }) : null
            }
            renderMoreStatsModal() {
                return this.state.moreStatsVisible ? a.createElement(q.default, {
                    isPro: this.state.user.isPro,
                    moreStatsUrl: this.state.moreStatsUrl,
                    onHidden: () => this.setState({
                        moreStatsVisible: !1
                    })
                }) : null
            }
            showAddClozeFromWordsToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addClozeFromWordsToCollectionModalVisible: !0
                })
            }
            showAddTextToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addTextToCollectionModalVisible: !0
                })
            }
            showAddFileToCollectionModal(e) {
                this.setState({
                    addSentencesToCollection: e,
                    addFileToCollectionModalVisible: !0
                })
            }
            renderAddClozeFromWordsToCollectionModal() {
                const {addSentencesToCollection: e, addClozeFromWordsToCollectionModalVisible: t, collectionsUrl: n, clozeFromWordsUrl: l, user: s} = this.state;
                return t ? a.createElement(d.default, {
                    collection: e,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addClozeFromWordsToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    clozeFromWordsUrl: l,
                    ref: e => this.addClozeFromWordsToCollectionModal = e
                }) : null
            }
            renderAddTextToCollectionModal() {
                const {addSentencesToCollection: e, addTextToCollectionModalVisible: t, collectionsUrl: n, quickClozeUrl: l, user: s} = this.state;
                return t ? a.createElement(u.default, {
                    collection: e,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addTextToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    quickClozeUrl: l,
                    ref: e => this.addTextToCollectionModal = e
                }) : null
            }
            renderAddFileToCollectionModal() {
                const {addSentencesToCollection: e, addFileToCollectionModalVisible: t, collectionsUrl: n, collectionFileImportUrl: l, user: s} = this.state;
                return t ? a.createElement(o.default, {
                    collection: e,
                    collectionFileImportUrl: l,
                    isPro: s.isPro,
                    onHidden: () => this.setState({
                        addSentencesToCollection: null,
                        addFileToCollectionModalVisible: !1
                    }),
                    onSentencesAdded: () => {
                        this.updateCollection(e)
                    }
                    ,
                    ref: e => this.addFileToCollectionModal = e
                }) : null
            }
            renderSentenceSearchModal() {
                return this.state.sentenceSearchModalVisible ? a.createElement(h.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.user.isPro,
                    initialSelectedCollectionId: this.state.addSentenceToCollection && this.state.addSentenceToCollection.id,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => {
                        this.updateMyCollections(),
                        this.setState({
                            sentenceSearchModalVisible: !1,
                            addSentenceToCollection: null
                        })
                    }
                    ,
                    url: this.state.clozeSentencesUrl
                }) : null
            }
            renderCollectionEditorModal() {
                if (!this.state.collectionEditorModalVisible)
                    return null;
                const {collectionEditorCollection: e, collectionsUrl: t, user: n} = this.state;
                return a.createElement(p.default, {
                    collection: e,
                    collectionsUrl: t,
                    isPro: n.isPro,
                    onCreate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        t.unshift(e),
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onDelete: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t.splice(n, 1);
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                    ,
                    onHidden: () => {
                        this.setState({
                            collectionEditorCollection: null,
                            collectionEditorModalVisible: !1
                        })
                    }
                    ,
                    onUpdate: e => {
                        const t = JSON.parse(JSON.stringify(this.state.collections));
                        for (let n = 0, a = t.length; n < a; n++)
                            if (t[n].id === e.id) {
                                t[n] = e;
                                break
                            }
                        this.setState({
                            collections: t
                        })
                    }
                })
            }
            renderAddSentenceToCollectionModal() {
                return this.state.addSentenceToCollectionVisible ? a.createElement(c.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    initialSelectedCollectionId: this.state.addSentenceToCollection && this.state.addSentenceToCollection.id,
                    isPro: this.state.user.isPro,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => this.setState({
                        addSentenceToCollectionVisible: !1,
                        addSentenceToCollection: null
                    }),
                    onSentenceAdded: (e, t) => {
                        this.updateCollection(t),
                        this.addSentenceToCollectionModal.reset()
                    }
                    ,
                    ref: e => this.addSentenceToCollectionModal = e
                }) : null
            }
            renderCollectionTypeModal() {
                const {collectionTypeModal: e, collections: t} = this.state;
                if (e) {
                    const n = this.readableCollectionType(e);
                    return a.createElement(G.default, {
                        footer: a.createElement(W.default, {
                            text: "Close"
                        }),
                        onHidden: () => this.setState({
                            collectionTypeModal: null
                        }),
                        ref: e => this.collectionTypeModalRef = e,
                        title: `${n} Progress`
                    }, t.filter((t => t.type === e)).map((e => a.createElement("div", null, a.createElement("p", {
                        className: "tw-flex tw-flex-row tw-justify-between"
                    }, a.createElement("strong", null, e.name), " ", e.numSentences.toLocaleString(), " sentences"), a.createElement(ue, {
                        collection: e
                    })))), a.createElement("button", {
                        className: "btn btn-success joystix btn-block",
                        onClick: () => {
                            this.setState({
                                activeTab: "collections"
                            }, ( () => {
                                this.collectionTypeModalRef && this.collectionTypeModalRef.hide();
                                const t = document.querySelector(`[data-type="${e}"]`);
                                t && t.scrollIntoView({
                                    behavior: "smooth"
                                }),
                                t.classList.contains("open") || t.querySelector(".btn.toggle-open").click()
                            }
                            ))
                        }
                    }, "Go to ", a.createElement("span", {
                        className: "tw-hidden md:tw-inline"
                    }, n, " "), "Collections"))
                }
            }
            renderCollectionReviewSettingsModal() {
                const {collectionReviewSettingsVisible: e} = this.state;
                if (!e)
                    return null;
                console.log("collectionReviewSettingsVisible", e);
                const {user: t} = this.state;
                return console.log("user", t),
                a.createElement(f.default, {
                    collectionName: e.name,
                    isPro: t.isPro,
                    onHidden: () => this.setState({
                        collectionReviewSettingsVisible: !1
                    }, ( () => this.loadLanguagePairing())),
                    url: ""
                })
            }
            renderModals() {
                return a.createElement(a.Fragment, null, this.renderPlayOptionsModal(), this.renderManageCollectionModal(), this.renderAddToCollectionModal(), this.renderAddSentenceToCollectionModal(), this.renderAddTextToCollectionModal(), this.renderAddClozeFromWordsToCollectionModal(), this.renderAddFileToCollectionModal(), this.renderCollectionEditorModal(), this.renderCollectionReviewSettingsModal(), this.renderCollectionTypeModal(), this.renderFavoritesModal(), this.renderDownloadFavoritesModal(), this.renderReviewSettingsModal(), this.renderSentenceSearchModal(), this.renderMoreStatsModal(), this.renderLanguagePairingSettingsModal(), this.renderDeleteLanguagePairingModal(), this.renderResetProgressModal())
            }
            renderResetProgressModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, targetLanguageFlagIso: n, targetLanguageName: l} = this.props
                  , {collections: s, resetProgressUrl: r} = this.state;
                return a.createElement(Z.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    collections: s.filter((e => e.playing)),
                    resetProgressUrl: r,
                    onResetLanguagePairing: () => this.setState({
                        updating: !0
                    }),
                    onResetCollection: () => this.setState({
                        updating: !0
                    }),
                    targetLanguageFlagIso: n,
                    targetLanguageName: l
                })
            }
            renderDeleteLanguagePairingModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props;
                return a.createElement(S.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    languagePairingUrl: n,
                    onDeleteLanguagePairing: () => this.setState({
                        updating: !0
                    }),
                    targetLanguageFlagIso: l,
                    targetLanguageName: s
                })
            }
            renderLanguagePairingSettingsModal() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, languagePairingUrl: n, targetLanguageFlagIso: l, targetLanguageName: s} = this.props
                  , {gameSettingsUrl: r, progressPerChunk: o, useProgressChunks: i} = this.state;
                return a.createElement(D.default, {
                    baseLanguageFlagIso: e,
                    baseLanguageName: t,
                    gameSettingsUrl: r,
                    languagePairingUrl: n,
                    onProgressChunksChange: ({progressPerChunk: e, useProgressChunks: t}) => {
                        this.setState({
                            progressPerChunk: e,
                            useProgressChunks: t
                        })
                    }
                    ,
                    progressPerChunk: o,
                    targetLanguageFlagIso: l,
                    targetLanguageName: s,
                    useProgressChunks: i
                })
            }
            renderControls() {
                const {isSignedIn: e} = this.props;
                return a.createElement("div", {
                    className: "text-right"
                }, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e,
                    id: "manage-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#manage-language-pairing-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cog"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-danger",
                    disabled: !e,
                    id: "reset-progress-btn",
                    "data-toggle": "modal",
                    "data-target": "#reset-progress-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-erase"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-danger",
                    disabled: !e,
                    id: "delete-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#delete-language-pairing-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-trash"
                })))))
            }
            renderOnboarding() {
                return null
            }
            renderMainContent() {
                return this.state.loading ? a.createElement(B.default, null) : a.createElement(x.default, null, this.renderStats(), this.renderPanels(), this.renderControls(), this.renderModals(), this.renderOnboarding())
            }
            renderUpdatingOverlay() {
                return this.state.updating ? a.createElement(O.default, null) : null
            }
            renderRightColumn() {
                return this.state.loading ? null : a.createElement("div", {
                    className: "col-xs-12 col-md-3 right-column"
                }, this.renderProPromo(), this.renderDailyReminder(), this.renderDailyGoal(), this.renderGiftPro(), this.renderLatestBlogPost(), this.renderRightColumnAd(), this.renderChallengeFriends(), this.renderFollowClozemaster(), this.renderUpdatingOverlay())
            }
            renderRightColumnAd() {
                const {user: e} = this.state
                  , {isPro: t} = e
                  , {googleAdsEnabled: n} = this.props;
                return t || !n ? null : a.createElement(I.default, null, a.createElement(U.default, null))
            }
            renderPanelsAd() {
                const {user: e} = this.state
                  , {isPro: t} = e
                  , {googleAdsEnabled: n} = this.props;
                return t || !n ? null : a.createElement(I.default, null, a.createElement(z.default, null))
            }
            renderAnonUserPromo() {
                return this.props.isSignedIn ? null : a.createElement("div", {
                    className: "joystix",
                    style: {
                        background: "#464646",
                        color: "#fff",
                        left: 0,
                        padding: "10px 15px",
                        position: "fixed",
                        right: 0,
                        textAlign: "center",
                        top: 0,
                        zIndex: 994
                    }
                }, a.createElement("div", {
                    className: "hidden-xs",
                    style: {
                        left: 10,
                        lineHeight: 1,
                        position: "absolute",
                        top: 2
                    }
                }, a.createElement("a", {
                    href: "/",
                    style: {
                        color: "#fff",
                        fontSize: "3em"
                    }
                }, "M")), "Get in the game! ", a.createElement("a", {
                    className: "btn btn-success",
                    href: "/sign-up"
                }, "Sign up"), " or ", a.createElement("a", {
                    className: "btn btn-success",
                    href: "/login"
                }, "Login"))
            }
            readableCollectionType(e) {
                switch (e) {
                case "FrequencyCollection":
                    return "Most Common Words";
                case "FastTrackV2Collection":
                    return "Fluency Fast Track";
                case "GrammarCollection":
                    return "Grammar Challenge";
                default:
                    return ""
                }
            }
            renderActiveTab() {
                const {activeTab: e, collectionsUrl: t, discoverMediasUrl: n, user: l} = this.state;
                if ("discover" === e)
                    return a.createElement(v.default, {
                        collectionsUrl: t,
                        isPro: l.isPro,
                        url: n
                    });
                if ("collections" === e) {
                    const {collections: e, collectionGroupings: t} = this.state
                      , n = t => e.filter(( ({type: e}) => e === t))
                      , s = (n("ClozeListeningCollection"),
                    n("Core1kCollection"))
                      , r = n(null)
                      , o = n("FastTrackCollection")
                      , i = n("FastTrackV2Collection")
                      , c = n("FrequencyCollection")
                      , d = n("GrammarCollection")
                      , u = n("NsfwCollection")
                      , m = n("RandomCollection");
                    let h = e.filter(( ({type: e}) => e && !["ClozeListeningCollection", "Core1kCollection", "FastTrackCollection", "FastTrackV2Collection", "FrequencyCollection", "GrammarCollection", "NsfwCollection", "RandomCollection"].includes(e))).sort(( (e, t) => e.name.localeCompare(t.name)));
                    const g = o.length ? {
                        collections: o,
                        description: `Play ${o[0].numSentences.toLocaleString()} sentences with ${o[0].numSentences.toLocaleString()} unique cloze-words in order of difficulty. Fast and efficient language learning. Each word in each sentence is matched against a frequency list (a list of words ordered by how often they're likely to occur). The most difficult (least common) word is then selected as the missing word. The Fast Track has one sentence for each missing word, and the sentences are played in order of difficulty, so you're always making progress.`,
                        name: o.name
                    } : {}
                      , p = [];
                    let b = !1;
                    if (this.props.everydayLifeFirst) {
                        let e = null;
                        (e = h.find((e => "Everyday Life" === e.name))) && (p.push({
                            collections: [e],
                            first: !0,
                            name: e.name
                        }),
                        h = h.filter((e => "Everyday Life" !== e.name)),
                        b = !0)
                    }
                    return i.length ? p.push({
                        collections: i,
                        collectionType: "FastTrackV2Collection",
                        description: "Expand your vocabulary quickly and efficiently - play through 10 collections in order of difficulty, from sentences with more common vocabulary to sentences with less common vocabulary.",
                        first: !b,
                        name: "Fluency Fast Track"
                    }) : o.length && p.push(Object.assign({}, g, {
                        first: !b
                    })),
                    p.push({
                        collections: c,
                        collectionType: "FrequencyCollection",
                        first: !i.length && !o.length,
                        name: "Most Common Words"
                    }),
                    p.push({
                        collections: s,
                        name: s.name
                    }),
                    p.push({
                        collections: d,
                        collectionType: "GrammarCollection",
                        name: "Grammar Challenges"
                    }),
                    t.forEach((t => {
                        p.push({
                            collections: e.filter((e => e.collectionGroupingId === t.id)),
                            name: t.name
                        })
                    }
                    )),
                    h.length && h.forEach((e => p.push({
                        collections: [e],
                        name: e.name
                    }))),
                    p.push({
                        collections: u,
                        name: "NSFW Collection"
                    }),
                    i.length && o.length && p.push(g),
                    p.push({
                        collections: m,
                        description: "A collection of randomly selected sentences, played in random order.",
                        name: m.name
                    }),
                    p.push({
                        collections: r,
                        customCollectionsPanel: !0,
                        description: "Play shared collections of cloze sentences or create your own!",
                        name: "Custom Collections"
                    }),
                    a.createElement(a.Fragment, null, p.map(( (t, n) => a.createElement(he, Object.assign({}, t, {
                        isPro: l.isPro,
                        key: n,
                        manage: e => this.setState({
                            managingCollection: e
                        }),
                        play: ({collection: e, scope: t=null}) => this.setState({
                            aboutToPlayCollection: e,
                            aboutToPlayScope: t
                        }),
                        sharedCollectionsUrl: this.state.sharedCollectionsUrl,
                        showAddToCollectionModal: e => this.showAddToCollectionModal(e),
                        showCollectionEditor: e => this.showCollectionEditor(e),
                        totalNumPlaying: e.reduce(( (e, t) => e + t.numPlaying), 0),
                        update: t => this.setState({
                            collections: e.map((e => e.id === t.id ? t : e))
                        })
                    })))), this.renderClozeListeningPanel())
                }
                const {baseLanguageFlagIso: s, languagePairingUrl: o, targetLanguageFlagIso: i} = this.props
                  , {activeMobilePanels: c, collections: d, currentLevelPoints: u, currentStreakDays: m, currentStreakIncludesToday: h, currentWeekLeaderboardRank: g, dailyGoalHoursLeftToday: p, dailyGoalPointsPerDay: b, dailyGoalUrl: f, dailyReminderEmail: E, dailyReminderEmailUrl: y, dailyStatsUrl: S, daysPlayedCount: C, gameSettingsUrl: w, languagePairingNotification: x, level: k, maxReviewsPerRound: N, nextLevelPoints: T, numFavorited: P, numMastered: M, numPlaying: R, numPointsToday: I, numReadyForReview: z, past7DaysNewReview: U, playLanguagePairingWebUrl: A, rankingsUrl: D, showDaysPlayedInsteadOfStreak: V, score: B} = this.state;
                return a.createElement(a.Fragment, null, x && a.createElement(ie, {
                    languagePairingNotification: x,
                    onPlayClick: e => this.setState({
                        aboutToPlayCollection: d.find((t => t.id === e))
                    })
                }), a.createElement("div", {
                    className: "tw-grid tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-4 tw-auto-rows-fr"
                }, a.createElement(K.default, {
                    className: `tw-mb-0 ${0 === c ? "tw-hidden" : ""} md:tw-block`,
                    bodyClassName: "tw-p-4"
                }, a.createElement("div", {
                    className: "tw-font-bold tw-uppercase"
                }, "Score"), a.createElement("div", {
                    className: "joystix tw-text-4xl tw-my-2.5"
                }, B.toLocaleString()), a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-flex-wrap"
                }, a.createElement("div", {
                    className: "tw-mr-4"
                }, a.createElement(J.default, null), " Playing: ", a.createElement("strong", null, R.toLocaleString())), a.createElement("div", null, a.createElement(H.default, null), " Mastered: ", a.createElement("strong", null, M.toLocaleString())))), a.createElement(te.default, {
                    activeMobilePanels: c,
                    collections: d,
                    numReadyForReview: z,
                    onPlay: e => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: "ready_for_review"
                    }),
                    onReviewSettingsBtnClick: this.onReviewSettingsBtnClick.bind(this),
                    playLanguagePairingUrl: A
                }), a.createElement(ae.default, {
                    activeMobilePanels: c,
                    currentStreakDays: m,
                    currentStreakIncludesToday: h,
                    dailyReminderEmail: E,
                    dailyReminderEmailUrl: y,
                    daysPlayedCount: C,
                    languagePairingUrl: o,
                    onShowDaysPlayedInsteadOfStreakChange: e => this.setState({
                        showDaysPlayedInsteadOfStreak: e
                    }),
                    showDaysPlayedInsteadOfStreak: V,
                    timeZone: this.props.timeZone
                }), a.createElement(le.default, {
                    activeMobilePanels: c,
                    hoursLeft: p,
                    numPointsToday: I,
                    pointsPerDay: b,
                    updateUrl: f
                }), a.createElement(K.default, {
                    className: `tw-mb-0 ${1 === c ? "tw-hidden" : ""} md:tw-block`,
                    bodyClassName: "tw-p-4"
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-justify-between"
                }, a.createElement("span", {
                    className: "tw-font-bold tw-uppercase"
                }, "Played Today")), a.createElement("div", {
                    className: "tw-my-2.5"
                }, a.createElement("span", {
                    className: "joystix tw-text-4xl"
                }, U[6].numNew + U[6].numReview), " sentences"), a.createElement("div", null, a.createElement("strong", null, U[6].numNew), " New / ", a.createElement("strong", null, U[6].numReview), " Review"), a.createElement("div", {
                    className: "sm:tw-hidden"
                }, a.createElement(L.default, {
                    dailyStatsUrl: S,
                    user: l
                }))), a.createElement(K.default, {
                    className: `tw-mb-0 ${0 === c ? "tw-hidden" : ""} md:tw-block`,
                    bodyClassName: "tw-p-4"
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-justify-between"
                }, a.createElement("span", {
                    className: "tw-font-bold tw-uppercase"
                }, "Level"), a.createElement("span", {
                    "data-toggle": "tooltip",
                    title: "Score more points to level up"
                }, a.createElement(j.default, {
                    name: "question-sign"
                }))), a.createElement("div", {
                    className: "joystix tw-my-2.5 tw-text-4xl"
                }, k.toLocaleString()), a.createElement("div", {
                    className: "progress",
                    style: {
                        height: 10,
                        margin: 0
                    }
                }, a.createElement("div", {
                    className: "progress-bar progress-bar-success",
                    style: {
                        width: (B - u) / (T - u) * 100 + "%"
                    }
                })), a.createElement("div", null, (T - B).toLocaleString(), " more points to level ", k + 1)), a.createElement(F.default, {
                    activeMobilePanels: c,
                    baseLanguageFlagIso: s,
                    currentWeekLeaderboardRank: g,
                    rankingsUrl: D,
                    targetLanguageFlagIso: i
                }), a.createElement(K.default, {
                    className: `tw-mb-0 ${0 === c ? "tw-hidden" : ""} md:tw-block`,
                    bodyClassName: "tw-p-4"
                }, a.createElement("div", {
                    className: "tw-font-bold tw-uppercase"
                }, "Favorites"), a.createElement("div", {
                    className: "joystix tw-my-2.5 tw-text-4xl"
                }, P.toLocaleString()), a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-gap-x-2"
                }, a.createElement("button", {
                    className: "btn btn-default joystix btn-xs tw-flex-1",
                    disabled: !P,
                    onClick: () => this.openFavoritesModal("view")
                }, "View"), a.createElement("button", {
                    className: "btn btn-success-outline joystix btn-xs tw-flex-1",
                    disabled: !P,
                    onClick: () => this.openFavoritesModal("play")
                }, "Play")))), a.createElement("div", {
                    className: "tw-my-2 tw-hidden md:tw-block"
                }, this.renderPast7DaysChart()), a.createElement("div", {
                    className: "md:tw-hidden tw-mt-6 tw-mb-4 tw-flex tw-flex-row tw-justify-center tw-gap-5"
                }, a.createElement("button", {
                    className: "btn btn-default btn-sm",
                    disabled: 0 === c,
                    onClick: () => this.setState({
                        activeMobilePanels: 0
                    })
                }, a.createElement(j.default, {
                    name: "chevron-left"
                })), a.createElement("button", {
                    className: "btn btn-default btn-sm",
                    disabled: 1 === c,
                    onClick: () => this.setState({
                        activeMobilePanels: 1
                    })
                }, a.createElement(j.default, {
                    name: "chevron-right"
                }))), a.createElement("div", null, a.createElement("p", {
                    className: "joystix"
                }, "In Progress"), !d.filter((e => e.dashboardCollection)).length && a.createElement("div", {
                    className: "tw-flex tw-flex-col tw-items-center tw-my-20"
                }, a.createElement("div", {
                    className: "tw-mb-10 tw-text-5xl tw-font-bold tw-text-center"
                }, "Choose a collection and get in the game!"), a.createElement("button", {
                    className: "btn btn-success btn-lg joystix",
                    onClick: () => this.setState({
                        activeTab: "collections"
                    })
                }, "Start ", a.createElement(j.default, {
                    name: "chevron-right"
                }))), d.filter((e => e.dashboardCollection)).sort(r.E).map((e => a.createElement(K.default, null, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-mb-5 tw-items-start"
                }, a.createElement("div", {
                    className: "md:tw-flex md:tw-flex-row tw-flex-1 md:tw-items-center md:tw-gap-4"
                }, a.createElement("div", {
                    className: "tw-text-5xl tw-font-bold"
                }, e.name), a.createElement("div", null, e.numSentences.toLocaleString(), " Sentences"), this.readableCollectionType(e.type) && a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-success-outline btn-xs",
                    onClick: () => this.setState({
                        collectionTypeModal: e.type
                    })
                }, this.readableCollectionType(e.type)))), a.createElement(ce, {
                    button: a.createElement("button", {
                        className: "btn btn-default btn-sm",
                        "data-toggle": "dropdown"
                    }, a.createElement(j.default, {
                        name: "option-horizontal"
                    })),
                    lis: a.createElement(a.Fragment, null, e.isEditable && a.createElement("li", null, a.createElement("a", {
                        "data-target": "#",
                        role: "button",
                        onClick: () => this.showAddToCollectionModal(e)
                    }, a.createElement(j.default, {
                        name: "plus"
                    }), a.createElement("span", {
                        className: "tw-ml-5"
                    }, "Add Sentences"))), a.createElement("li", null, a.createElement("a", {
                        "data-target": "#",
                        role: "button",
                        onClick: () => this.setState({
                            managingCollection: e
                        })
                    }, a.createElement(j.default, {
                        name: "list"
                    }), a.createElement("span", {
                        className: "tw-ml-5"
                    }, "Manage Sentences"))), e.isEditable && a.createElement("li", null, a.createElement("a", {
                        "data-target": "#",
                        role: "button",
                        onClick: () => this.showCollectionEditor(e)
                    }, a.createElement(j.default, {
                        name: "pencil"
                    }), a.createElement("span", {
                        className: "tw-ml-5"
                    }, "Edit Collection"))), a.createElement("li", {
                        role: "separator",
                        className: "divider"
                    }), a.createElement("li", null, a.createElement("a", {
                        "data-target": "#",
                        role: "button",
                        onClick: () => de({
                            collection: e,
                            done: t => {
                                this.setState({
                                    collections: d.map((n => n.id === e.id ? t.collection : n))
                                })
                            }
                        })
                    }, a.createElement(j.default, {
                        name: "pushpin"
                    }), a.createElement("span", {
                        className: "tw-ml-5"
                    }, "Unpin from Dashboard")))),
                    right: !0
                })), a.createElement(ue, {
                    collection: e
                }), a.createElement("div", {
                    className: "tw-flex tw-flex-col sm:tw-flex-row tw-gap-5 tw-mb-5"
                }, a.createElement("button", {
                    className: "btn btn-block btn-success joystix",
                    disabled: (e.proOnly || !e.type) && !l.isPro || !N && e.numPlaying === e.numSentences,
                    onClick: () => this.setState({
                        aboutToPlayCollection: e
                    })
                }, "Play"), a.createElement("div", {
                    className: "tw-flex sm:tw-min-w-96"
                }, a.createElement("button", {
                    className: "btn btn-success-outline btn-sm joystix tw-flex-1",
                    disabled: !e.numReadyForReview,
                    onClick: () => this.setState({
                        aboutToPlayCollection: e,
                        aboutToPlayScope: "ready_for_review"
                    })
                }, "Review (", e.numReadyForReview, ")"))), a.createElement("div", {
                    className: "tw-flex tw-flex-row"
                }, a.createElement("div", {
                    className: "tw-flex-1"
                }, (e.proOnly || !e.type) && !l.isPro && a.createElement("span", {
                    className: "joystix tw-mr-5"
                }, "Pro!"), !N && e.numPlaying === e.numSentences && a.createElement("div", {
                    className: "tw-mr-5"
                }, "Max reviews per round set to 0 and no more new sentences! \ud83c\udf89"), a.createElement(se, {
                    collection: e
                })), a.createElement("div", null, !!e.numMarkedAsKnown && a.createElement(a.Fragment, null, "Marked as Known: ", e.numMarkedAsKnown)))))), a.createElement("div", {
                    className: "tw-flex tw-flex-row"
                }, a.createElement("div", {
                    className: "tw-flex-1"
                }, a.createElement("button", {
                    className: "btn btn-default btn-lg tw-mr-5",
                    onClick: () => this.setState({
                        activeTab: "collections"
                    })
                }, a.createElement(j.default, {
                    name: "plus"
                }), " Add Collection")), a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-default btn-xs tw-mr-5",
                    id: "reset-progress-btn",
                    "data-toggle": "modal",
                    "data-target": "#reset-progress-modal"
                }, "Reset", a.createElement("span", {
                    className: "tw-hidden md:tw-inline"
                }, " Progress")), a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    id: "delete-language-pairing-btn",
                    "data-toggle": "modal",
                    "data-target": "#delete-language-pairing-modal"
                }, "Delete", a.createElement("span", {
                    className: "tw-hidden md:tw-inline"
                }, " Language Pairing")))), a.createElement("div", {
                    className: "md:tw-hidden tw-my-5"
                }, a.createElement(oe, {
                    gameSettingsUrl: w
                }))))
            }
            render() {
                const {baseLanguageFlagIso: e, baseLanguageName: t, blogPostsPath: n, clozeReadingPath: l, languagePairings: s, monthlyCollectionPollUrl: r, targetLanguageFlagIso: o, targetLanguageName: i, unseenUserNotificationsCount: c, userProfilePath: d} = this.props
                  , {activeTab: u, discoverMediasUrl: m, gameSettingsUrl: h, loading: g, user: p} = this.state;
                return console.log("languagePairings", s),
                g ? a.createElement("div", {
                    className: "tw-mt-10 tw-flex tw-flex-column tw-justify-center tw-flex-1"
                }, a.createElement(B.default, null)) : a.createElement("div", {
                    id: "dashboard",
                    className: "container-fluid tw-flex tw-flex-1 tw-ml-0 2xl:tw-max-w-screen-2xl 2xl:tw-my-0 2xl:tw-mx-auto"
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-flex-1 -tw-mb-20"
                }, a.createElement("div", {
                    className: "tw-hidden md:tw-block tw-w-80 tw-pt-5 tw-pb-20",
                    style: {
                        backgroundColor: "#464646",
                        borderRight: "3px solid #000",
                        marginLeft: -15,
                        paddingLeft: 15
                    }
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-items-center tw-mb-5"
                }, a.createElement("svg", {
                    width: "35",
                    height: "34",
                    viewBox: "0 0 35 34",
                    fill: "none",
                    xmlns: "http://www.w3.org/2000/svg"
                }, a.createElement("path", {
                    fillRule: "evenodd",
                    clipRule: "evenodd",
                    d: "M12.7875 23.5429L14.7805 25.5341H21.3061V32.0373L23.2737 34H34.1826V2.05782L32.1197 0H21.2966V4.24881H17.05V6.22102L15.0792 4.25832H12.7843V1.95953L10.8199 0H0V32.0373L1.96755 34H12.7875V23.5429Z",
                    fill: "#0A0A0A"
                }), a.createElement("path", {
                    d: "M22.4466 30.8928H30.9684V1.14795H22.4466V5.39676H18.1873V9.64557H13.928V5.39676H9.66866V1.14795H1.15002V30.8928H9.66866V18.1432H13.928V22.3952H18.1873V18.1432H22.4466V30.8928Z",
                    fill: "#5CB85B"
                })), a.createElement("div", {
                    className: "joystix tw-ml-2 tw-text-white"
                }, "Clozemaster")), a.createElement("ul", {
                    className: "tw-list-none tw-p-0",
                    style: {
                        marginLeft: -15
                    }
                }, [["dashboard", "Dashboard"], ["collections", "Collections"], !!m && ["discover", a.createElement(a.Fragment, null, "Discover", a.createElement("sup", null, " Beta"))], !!l && ["cloze-reading", "Cloze-Reading", l]].filter((e => e)).map((e => a.createElement("li", {
                    key: e[0]
                }, a.createElement("a", {
                    "data-target": "#",
                    href: e[2],
                    role: "button",
                    className: "hover:tw-bg-success hover:tw-text-black tw-block tw-p-6 joystix " + (u === e[0] ? "tw-bg-success tw-text-black" : "tw-text-white"),
                    onClick: () => this.setState({
                        activeTab: e[0]
                    }),
                    style: {
                        textDecoration: "none"
                    }
                }, e[1]))))), a.createElement("div", {
                    className: "tw-text-white",
                    style: {
                        paddingRight: 15
                    }
                }, !p.isPro && a.createElement("div", {
                    className: "tw-mt-20"
                }, a.createElement("div", {
                    className: "tw-text-center tw-mb-2"
                }, "Get fluent faster."), a.createElement("a", {
                    href: "/pro",
                    className: "btn btn-attention btn-block joystix"
                }, "Clozemaster", a.createElement("br", null), "Pro")), a.createElement("div", {
                    className: "tw-mt-20 tw-text-center"
                }, a.createElement(oe, {
                    gameSettingsUrl: h
                })), !!r && a.createElement("div", {
                    className: "tw-mt-20 tw-text-center"
                }, "What collections would you like to see added?", a.createElement("a", {
                    href: r,
                    className: "btn btn-default btn-block tw-mt-2 joystix"
                }, "Vote now!")))), a.createElement("div", {
                    className: "tw-fixed tw-bottom-0 tw-left-0 tw-right-0 md:tw-hidden tw-bg-black tw-flex tw-flex-row",
                    style: {
                        borderTop: "3px solid #000",
                        zIndex: 1035
                    }
                }, [["dashboard", "Dashboard", "home"], ["collections", "Collections", "tasks"], ["", "Pro", "star", "/pro"], !!l && ["cloze-reading", "Cloze-Reading", "book", l]].filter((e => e)).map((e => a.createElement("a", {
                    "data-target": "#",
                    role: "button",
                    className: `tw-decoration-none tw-block tw-flex-1 tw-py-6 ${u === e[0] ? "tw-bg-success !tw-text-black" : "!tw-text-white "} text-center`,
                    href: e[3],
                    key: e[0],
                    onClick: () => this.setState({
                        activeTab: e[0]
                    })
                }, a.createElement(j.default, {
                    name: e[2]
                }), a.createElement("span", {
                    className: "tw-block tw-text-sm"
                }, e[1]))))), a.createElement("div", {
                    className: "tw-flex-1 md:tw-ml-10 tw-pt-5 tw-pb-20"
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-row tw-mb-5"
                }, a.createElement("div", {
                    className: "tw-flex tw-flex-1"
                }, a.createElement("div", {
                    className: "btn-group"
                }, a.createElement("button", {
                    type: "button",
                    className: "btn btn-default dropdown-toggle",
                    "data-toggle": "dropdown"
                }, a.createElement(P.default, {
                    flagIso: o,
                    size: 24
                }), a.createElement("span", {
                    className: "tw-mr-5"
                }, a.createElement(P.default, {
                    flagIso: e,
                    size: 24
                })), a.createElement("span", {
                    className: "joystix tw-hidden md:tw-inline tw-mr-5 tw-align-middle"
                }, i, " / ", t), a.createElement("span", {
                    className: "caret"
                })), a.createElement("ul", {
                    className: "dropdown-menu"
                }, s.map((e => a.createElement("li", {
                    key: e.id,
                    style: {
                        backgroundColor: e.currentStreakIncludesToday ? "rgba(92, 184, 92, 0.2)" : null
                    }
                }, a.createElement("a", {
                    href: `/l/${e.slug}`
                }, a.createElement(P.default, {
                    flagIso: e.targetLanguageFlagIso,
                    size: 24
                }), a.createElement(P.default, {
                    flagIso: e.baseLanguageFlagIso,
                    size: 24
                }), a.createElement("span", {
                    className: "tw-ml-5 tw-align-middle"
                }, a.createElement("span", {
                    className: "tw-font-bold"
                }, e.targetLanguageName), " / ", e.baseLanguageName), !e.showDaysPlayedInsteadOfStreak && a.createElement("span", {
                    className: "tw-block joystix tw-text-base"
                }, "Streak: ", a.createElement("span", {
                    className: e.currentStreakIncludesToday ? "tw-color-streak-active" : ""
                }, e.currentStreakDays), " ", e.currentStreakIncludesToday && a.createElement(j.default, {
                    style: {
                        color: "#27bb4e"
                    },
                    name: "ok"
                })), !!e.showDaysPlayedInsteadOfStreak && a.createElement("span", {
                    className: "tw-block joystix tw-text-base"
                }, "Days Played: ", a.createElement("span", {
                    className: e.currentStreakIncludesToday ? "tw-color-streak-active" : ""
                }, e.daysPlayedCount), " ", e.currentStreakIncludesToday && a.createElement(j.default, {
                    style: {
                        color: "#27bb4e"
                    },
                    name: "ok"
                })), a.createElement("span", {
                    className: "tw-block joystix tw-text-base"
                }, "Review: ", e.numReadyForReview.toLocaleString()), a.createElement("span", {
                    className: "tw-block joystix tw-text-base"
                }, e.dailyGoalPointsPerDay ? a.createElement(a.Fragment, null, "Daily Goal: ", a.createElement("span", {
                    className: e.numPointsToday >= e.dailyGoalPointsPerDay ? "tw-color-success" : ""
                }, e.numPointsToday), " / ", e.dailyGoalPointsPerDay) : a.createElement(a.Fragment, null, "Points today: ", e.numPointsToday)))))), a.createElement("li", {
                    style: {
                        margin: "10px 20px"
                    }
                }, a.createElement("a", {
                    className: "btn btn-default joystix btn-block",
                    href: "/languages"
                }, a.createElement(j.default, {
                    name: "plus"
                }), " Language Pairing")))), a.createElement("button", {
                    className: "btn btn-default tw-ml-4",
                    onClick: () => this.onSearchBtnClick(),
                    title: "Search sentences"
                }, a.createElement(j.default, {
                    name: "search"
                })), a.createElement("button", {
                    className: "btn btn-default tw-ml-4",
                    onClick: () => this.showAddSentenceToCollectionModal(),
                    title: "Add sentence to collection"
                }, a.createElement(j.default, {
                    name: "plus"
                })), a.createElement("button", {
                    className: "btn btn-default tw-ml-4 more-stats",
                    onClick: () => this.onMoreStatsBtnClick(),
                    title: "More stats"
                }, a.createElement(j.default, {
                    name: "stats"
                }))), a.createElement("div", {
                    className: "btn-group tw-flex"
                }, a.createElement("button", {
                    type: "button",
                    className: "btn btn-default dropdown-toggle",
                    "data-toggle": "dropdown"
                }, a.createElement("span", {
                    className: "caret"
                })), a.createElement("ul", {
                    className: "dropdown-menu dropdown-menu-right"
                }, a.createElement("li", null, a.createElement("span", {
                    style: {
                        display: "block",
                        padding: "3px 20px"
                    }
                }, a.createElement("small", null, "Username:"), a.createElement("br", null), a.createElement("span", {
                    className: "joystix tw-mr-2"
                }, p.username), a.createElement("small", null, a.createElement("a", {
                    href: "/settings"
                }, "Edit")))), a.createElement("li", {
                    role: "separator",
                    className: "divider"
                }), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: "/settings"
                }, a.createElement(j.default, {
                    name: "wrench"
                }), " Account")), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: "/notifications"
                }, a.createElement(j.default, {
                    name: "bell"
                }), " Notifications", !!c && a.createElement("span", {
                    className: "badge tw-ml-5"
                }, c))), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: "/activity-feed"
                }, a.createElement(j.default, {
                    name: "list-alt"
                }), " Activity Feed")), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: d
                }, a.createElement(j.default, {
                    name: "user"
                }), " Profile")), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: "/players/leaderboard"
                }, a.createElement(j.default, {
                    name: "sort"
                }), " Leaderboard")), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: "https://forum.clozemaster.com"
                }, a.createElement(j.default, {
                    name: "comment"
                }), " Forum")), a.createElement("li", null, a.createElement("a", {
                    className: "joystix",
                    href: "/logout"
                }, a.createElement(j.default, {
                    name: "log-out"
                }), " Logout"))))), this.renderActiveTab())), this.renderModals(), a.createElement(C.default, {
                    androidUrl: this.props.androidAppUrl,
                    iosUrl: this.props.iosAppUrl
                }))
            }
        }
    },
    91621: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return f
            }
        });
        var a = n(96540)
          , l = n(40961)
          , s = n(58108)
          , r = (n(68462),
        n(96991))
          , o = n(40727)
          , i = n(73898)
          , c = n(29419)
          , d = n(40897)
          , u = n(18152)
          , m = n(20126);
        function h({src: e}) {
            const t = (0,
            a.useRef)(null)
              , [n,l] = ((0,
            a.useRef)(null),
            (0,
            a.useState)(!1))
              , [r,i] = (0,
            a.useState)(0)
              , [c,d] = (0,
            a.useState)(0);
            r && Math.min(100, c / r * 100);
            (0,
            a.useEffect)(( () => {
                const e = t.current;
                if (!e)
                    return;
                const n = () => d(e.currentTime || 0)
                  , a = () => i(e.duration || 0)
                  , s = () => l(!1);
                return e.addEventListener("timeupdate", n),
                e.addEventListener("loadedmetadata", a),
                e.addEventListener("ended", s),
                () => {
                    e.removeEventListener("timeupdate", n),
                    e.removeEventListener("loadedmetadata", a),
                    e.removeEventListener("ended", s)
                }
            }
            ), []),
            (0,
            a.useEffect)(( () => {
                const e = t.current;
                e && (l(!1),
                d(0),
                i(0),
                e.pause(),
                e.load())
            }
            ), [e]);
            return a.createElement("div", {
                className: "audio-player",
                style: {
                    alignItems: "center",
                    display: "flex",
                    flexDirection: "row",
                    gap: 10
                }
            }, a.createElement("audio", {
                ref: t,
                preload: "metadata"
            }, a.createElement("source", {
                src: e,
                type: "audio/mpeg"
            }), "Your browser does not support the audio element."), a.createElement("div", {
                className: "btn-group",
                role: "group",
                "aria-label": "Audio controls"
            }, a.createElement("button", {
                type: "button",
                className: "btn btn-lg btn-default",
                onClick: () => {
                    const e = t.current;
                    e && (n ? (e.pause(),
                    l(!1)) : (e.play(),
                    l(!0)))
                }
                ,
                "aria-label": n ? "Pause" : "Play"
            }, a.createElement(o.default, {
                name: n ? "pause" : "play"
            }))), a.createElement("input", {
                type: "range",
                min: 0,
                max: r,
                step: 1,
                value: c,
                onChange: e => {
                    t.current.currentTime = e.target.value,
                    d(e.target.value)
                }
                ,
                style: {
                    width: 200
                }
            }), a.createElement("div", {
                style: {
                    whiteSpace: "nowrap",
                    width: 100
                }
            }, (0,
            s.Ae)(Math.floor(c)), " / ", (0,
            s.Ae)(Math.floor(r))))
        }
        const g = ({clozeSentence: e, collectionsUrl: t, onSave: n}) => {
            const [l,s] = (0,
            a.useState)(!1)
              , [o,i] = (0,
            a.useState)(null);
            return a.createElement(u.default, {
                heading: "Add to Collection",
                style: {
                    marginTop: 20
                }
            }, a.createElement(r.default, {
                collectionsUrl: t,
                onSelect: e => {
                    i(e)
                }
            }), a.createElement("button", {
                className: "btn btn-success",
                disabled: !o || l,
                onClick: () => {
                    s(!0),
                    $.ajax({
                        data: {
                            collection_id: o.id
                        },
                        method: "post",
                        url: e.addToCollectionUrl
                    }).done(( () => {
                        s(!1),
                        n()
                    }
                    )).fail(( () => {
                        alert("Failed to add to collection!")
                    }
                    ))
                }
            }, "Save"))
        }
          , p = ({clozeSentence: e, collectionsUrl: t, index: n, isPro: l, onUpdate: r}) => {
            const [i,d] = (0,
            a.useState)(!1)
              , [m,h] = (0,
            a.useState)(e.answered)
              , [p,b] = (0,
            a.useState)(!1)
              , [f,E] = (0,
            a.useState)(!1)
              , y = (0,
            a.useRef)(null)
              , {preClozeStr: S, cloze: v, postClozeStr: C} = (0,
            s.UE)(e.text)
              , w = l || n < 5
              , x = () => {
                if (!w)
                    return !1;
                h(!m),
                $.ajax({
                    method: m ? "delete" : "post",
                    url: e.userClozeSentenceUrl
                }).done(( () => {
                    r({
                        ...e,
                        answered: !m
                    })
                }
                )).fail(( () => {
                    alert("Failed to toggle answer!")
                }
                ))
            }
            ;
            return a.createElement("div", {
                className: "panel panel-default",
                style: {
                    overflow: "visible",
                    position: "relative"
                }
            }, a.createElement("div", {
                className: "panel-body " + (m ? "bg-success" : ""),
                style: w ? null : {
                    filter: "blur(5px)",
                    pointerEvents: "none"
                }
            }, w && a.createElement("audio", {
                ref: y,
                src: e.ttsUrl,
                preload: "none"
            }), a.createElement("div", {
                style: {
                    marginBottom: 10
                }
            }, a.createElement("div", {
                style: {
                    fontSize: "1.5em"
                }
            }, S, a.createElement("span", {
                onClick: x,
                style: {
                    cursor: "pointer"
                }
            }, m ? a.createElement("strong", null, a.createElement("u", null, v)) : [...Array(v.length)].map(( () => "_")).join("")), C), a.createElement("div", null, e.translation)), a.createElement("div", {
                style: {
                    alignItems: "center",
                    display: "flex",
                    gap: 10
                }
            }, w ? a.createElement(a.Fragment, null, a.createElement("button", {
                className: "btn btn-default btn-" + (m ? "default" : "success"),
                onClick: x,
                style: {
                    width: 100
                }
            }, a.createElement(o.default, {
                name: "refresh"
            }), " ", m ? "Hide" : "Show"), a.createElement("button", {
                className: "btn btn-default",
                onClick: () => y.current.paused ? y.current.play() : y.current.pause()
            }, a.createElement(o.default, {
                name: "volume-up"
            })), m && a.createElement(a.Fragment, null, a.createElement("button", {
                className: "btn btn-default",
                onClick: () => b(!p)
            }, a.createElement(o.default, {
                name: "chevron-" + (p ? "up" : "down")
            }), " Explain"), a.createElement("button", {
                className: "btn btn-default " + (i ? "active" : ""),
                onClick: () => d(!i)
            }, a.createElement(o.default, {
                name: "plus"
            }), " Add to Collection"), f && a.createElement("span", null, "Saved!"))) : a.createElement(a.Fragment, null, a.createElement("button", {
                className: "btn btn-default btn-" + (m ? "default" : "success"),
                disabled: !0,
                style: {
                    width: 100
                }
            }, a.createElement(o.default, {
                name: "refresh"
            }), " ", m ? "Hide" : "Show"), a.createElement("button", {
                className: "btn btn-default",
                disabled: !0
            }, a.createElement(o.default, {
                name: "volume-up"
            })))), i && a.createElement(g, {
                clozeSentence: e,
                collectionsUrl: t,
                isPro: l,
                onSave: () => {
                    E(!0),
                    d(!1)
                }
            }), p && a.createElement("div", {
                style: {
                    marginTop: 20
                }
            }, a.createElement(u.default, null, a.createElement(c.default, null, e.explanation)))), !l && 5 === n && a.createElement("div", {
                style: {
                    display: "flex",
                    justifyContent: "center",
                    left: 0,
                    position: "absolute",
                    right: 0,
                    top: 60,
                    zIndex: 999
                }
            }, a.createElement("div", {
                style: {
                    backgroundColor: "#000",
                    borderRadius: 12,
                    color: "#fff",
                    padding: "50px 30px",
                    width: "75%"
                }
            }, a.createElement("p", {
                style: {
                    fontSize: "2em",
                    fontWeight: "bold",
                    marginBottom: 30,
                    textAlign: "center"
                }
            }, "Get full access to the rest of this content and get fluent faster with Clozemaster Pro."), a.createElement("a", {
                className: "btn btn-success btn-lg btn-block joystix",
                href: "/pro"
            }, "Get Pro today!"))))
        }
          , b = ({collectionsUrl: e, discoverMedia: t, isPro: n}) => {
            const [r,o] = (0,
            a.useState)([])
              , [c,d] = (0,
            a.useState)(!1)
              , [u,m] = (0,
            a.useState)(null);
            (0,
            a.useEffect)(( () => {
                $.ajax({
                    url: t.url
                }).done((e => {
                    const {discoverMedia: t} = e
                      , {clozeSentences: n, ttsUrl: a} = t;
                    console.log("clozeSentences", n),
                    o(n),
                    m(a),
                    d(!0)
                }
                )).fail(( () => {
                    alert("Failed to load sentences!")
                }
                ))
            }
            ), []);
            const g = c ? a.createElement(a.Fragment, null, r.map(( (t, l) => a.createElement(p, {
                clozeSentence: t,
                collectionsUrl: e,
                index: l,
                isPro: n,
                onUpdate: e => o(r.map((t => t.id === e.id ? e : t)))
            }))), l.createPortal(a.createElement("div", {
                style: {
                    alignItems: "center",
                    bottom: 15,
                    display: "flex",
                    flexDirection: "column",
                    justifyContent: "center",
                    height: 0,
                    left: 0,
                    position: "fixed",
                    right: 0,
                    zIndex: 1050
                }
            }, a.createElement("div", {
                style: {
                    backgroundColor: "rgba(214, 214, 214, 0.9)",
                    borderRadius: 10,
                    boxShadow: "rgb(221, 221, 221) 3px 3px 10px",
                    marginBottom: 80,
                    padding: 10
                }
            }, a.createElement(h, {
                src: u
            }), a.createElement("div", {
                style: {
                    textAlign: "center"
                }
            }, r.filter((e => e.answered)).length, " / ", r.length, " answered (", (0,
            s.Xc)(r.filter((e => e.answered)).length, r.length), ")"))), document.querySelector("body"))) : a.createElement(i.default, null);
            return a.createElement(a.Fragment, null, a.createElement("h1", {
                style: {
                    marginTop: 0
                }
            }, t.title, a.createElement("br", null), a.createElement("small", null, t.titleTranslation)), g)
        }
        ;
        function f({collectionsUrl: e, isPro: t, url: n}) {
            const [l,s] = (0,
            a.useState)(null)
              , [r,o] = (0,
            a.useState)([])
              , [c,u] = (0,
            a.useState)([])
              , [h,g] = (0,
            a.useState)(!1)
              , [p,f] = (0,
            a.useState)([]);
            (0,
            a.useEffect)(( () => {
                $.ajax({
                    url: n
                }).done((e => {
                    console.log("data", e);
                    const {difficulties: t, groupedDiscoverMedias: n, mediaTypes: a} = e;
                    o(t),
                    u(n),
                    f(a),
                    g(!0)
                }
                )).fail(( () => {
                    alert("Failed to load media!")
                }
                ))
            }
            ), []);
            const E = h ? a.createElement(a.Fragment, null, c.map((e => a.createElement("div", null, a.createElement("h1", {
                style: {
                    fontWeight: "bold"
                }
            }, e.pluralizedName), r.map((t => a.createElement(a.Fragment, null, a.createElement("h3", null, t), a.createElement("div", {
                style: {
                    display: "flex",
                    flexDirection: "row",
                    flexWrap: "wrap",
                    gap: 15
                }
            }, e.discoverMedias.filter((e => e.difficulty === t)).map((e => a.createElement("div", {
                className: "panel panel-default",
                style: {
                    display: "flex",
                    flexDirection: "column",
                    minHeight: 250,
                    width: 250
                }
            }, a.createElement("div", {
                className: "panel-body",
                style: {
                    display: "flex",
                    flex: 1,
                    flexDirection: "column"
                }
            }, a.createElement("div", {
                style: {
                    flex: 1
                }
            }, a.createElement("div", null, a.createElement("span", {
                className: "label label-default",
                style: {
                    marginBottom: 5
                }
            }, e.difficulty)), a.createElement("div", null, a.createElement("span", {
                className: "label label-default"
            }, e.genre)), a.createElement("h4", null, e.title, a.createElement("br", null), a.createElement("small", null, e.titleTranslation))), a.createElement("div", null, e.clozeSentencesCount, " sentences"), a.createElement(m.default, {
                percent: e.userClozeSentencesCount / e.clozeSentencesCount * 100
            }), a.createElement("button", {
                className: "btn btn-block btn-success joystix",
                disabled: !e.clozeSentencesCount,
                onClick: () => s(e)
            }, e.clozeSentencesCount ? "Play" : "Soon!"))))))))), a.createElement("hr", null))))) : a.createElement(i.default, null);
            return a.createElement(a.Fragment, null, a.createElement("h1", {
                style: {
                    fontFamily: "joystix"
                }
            }, "Discover"), a.createElement("p", null, "Play through different media to learn with even more context. Add the sentences you want to learn to your custom collections."), E, l && a.createElement(d.default, {
                onHidden: () => s(null),
                size: "large",
                title: l.mediaType
            }, a.createElement(b, {
                collectionsUrl: e,
                discoverMedia: l,
                isPro: t
            })))
        }
    },
    17162: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(50964)
          , s = n(58108);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            renderModal() {
                const {modalVisible: e} = this.state;
                if (!e)
                    return null;
                const {baseLanguageEnglishName: t, clozeSentence: n, isPro: r, targetLanguageEnglishName: o, targetLanguageName: i} = this.props
                  , {preClozeStr: c, cloze: d, postClozeStr: u} = (0,
                s.UE)(n.text)
                  , {text: m, translation: h} = n
                  , g = m.replace(/{{|}}/g, "");
                return a.createElement(l.default, {
                    baseLanguageEnglishName: t,
                    cloze: d,
                    isPro: r,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    postClozeStr: u,
                    preClozeStr: c,
                    sentencePlainText: g,
                    translation: h,
                    targetLanguageEnglishName: o,
                    targetLanguageName: i
                })
            }
            render() {
                const {className: e, clozeSentence: t, disabled: n, title: l} = this.props
                  , {commentsCount: s} = t;
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    className: e || "btn btn-default",
                    disabled: n,
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-comment"
                }), !!s && a.createElement("span", {
                    className: "badge comment-count",
                    style: {
                        marginLeft: 4
                    }
                }, a.createElement("span", {
                    className: "value"
                }, s))), this.renderModal())
            }
        }
    },
    78663: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540);
        const l = "downloadAppBannerDismissed_v1";
        function s({androidUrl: e, iosUrl: t}) {
            const n = function() {
                const [e,t] = (0,
                a.useState)(null);
                return (0,
                a.useEffect)(( () => {
                    if ("undefined" === typeof navigator)
                        return;
                    const e = navigator.userAgent || navigator.vendor || (window || {}).opera || ""
                      , n = /Android/i.test(e)
                      , a = /iPhone|iPad|iPod/i.test(e);
                    t(n ? "android" : a ? "ios" : null)
                }
                ), []),
                e
            }()
              , [s,r] = (0,
            a.useState)(!1)
              , [o,i] = (0,
            a.useState)(!1);
            (0,
            a.useEffect)(( () => {
                if ("undefined" === typeof window)
                    return;
                const e = window.localStorage.getItem(l);
                r("true" === e),
                i(!0)
            }
            ), []);
            if (!o || s || !n)
                return null;
            const c = "ios" === n;
            return a.createElement("div", {
                style: {
                    position: "fixed",
                    top: 0,
                    left: 0,
                    right: 0,
                    zIndex: 1e3,
                    background: "#464646",
                    color: "white",
                    padding: "12px 16px",
                    display: "flex",
                    alignItems: "center",
                    gap: "12px",
                    boxShadow: "0 4px 12px rgba(0,0,0,0.3)",
                    fontFamily: "system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"
                }
            }, a.createElement("div", {
                style: {
                    color: "#000",
                    width: 40,
                    height: 40,
                    borderRadius: 10,
                    background: "#27bb4e",
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    fontWeight: 700,
                    fontSize: 20,
                    flexShrink: 0,
                    fontFamily: "joystix"
                }
            }, "M"), a.createElement("div", {
                style: {
                    flex: 1,
                    minWidth: 0
                }
            }, a.createElement("div", {
                style: {
                    fontSize: 14,
                    fontWeight: 600,
                    marginBottom: 2
                }
            }, "Get the ", c ? "iOS" : "Android", " app"), a.createElement("div", {
                style: {
                    fontSize: 12,
                    opacity: .9
                }
            }, "For a faster, smoother experience, use our", " ", c ? "iPhone/iPad app from the App Store." : "Android app from Google Play.")), a.createElement("div", {
                style: {
                    display: "flex",
                    alignItems: "center",
                    gap: 8
                }
            }, a.createElement("button", {
                type: "button",
                onClick: () => {
                    if (!n)
                        return;
                    const a = "ios" === n ? t : e;
                    window.location.href = a
                }
                ,
                style: {
                    border: "none",
                    borderRadius: 9999,
                    padding: "6px 12px",
                    fontSize: 12,
                    fontWeight: 600,
                    cursor: "pointer",
                    background: "white",
                    color: "#111827",
                    whiteSpace: "nowrap"
                }
            }, c ? "Open App Store" : "Open Play Store"), a.createElement("button", {
                type: "button",
                onClick: () => {
                    r(!0),
                    "undefined" !== typeof window && window.localStorage.setItem(l, "true")
                }
                ,
                "aria-label": "Dismiss banner",
                style: {
                    border: "none",
                    background: "transparent",
                    color: "white",
                    fontSize: 18,
                    cursor: "pointer",
                    padding: 4,
                    lineHeight: 1
                }
            }, "\xd7")))
        }
    },
    15584: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(28499);
        n(58108);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    format: null,
                    open: !1,
                    otherFormat: "",
                    question: "",
                    sending: !1,
                    sent: !1
                }
            }
            toggleOpen() {
                const {open: e} = this.state;
                this.setState({
                    open: !e
                })
            }
            onFieldChange(e) {
                this.setState({
                    [e.target.name]: e.target.value
                })
            }
            onSubmit() {
                const {format: e, otherFormat: t, question: n} = this.state
                  , {collectionClozeSentenceId: a, collectionId: l, languagePairingId: s, url: r} = this.props;
                n.length < 20 ? alert("The question should be at least 20 characters please!") : e ? "other" !== e || t ? (this.setState({
                    sending: !0
                }),
                $.ajax({
                    data: {
                        explanation_request: {
                            collection_id: l,
                            collection_cloze_sentence_id: a,
                            format: e,
                            language_pairing_id: s,
                            other_format: t,
                            question: n
                        }
                    },
                    method: "post",
                    url: "/api/v1/explanation_requests"
                }).done((e => {
                    this.setState({
                        sent: !0
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error sending the request. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        sent: !1
                    })
                }
                )).always(( () => {
                    this.setState({
                        sending: !1
                    })
                }
                ))) : alert("Please enter a format!") : alert("Please select a format!")
            }
            onKeyDown(e) {
                e.stopPropagation()
            }
            render() {
                const {format: e, open: t, otherFormat: n, question: r, sending: o, sent: i} = this.state;
                return a.createElement("div", {
                    className: "feedback-popup wide"
                }, a.createElement("span", {
                    className: "title",
                    "aria-label": "Open explanation request",
                    onClick: () => this.toggleOpen()
                }, "Explanation Request", !t && a.createElement(l.default, {
                    name: "question-sign",
                    style: {
                        marginLeft: 10
                    }
                }), t && a.createElement("button", {
                    type: "button",
                    className: "close",
                    "aria-label": "Close"
                }, a.createElement("span", {
                    "aria-hidden": "true"
                }, "\xd7"))), t && a.createElement("div", {
                    className: "text-wrap"
                }, !i && a.createElement("p", {
                    className: "text"
                }, "Question about this sentence? Request an explanation from a native speaker. We're testing interest in this feature. Your request will help determine whether we actually build it."), i && a.createElement("p", {
                    className: "success-text alert alert-success"
                }, "Your request has been sent! We'll let you know if we end up building this feature and an explanation is added."), !i && a.createElement("div", null, a.createElement("label", {
                    htmlFor: "question"
                }, "Question:"), a.createElement("textarea", {
                    disabled: o,
                    value: r,
                    className: "form-control",
                    name: "question",
                    onChange: e => this.onFieldChange(e),
                    onKeyDown: e => this.onKeyDown(e)
                }), a.createElement("label", null, "Preferred explanation format:"), a.createElement(s.default, {
                    checked: "video" === e,
                    disabled: o,
                    label: "Video",
                    name: "format",
                    onChange: e => this.onFieldChange(e),
                    value: "video",
                    style: {
                        marginTop: 0
                    }
                }), a.createElement(s.default, {
                    checked: "text" === e,
                    disabled: o,
                    label: "Text",
                    name: "format",
                    onChange: e => this.onFieldChange(e),
                    value: "text"
                }), a.createElement(s.default, {
                    checked: "other" === e,
                    disabled: o,
                    label: "Other",
                    name: "format",
                    onChange: e => this.onFieldChange(e),
                    value: "other"
                }), "other" === e && a.createElement(a.Fragment, null, a.createElement("label", null, "Other format:"), a.createElement("input", {
                    className: "form-control",
                    disabled: o,
                    name: "otherFormat",
                    onChange: e => this.onFieldChange(e),
                    value: n,
                    onKeyDown: e => this.onKeyDown(e)
                })), a.createElement("button", {
                    className: "button btn-block action-feedback-popup-send",
                    disabled: o,
                    onClick: () => this.onSubmit()
                }, "Send request"))))
            }
        }
    },
    61291: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            componentDidMount() {
                $(this.el).fadeIn(( () => this.props.complete && this.props.complete()))
            }
            render() {
                return a.createElement("div", {
                    ref: e => this.el = e,
                    style: {
                        display: "none"
                    }
                }, this.props.children)
            }
        }
    },
    36460: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            componentDidMount() {
                const {complete: e, delay: t} = this.props;
                $(this.el).delay(t || 0).fadeOut(( () => e && e()))
            }
            render() {
                return a.createElement("div", {
                    ref: e => this.el = e
                }, this.props.children)
            }
        }
    },
    64129: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    open: !1,
                    sent: !1,
                    email: "",
                    message: ""
                }
            }
            toggleOpen() {
                const {open: e} = this.state;
                this.setState({
                    open: !e
                })
            }
            onEmailChange(e) {
                this.setState({
                    email: e.target.value
                })
            }
            onMessageChange(e) {
                this.setState({
                    message: e.target.value
                })
            }
            onSubmit() {
                const {email: e, message: t} = this.state;
                t.length < 20 ? alert("The message should be at least 20 characters please!") : (0,
                l.DT)(e) ? (this.setState({
                    sending: !0
                }),
                $.ajax({
                    data: {
                        email: e,
                        message: t
                    },
                    method: "post",
                    url: this.props.sendFeedbackUrl
                }).done((e => {
                    this.setState({
                        sent: !0
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error sending the feedback. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        sent: !1
                    })
                }
                )).always(( () => {
                    this.setState({
                        sending: !1
                    })
                }
                ))) : alert("Hm the email seems to be invalid.")
            }
            render() {
                const {open: e, sending: t, sent: n} = this.state;
                return a.createElement("div", {
                    className: "feedback-popup"
                }, a.createElement("span", {
                    className: "title",
                    "aria-label": "Open feedback widget",
                    onClick: () => this.toggleOpen()
                }, "Feedback? Need help?", e && a.createElement("button", {
                    type: "button",
                    className: "close",
                    "aria-label": "Close"
                }, a.createElement("span", {
                    "aria-hidden": "true"
                }, "\xd7"))), e && a.createElement("div", {
                    className: "text-wrap"
                }, !n && a.createElement("div", {
                    className: "text"
                }, "If you have feedback, found a bug, need a feature, or need help, write it here. Also ", a.createElement("a", {
                    href: "/faq",
                    target: "_blanc"
                }, "check out our FAQ"), " for answers to most questions."), n && a.createElement("div", {
                    className: "success-text"
                }, "Thanks for the message! Any and all feedback is always very much appreciated."), !n && a.createElement("div", null, a.createElement("input", {
                    disabled: t,
                    value: this.state.email,
                    type: "email",
                    placeholder: "Your email",
                    className: "email",
                    onChange: e => this.onEmailChange(e)
                }), a.createElement("textarea", {
                    disabled: t,
                    value: this.state.message,
                    placeholder: "Your message",
                    className: "message",
                    onChange: e => this.onMessageChange(e)
                }), a.createElement("button", {
                    className: "button action-feedback-popup-send",
                    disabled: t,
                    onClick: () => this.onSubmit(),
                    style: {
                        color: "#000"
                    }
                }, "Send feedback"))))
            }
        }
    },
    28737: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return a.createElement("span", {
                className: "sprite flag_" + (e.size || 48) + "_" + e.flagIso
            })
        }
    },
    40727: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return "fa" === e.type ? a.createElement("i", {
                "aria-hidden": "true",
                className: "fa fa-" + e.name,
                style: e.style
            }) : a.createElement("span", {
                className: "glyphicon glyphicon-" + e.name,
                style: e.style
            })
        }
    },
    19150: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    order: e.order || "alphabetical"
                }
            }
            save() {
                this.setState({
                    saving: !0
                }),
                $.ajax({
                    data: {
                        user: {
                            language_pairing_order: this.state.order
                        }
                    },
                    method: "put",
                    url: this.props.url
                }).done(( () => {
                    window.location = window.location
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            handleChange(e) {
                this.setState({
                    order: e.target.value
                })
            }
            renderOption(e, t) {
                return a.createElement("div", {
                    className: "radio"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: this.state.order === e,
                    disabled: this.state.saving,
                    name: "user[language_pairing_order]",
                    onChange: this.handleChange.bind(this),
                    value: e,
                    type: "radio"
                }), " ", t))
            }
            render() {
                return a.createElement("div", {
                    className: "language-pairing-order"
                }, a.createElement("div", {
                    style: {
                        display: "inline-block",
                        textAlign: "left"
                    }
                }, this.renderOption("alphabetical", "Alphabetical"), this.renderOption("streak", "Streak")), a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    disabled: this.state.saving,
                    onClick: () => this.save()
                }, "Save"))
            }
        }
    },
    32793: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(28737);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.setBaseLanguages(),
                this.state = {
                    baseLanguageName: this.baseLanguages.find((e => "English" === e.name)) ? "English" : this.baseLanguages[0].name,
                    orderBy: "popularity",
                    query: ""
                }
            }
            setBaseLanguages() {
                const e = {};
                this.baseLanguages = [],
                this.props.languagePairings.forEach((t => {
                    if (e[t.baseLanguageName])
                        return null;
                    const {baseLanguageEnglishName: n, baseLanguageFlagIso: a, baseLanguageIso: l, baseLanguageName: s} = t;
                    e[s] = !0,
                    this.baseLanguages.push({
                        englishName: n,
                        flagIso: a,
                        iso: l,
                        name: s
                    })
                }
                )),
                this.baseLanguages = this.baseLanguages.sort(( (e, t) => e.englishName.localeCompare(t.englishName)))
            }
            renderBaseLanguageSelect() {
                return a.createElement("select", {
                    name: "base_language",
                    value: this.state.baseLanguageName,
                    onChange: e => this.setState({
                        baseLanguageName: e.target.value
                    })
                }, this.baseLanguages.map((e => a.createElement("option", {
                    key: e.name,
                    value: e.name
                }, e.name, " (", e.englishName, ")"))))
            }
            renderLanguagePairings() {
                const {baseLanguageName: e, query: t} = this.state
                  , n = new RegExp(t,"i")
                  , s = this.props.languagePairings.filter((a => (!t || a.targetLanguageName.match(n) || a.targetLanguageEnglishName.match(n)) && a.baseLanguageName === e));
                return s.length ? ("popularity" === this.state.orderBy && s.sort(( (e, t) => e.popularityRank - t.popularityRank)),
                a.createElement("ul", {
                    className: "list-unstyled languages text-center"
                }, s.map((e => a.createElement("li", {
                    key: e.path,
                    className: "language text-center"
                }, a.createElement("a", {
                    className: "btn btn-success",
                    href: e.path
                }, a.createElement(l.default, {
                    flagIso: e.targetLanguageFlagIso
                }), a.createElement("h3", {
                    className: "name"
                }, e.targetLanguageName), a.createElement("small", {
                    className: "joystix english"
                }, e.targetLanguageEnglishName))))))) : a.createElement("div", {
                    className: "lead text-center"
                }, "Don't see the language you're learning? ", a.createElement("a", {
                    href: this.props.contactPath
                }, "Let us know"), ".")
            }
            render() {
                const {orderBy: e} = this.state;
                return a.createElement("div", null, a.createElement("div", {
                    className: "heading text-left"
                }, a.createElement("div", {
                    className: "pull-right"
                }, a.createElement("label", null, "I speak: ", this.renderBaseLanguageSelect())), a.createElement("h1", null, "Languages")), a.createElement("div", {
                    className: "clearfix"
                }), a.createElement("section", null, a.createElement("h2", {
                    className: "text-center"
                }, "I'm learning..."), a.createElement("div", {
                    className: "form-group",
                    style: {
                        marginBottom: 5
                    }
                }, a.createElement("input", {
                    className: "form-control text-center",
                    name: "target_language",
                    autoFocus: !0,
                    value: this.state.query,
                    onChange: e => this.setState({
                        query: e.target.value
                    })
                })), a.createElement("p", null, a.createElement("small", null, "Order by:"), a.createElement("button", {
                    className: "btn btn-xs btn-link" + ("popularity" === e ? " active" : ""),
                    onClick: () => this.setState({
                        orderBy: "popularity"
                    }),
                    style: {
                        fontWeight: "popularity" === e ? "bold" : null,
                        marginLeft: 5
                    }
                }, "Popular"), a.createElement("button", {
                    className: "btn btn-xs btn-link" + ("alphabetical" === e ? " active" : ""),
                    onClick: () => this.setState({
                        orderBy: "alphabetical"
                    }),
                    style: {
                        fontWeight: "popularity" === e ? null : "bold",
                        marginLeft: 5
                    }
                }, "Alphabetical")), a.createElement("div", {
                    className: "well"
                }, this.renderLanguagePairings())))
            }
        }
    },
    73898: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    dots: 0
                }
            }
            componentDidMount() {
                this.dotsInterval = setInterval(( () => {
                    this.setState({
                        dots: this.state.dots + 1
                    })
                }
                ), 500)
            }
            componentWillUnmount() {
                clearInterval(this.dotsInterval)
            }
            renderDots() {
                let e = "";
                for (let t = 0; t < this.state.dots % 4; t++)
                    e += ".";
                return e
            }
            render() {
                return a.createElement("div", {
                    className: "loading",
                    style: {
                        fontSize: "3rem",
                        textAlign: "center",
                        marginTop: 40,
                        marginBottom: 40
                    }
                }, a.createElement("i", {
                    className: "fa fa-cog fa-spin fa-3x fa-fw"
                }), a.createElement("div", {
                    className: "joystix"
                }, "Loading", this.renderDots()), this.props.children)
            }
        }
    },
    74904: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(40961)
          , s = n(73898);
        function r(e) {
            return l.createPortal(a.createElement("div", {
                id: "loading-overlay",
                className: e.className
            }, a.createElement(s.default, null)), document.querySelector("body"))
        }
    },
    94870: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return h
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(68135)
          , o = n(20911)
          , i = n(40727)
          , c = (n(9830),
        n(40897))
          , d = n(508)
          , u = n(61703)
          , m = n(86956);
        n(50715);
        class h extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    context: e.context || "sentences",
                    collectionClozeSentences: null,
                    hasCopiedSentences: !1,
                    hasDeletedSentences: !1,
                    loading: !1,
                    page: 1,
                    perPage: 20,
                    query: e.query || "",
                    scope: e.scope || "all",
                    selectedCollectionClozeSentencesMap: new Map,
                    total: 0,
                    updating: !1
                }
            }
            componentDidMount() {
                this.props.isPro && this.loadCollectionClozeSentences()
            }
            onSubmit(e) {
                e && e.preventDefault(),
                this.setState({
                    page: 1
                }, ( () => this.loadCollectionClozeSentences()))
            }
            loadCollectionClozeSentences() {
                this.setState({
                    loading: !0
                });
                const {collectionClozeSentencesUrl: e} = this.props
                  , {scope: t, context: n, query: a, page: l, perPage: s} = this.state;
                $.ajax({
                    url: e,
                    data: {
                        context: n,
                        page: l,
                        per_page: s,
                        query: a,
                        scope: t
                    }
                }).done((e => {
                    $(".modal").scrollTop(0),
                    console.log(e),
                    this.setState({
                        collectionClozeSentences: e.collectionClozeSentences,
                        collectionName: e.collection.name,
                        deleteUrl: e.collectionClozeSentencesDeleteUrl,
                        errorUrl: e.collectionClozeSentencesErrorUrl,
                        isCollectionEditable: e.collection.isEditable,
                        loading: !1,
                        selectedCollectionClozeSentencesMap: new Map,
                        total: e.total,
                        upsertUrl: e.collectionClozeSentencesUpsertUrl
                    })
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error retrieving sentences. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderForm() {
                const {scope: e, context: t, query: n, loading: l} = this.state
                  , {updating: s} = this.props;
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("input", {
                    disabled: l || s,
                    autoFocus: !0,
                    placeholder: "Enter query...",
                    name: "query",
                    type: "text",
                    className: "form-control",
                    value: n,
                    onChange: e => this.setState({
                        query: e.target.value
                    })
                })), a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "scope"
                }, "Search"), a.createElement("select", {
                    disabled: l || s,
                    name: "scope",
                    className: "form-control",
                    value: e,
                    onChange: e => this.setState({
                        scope: e.target.value
                    })
                }, a.createElement("option", {
                    value: "all"
                }, "All"), a.createElement("option", {
                    value: "new"
                }, "New"), a.createElement("option", {
                    value: "playing"
                }, "Playing"), a.createElement("option", {
                    value: "0pct_mastered"
                }, "0% Mastered"), a.createElement("option", {
                    value: "25pct_mastered"
                }, "25% Mastered"), a.createElement("option", {
                    value: "50pct_mastered"
                }, "50% Mastered"), a.createElement("option", {
                    value: "75pct_mastered"
                }, "75% Mastered"), a.createElement("option", {
                    value: "mastered"
                }, "100% Mastered"), a.createElement("option", {
                    value: "known"
                }, "Marked as Known"), a.createElement("option", {
                    value: "ready_for_review"
                }, "Ready for review"), a.createElement("option", {
                    value: "favorited"
                }, "Favorited"), a.createElement("option", {
                    value: "ignored"
                }, "Ignored"), a.createElement("option", {
                    value: "difficult"
                }, "Difficult (incorrect >1x)")))), a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "context"
                }, "Context"), a.createElement("select", {
                    disabled: l || s,
                    name: "context",
                    className: "form-control",
                    value: t,
                    onChange: e => this.setState({
                        context: e.target.value
                    })
                }, a.createElement("option", {
                    value: "sentence"
                }, "Sentences"), a.createElement("option", {
                    value: "translation"
                }, "Translations"), a.createElement("option", {
                    value: "cloze"
                }, "Clozes"))))), a.createElement("button", {
                    disabled: l || s,
                    className: "btn btn-success btn-sm btn-block joystix"
                }, "Search"))
            }
            renderPageControls() {
                const {collectionClozeSentences: e, selectedCollectionClozeSentencesMap: t, updating: n} = this.state;
                let l = !0
                  , o = !0
                  , c = !0
                  , d = !0
                  , u = !0
                  , m = !0;
                e.forEach((e => {
                    if (!t.get(e.id))
                        return !1;
                    e.nextReview || (l = !1),
                    "2100-01-01" === e.nextReview && 4 === e.level || (c = !1),
                    e.favorited || (o = !1),
                    e.level && (d = !1),
                    (!e.level || e.level < 4) && (u = !1),
                    e.ignored || (m = !1)
                }
                ));
                const h = e.filter((e => t.get(e.id)))
                  , g = !!h.length;
                return a.createElement("div", {
                    style: {
                        borderBottom: "1px solid #efefef",
                        marginTop: 20,
                        marginBottom: 10,
                        paddingBottom: 10,
                        paddingLeft: 30,
                        position: "relative"
                    }
                }, a.createElement("div", {
                    style: {
                        bottom: 5,
                        left: 0,
                        position: "absolute"
                    }
                }, a.createElement(r.default, {
                    checked: h.length === e.length,
                    name: "all_selected",
                    onChange: t => this.setState({
                        selectedCollectionClozeSentencesMap: t.target.checked ? new Map(e.map((e => [e.id, !0]))) : new Map
                    }),
                    style: {
                        margin: 0
                    }
                })), a.createElement("small", null, "Apply to all selected:"), a.createElement("div", {
                    className: "btn-group btn-group-xs",
                    role: "group",
                    "aria-label": "Sentence options"
                }, a.createElement("button", {
                    disabled: n || !g || l,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        next_review: s()().format("YYYY-MM-DD")
                    })
                }, a.createElement(i.default, {
                    name: "plus"
                }), " to Reviews"), a.createElement("button", {
                    disabled: n || !g || !l,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        level: 0,
                        next_review: null
                    })
                }, a.createElement(i.default, {
                    name: "minus"
                }), " from Reviews"), a.createElement("button", {
                    disabled: n || !g,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        favorited: !o
                    })
                }, a.createElement(i.default, {
                    name: "star"
                }), " Favorite"), a.createElement("button", {
                    disabled: n || !g || c,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        level: 4,
                        next_review: "2100-01-01"
                    })
                }, "\ud83e\udde0 Known"), a.createElement("button", {
                    disabled: n || !g || u,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        level: 4
                    })
                }, a.createElement(i.default, {
                    name: "ok"
                }), " Master"), a.createElement("button", {
                    disabled: n || !g || d,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        level: 0
                    })
                }, a.createElement(i.default, {
                    name: "remove"
                }), " Reset"), a.createElement("button", {
                    disabled: n || !g,
                    className: "btn btn-default",
                    onClick: () => this.update(h, {
                        ignored: !m
                    })
                }, a.createElement(i.default, {
                    name: "ban-circle"
                }), " Ignore")))
            }
            renderPaging() {
                const {page: e, perPage: t, total: n, updating: l} = this.state;
                return a.createElement(m.default, {
                    goToPage: e => this.setState({
                        page: e
                    }, ( () => this.loadCollectionClozeSentences())),
                    onNextClick: () => this.setState({
                        page: this.state.page + 1
                    }, ( () => this.loadCollectionClozeSentences())),
                    onPrevClick: () => this.setState({
                        page: this.state.page - 1
                    }, ( () => this.loadCollectionClozeSentences())),
                    page: e,
                    perPage: t,
                    total: n,
                    updating: l
                })
            }
            update(e, t, n) {
                const {upsertUrl: a} = this.state;
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    url: a,
                    method: "post",
                    dataType: "json",
                    contentType: "application/json",
                    data: JSON.stringify({
                        updates: e.map((e => Object.assign({
                            id: e.id
                        }, t)))
                    })
                }).then((e => $.ajax({
                    data: {
                        ids: e.ids
                    },
                    method: "post",
                    url: e.collectionClozeSentencesBatchUrl
                }))).done((e => {
                    const t = e.collectionClozeSentences.reduce(( (e, t) => (e[t.id] = t,
                    e)), {})
                      , a = this.state.collectionClozeSentences.map((e => t[e.id] ? t[e.id] : e));
                    this.props.onUpdate && this.props.onUpdate(a),
                    this.setState({
                        collectionClozeSentences: a,
                        updating: !1
                    }, n && n(!0))
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }, n && n(!1)),
                    alert("Oh no! There was an error updating the sentences. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            destroy(e, t) {
                const {collectionClozeSentencesUrl: n} = this.props
                  , {deleteUrl: a, context: l, query: s, page: r, perPage: o, scope: i, selectedCollectionClozeSentencesMap: c} = this.state
                  , d = e[0].id;
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        collection_cloze_sentence_id: d
                    }),
                    method: "post",
                    url: a
                }).then(( () => $.ajax({
                    url: n,
                    data: {
                        context: l,
                        page: r,
                        perPage: o,
                        query: s,
                        scope: i
                    }
                }))).done((e => {
                    c.delete(d),
                    this.setState({
                        collectionClozeSentences: e.collectionClozeSentences,
                        hasDeletedSentences: !0,
                        selectedCollectionClozeSentencesMap: new Map(c),
                        total: e.total,
                        updating: !1
                    })
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error deleting sentences. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderCollectionClozeSentences() {
                const {baseLanguageEnglishName: e, collectionsUrl: t, targetLanguageCode: n, targetLanguageEnglishName: l, targetLanguageIso: s, targetLanguageName: r} = this.props
                  , i = this.props.isCollectionEditable || this.state.isCollectionEditable
                  , {collectionClozeSentences: c, errorUrl: d, loading: u, selectedCollectionClozeSentencesMap: m} = this.state;
                return u ? a.createElement("p", {
                    className: "text-center",
                    style: {
                        marginTop: 20
                    }
                }, "Loading...") : c ? c.length ? a.createElement("div", null, this.renderPageControls(), c.map((c => a.createElement(o.default, {
                    baseLanguageEnglishName: e,
                    collectionClozeSentence: c,
                    collectionClozeSentencesErrorUrl: d,
                    collectionsUrl: t,
                    destroy: () => {
                        confirm("Are you sure you want to delete this sentence? This action cannot be undone.") && this.destroy([c])
                    }
                    ,
                    isDeleteable: i,
                    isReportable: !i,
                    isTextEditable: i,
                    key: c.id,
                    onCopy: () => this.setState({
                        hasCopiedSentences: !0
                    }),
                    onSelectedChange: e => {
                        console.log("SELECTED", e),
                        m.set(c.id, e),
                        this.setState({
                            selectedCollectionClozeSentencesMap: new Map(m)
                        })
                    }
                    ,
                    onTokenClick: ({cloze: e, text: t}) => {
                        this.setState({
                            query: t
                        }, ( () => $(".modal").animate({
                            scrollTop: 0
                        })))
                    }
                    ,
                    selected: !!m.get(c.id),
                    targetLanguageCode: n,
                    targetLanguageEnglishName: l,
                    targetLanguageIso: s,
                    targetLanguageName: r,
                    update: (e, t) => this.update([c], e, t),
                    updating: this.state.updating
                }))), this.renderPaging()) : a.createElement("p", {
                    className: "text-center",
                    style: {
                        marginTop: 20
                    }
                }, "No results found!") : null
            }
            deleteCollectionProgress() {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    method: "delete",
                    url: this.props.deleteCollectionProgressUrl
                }).done(( () => {
                    this.modal.hide()
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error deleting the collection's progress. Sorry about that. Please try again and let us know if you see this error message again.")
                }
                ))
            }
            onResetProgressClick() {
                confirm("Are you sure? THIS WILL DELETE ALL YOUR PROGRESS FOR THIS COLLECTION. THIS CANNOT BE UNDONE.") && confirm("Checking one more time - ARE YOU POSITIVE YOU WANT TO RESET YOUR PROGRESS FOR THIS COLLECTION? There's no going back.") && this.deleteCollectionProgress()
            }
            renderModalFooterDeleteCollectionProgress() {
                if (!this.props.deleteCollectionProgressUrl)
                    return null;
                if (!1 === this.props.isSignedIn)
                    return null;
                const {loading: e, updating: t} = this.state;
                return a.createElement("span", {
                    className: "pull-left text-left"
                }, a.createElement("button", {
                    disabled: t || e,
                    className: "btn btn-danger btn-xs reset-progress",
                    onClick: () => this.onResetProgressClick()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-erase"
                }), " Reset Progress"), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, a.createElement("strong", null, "Warning!"), " This will delete ", a.createElement("u", null, "all"), " your progress for this collection."))
            }
            renderModalFooter() {
                return a.createElement(a.Fragment, null, this.renderModalFooterDeleteCollectionProgress(), a.createElement(d.default, null))
            }
            renderProPromo() {
                return a.createElement(u.default, {
                    can: "manage collections - search sentences within a collection, edit translations, master, ignore, and favorite sentences en masse, and more.",
                    secondary: "Take control of your learning. Get fluent faster."
                })
            }
            renderContent() {
                return this.props.isPro ? a.createElement(a.Fragment, null, this.renderForm(), this.renderCollectionClozeSentences()) : this.renderProPromo()
            }
            render() {
                const {onHidden: e} = this.props
                  , {hasCopiedSentences: t, hasDeletedSentences: n} = this.state;
                return a.createElement(c.default, {
                    backdrop: "static",
                    footer: this.renderModalFooter(),
                    id: "manage-collection-modal",
                    onHidden: () => e({
                        hasCopiedSentences: t,
                        hasDeletedSentences: n
                    }),
                    ref: e => this.modal = e,
                    size: this.state.isPro ? "large" : "",
                    title: this.props.collectionName || this.state.collectionName || "Manage Collection"
                }, this.renderContent())
            }
        }
    },
    20911: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return h
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(68135)
          , o = n(755)
          , i = n(73677)
          , c = n(17162)
          , d = n(40727)
          , u = (n(9830),
        n(50715),
        n(93491))
          , m = n(74885);
        class h extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    noteVisible: !1,
                    editingCloze: !1,
                    editingTranslation: !1,
                    editingPronunciation: !1,
                    tokensVisible: !1
                }
            }
            playAudio() {
                $("#manage-collection-audio").length || $("body").append('<audio id="manage-collection-audio" />');
                const e = $("#manage-collection-audio")[0];
                e.pause(),
                e.src = this.props.collectionClozeSentence.ttsAudioUrl,
                e.play()
            }
            renderStats() {
                const e = this.props.collectionClozeSentence;
                return a.createElement("small", null, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, Math.round(e.level / 4 * 100) + "% Mastered"), a.createElement("li", null, "Next Review: ", "2100-01-01" === e.nextReview ? "\ud83e\udde0" : e.nextReview <= s()().format("YYYY-MM-DD") ? a.createElement("span", {
                    title: e.nextReview
                }, "Due!") : e.nextReview), a.createElement("li", null, "Correct: ", e.numPlayed - e.numIncorrect), a.createElement("li", null, "Incorrect: ", e.numIncorrect || 0)))
            }
            renderTokensBtn() {
                if (!this.props.collectionClozeSentence.tokensCount)
                    return null;
                const {tokensVisible: e} = this.state;
                return a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        tokensVisible: !e
                    })
                }, a.createElement(d.default, {
                    name: "chevron-" + (e ? "up" : "down")
                }))
            }
            renderTokens() {
                if (!this.state.tokensVisible)
                    return null;
                const {collectionClozeSentence: e, onTokenClick: t, targetLanguageCode: n, targetLanguageIso: l} = this.props;
                return a.createElement("div", {
                    className: "scrollbar-always-visible",
                    style: {
                        overflowY: "scroll",
                        textAlign: "center",
                        whiteSpace: "nowrap",
                        width: "100%"
                    }
                }, a.createElement(m.default, {
                    onClick: t,
                    targetLanguageCode: n,
                    targetLanguageIso: l,
                    tokenizeableId: e.id,
                    tokenizeableType: "CollectionClozeSentence",
                    url: e.tokensUrl
                }))
            }
            renderControls() {
                const e = this.props.collectionClozeSentence
                  , {baseLanguageEnglishName: t, collectionsUrl: n, collectionClozeSentencesErrorUrl: l, isDeleteable: r, isReportable: o, targetLanguageEnglishName: i, targetLanguageName: m, update: h, updating: g} = this.props;
                return a.createElement("div", {
                    "aria-label": "Sentence controls",
                    style: {
                        textAlign: "right"
                    }
                }, a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("div", {
                    className: "btn-group btn-group-xs",
                    role: "group"
                }, a.createElement("button", {
                    className: "btn btn-default add-to-review-queue",
                    disabled: g || !!e.nextReview,
                    onClick: () => h({
                        next_review: s()().format("YYYY-MM-DD")
                    })
                }, a.createElement(d.default, {
                    name: "plus"
                })), a.createElement("button", {
                    className: "btn btn-default remove-from-review-queue",
                    disabled: g || !e.nextReview,
                    onClick: () => h({
                        level: 0,
                        next_review: null
                    })
                }, a.createElement(d.default, {
                    name: "minus"
                })), a.createElement("button", {
                    disabled: g,
                    className: "favorite btn btn-default" + (e.favorited ? " active" : ""),
                    onClick: () => h({
                        favorited: !e.favorited
                    })
                }, a.createElement(d.default, {
                    name: "star" + (e.favorited ? "" : "-empty")
                })), a.createElement("button", {
                    className: "btn btn-default mark-as-known",
                    disabled: g || 4 === e.level && "2100-01-01" === e.nextReview,
                    onClick: () => h({
                        level: 4,
                        next_review: "2100-01-01"
                    })
                }, "\ud83e\udde0"), a.createElement("button", {
                    className: "btn btn-default master",
                    disabled: g || 4 === e.level,
                    onClick: () => h({
                        level: 4
                    })
                }, a.createElement(d.default, {
                    name: "ok"
                })), a.createElement("button", {
                    className: "btn btn-default reset",
                    disabled: g || !e.level,
                    onClick: () => h({
                        level: 0
                    })
                }, a.createElement(d.default, {
                    name: "remove"
                })))), a.createElement("div", {
                    className: "btn-group btn-group-xs",
                    role: "group",
                    "aria-label": "Sentence controls"
                }, this.renderTokensBtn(), !!e.ttsAudioUrl && a.createElement("button", {
                    className: "btn btn-default",
                    disabled: g,
                    onClick: () => this.playAudio()
                }, a.createElement(d.default, {
                    name: "volume-up"
                })), !!n && a.createElement("button", {
                    disabled: g,
                    className: "btn btn-default copy",
                    onClick: () => this.onCopyBtnClick()
                }, a.createElement(d.default, {
                    name: "copy",
                    type: "fa"
                })), a.createElement(c.default, {
                    baseLanguageEnglishName: t,
                    clozeSentence: e,
                    disabled: g,
                    isPro: !0,
                    targetLanguageEnglishName: i,
                    targetLanguageName: m
                }), a.createElement("button", {
                    disabled: g,
                    className: "btn btn-default ignore" + (e.ignored ? " active" : ""),
                    onClick: () => h({
                        ignored: !e.ignored
                    })
                }, a.createElement(d.default, {
                    name: "ban-circle"
                })), r && a.createElement("button", {
                    className: "btn btn-default delete",
                    disabled: g,
                    onClick: () => this.onDeleteBtnClick()
                }, a.createElement(d.default, {
                    name: "trash"
                })), o && a.createElement(u.default, {
                    className: "btn btn-default report-error",
                    collectionClozeSentence: e,
                    disabled: g,
                    showText: !1,
                    url: l
                })))
            }
            onCopyBtnClick() {
                this.setState({
                    copyPopoverVisible: !this.state.copyPopoverVisible
                })
            }
            onDeleteBtnClick() {
                this.props.destroy()
            }
            renderCopyPopover() {
                if (!this.state.copyPopoverVisible)
                    return null;
                const {collectionClozeSentence: e, collectionsUrl: t, onCopy: n} = this.props;
                return a.createElement(i.default, {
                    collectionClozeSentence: e,
                    collectionsUrl: t,
                    onClose: () => this.setState({
                        copyPopoverVisible: !1
                    }),
                    onCopy: n
                })
            }
            renderText() {
                const e = this.props.collectionClozeSentence.text.split("{{");
                return a.createElement("span", null, e[0], a.createElement("strong", null, a.createElement("u", null, e[1].split("}}")[0])), e[1].split("}}")[1])
            }
            render() {
                const e = this.props.collectionClozeSentence
                  , {isTextEditable: t, onSelectedChange: n, selected: l, update: s, updating: i} = this.props;
                return a.createElement("div", {
                    className: "collection-cloze-sentence",
                    style: {
                        borderBottom: "1px solid #efefef",
                        marginBottom: 10,
                        paddingBottom: 10,
                        paddingLeft: 30,
                        position: "relative"
                    }
                }, a.createElement("div", {
                    style: {
                        left: 0,
                        position: "absolute",
                        top: 3
                    }
                }, a.createElement(r.default, {
                    checked: l,
                    name: "selected",
                    onChange: e => n(e.target.checked),
                    style: {
                        margin: 0
                    }
                })), a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginLeft: 10
                    }
                }, this.renderControls()), a.createElement("div", {
                    style: {
                        fontSize: "2rem"
                    }
                }, this.renderText()), this.renderTokens(), t && a.createElement(o.default, {
                    className: "editable-text",
                    label: "Text",
                    updating: i,
                    update: (e, t) => s({
                        text: e
                    }, t),
                    value: e.text
                }), a.createElement(o.default, {
                    label: "Translation",
                    updating: i,
                    update: (e, t) => s({
                        translation: e
                    }, t),
                    value: e.translation
                }), a.createElement(o.default, {
                    label: "Pronunciation",
                    updating: i,
                    update: (e, t) => s({
                        pronunciation: e
                    }, t),
                    value: e.pronunciation
                }), !!e.transliteration && a.createElement("div", null, a.createElement("small", null, a.createElement("strong", null, "Transliteration:"), " ", e.transliteration)), a.createElement(o.default, {
                    label: "Notes",
                    updating: i,
                    update: (e, t) => s({
                        notes: e
                    }, t),
                    value: e.notes
                }), a.createElement(o.default, {
                    className: "hint",
                    label: "Hint",
                    name: "hint",
                    updating: i,
                    update: (e, t) => s({
                        hint: e
                    }, t),
                    value: e.hint
                }), a.createElement(o.default, {
                    className: "alternative-answers",
                    label: "Alternative answers",
                    name: "alternative_answers",
                    value: e.alternativeAnswers.join(", "),
                    helpText: "Enter a comma separated list of alternative answers.",
                    updating: i,
                    update: (e, t) => s({
                        alternative_answers: e
                    }, t)
                }), a.createElement("div", null, !!e.nextReview && this.renderStats()), this.renderCopyPopover())
            }
        }
    },
    755: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    editing: !1,
                    value: e.value || ""
                }
            }
            onSubmit(e) {
                e.preventDefault(),
                this.props.update(this.state.value, (e => {
                    e && this.setState({
                        editing: !1
                    })
                }
                ))
            }
            renderHelpText() {
                if (this.props.helpText)
                    return a.createElement("div", null, a.createElement("small", null, this.props.helpText))
            }
            render() {
                const {className: e, label: t, name: n, updating: l} = this.props
                  , {editing: s, value: r} = this.state;
                return s ? a.createElement("form", {
                    className: e,
                    onSubmit: e => this.onSubmit(e),
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("label", null, t), a.createElement("input", {
                    disabled: l,
                    className: "form-control",
                    autoFocus: !0,
                    name: n,
                    type: "text",
                    value: r,
                    onChange: e => this.setState({
                        value: e.target.value
                    })
                }), this.renderHelpText(), a.createElement("div", {
                    style: {
                        marginTop: 8
                    }
                }, a.createElement("button", {
                    disabled: l,
                    className: "btn btn-sm btn-success joystix",
                    onClick: e => this.onSubmit(e)
                }, "Save"), a.createElement("button", {
                    disabled: l,
                    className: "btn btn-sm btn-link",
                    onClick: e => this.setState({
                        editing: !1
                    })
                }, "Cancel"))) : a.createElement("div", {
                    className: e
                }, a.createElement("small", null, a.createElement("strong", null, t, ":"), " ", r, " ", a.createElement("button", {
                    disabled: l,
                    className: "btn btn-xs btn-link",
                    onClick: () => this.setState({
                        editing: !0
                    })
                }, "Edit")))
            }
        }
    },
    29419: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(15095);
        function s({children: e, ...t}) {
            return a.createElement(l.$, t, e)
        }
    },
    28852: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return a.createElement("span", {
                className: "glyphicon glyphicon-ok marked-as-known-count-icon",
                style: Object.assign({
                    color: "#5cb85c"
                }, e.style)
            })
        }
    },
    9830: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return a.createElement("span", {
                className: "glyphicon glyphicon-ok-circle mastered-count-icon",
                style: e.style
            })
        }
    },
    89726: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540);
        var l = n(53884)
          , s = n(40727)
          , r = n(40897)
          , o = n(90350);
        const i = ({selected: e, updateUrl: t, timeZone: n}) => {
            const [r,o] = (0,
            a.useState)(e)
              , [i,c] = (0,
            a.useState)(!1)
              , d = (0,
            a.useRef)(null);
            let u = null;
            return r && (u = a.createElement("p", null, "Your daily reminder email is set for ", r, " ", n, ".")),
            a.createElement(a.Fragment, null, u, a.createElement("button", {
                className: `btn btn-default btn-block ${r ? "" : "btn-lg"} joystix`,
                onClick: () => c(!0),
                style: {
                    textWrap: "wrap"
                }
            }, a.createElement(s.default, {
                name: "bell"
            }), " ", r ? a.createElement(a.Fragment, null, "Update", a.createElement("span", {
                className: "hidden-xs"
            }, " Daily Reminder")) : a.createElement(a.Fragment, null, "Set ", a.createElement("span", {
                className: "hidden-xs"
            }, "a "), "Daily Reminder")), i && a.createElement(l.default, {
                dailyReminderEmail: r,
                onHidden: () => c(!1),
                onUpdate: e => {
                    o(e),
                    d.current.hide(),
                    c(!1)
                }
                ,
                ref: d,
                updateUrl: t
            }))
        }
        ;
        var c = ({dailyReminder: e, languagePairingWebUrl: t, sentenceLimit: n}) => ((0,
        a.useEffect)(( () => {
            !function(e, t={}) {
                window.testEnv ? (window.trackEventCalls = window.trackEventCalls || [],
                window.trackEventCalls.push([e, t])) : window.mixpanel && window.mixpanel.track(e, t)
            }("max played today modal shown", {
                dailyReminder: !!e
            })
        }
        ), []),
        a.createElement(function () { return null }))
    },
    40897: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40961);
        class s extends a.Component {
            componentDidMount() {
                this.$modal = $(this.modal),
                this.$modal.on("hidden.bs.modal", ( () => {
                    $(".modal:visible").length && $(document.body).addClass("modal-open"),
                    this.props.onHidden && this.props.onHidden()
                }
                )),
                this.$modal.on("show.bs.modal", ( () => {
                    const e = 1040 + 10 * $(".modal:visible").length;
                    this.$modal.css("z-index", e),
                    setTimeout((function() {
                        $(".modal-backdrop").not(".modal-stack").css("z-index", e - 1).addClass("modal-stack")
                    }
                    ), 0),
                    this.props.onShow && this.props.onShow()
                }
                )),
                this.$modal.on("shown.bs.modal", ( () => this.props.onShown && this.props.onShown())),
                !1 === this.props.show ? this.$modal.modal() : this.show()
            }
            componentDidUpdate(e, t) {
                this.props.show !== e.show && this[this.props.show ? "show" : "hide"]()
            }
            show() {
                this.$modal.modal("show")
            }
            renderFooter() {
                return this.props.footer ? a.createElement("div", {
                    className: "modal-footer"
                }, this.props.footer) : null
            }
            getSizeClassName() {
                const {size: e} = this.props;
                return "large" === e ? "modal-lg" : "small" === e ? "modal-sm" : ""
            }
            hide(e) {
                const {noFade: t, onHidden: n} = e || {};
                t && $(this.modal).removeClass("fade"),
                n && this.$modal.one("hidden.bs.modal", n),
                $(this.modal).modal("hide")
            }
            render() {
                const {noFade: e} = this.props;
                return l.createPortal(a.createElement("div", {
                    className: "modal clozemaster text-left " + (e ? "" : "fade"),
                    id: this.props.id,
                    "data-show": !1 === this.props.show ? "false" : "true",
                    "data-keyboard": this.props.noClose ? "false" : null,
                    "data-backdrop": this.props.backdrop ? this.props.backdrop : this.props.noClose ? "static" : null,
                    tabIndex: "-1",
                    role: "dialog",
                    ref: e => this.modal = e
                }, a.createElement("div", {
                    className: "modal-dialog " + this.getSizeClassName(),
                    role: "document",
                    style: this.props.dialogStyle
                }, a.createElement("div", {
                    className: "modal-content"
                }, a.createElement("div", {
                    className: "modal-header"
                }, !this.props.noClose && !this.props.noCloseBtn && a.createElement("button", {
                    type: "button",
                    className: "close",
                    "data-dismiss": "modal",
                    "aria-label": "Close"
                }, a.createElement("span", {
                    "aria-hidden": "true"
                }, "\xd7")), a.createElement("h5", {
                    className: "modal-title joystix"
                }, this.props.title)), a.createElement("div", {
                    className: "modal-body"
                }, this.props.children), this.renderFooter(), this.props.modalContentExtra))), document.querySelector("body"))
            }
        }
    },
    3158: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40897);
        class s extends a.Component {
            componentDidMount() {}
            componentWillUnmount() {}
            renderControl() {
                return this.props.control
            }
            renderModal() {
                return ReactDOM.createPortal(a.createElement(l.default, null, "hi", this.props.modalContent), document.querySelector("body"))
            }
            render() {
                return a.createElement("span", null, this.renderControl(), this.renderModal())
            }
        }
    },
    508: function(e, t, n) {
        "use strict";
        n.r(t);
        var a = n(96540);
        t.default = e => a.createElement("button", {
            type: "button",
            className: "btn btn-default",
            "data-dismiss": "modal"
        }, e.text || "Close")
    },
    61703: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            const t = e.primary ? e.primary : a.createElement(a.Fragment, null, a.createElement("span", {
                className: "joystix"
            }, "Clozemaster Pro"), " subscribers can ", e.can)
              , n = e.secondary || "Get fluent faster.";
            return a.createElement("div", {
                className: "text-center modal-pro-promo",
                style: {
                    fontSize: "1.5em"
                }
            }, a.createElement("p", {
                style: {
                    marginBottom: 20
                }
            }, t), a.createElement("p", {
                style: {
                    marginBottom: 20
                }
            }, n), a.createElement("a", {
                href: "/pro",
                className: "joystix btn btn-success btn-block btn-lg"
            }, "Get Pro Today!"))
        }
    },
    73294: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !1,
                    name: ""
                }
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        collection: {
                            name: this.state.name
                        }
                    },
                    method: "post",
                    url: this.props.createUrl
                }).done((e => {
                    this.props.onCreate(e.collection)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error creating the collection. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            render() {
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("p", null, "Create a new collection."), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "collection[name]"
                }, "Name"), a.createElement("input", {
                    autoFocus: !0,
                    type: "text",
                    className: "form-control",
                    name: "collection[name]",
                    value: this.state.name,
                    onChange: e => this.setState({
                        name: e.target.value
                    })
                })), a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-success joystix"
                }, "Submit"), this.props.cancelable && a.createElement("button", {
                    className: "btn btn-link",
                    onClick: e => {
                        e.preventDefault(),
                        this.props.onCancel()
                    }
                }, "Cancel")))
            }
        }
    },
    52143: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return m
            }
        });
        var a = n(96540)
          , l = (n(40961),
        n(40727))
          , s = (n(61291),
        n(73898))
          , r = n(40897)
          , o = n(18152);
        const i = e => e.split("").map((e => a.createElement("span", {
            className: "letter"
        }, e)));
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0
                }
            }
            componentDidMount() {
                const {languagePairingUrl: e} = this.props;
                $.ajax({
                    url: e
                }).done((e => {
                    console.log(e);
                    const {collectionGroupings: t, collections: n} = e;
                    this.setState({
                        collectionGroupings: t,
                        collections: n,
                        loading: !1
                    })
                }
                ))
            }
            renderCollection(e, t) {
                return a.createElement("div", {
                    style: {
                        display: "flex"
                    }
                }, a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, t), a.createElement("div", null, e.proOnly ? a.createElement("span", {
                    className: "text-center",
                    style: {
                        display: "inline-block"
                    }
                }, a.createElement("button", {
                    className: "btn btn-success btn-lg joystix",
                    disabled: !0
                }, "Play ", a.createElement(l.default, {
                    name: "chevron-right"
                })), a.createElement("br", null), a.createElement("span", {
                    className: "joystix"
                }, "Pro!")) : a.createElement("a", {
                    className: "btn btn-success btn-lg joystix",
                    href: e.playWebUrl + "?onboarding=true"
                }, "Play ", a.createElement(l.default, {
                    name: "chevron-right"
                }))))
            }
            renderContent() {
                const {collectionGroupings: e, collections: t, loading: n} = this.state;
                if (n)
                    return a.createElement(s.default, null);
                const l = t.find((e => "FastTrackCollection" === e.type))
                  , r = t.filter((e => "GrammarCollection" === e.type))
                  , i = t.filter((e => "FrequencyCollection" === e.type))
                  , c = t.find((e => "RandomCollection" === e.type));
                return a.createElement("div", null, !!l && a.createElement(o.default, null, this.renderCollection(l, a.createElement(a.Fragment, null, a.createElement("h3", {
                    style: {
                        margin: 0
                    }
                }, l.name), a.createElement("p", null, "Play a collection of ", l.numSentences.toLocaleString(), " sentences with ", l.numSentences.toLocaleString(), " unique cloze-words in order of difficulty."))), a.createElement("div", null, a.createElement("strong", null, "Not sure where to start? Start with this collection!"))), !!i.length && a.createElement(o.default, null, a.createElement("h3", {
                    style: {
                        margin: 0
                    }
                }, "Most Common Words"), a.createElement("p", null, "Play collections of sentences grouped by difficulty."), a.createElement("p", null, a.createElement("strong", null, "Not sure where to start? Try the ", i[0].name, " collection and go up from there.")), i.map((e => a.createElement("div", {
                    style: {
                        borderLeft: "3px solid #ccc",
                        marginLeft: 15,
                        padding: "10px 0 10px 15px"
                    }
                }, this.renderCollection(e, a.createElement(a.Fragment, null, a.createElement("h4", {
                    style: {
                        margin: 0
                    }
                }, e.name), a.createElement("div", null, e.numSentences.toLocaleString(), " sentences"))), a.createElement("div", null))))), !!r.length && a.createElement(o.default, null, a.createElement("h3", {
                    style: {
                        margin: 0
                    }
                }, "Grammar Challenges"), a.createElement("p", null, "Master difficult grammar in context."), r.map((e => a.createElement("div", {
                    style: {
                        borderLeft: "3px solid #ccc",
                        marginLeft: 15,
                        padding: "10px 0 10px 15px"
                    }
                }, this.renderCollection(e, a.createElement(a.Fragment, null, a.createElement("h4", {
                    style: {
                        margin: 0
                    }
                }, e.name), a.createElement("div", null, e.numSentences.toLocaleString(), " sentences"))), a.createElement("div", null))))), !!c && a.createElement(o.default, null, this.renderCollection(c, a.createElement(a.Fragment, null, a.createElement("h3", {
                    style: {
                        margin: 0
                    }
                }, c.name), a.createElement("p", null, "Play a collection of ", c.numSentences.toLocaleString(), " randomly selected sentences."), !l && a.createElement("div", null, a.createElement("strong", null, "Not sure where to start? Start with this collection!"))))))
            }
            render() {
                const {onHidden: e} = this.props;
                return a.createElement(r.default, {
                    onHidden: e,
                    title: "Collections"
                }, this.renderContent())
            }
        }
        class d extends a.Component {
            componentDidMount() {
                let e = null
                  , t = null;
                const n = e => {
                    $("#line-2 .letter").get(e) || $("#continue-btn").delay(1e3).animate({
                        opacity: 1
                    }),
                    $("#line-2 .letter").eq(e).css("opacity", 1),
                    t = setTimeout(( () => n(e + 1)), 50)
                }
                  , a = l => {
                    if (!$("#line-1 .letter").get(l))
                        return $("#line-1 .blank").animate({
                            opacity: 1
                        }, {
                            complete: () => {
                                $("#line-1 .punctuation").css("opacity", 1),
                                $("#line-1 .missing").animate({
                                    opacity: 1
                                }).animate({
                                    opacity: 0
                                }).animate({
                                    opacity: 1
                                }).animate({
                                    opacity: 0
                                }).animate({
                                    opacity: 1
                                }).animate({
                                    opacity: 0
                                }).animate({
                                    opacity: 1
                                }, {
                                    complete: () => {
                                        t = setTimeout(( () => n(0)), 1e3)
                                    }
                                })
                            }
                        }),
                        !1;
                    $("#line-1 .letter").eq(l).css("opacity", 1),
                    e = setTimeout(( () => a(l + 1)), 50)
                }
                ;
                e = setTimeout(( () => a(0)), 500);
                let l = !1;
                $(window).on("keydown", (n => {
                    l || 13 !== n.which && 32 !== n.which || (n.preventDefault(),
                    clearTimeout(e),
                    clearTimeout(t),
                    $("#line-1 .letter, #line-1 .punctuation, #line-1 .blank, #line-1 .missing, #line-2 .letter, #continue-btn").stop(!0, !0).css("opacity", 1),
                    l = !0)
                }
                ))
            }
            render() {
                const {onContinueClick: e} = this.props;
                return a.createElement("div", {
                    className: "container text-center",
                    style: {
                        fontFamily: "joystix",
                        fontWeight: "bold",
                        marginTop: 60
                    }
                }, a.createElement("div", {
                    id: "line-1",
                    style: {
                        fontSize: "2em"
                    }
                }, a.createElement("span", {
                    className: "letter"
                }, "A"), a.createElement("span", {
                    className: "letter"
                }, " "), a.createElement("span", {
                    className: "letter"
                }, "\u201c"), a.createElement("span", {
                    style: {
                        color: "#5cb85c"
                    }
                }, "cloze".split("").map((e => a.createElement("span", {
                    className: "letter"
                }, e)))), a.createElement("span", {
                    className: "letter"
                }, "\u201d"), " sentence is a sentence with a word ".split("").map((e => a.createElement("span", {
                    className: "letter"
                }, e))), a.createElement("span", {
                    className: "blank",
                    style: {
                        display: "inline-block",
                        position: "relative"
                    }
                }, a.createElement("span", {
                    style: {
                        borderBottom: "3px solid #000"
                    }
                }, "\xa0\xa0\xa0\xa0\xa0\xa0\xa0"), a.createElement("small", {
                    className: "missing",
                    style: {
                        fontSize: 16,
                        position: "absolute",
                        bottom: -30,
                        left: 0,
                        right: 0,
                        opacity: 0
                    }
                }, "(missing)")), a.createElement("span", {
                    className: "punctuation"
                }, ".")), a.createElement("div", {
                    id: "line-2",
                    style: {
                        fontSize: "2em",
                        margin: "60px 0"
                    }
                }, "The objective is to fill in the missing word based on context or the given translation.".split("").map((e => a.createElement("span", {
                    className: "letter"
                }, e)))), a.createElement("button", {
                    id: "continue-btn",
                    className: "btn btn-lg btn-success joystix",
                    onClick: e,
                    style: {
                        opacity: 0
                    }
                }, "Continue ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })))
            }
        }
        class u extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collectionsModalVisible: !1
                }
            }
            componentDidMount() {
                let e = null
                  , t = null;
                const n = e => {
                    $("#line-2 .letter").get(e) || $("#buttons").delay(1e3).animate({
                        opacity: 1
                    }),
                    $("#line-2 .letter").eq(e).css("opacity", 1),
                    t = setTimeout(( () => n(e + 1)), 50)
                }
                  , a = l => {
                    if (!$("#line-1 .letter").get(l))
                        return t = setTimeout(( () => n(0)), 1e3),
                        !1;
                    $("#line-1 .letter").eq(l).css("opacity", 1),
                    e = setTimeout(( () => a(l + 1)), 50)
                }
                ;
                e = setTimeout(( () => a(0)), 500);
                let l = !1;
                $(window).on("keypress", (n => {
                    l || 13 !== n.which && 32 !== n.which || (n.preventDefault(),
                    clearTimeout(e),
                    clearTimeout(t),
                    $("#line-1 .letter, #line-2 .letter, #buttons").stop(!0, !0).css("opacity", 1),
                    l = !0)
                }
                ))
            }
            renderOnboardingCollections() {
                const {collectionsModalVisible: e} = this.state
                  , {languagePairingUrl: t} = this.props;
                return e ? a.createElement(c, {
                    languagePairingUrl: t,
                    onHidden: () => this.setState({
                        collectionsModalVisible: !1
                    })
                }) : null
            }
            render() {
                const {justPlayUrl: e} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    id: "lines",
                    className: "container text-center",
                    style: {
                        fontFamily: "joystix",
                        fontWeight: "bold",
                        marginTop: 60
                    }
                }, a.createElement("div", {
                    id: "line-1",
                    style: {
                        fontSize: "2em",
                        marginBottom: 60
                    }
                }, i("With Clozemaster you play through "), a.createElement("span", {
                    className: "letter"
                }, "\u201c"), a.createElement("span", {
                    style: {
                        color: "#5cb85c"
                    }
                }, i("collections")), a.createElement("span", {
                    className: "letter"
                }, "\u201d"), i(" of hundreds and even thousands of cloze sentences to rapidly expand your vocabulary.")), a.createElement("div", {
                    id: "line-2",
                    style: {
                        fontSize: "2em",
                        marginBottom: 60
                    }
                }, i("Clozemaster Pro users can also create their own collections.")), a.createElement("div", {
                    id: "buttons",
                    style: {
                        opacity: 0
                    }
                }, a.createElement("button", {
                    className: "btn btn-lg btn-default joystix",
                    onClick: () => this.setState({
                        collectionsModalVisible: !0
                    }),
                    style: {
                        margin: "0 10px 20px 10px"
                    }
                }, "Choose collection"), a.createElement("a", {
                    className: "btn btn-lg btn-success joystix",
                    href: e,
                    style: {
                        margin: "0 10px 20px 10px"
                    }
                }, "Just start playing"))), this.renderOnboardingCollections())
            }
        }
        class m extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    index: 1
                }
            }
            render() {
                const {index: e} = this.state
                  , {justPlayUrl: t, languagePairingUrl: n} = this.props;
                return 2 === e ? a.createElement(u, {
                    justPlayUrl: t,
                    languagePairingUrl: n
                }) : a.createElement(d, {
                    onContinueClick: () => this.setState({
                        index: 2
                    })
                })
            }
        }
    },
    90075: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = (n(40961),
        n(40727))
          , s = n(61291)
          , r = n(73898);
        n(40897),
        n(18152);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    showWelcomeMessage: !1
                }
            }
            componentDidMount() {
                const {formId: e} = this.props;
                if (window._refiner && e) {
                    let t = null;
                    window._refiner("onShow", (e => {
                        clearTimeout(t),
                        this.setState({
                            loading: !1,
                            showWelcomeMessage: !1
                        })
                    }
                    )),
                    window._refiner("onClose", (e => {
                        this.setState({
                            loading: !1,
                            showWelcomeMessage: !0
                        })
                    }
                    )),
                    window._refiner("showForm", e, !0),
                    t = setTimeout(( () => {
                        this.setState({
                            loading: !1,
                            showWelcomeMessage: !0
                        })
                    }
                    ), 3e3)
                } else
                    this.setState({
                        loading: !1,
                        showWelcomeMessage: !0
                    })
            }
            render() {
                const {loading: e, showWelcomeMessage: t} = this.state
                  , {isLanguagePairingSelected: n, startPath: o} = this.props;
                return a.createElement("div", null, e && a.createElement(r.default, null), t && a.createElement(s.default, null, a.createElement("div", {
                    className: "text-center joystix"
                }, a.createElement("br", null), a.createElement("br", null), a.createElement("h1", null, "Welcome to Clozemaster!"), a.createElement("h4", {
                    style: {
                        marginBottom: 30,
                        marginTop: 30
                    }
                }, "Faster and more efficient language learning awaits you beyond this screen."), a.createElement("a", {
                    className: "btn btn-lg btn-success btn-block joystix",
                    href: o
                }, "Start ", a.createElement(l.default, {
                    name: "chevron-right"
                })))))
            }
        }
    },
    55628: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(74904);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.checkUserStatusCount = 0,
                this.state = {
                    loading: !1
                }
            }
            componentDidMount() {
                const {sandbox: e, vendor: t} = this.props;
                e && (Paddle.Environment.set("sandbox"),
                window.handleCheckoutCompleted = e => this.handleCheckoutCompleted(e)),
                Paddle.Setup({
                    eventCallback: e => {
                        "Checkout.Close" === e.event && e.eventData.checkout.completed && this.handleCheckoutCompleted(e)
                    }
                    ,
                    vendor: parseInt(t)
                }),
                this.setPrices()
            }
            setPrices() {
                const {bigYearlyPriceFont: e, couponCode: t, discountPct: n, sandbox: a} = this.props
                  , l = $(".price").map((function() {
                    return $(this).find("[data-product]").data("product")
                }
                )).toArray().join(",");
                $.ajax({
                    dataType: "jsonp",
                    data: {
                        calculate_recurring_discounts: !0,
                        product_ids: l,
                        coupons: t
                    },
                    timeout: 3e3,
                    url: `https://${a ? "sandbox-" : ""}checkout.paddle.com/api/2.0/prices`
                }).done((t => {
                    if (!t.success)
                        return this.fallbackSetPrices(),
                        !1;
                    try {
                        t.response.products.forEach((t => {
                            const a = $(`[data-product="${t.product_id}"]`).parents(".price")
                              , l = t.subscription ? t.subscription.list_price.gross : t.list_price.gross
                              , s = e => new Intl.NumberFormat("en-US",{
                                style: "currency",
                                currency: t.currency
                            }).format(e)
                              , r = s(l);
                            if (a.find(".default .dollars").text(r),
                            t.subscription && t.subscription.trial_days && (a.siblings(".period").after(`<strong>${t.subscription.trial_days} day free trial</strong>`),
                            "year" === t.subscription.interval && (a.siblings(".period").after(`<div class="per-month" style="color: #aaa">${s(l / 12)}/month</strong>`),
                            a.siblings(".guarantee").hide())),
                            n || t.applied_coupon && t.applied_coupon.discount) {
                                const r = t.applied_coupon && t.applied_coupon.discount ? t.price.gross : l * (1 - n)
                                  , o = s(r);
                                a.find(".default .dollars").css({
                                    "font-size": "2em",
                                    "text-decoration": "line-through"
                                }),
                                a.append(`\n                <div class="discounted-price" style="color: #5cb85c; font-size: 3em; font-weight: bold">\n                  ${o}\n                </div>\n              `),
                                t.subscription && "year" === t.subscription.interval && (a.siblings(".per-month").text(`${s(r / 12)}/month`),
                                e && a.find(".discounted-price").css({
                                    fontSize: "4em"
                                }))
                            }
                        }
                        ))
                    } catch (a) {
                        this.fallbackSetPrices()
                    }
                }
                )).fail(( () => {
                    this.fallbackSetPrices()
                }
                ))
            }
            fallbackSetPrices() {
                const {bigYearlyPriceFont: e, discountPct: t} = this.props;
                $(".price").each((function() {
                    const n = $(this)
                      , a = n.find("[data-product]").data("product");
                    Paddle.Product.Prices(a, (function(a) {
                        console.log(a);
                        const l = a.recurring ? a.recurring.price.gross : a.price.gross;
                        n.find(".default .dollars").text(l);
                        const s = a.recurring && a.recurring.subscription && "year" === a.recurring.subscription.type;
                        if (a.recurring && a.recurring.subscription && a.recurring.subscription.trial_days && (n.siblings(".period").after(`<strong>${a.recurring.subscription.trial_days} day free trial</strong>`),
                        s && n.siblings(".guarantee").hide()),
                        t && !l.match(/,/)) {
                            const a = l.match(/(\D+)(\d.+)/)
                              , r = a[1] + parseFloat(a[2] * (1 - t)).toFixed(2);
                            n.find(".default .dollars").css({
                                "font-size": "2em",
                                "text-decoration": "line-through"
                            }),
                            n.append(`\n            <div class="discounted-price" style="color: #5cb85c; font-size: ${s && e ? "4em" : "3em"}; font-weight: bold">${r}</div>\n          `)
                        }
                    }
                    ))
                }
                ))
            }
            handleCheckoutCompleted(e) {
                const {sandbox: t} = this.props;
                t && console.log(e),
                this.setState({
                    loading: !0
                }, ( () => this.checkUserStatus(e)))
            }
            onFinishedWaiting(e) {
                const {ga: t, mixpanel: n, tap: a} = window
                  , {eventData: l} = e || {}
                  , {userUuid: s} = this.props;
                try {
                    t && t("send", "event", "User", "subscribed to pro"),
                    n && n.track && n.track("User subscribed to pro")
                } catch (r) {}
                setTimeout(( () => this.redirect()), 500)
            }
            redirect() {
                window.location = "/pro-welcome"
            }
            checkUserStatus(e) {
                if (this.checkUserStatusCount >= 5)
                    return this.onFinishedWaiting(e);
                const {isProSubscriberUrl: t} = this.props;
                $.ajax({
                    url: t
                }).done((t => {
                    if (t.user.isPro)
                        return this.onFinishedWaiting(e);
                    this.checkUserStatusCount += 1,
                    setTimeout(( () => this.checkUserStatus(e)), 2e3)
                }
                )).fail(( () => {
                    this.onFinishedWaiting(e)
                }
                ))
            }
            render() {
                const {loading: e} = this.state;
                return e ? a.createElement(l.default, {
                    className: "heavy"
                }) : null
            }
        }
    },
    86956: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            const {goToPage: t, onNextClick: n, onPrevClick: l, page: s, perPage: r, total: o, updating: i} = e
              , c = Math.ceil(o / r);
            return a.createElement("div", {
                className: "row"
            }, a.createElement("div", {
                className: "col-xs-4"
            }, s > 1 && a.createElement("button", {
                disabled: i,
                onClick: () => l(),
                className: "btn btn-link"
            }, "Prev")), a.createElement("div", {
                className: "col-xs-4 text-center",
                style: {
                    paddingTop: 8
                }
            }, "Total: ", o.toLocaleString(), " Page: ", t ? a.createElement("select", {
                disabled: i,
                onChange: e => t(Number(e.target.value)),
                value: s
            }, Array.from({
                length: c
            }, ( (e, t) => t + 1)).map((e => a.createElement("option", {
                key: e,
                value: e,
                disabled: e === s
            }, e)))) : s, " / ", c), a.createElement("div", {
                className: "col-xs-4 text-right"
            }, s * r < o && a.createElement("button", {
                disabled: i,
                onClick: () => n(),
                className: "btn btn-link"
            }, "Next")))
        }
    },
    18152: function(e, t, n) {
        "use strict";
        n.r(t);
        var a = n(96540);
        t.default = e => a.createElement("div", Object.assign({
            className: "panel panel-" + (e.context || "default") + " " + (e.className || ""),
            id: e.id,
            style: e.style
        }, e.attrs), e.heading && a.createElement("div", {
            className: "panel-heading"
        }, e.heading), a.createElement("div", {
            className: `panel-body ${e.bodyClassName || ""}`
        }, e.children))
    },
    8e4: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return p
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(58108)
          , o = n(68462)
          , i = n(36460)
          , c = n(28737)
          , d = n(40727)
          , u = n(52226)
          , m = (n(33405),
        n(73898))
          , h = n(40897)
          , g = (n(60846),
        n(42100));
        class p extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    answered: !1,
                    correct: null,
                    currentAnswer: "",
                    currentSentenceIndex: null,
                    promoModalVisible: !1,
                    reportModalVisible: !1,
                    loading: !0,
                    sentences: [],
                    sentenceControlVisible: !1,
                    sentenceVisible: !1,
                    textInputValue: "",
                    totalDuration: 0
                }
            }
            componentDidMount() {
                this.loadSentences()
            }
            componentDidUpdate(e, t) {
                t.loading && !this.state.loading && this.initWavesurfer(),
                this.state.currentSentenceIndex !== t.currentSentenceIndex && this.wavesurfer.load(this.getCurrentSentence().audioUrl);
                const {isPro: n, maxBeforePromo: a, numPlayedToday: l} = this.props;
                !n && this.state.currentSentenceIndex + l >= a && !this.state.promoModalVisible && this.setState({
                    promoModalVisible: !0
                })
            }
            initWavesurfer() {
                this.wavesurfer = WaveSurfer.create({
                    container: "#waveform",
                    waveColor: "rgba(68,157,68,0.5)",
                    progressColor: "#5cb85c"
                }),
                this.wavesurfer.on("error", ( () => {
                    alert("Oh no! There was an error. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        sentenceVisible: !0
                    })
                }
                )),
                this.wavesurfer.on("pause", ( () => {
                    this.setState({
                        isPlayingAudio: !1
                    })
                }
                )),
                this.wavesurfer.on("play", ( () => {
                    this.setState({
                        isPlayingAudio: !0
                    })
                }
                )),
                this.wavesurfer.on("seek", ( () => {
                    this.playAudio()
                }
                )),
                this.wavesurfer.on("ready", ( () => {
                    this.state.currentSentenceIndex && this.playAudio()
                }
                ))
            }
            loadSentences() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    url: this.props.playUrl
                }).done((e => {
                    console.log(e),
                    this.setState({
                        currentSentenceIndex: 0,
                        loading: !1,
                        sentences: e.sentences
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the sentences. Sorry about that. Please refresh the page and let us know if you see this message again.")
                }
                ))
            }
            loadMoreSentences() {
                $.ajax({
                    url: this.props.playUrl
                }).done((e => {
                    console.log(e);
                    const t = this.state.sentences.map((e => e.id));
                    this.setState({
                        sentences: this.state.sentences.concat(e.sentences.filter((e => t.indexOf(e.id) < 0)))
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading more sentences. Sorry about that. Please refresh the page and let us know if you see this message again.")
                }
                ))
            }
            getCurrentSentence() {
                return this.state.sentences[this.state.currentSentenceIndex]
            }
            playPauseAudio() {
                this.wavesurfer.playPause()
            }
            playAudio(e) {
                this.wavesurfer.play(e)
            }
            onSubmitAnswer(e) {
                if (e.preventDefault(),
                this.state.answered)
                    return this.handleSrsResponse(3),
                    !1;
                const t = this.getCurrentSentence()
                  , {preClozeStr: n, cloze: a, postClozeStr: l} = (0,
                r.UE)(t.text)
                  , s = this.state.textInputValue.toLowerCase().replace(/^\s+|\s+$/g, "") === a.toLowerCase();
                this.sendAnswer(s),
                this.setState({
                    answered: !0,
                    correct: s,
                    totalDuration: this.state.totalDuration + t.duration
                }, ( () => this.playAudio(0)))
            }
            sendAnswer(e) {
                const t = this.getCurrentSentence();
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        sentence: {
                            correct: e
                        }
                    }),
                    method: "post",
                    url: t.answerUrl
                }).done((e => {}
                )).fail(( () => {
                    alert("Oh no! There was an error saving the answer. Sorry about that. Please let us know if you see this message again.")
                }
                ))
            }
            sendSrsResponse(e) {
                const t = this.getCurrentSentence()
                  , n = this.getEasinessFactor({
                    ef: t.easinessFactor,
                    q: e
                })
                  , a = this.getRepetitionInterval({
                    ef: n,
                    q: e,
                    ri: t.repetitionInterval
                });
                this.updateCurrentSentence({
                    easiness_factor: n,
                    last_played_date: s()().format("YYYY-MM-DD"),
                    next_review: s()().add(a, "days").format("YYYY-MM-DD"),
                    repetition_interval: a
                })
            }
            updateCurrentSentence(e) {
                const t = this.getCurrentSentence();
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        sentence: e
                    }),
                    method: "put",
                    url: t.url
                }).done((e => {}
                )).fail(( () => {
                    alert("Oh no! There was an error updating the sentence. Sorry about that. Please let us know if you see this message again.")
                }
                ))
            }
            ignore() {
                confirm("Are you sure? This will remove the sentence from your queue.") && (this.updateCurrentSentence({
                    ignored: !0
                }),
                this.next())
            }
            reset() {
                this.updateCurrentSentence({
                    easiness_factor: 2.5,
                    repetition_interval: null
                }),
                this.next()
            }
            replayToday() {
                this.updateCurrentSentence({
                    easiness_factor: 2.5,
                    last_played_date: s()().format("YYYY-MM-DD"),
                    next_review: s()().format("YYYY-MM-DD"),
                    repetition_interval: null
                }),
                this.next()
            }
            handleSrsResponse(e) {
                this.sendSrsResponse(e),
                this.next()
            }
            next() {
                return this.state.sentences.length - this.state.currentSentenceIndex <= 3 && this.loadMoreSentences(),
                this.setState({
                    answered: !1,
                    correct: null,
                    currentSentenceIndex: this.state.currentSentenceIndex + 1,
                    sentenceControlVisible: !1,
                    sentenceVisible: !1,
                    textInputValue: ""
                })
            }
            getRepetitionInterval({ef: e, ri: t, q: n}) {
                return t ? Math.ceil(t * Math.max(e, 1.3)) : n
            }
            getEasinessFactor({ef: e, q: t}) {
                return e + (.1 - (5 - t) * (.08 + .02 * (5 - t)))
            }
            onAccentBtnClick(e, t) {
                e.preventDefault(),
                e.shiftKey && (t = t.toUpperCase());
                const n = this.state.textInputValue
                  , a = this.textInput.selectionStart;
                this.setState({
                    textInputValue: n.substring(0, a) + t + n.substring(a)
                }, ( () => {
                    this.textInput.focus(),
                    this.textInput.selectionStart = a + 1,
                    this.textInput.selectionEnd = a + 1
                }
                ))
            }
            renderAccentButtons() {
                if (this.state.answered)
                    return null;
                const e = r.ZJ[this.props.targetLanguageIso];
                if (!e)
                    return null;
                const t = [];
                for (var n in e)
                    e[n].split("").forEach((e => {
                        t.push(a.createElement("button", {
                            className: "btn btn-default btn-sm",
                            key: e,
                            onClick: t => this.onAccentBtnClick(t, e),
                            type: "button"
                        }, e))
                    }
                    ));
                return a.createElement("div", {
                    className: "accent-btns"
                }, t)
            }
            renderCurrentSentence() {
                if (!this.state.sentenceVisible)
                    return null;
                const e = this.getCurrentSentence()
                  , {answered: t, correct: n} = this.state
                  , {preClozeStr: l, cloze: s, postClozeStr: o} = (0,
                r.UE)(e.text);
                return a.createElement("div", null, a.createElement("div", {
                    style: {
                        fontSize: "2em"
                    }
                }, l, a.createElement("strong", null, t ? n ? a.createElement("span", {
                    style: {
                        color: "#5cb85c"
                    }
                }, s) : s : a.createElement("u", null, "________")), o), t && a.createElement("div", {
                    dangerouslySetInnerHTML: {
                        __html: e.translation
                    }
                }), a.createElement("div", {
                    style: {
                        margin: "10px  0"
                    }
                }, this.renderPlayCurrentSentenceAudioBtn()), a.createElement("form", {
                    onSubmit: e => this.onSubmitAnswer(e)
                }, a.createElement("input", {
                    autoCapitalize: "off",
                    autoComplete: "off",
                    autoCorrect: "off",
                    className: "form-control input-lg",
                    name: "answer",
                    onChange: e => this.setState({
                        textInputValue: e.target.value
                    }),
                    ref: e => this.textInput = e,
                    spellCheck: "false",
                    style: {
                        color: n ? "#5cb85c" : null,
                        margin: "20px auto",
                        maxWidth: 800,
                        textAlign: "center"
                    },
                    type: "text",
                    value: this.state.textInputValue
                }), this.renderAccentButtons(), !this.state.answered && a.createElement("button", {
                    className: "btn btn-success btn-lg joystix",
                    type: "submit"
                }, "Submit")))
            }
            renderPlayCurrentSentenceAudioBtn() {
                let e = null;
                return e = this.state.isPlayingAudio ? a.createElement("span", null, a.createElement(d.default, {
                    name: "pause"
                }), " Pause") : a.createElement("span", null, a.createElement(d.default, {
                    name: "volume-up"
                }), " Play"),
                a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.playPauseAudio(),
                    style: {
                        width: 150
                    }
                }, e)
            }
            renderSentenceControl() {
                return this.state.sentenceVisible ? null : a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, this.renderPlayCurrentSentenceAudioBtn()), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.setState({
                        sentenceVisible: !0
                    }, ( () => {
                        this.playAudio(0),
                        this.textInput.focus()
                    }
                    )),
                    style: {
                        width: 150
                    }
                }, a.createElement(d.default, {
                    name: "arrow-down"
                }), " Sentence")))
            }
            renderSrsControls() {
                if (!this.state.answered)
                    return null;
                const e = this.getCurrentSentence();
                return a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.ignore()
                }, a.createElement(d.default, {
                    name: "thumbs-down"
                })), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, "Ignore")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.reset()
                }, a.createElement(d.default, {
                    name: "refresh"
                })), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, "Reset")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.replayToday()
                }, a.createElement(d.default, {
                    name: "repeat",
                    type: "fa"
                })), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, "Today")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.handleSrsResponse(1)
                }, "Hard"), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, this.getRepetitionInterval({
                    ef: this.getEasinessFactor({
                        q: 1,
                        ef: e.easinessFactor
                    }),
                    q: 1,
                    ri: e.repetitionInterval
                }), " days")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.handleSrsResponse(3)
                }, "Normal"), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, this.getRepetitionInterval({
                    ef: this.getEasinessFactor({
                        q: 3,
                        ef: e.easinessFactor
                    }),
                    q: 3,
                    ri: e.repetitionInterval
                }), " days")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default joystix",
                    onClick: () => this.handleSrsResponse(5)
                }, "Easy"), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, this.getRepetitionInterval({
                    ef: this.getEasinessFactor({
                        q: 5,
                        ef: e.easinessFactor
                    }),
                    q: 5,
                    ri: e.repetitionInterval
                }), " days")))
            }
            renderPoints() {
                return this.state.answered ? this.state.correct ? a.createElement(i.default, {
                    delay: 3e3
                }, a.createElement("div", {
                    style: {
                        position: "relative"
                    }
                }, a.createElement("div", {
                    style: {
                        color: "#5cb85c",
                        fontSize: "3em",
                        position: "absolute",
                        textAlign: "center",
                        width: "100%"
                    }
                }, a.createElement("i", {
                    className: "fa fa-check",
                    "aria-hidden": "true"
                })))) : a.createElement(u.default, null) : null
            }
            renderBottomControls() {
                return a.createElement("div", {
                    className: "text-right",
                    style: {
                        marginTop: 30
                    }
                }, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-danger",
                    onClick: () => this.setState({
                        reportModalVisible: !0
                    })
                }, a.createElement(d.default, {
                    name: "flag"
                }), " Report")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-default",
                    onClick: () => this.ignore()
                }, a.createElement(d.default, {
                    name: "thumbs-down"
                }), " Ignore")), !this.state.roundEnded && a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-default",
                    onClick: () => this.endRound()
                }, a.createElement(d.default, {
                    name: "stop"
                }), " End Round")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-default",
                    "data-target": "#help-modal",
                    "data-toggle": "modal"
                }, a.createElement(d.default, {
                    name: "info-circle",
                    type: "fa"
                }), " Help!"))))
            }
            renderReportModal() {
                if (!this.state.reportModalVisible)
                    return null;
                const e = this.getCurrentSentence();
                return a.createElement(g.default, {
                    onHidden: () => this.setState({
                        reportModalVisible: !1
                    }),
                    url: e.reportUrl
                })
            }
            endRound() {
                confirm("Are you sure you want to end this round?") && this.setState({
                    roundEnded: !0
                })
            }
            renderUltModal() {
                return a.createElement(h.default, {
                    id: "ult-modal",
                    show: !1,
                    size: "small",
                    title: "Unique Listening Time"
                }, a.createElement("p", null, "The time in the top right represents ", a.createElement("strong", null, "unique listening time"), " - the sum of the duration of each sentence you play. In other words if a sentence is 3 seconds long, only 3 seconds will be added regardless of how many times you listen to that sentence. The idea is to track the total time your brain is exposed to unique content (as opposed to including the same sentence multiple times on repeat)."))
            }
            renderRoundResults() {
                const e = this.state.sentences.slice(0, this.state.currentSentenceIndex);
                return a.createElement("ul", {
                    className: "list-group round-results text-left",
                    style: {
                        margin: "0 auto",
                        marginTop: 20,
                        maxWidth: 600
                    }
                }, e.map((e => {
                    let t = null;
                    return a.createElement("li", {
                        className: "list-group-item sentence",
                        key: e.id
                    }, a.createElement("div", {
                        className: "pull-right"
                    }, a.createElement("button", {
                        className: "btn btn-default",
                        onClick: () => {
                            t = t || new Audio(e.audioUrl),
                            t.play().catch((e => alert("Oh no! There was an error playing the sentence: " + e)))
                        }
                    }, a.createElement(d.default, {
                        name: "play"
                    }))), a.createElement("span", {
                        style: {
                            fontSize: "1.5em"
                        }
                    }, a.createElement(o.default, {
                        text: e.text
                    })), a.createElement("br", null), a.createElement("small", {
                        dangerouslySetInnerHTML: {
                            __html: e.translation
                        }
                    }))
                }
                )))
            }
            renderHelpModal() {
                return a.createElement(h.default, {
                    id: "help-modal",
                    show: !1,
                    title: "Help!"
                }, a.createElement("p", {
                    className: "lead"
                }, "Ready to rapidly improve your listening skills?"), a.createElement("p", null, a.createElement("strong", null, "Listen to the sentence recorded by a native speaker, see the text and fill in the misisng word, then decide if and when you want to see the sentence again. Repeat.")), a.createElement("p", null, "Sentences and audio are from the Mozilla's awesome ", a.createElement("a", {
                    href: "https://commonvoice.mozilla.org/en",
                    target: "_blank"
                }, "Common Voice"), " dataset (check it out and contribute if you can!). Translations are from Google."), a.createElement("p", null, "The audio quality ranges from good to bad, the accents are different, the speed is variable - in other words it's an excellent challenge for your listening abilities and a fantastic way to get better at listening. ", a.createElement("strong", null, "If you can get to a point where you understand these sentences with ease, you'll have no problem understanding native speakers in the real world - with background noise, different accents, etc.")), a.createElement("p", null, "The spaced-repetition system is meant to help you listen to these sentences again and again at optimal intervals. You can also ignore sentences that aren't useful or have particularly bad audio - if a sentence gets enough ignores we'll remove it for everyone."), a.createElement("p", null, 'The time in the top right represents "unique listening time" - the sum of the duration of each sentence you play. In other words if a sentence is 3 seconds long, only 3 seconds will be added regardless of how many times you listen to that sentence. The idea is to track the total time your brain is exposed to unique content (as opposed to including the same sentence multiple times on repeat).'), a.createElement("p", null, "Feedback? Comments? Questions? ", a.createElement("a", {
                    href: "/contact",
                    target: "_blank"
                }, "Let us know!")))
            }
            renderContent() {
                return this.state.roundEnded ? this.renderRoundResults() : a.createElement(a.Fragment, null, a.createElement("div", {
                    id: "waveform",
                    style: {
                        marginBottom: 20,
                        marginTop: 20
                    }
                }), this.renderSentenceControl(), this.renderCurrentSentence(), this.renderSrsControls())
            }
            renderPromoModal() {
                if (!this.state.promoModalVisible)
                    return null;
                const {maxBeforePromo: e} = this.props;
                return a.createElement(h.default, {
                    footer: a.createElement("div", {
                        style: {
                            textAlign: "left"
                        }
                    }, a.createElement("a", {
                        className: "btn btn-default joystix",
                        href: "/dashboard"
                    }, a.createElement(d.default, {
                        name: "chevron-left"
                    }), " Dashboard")),
                    noClose: !0,
                    size: "small",
                    title: "Pro"
                }, a.createElement("div", {
                    style: {
                        textAlign: "center"
                    }
                }, a.createElement("p", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, "Play ", e, " sentences of Cloze-Listening per day for free."), a.createElement("p", {
                    style: {
                        fontSize: "1.5em"
                    }
                }, a.createElement("strong", null, "Get Clozemaster Pro for unlimited Cloze-Listening practice!")), a.createElement("p", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, "Rapidly improve your listening skills. Get fluent faster.")), a.createElement("a", {
                    className: "btn btn-success btn-lg btn-block joystix",
                    href: "/pro"
                }, "Get Pro Today!"))
            }
            render() {
                const {currentSentenceIndex: e, loading: t, score: n, sentenceControlVisible: l, sentenceVisible: s, totalDuration: o} = this.state
                  , {baseLanguageFlagIso: i, targetLanguageFlagIso: u} = this.props;
                if (this.state.loading)
                    return a.createElement(m.default, null);
                this.getCurrentSentence();
                return a.createElement("div", {
                    className: "container",
                    id: "cloze-listening",
                    style: {
                        marginTop: 20,
                        textAlign: "center"
                    }
                }, this.renderPoints(), a.createElement("div", {
                    className: "text-left"
                }, a.createElement("div", {
                    className: "pull-right joystix"
                }, a.createElement("small", null, "Played: "), e, " ", a.createElement("div", {
                    className: "visible-xs"
                }), a.createElement(d.default, {
                    name: "clock-o",
                    type: "fa"
                }), " ", (0,
                r.YS)(o), " ", a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    "data-toggle": "modal",
                    "data-target": "#ult-modal"
                }, a.createElement(d.default, {
                    name: "question-sign"
                }))), a.createElement("div", {
                    className: "joystix"
                }, "Cloze-Listening ", a.createElement(c.default, {
                    flagIso: u,
                    size: 24
                }), " / ", a.createElement(c.default, {
                    flagIso: i,
                    size: 24
                }), " ", a.createElement("div", {
                    className: "visible-xs"
                }), "Beta")), this.renderContent(), this.renderBottomControls(), this.renderHelpModal(), this.renderUltModal(), this.renderReportModal(), this.renderPromoModal())
            }
        }
    },
    42100: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    reporting: !1,
                    reported: !1
                }
            }
            report() {
                this.setState({
                    reporting: !0
                }),
                $.ajax({
                    method: "post",
                    url: this.props.url
                }).done(( () => {
                    this.setState({
                        reporting: !1,
                        reported: !0
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error reporting the sentence. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        reporting: !1
                    })
                }
                ))
            }
            renderContent() {
                return this.state.reported ? a.createElement(a.Fragment, null, a.createElement("p", null, "Thanks for your help to improve Clozemaster!"), a.createElement("p", null, a.createElement("strong", null, "Don't forget to ignore this sentence via the ", a.createElement(l.default, {
                    name: "thumbs-down"
                }), " button if you don't want to see it any more."))) : a.createElement(a.Fragment, null, a.createElement("p", null, a.createElement("strong", null, "Strong accents, poor quality, and background noise are features of Cloze-Listening to help you improve your listening skills and understand what you hear in any context.")), a.createElement("p", null, "But sometimes a bad recording is just a bad recording. Or perhaps the translation isn't quite right."), a.createElement("p", null, "Let us know here. If enough users report a sentence we'll remove it for everyone."), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-block btn-danger joystix",
                    disabled: this.state.reporting,
                    onClick: () => this.report()
                }, "Report")), a.createElement("p", null, a.createElement("strong", null, "In the meantime, if you don't want to see this sentence any more, please ignore it via the ", a.createElement(l.default, {
                    name: "thumbs-down"
                }), " button.")))
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: () => this.props.onHidden(),
                    size: "small",
                    title: "Report Sentence"
                }, this.renderContent())
            }
        }
    },
    83394: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return Y
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(21663)
          , o = n(58108)
          , i = n(94626)
          , c = n(78780)
          , d = n(68462)
          , u = n(80931)
          , m = n(84842)
          , h = n(7481)
          , g = n(73677)
          , p = n(50964)
          , b = n(15584)
          , f = n(61291)
          , E = (n(36460),
        n(28737))
          , y = n(43302)
          , S = n(45895)
          , v = n(80240)
          , C = n(40727)
          , w = n(52226)
          , x = n(66148)
          , k = n(88622)
          , N = n(33405)
          , T = n(73898)
          , P = n(94870)
          , M = n(40897)
          , R = n(508)
          , L = n(61703)
          , I = n(19782)
          , z = n(89726)
          , U = n(18152)
          , A = n(60846)
          , j = n(93491)
          , D = n(4349)
          , F = n(85964)
          , V = n(89025)
          , B = n(72717)
          , O = n(20997)
          , _ = n(74885);
        const H = "full_text_input"
          , G = "multiple_choice"
          , W = "text_input"
          , q = /[!-/:-@[-`{-~\xa1-\xa9\xab-\xac\xae-\xb1\xb4\xb6-\xb8\xbb\xbf\xd7\xf7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u037e\u0384-\u0385\u0387\u03f6\u0482\u055a-\u055f\u0589-\u058a\u05be\u05c0\u05c3\u05c6\u05f3-\u05f4\u0606-\u060f\u061b\u061e-\u061f\u066a-\u066d\u06d4\u06e9\u06fd-\u06fe\u0700-\u070d\u07f6-\u07f9\u0964-\u0965\u0970\u09f2-\u09f3\u09fa\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0cf1-\u0cf2\u0d79\u0df4\u0e3f\u0e4f\u0e5a-\u0e5b\u0f01-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0f3a-\u0f3d\u0f85\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce-\u0fd4\u104a-\u104f\u109e-\u109f\u10fb\u1360-\u1368\u1390-\u1399\u166d-\u166e\u169b-\u169c\u16eb-\u16ed\u1735-\u1736\u17d4-\u17d6\u17d8-\u17db\u1800-\u180a\u1940\u1944-\u1945\u19de-\u19ff\u1a1e-\u1a1f\u1b5a-\u1b6a\u1b74-\u1b7c\u1c3b-\u1c3f\u1c7e-\u1c7f\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd-\u1ffe\u2000-\u206e\u207a-\u207e\u208a-\u208e\u20a0-\u20b5\u2100-\u2101\u2103-\u2106\u2108-\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a-\u213b\u2140-\u2144\u214a-\u214d\u214f\u2190-\u23e7\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u269d\u26a0-\u26bc\u26c0-\u26c3\u2701-\u2704\u2706-\u2709\u270c-\u2727\u2729-\u274b\u274d\u274f-\u2752\u2756\u2758-\u275e\u2761-\u2775\u2794\u2798-\u27af\u27b1-\u27be\u27c0-\u27ca\u27cc\u27d0-\u2b4c\u2b50-\u2b54\u2ce5-\u2cea\u2cf9-\u2cfc\u2cfe-\u2cff\u2e00-\u2e7e\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3000-\u303f\u309b-\u309c\u30a0\u30fb\u3190-\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3243\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua60d-\ua60f\ua673\ua67e\ua700-\ua716\ua720-\ua721\ua789-\ua78a\ua828-\ua82b\ua874-\ua877\ua8ce-\ua8cf\ua92e-\ua92f\ua95f\uaa5c-\uaa5f\ufb29\ufd3e-\ufd3f\ufdfc-\ufdfd\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\uff01-\uff0f\uff1a-\uff20\uff3b-\uff40\uff5b-\uff65\uffe0-\uffe6\uffe8-\uffee\ufffc-\ufffd]|\ud800[\udd00-\udd02\udd37-\udd3f\udd79-\udd89\udd90-\udd9b\uddd0-\uddfc\udf9f\udfd0]|\ud802[\udd1f\udd3f\ude50-\ude58]|\ud809[\udc00-\udc7e]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83-\udd84\udd8c-\udda9\uddae-\udddd\ude00-\ude41\ude45\udf00-\udf56]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud83c[\udc00-\udc2b\udc30-\udc93]/g;
        class Y extends a.Component {
            constructor(e) {
                super(e),
                this.state = Object.assign(this.getInitialGameState(), {
                    audioLoopCount: 0,
                    gameSettings: e.gameSettings || {},
                    hasRunTutorial: e.hasRunTutorial || !!window.localStorage.getItem("hasRunPlayTutorial"),
                    intraRoundAd: e.intraRoundAd,
                    isAudioLooping: !1,
                    isRunningTutorial: !1,
                    translationVisible: !0,
                    onboarding: e.onboarding
                })
            }
            componentDidMount() {
                this.setupHotkeys(),
                this.initTts(),
                this.initSpeaking(),
                $("body").tooltip({
                    selector: '[data-toggle="tooltip"]'
                }).on("click", (e => {
                    this.state.selectionPopoverId && $(".selection-popover").is(":visible") && !$(e.target).parents(".selection-popover, .sentence").length && this.setState({
                        selectionPopoverId: null,
                        selectedSentenceClozeStr: null,
                        selectedSentenceText: null
                    })
                }
                )).on("mouseup", (e => this.handleSelectionOnMouseUp(e))),
                $("footer.footer a").on("click", (function(e) {
                    e.preventDefault(),
                    confirm("Are you sure you want to leave this page?") && (window.location = e.currentTarget.href)
                }
                )),
                this.shouldShowIntraRoundAd() ? this.setState({
                    intraRoundAdVisible: !0,
                    loading: !1
                }) : (this.incrementRoundsPlayedCount(),
                this.loadCollectionClozeSentences()),
                "true" === window.localStorage.getItem("nextReviewControlsVisible") && this.setState({
                    nextReviewControlsVisible: !0
                })
            }
            componentDidUpdate(e, t) {
                if (t.gameSettings && "on" === t.gameSettings.imageBackground && "on" !== this.state.gameSettings.imageBackground && $("#body > .content").css({
                    background: ""
                }),
                "on" === this.state.gameSettings.imageBackground && ("on" !== t.gameSettings.imageBackground || t.collectionClozeSentences !== this.state.collectionClozeSentences || t.currentSentenceIndex !== this.state.currentSentenceIndex)) {
                    const e = this.getCurrentSentence();
                    e && e.imageUrl ? $("#body > .content").css({
                        background: `url(${e.imageUrl})`
                    }) : $("#body > .content").css({
                        background: ""
                    });
                    const {collectionClozeSentences: t, currentSentenceIndex: n} = this.state
                      , a = t[n + 1];
                    a && a.imageUrl && ($("head").append(`<link rel="preload" href="${a.imageUrl}" as="image" />`),
                    $("body").append(`<style>body::after { content: url(${a.imageUrl}); display: none; }</style>`))
                }
                this.state.nextReviewControlsVisible !== t.nextReviewControlsVisible && (this.state.nextReviewControlsVisible ? window.localStorage.setItem("nextReviewControlsVisible", "true") : window.localStorage.removeItem("nextReviewControlsVisible"))
            }
            initTts() {
                this.isSystemTtsAvailable()
            }
            initSpeaking() {
                if (!this.isPlayingSpeaking())
                    return !1;
                if (window.webkitSpeechRecognition)
                    this.recognition = new webkitSpeechRecognition;
                else {
                    if (!window.SpeechRecongition)
                        return alert("Unable to play speaking on this browser! Sorry about that. Please try the latest Google Chrome.");
                    this.recognition = new SpeechRecongition
                }
                this.recognition.continuous = !0,
                this.recognition.lang = this.props.targetLanguageIso.toLowerCase() + "-" + this.props.targetLanguageIso.toUpperCase(),
                this.recognition.interimResults = !0,
                this.recognition.onresult = e => {
                    const t = e.results[0][0].transcript;
                    if (this.setState({
                        speakingTranscript: t
                    }),
                    e.results[0].isFinal) {
                        this.stopRecordingAndResetRecordBtn();
                        const e = this.getCurrentSentenceAnswers().find((e => t.toLowerCase().match(e.toLowerCase())));
                        !this.state.answered && e && (this.isPlayingTextInput() && this.setState({
                            textInputValue: t
                        }),
                        this.submitAnswer(e))
                    }
                }
                ,
                this.recognition.onerror = e => this.onSpeechRecognitionError(e)
            }
            onSpeechRecognitionError(e) {
                alert("Oh no! There was an error: " + e.error + " " + e.message + " - sorry about that. Speaking is an experimental feature. You may need to refresh the page or update your browser permissions. Please let us know if the issue persists. Speaking works best on the latest version of Chrome on desktop."),
                this.stopRecordingAndResetRecordBtn()
            }
            setupAudio() {
                if (this.hasSetupAudio)
                    return !0;
                this.correctAudio.volume = .25,
                this.incorrectAudio.volume = .25,
                this.hasSetupAudio = !0
            }
            getInitialGameState() {
                return {
                    answered: !1,
                    collectionClozeSentences: [],
                    correct: null,
                    correctlyAnsweredSentenceCount: 0,
                    currentSentenceIndex: 0,
                    discussionModalVisible: !1,
                    elapsedTime: 0,
                    endingInfiniteRound: !1,
                    hasShownTokens: !1,
                    intraRoundAdNextRoundable: !1,
                    intraRoundAdVisible: !1,
                    listeningControlPlayComplete: !1,
                    loading: !0,
                    multipleChoice: !1,
                    numCorrect: 0,
                    numIncorrect: 0,
                    numMastered: 0,
                    numNew: 0,
                    numReview: 0,
                    onboardingNextOptionsVisible: !1,
                    playedNew: {},
                    playedReview: {},
                    points: null,
                    previousAnswer: null,
                    roundHistoryModalVisible: !1,
                    score: 0,
                    sentenceEditorModalVisible: !1,
                    speakingTranscript: "",
                    startedTextInput: !1,
                    textInputChangedAfterAnswering: !1,
                    textInputValue: "",
                    tokensVisible: !1,
                    usedHint: !1
                }
            }
            setupHotkeys() {
                $(window).on("keydown", (e => {
                    if ($(".modal, .selection-popover, .selection-slideout").is(":visible"))
                        return !0;
                    if (this.isRoundComplete() && $("input").is(":focus"))
                        return !0;
                    const {answered: t, gameSettings: n, multipleChoice: a, usedHint: l} = this.state;
                    if (13 === e.which)
                        if (e.ctrlKey)
                            this.isPlayingSpeaking() && (e.preventDefault(),
                            this.startRecording());
                        else if (this.isRoundComplete())
                            this.nextRound();
                        else if (t)
                            this.answerQualityOptionsVisible() ? this.handleAnswerQualityResponse(1) : (e.preventDefault(),
                            this.next());
                        else {
                            if (!(this.isPlayingListening() && !this.state.listeningControlPlayComplete || "on" !== n.sentenceTextInitiallyHidden || this.state.sentenceTextVisible))
                                return this.showSentenceText(),
                                this.justShowedSentenceTextViaEnter = !0,
                                !1;
                            if (this.isPlayingTextInput() || this.isPlayingFullTextInput()) {
                                if (!this.state.textInputValue && !this.state.startedTextInput)
                                    return !1;
                                if (!this.state.textInputValue && "off" === n.enterSubmitsEmpty)
                                    return !1;
                                this.submitAnswer(this.state.textInputValue)
                            }
                        }
                    if ("on" !== n.hotkeys)
                        return !0;
                    if (32 === e.which)
                        if (this.isRoundComplete())
                            e.preventDefault(),
                            this.nextRound();
                        else {
                            if (e.ctrlKey)
                                return e.preventDefault(),
                                this.loopOrPlaySentenceAudio();
                            e.altKey && this.isPlayingSpeaking() ? (e.preventDefault(),
                            this.startRecording()) : !t || this.isPlayingTextInput() || this.isPlayingFullTextInput() ? this.isPlayingListening() && !this.state.listeningControlPlayComplete || "on" !== n.sentenceTextInitiallyHidden || this.state.sentenceTextVisible || (e.preventDefault(),
                            this.showSentenceText(),
                            this.justShowedSentenceTextViaEnter = !0) : (e.preventDefault(),
                            this.answerQualityOptionsVisible() ? this.handleAnswerQualityResponse(1) : this.next())
                        }
                    if (39 === e.which && (this.isRoundComplete() ? (e.preventDefault(),
                    this.nextRound()) : t && !$(this.textInput).is(":focus") && (e.preventDefault(),
                    this.next())),
                    this.multipleChoiceOptions && !t && [49, 50, 51, 52].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.multipleChoiceOptions.clickOptionAtIndex(e.which - 49)),
                    this.multipleChoiceOptions && !t && [97, 98, 99, 100].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.multipleChoiceOptions.clickOptionAtIndex(e.which - 97)),
                    this.nextReviewControlsEnabled() ? (t && this.state.nextReviewControlsVisible && [49, 50, 51].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.onNextReviewControlHotkeyPress(e.which - 49)),
                    t && this.state.nextReviewControlsVisible && [97, 98, 99].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.onNextReviewControlHotkeyPress(e.which - 97))) : (t && this.answerQualityOptionsVisible() && [49, 50, 51].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.handleAnswerQualityResponse(e.which - 49)),
                    t && this.answerQualityOptionsVisible() && [97, 98, 99].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.handleAnswerQualityResponse(e.which - 97))),
                    65 === e.which && e.altKey && t && (e.preventDefault(),
                    this.addCurrentSentenceToCollection()),
                    67 === e.which && e.altKey && t && (e.preventDefault(),
                    this.showManageCollectionModal()),
                    68 === e.which && e.altKey && t && (e.preventDefault(),
                    this.showSentenceEditorModal()),
                    69 === e.which && e.altKey && t && (e.preventDefault(),
                    $(".report-error.btn").click()),
                    70 === e.which && e.altKey && t && (e.preventDefault(),
                    $(".favorite-clozeable").click()),
                    71 === e.which && e.altKey && t && (e.preventDefault(),
                    this.onGrammarBtnClick()),
                    72 === e.which && e.altKey && (!this.isPlayingTextInput() || t || a || l || (e.preventDefault(),
                    this.useTextInputHint())),
                    73 === e.which && e.altKey && t && (e.preventDefault(),
                    this.ignoreModal.show()),
                    75 === e.which && e.altKey && t && (e.preventDefault(),
                    "on" === n.manualMasterResetConfirm ? this.knowItModal.show() : this.onKnowItClick()),
                    77 === e.which && e.altKey && t && (e.preventDefault(),
                    "on" === n.manualMasterResetConfirm ? this.masterModal.show() : this.onMasterClick()),
                    78 === e.which && e.altKey && t && (e.preventDefault(),
                    this.setState({
                        nextReviewControlsVisible: !this.state.nextReviewControlsVisible
                    })),
                    80 === e.which && e.altKey && (!this.isPlayingTextInput() || t || a || (e.preventDefault(),
                    this.setState({
                        multipleChoice: !0
                    }))),
                    82 === e.which && e.altKey && t && (e.preventDefault(),
                    "on" === n.manualMasterResetConfirm ? this.resetModal.show() : this.onResetClick()),
                    83 === e.which && e.altKey && (e.preventDefault(),
                    this.showSentenceSearchModal()),
                    84 === e.which && e.altKey && (e.preventDefault(),
                    this.toggleTranslation()),
                    85 === e.which && e.altKey && t && (e.preventDefault(),
                    this.setState({
                        discussionModalVisible: !this.state.discussionModalVisible
                    })),
                    88 === e.which && e.altKey) {
                        const n = this.getCurrentSentence();
                        e.shiftKey ? t && this.state.showExplanations && (n.explanation || n.explanationJobUrl) && this.setState({
                            explanationModalVisible: !0
                        }) : n && n.imageUrl && (e.preventDefault(),
                        this.state.currentSentenceImageModalVisible ? this.currentSentenceImageModal && this.currentSentenceImageModal.hide() : this.setState({
                            currentSentenceImageModalVisible: !this.state.currentSentenceImageModalVisible
                        }))
                    }
                    89 === e.which && e.altKey && (e.preventDefault(),
                    this.setState({
                        roundHistoryModalVisible: !this.state.roundHistoryModalVisible
                    }))
                }
                )),
                $(window).on("keyup", (e => {
                    27 === e.which && this.state.leveledUpModalVisible && this.setState({
                        leveledUpModalVisible: !1
                    })
                }
                ))
            }
            isPlayingFullTextInput() {
                return this.props.mode === H
            }
            isPlayingMultipleChoice() {
                return this.props.mode === G
            }
            isPlayingTextInput() {
                return this.props.mode === W
            }
            isPlayingListening() {
                return "listening" === this.props.skill
            }
            isPlayingSpeaking() {
                return "speaking" === this.props.skill
            }
            shouldShowIntraRoundAd() {
                if (!this.state.intraRoundAd || this.props.isTeachingCollection)
                    return !1;
                const e = this.getRoundsPlayedCount();
                return !!e && e % 4 === 0
            }
            getRoundsPlayedCount() {
                return parseInt(window.localStorage.getItem("roundsPlayedCount")) || 0
            }
            incrementRoundsPlayedCount() {
                const e = this.getRoundsPlayedCount();
                window.localStorage.setItem("roundsPlayedCount", "" + (e + 1))
            }
            resetRoundsPlayedCount() {
                window.localStorage.removeItem("roundsPlayedCount")
            }
            nextRound() {
                const {intraRoundAdNextRoundable: e, intraRoundAdVisible: t} = this.state;
                return this.shouldShowIntraRoundAd() && !t ? this.setState({
                    intraRoundAdVisible: !0
                }) : !(t && !e) && (this.incrementRoundsPlayedCount(),
                void this.setState(this.getInitialGameState(), ( () => this.loadCollectionClozeSentences())))
            }
            loadMoreCollectionClozeSentences() {
                const {playUrl: e, mode: t, skill: n, scope: a, count: l} = this.props;
                if (this.isRoundComplete() || this.state.endingInfiniteRound)
                    return !1;
                $.ajax({
                    url: e,
                    data: {
                        count: l,
                        explanations: !0,
                        mode: t,
                        scope: a,
                        skill: n
                    }
                }).done((e => {
                    console.log(e);
                    const {collectionClozeSentences: t} = this.state
                      , n = t.reduce(( (e, t) => (e[t.id] = !0,
                    e)), {})
                      , a = e.collectionClozeSentences.filter((e => !n[e.id]));
                    this.setState({
                        loading: !1,
                        collectionClozeSentences: t.concat(a)
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading more sentences. Sorry about that. Please refresh the page to try again and let us know if you see the message again.")
                }
                ))
            }
            loadCollectionClozeSentences() {
                this.setState({
                    loading: !0
                });
                const {count: e, mode: t, playUrl: n, skill: a, scope: l} = this.props
                  , {onboarding: s} = this.state;
                $.ajax({
                    url: n,
                    data: {
                        count: e,
                        explanations: !0,
                        mode: t,
                        onboarding: s,
                        scope: l,
                        skill: a
                    }
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loading: !1,
                        alreadyMasteredNextReview: e.languagePairing.alreadyMasteredNextReview,
                        clozeSentencesUrl: e.languagePairing.clozeSentencesUrl,
                        collectionClozeSentences: e.collectionClozeSentences,
                        collectionClozeSentencesUrl: e.collection.collectionClozeSentencesUrl,
                        collectionClozeSentencesUpsertUrl: e.collection.collectionClozeSentencesUpsertUrl,
                        collectionClozeSentencesIgnoreAllUrl: e.collection.collectionClozeSentencesIgnoreAllUrl,
                        collectionClozeSentencesAnswerUrl: e.collection.collectionClozeSentencesAnswerUrl,
                        collectionClozeSentencesSrsResponseUrl: e.collection.collectionClozeSentencesSrsResponseUrl,
                        collectionName: e.collection.name,
                        collectionTtsAvailable: e.collection.ttsAvailable,
                        collectionsUrl: e.collectionsUrl,
                        currentSentenceTimerStart: (0,
                        o.R4)(),
                        dailyReminderEmail: e.languagePairing.dailyReminderEmail,
                        dailyReminderEmailUrl: e.languagePairing.dailyReminderEmailUrl,
                        gameSettingsUrl: e.languagePairing.gameSettingsUrl,
                        intraRoundAd: e.intraRoundAd,
                        isCollectionEditable: e.collection.isEditable,
                        isPro: e.user.isPro,
                        isSignedIn: e.user.isSignedIn,
                        languagePairingId: e.languagePairing.id,
                        languagePairingLevel: e.languagePairing.level,
                        languagePairingUrl: e.languagePairing.url,
                        maxPlayableToday: e.languagePairing.maxPlayableToday,
                        nextReviewByLevel: e.languagePairing.nextReviewByLevel,
                        nextReviewFuzzEnabled: e.languagePairing.nextReviewFuzzEnabled,
                        numMastered: 0,
                        numNew: 0,
                        numPlayedToday: e.languagePairing.numPlayedToday,
                        numPlaying: 0,
                        numReview: 0,
                        playedNew: {},
                        playedReview: {},
                        reportErrorUrl: e.collection.collectionClozeSentencesErrorUrl,
                        resourceLinksUrl: e.languagePairing.resourceLinksUrl,
                        searchTranslationEntriesUrl: e.languagePairing.searchTranslationEntriesUrl,
                        showExplanations: e.showExplanations,
                        startingNumMastered: e.collection.numMastered,
                        startingNumPlaying: e.collection.numPlaying,
                        startingNumReadyForReview: e.collection.numReadyForReview,
                        tokensEnabled: e.collection.tokensEnabled,
                        tokensUrl: e.collection.tokensUrl,
                        userSelectionTranslationsUrl: e.languagePairing.userSelectionTranslationsUrl,
                        wordBank: e.wordBank
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading sentences. Sorry about that. Please refresh the page to try again and let us know if you see the message again.")
                }
                ))
            }
            isReviewScope() {
                return "ready_for_review" === this.props.scope
            }
            isFavoritedScope() {
                return "favorited" === this.props.scope
            }
            renderPlayingName() {
                let e = "Playing";
                return this.isReviewScope() ? e = "Reviewing" : this.isFavoritedScope() && (e = "Favorites"),
                a.createElement("div", {
                    className: "playing-name"
                }, e, ": ", a.createElement("strong", null, this.props.collectionName))
            }
            renderRoundStats() {
                const {answered: e, currentSentenceIndex: t, collectionClozeSentences: n, correctlyAnsweredSentenceCount: l, numCorrect: s, numIncorrect: r} = this.state
                  , o = l / n.filter((e => !e.wasIncorrect)).length * 100;
                return a.createElement("div", {
                    className: "container-fluid"
                }, a.createElement("div", {
                    className: "row status",
                    ref: e => this.statusBar = e,
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "col-xs-4 text-right"
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "Correct"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-ok"
                }, ":"), " ", a.createElement("span", {
                    className: "num correct"
                }, s)), a.createElement("div", {
                    className: "col-xs-4 text-center"
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "Incorrect"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-remove"
                }, ":"), " ", a.createElement("span", {
                    className: "num incorrect"
                }, r)), a.createElement("div", {
                    className: "col-xs-4 text-left"
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "To go"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-arrow-right"
                }, ":"), " ", a.createElement("span", {
                    className: "num togo"
                }, this.isInfiniteRound() && !this.state.endingInfiniteRound ? "Inf" : n.length - t - (e ? 1 : 0)))), (!this.isInfiniteRound() || this.state.endingInfiniteRound) && a.createElement("div", {
                    className: "row progress round",
                    style: {
                        marginBottom: 0
                    }
                }, a.createElement("div", {
                    "aria-valuemax": "100",
                    "aria-valuemin": "0",
                    "aria-valuenow": o,
                    className: "progress-bar progress-bar-success",
                    role: "progressbar",
                    style: {
                        width: o + "%"
                    }
                })), this.renderPlayingNameBanner(), this.renderSignUpInPromo(), this.renderRoundCompleteBanner())
            }
            renderPlayingNameBanner() {
                if (this.props.isSignedIn || this.props.isTeachingCollection)
                    return a.createElement("div", {
                        className: "row bg-success text-center lead",
                        style: {
                            padding: "4px 0",
                            marginBottom: 0
                        }
                    }, this.renderPlayingName())
            }
            renderSignUpInPromo() {
                return this.props.isSignedIn || this.props.isTeachingCollection ? null : a.createElement("div", {
                    className: "row bg-success text-center lead",
                    style: {
                        padding: "4px 0",
                        marginBottom: 0
                    }
                }, a.createElement("a", {
                    className: "btn btn-sm btn-success joystix",
                    href: "/sign-up"
                }, "Sign up"), a.createElement("span", {
                    style: {
                        margin: "0 8px"
                    }
                }, "or"), a.createElement("a", {
                    className: "btn btn-sm btn-success joystix",
                    href: "/login",
                    style: {
                        marginRight: 8
                    }
                }, "Login"), "to save your progress!")
            }
            renderRoundCompleteBanner() {
                return this.isRoundComplete() ? this.isNoSentences() ? null : a.createElement("div", {
                    className: "row"
                }, a.createElement(O.default, null, a.createElement("div", {
                    className: "round-complete-banner notification notice" + (this.isReviewScope() ? " review" : "")
                }, a.createElement("h1", null, "Round Complete!")))) : null
            }
            renderPoints() {
                return this.state.answered && !this.state.correct ? a.createElement(w.default, null) : a.createElement(A.default, {
                    points: this.state.points
                })
            }
            renderHeader() {
                const {baseLanguageFlagIso: e, targetLanguageFlagIso: t} = this.props
                  , {answered: n, collectionClozeSentences: l, correct: r, currentSentenceIndex: o, lastPlayedDateBeforeAnswering: i, points: c, score: d} = this.state
                  , u = l[o]
                  , m = Math.round(u.level / 4 * 100);
                return a.createElement("div", {
                    className: "stats",
                    style: {
                        display: "flex",
                        flexDirection: "row"
                    }
                }, a.createElement("div", {
                    className: "joystix text-left"
                }, a.createElement("div", {
                    className: "content-wrapper"
                }, a.createElement("div", {
                    className: "languages"
                }, a.createElement(E.default, {
                    flagIso: t,
                    size: 24
                }), " / ", a.createElement(E.default, {
                    flagIso: e,
                    size: 24
                })), a.createElement("div", {
                    className: "score total"
                }, a.createElement("span", {
                    className: "text"
                }, "Score:"), " ", a.createElement("span", {
                    className: "value"
                }, d)))), a.createElement("div", {
                    style: {
                        flex: 1
                    }
                }, this.renderPoints()), a.createElement("div", {
                    className: "text-right"
                }, a.createElement("div", {
                    className: "content-wrapper"
                }, a.createElement("div", {
                    className: "level",
                    style: {
                        position: "relative"
                    }
                }, a.createElement("div", {
                    style: {
                        color: "#aaa",
                        fontSize: "1.5em"
                    }
                }, a.createElement(C.default, {
                    name: "ok-circle",
                    style: {
                        color: u.level >= 1 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                }), a.createElement(C.default, {
                    name: "ok-circle",
                    style: {
                        color: u.level >= 2 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                }), a.createElement(C.default, {
                    name: "ok-circle",
                    style: {
                        color: u.level >= 3 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                }), a.createElement(C.default, {
                    name: "ok-circle",
                    style: {
                        color: u.level >= 4 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                })), a.createElement("div", {
                    className: "joystix percent-mastered",
                    style: {
                        fontSize: "0.9em"
                    }
                }, a.createElement("span", {
                    className: "value"
                }, m, "%"), " Mastered", a.createElement("span", {
                    "data-placement": "bottom",
                    "data-title": "Get a sentence correct 4x in a row to get it to 100% Mastered",
                    "data-toggle": "tooltip"
                }, a.createElement(C.default, {
                    name: "question-sign",
                    style: {
                        marginLeft: 5
                    }
                }))), n && !!u.nextReview && a.createElement("div", {
                    className: "next-review",
                    "data-placement": "bottom",
                    "data-html": "true",
                    "data-title": `<span style="display: block; text-align: left"><span style="white-space: nowrap">Num played: ${u.numPlayed}</span><br /><span style="white-space: nowrap">Num correct: ${u.numPlayed - u.numIncorrect}</span><br />${i ? `<span style="white-space: pre">Last seen: ${s()().diff(i, "days")} days ago</span>` : ""}</span>`,
                    "data-toggle": "tooltip"
                }, a.createElement("small", null, "Review: ", u.nextReview), a.createElement(C.default, {
                    name: "stats",
                    style: {
                        marginLeft: 5
                    }
                }))))))
            }
            getCurrentSentence() {
                const {collectionClozeSentences: e, currentSentenceIndex: t} = this.state;
                return e[t]
            }
            getCurrentSentenceCloze() {
                return this.getCurrentSentence().text.split("{{")[1].split("}}")[0]
            }
            ignoreAll(e) {
                this.setState({
                    updating: !0
                });
                const t = this.getCurrentSentence();
                $.ajax({
                    url: this.state.collectionClozeSentencesIgnoreAllUrl,
                    method: "put",
                    data: {
                        collection_cloze_sentence_id: t.id
                    }
                }).done((n => {
                    const a = this.getUpdatedCollectionClozeSentences(t.id, {
                        ignored: !0
                    });
                    this.setState({
                        collectionClozeSentences: a,
                        updating: !1
                    }, e)
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }, e),
                    alert("Oh no! There was an error updating the sentences. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            updateCurrentSentence(e, t, n) {
                const a = this.getCurrentSentence();
                this.updateSentence({
                    sentence: a,
                    attr: e,
                    value: t,
                    callback: n
                })
            }
            updateSentence({attr: e=null, callback: t, sentence: n, updates: a=null, value: l=null}) {
                this.setState({
                    updating: !0
                });
                let s = {
                    id: n.id
                };
                a ? s = Object.assign(a, s) : s[e] = l,
                $.ajax({
                    url: n.collectionClozeSentencesUpsertUrl || this.state.collectionClozeSentencesUpsertUrl,
                    method: "post",
                    dataType: "json",
                    contentType: "application/json",
                    data: JSON.stringify({
                        updates: [s]
                    })
                }).then((e => $.ajax({
                    data: {
                        ids: e.ids
                    },
                    method: "post",
                    url: e.collectionClozeSentencesBatchUrl
                }))).done((e => {
                    const n = e.collectionClozeSentences[0];
                    this.setState({
                        collectionClozeSentences: this.state.collectionClozeSentences.map((e => n.id === e.id ? Object.assign(e, n) : e)),
                        updating: !1
                    }, t)
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }, t),
                    alert("Oh no! There was an error updating. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderFavoriteToggle() {
                const {isSignedIn: e} = this.props;
                if (!this.state.isPro)
                    return a.createElement("button", {
                        className: "btn btn-default favorite-clozeable control",
                        disabled: !e,
                        title: "Favorite sentence (alt+f)",
                        "data-toggle": "modal",
                        "data-target": "#favorite-pro-promo-modal"
                    }, a.createElement("span", {
                        className: "glyphicon glyphicon-star-empty not-favorited"
                    }));
                const t = this.getCurrentSentence();
                return a.createElement("button", {
                    className: "btn btn-default favorite-clozeable control" + (t.favorited ? " favorited active" : ""),
                    title: (t.favorited ? "Unf" : "F") + "avorite sentence (alt+f)",
                    onClick: () => this.updateCurrentSentence("favorited", !t.favorited)
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-star" + (t.favorited ? " favorited" : "-empty not-favorited")
                }))
            }
            toggleTranslation() {
                this.setState({
                    translationVisible: !this.state.translationVisible
                })
            }
            renderTranslationsToggle() {
                const {gameSettings: e, answered: t} = this.state;
                if ("visible" === e.translations || "show-after" === e.translations && t)
                    return null;
                return a.createElement("button", {
                    className: "btn btn-default toggle-translation control",
                    onClick: () => this.toggleTranslation(),
                    title: "Toggle translation (alt+t)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-transfer"
                }))
            }
            renderTransliterationToggle() {
                const {gameSettings: e} = this.state;
                return "on" === e.transliteration ? null : this.getCurrentSentence().transliteration ? a.createElement("button", {
                    className: "btn btn-default toggle-transliteration control",
                    onClick: () => this.setState({
                        transliterationVisible: !this.state.transliterationVisible
                    }),
                    title: "Toggle transliteration"
                }, "T") : null
            }
            renderPronunciationToggle() {
                const {gameSettings: e} = this.state;
                return "on" === e.pronunciation ? null : this.getCurrentSentence().pronunciation || this.getCurrentSentence().transliteration ? a.createElement("button", {
                    className: "btn btn-default toggle-pronunciation control",
                    onClick: () => this.setState({
                        pronunciationVisible: !this.state.pronunciationVisible
                    }),
                    title: "Toggle pronunciation"
                }, "P") : null
            }
            useTextInputHint() {
                const e = this.state.textInputValue
                  , t = this.getCurrentSentenceCloze();
                let n = 0;
                for (; e[n] && t[n] && e[n].toLowerCase() === t[n].toLowerCase(); )
                    n += 1;
                this.setState({
                    textInputValue: t.substring(0, n + 1),
                    usedHint: !0
                }, ( () => this.textInput.focus()))
            }
            onHintBtnClick(e) {
                $(e.currentTarget).tooltip("destroy"),
                this.useTextInputHint()
            }
            renderTextInputHintBtn() {
                return this.isPlayingMultipleChoice() || this.state.multipleChoice || this.state.usedHint ? null : a.createElement("button", {
                    className: "btn btn-default text-input-hint",
                    onClick: e => this.onHintBtnClick(e),
                    title: "Single letter hint - you only get 1 per sentence and score half the points! alt+h"
                }, a.createElement(C.default, {
                    name: "question-sign"
                }))
            }
            renderTextInputToMultipleChoiceBtn() {
                return this.isPlayingMultipleChoice() || this.state.multipleChoice ? null : a.createElement("button", {
                    className: "btn btn-default switch-to-multiple-choice",
                    onClick: e => this.onSwitchToMultipleChoiceBtnClick(e),
                    title: "Switch sentence to multiple choice alt+p"
                }, a.createElement(C.default, {
                    name: "th-large"
                }))
            }
            onSwitchToMultipleChoiceBtnClick(e) {
                $(e.currentTarget).tooltip("destroy"),
                this.setState({
                    multipleChoice: !0
                }, ( () => this.textInput.focus()))
            }
            playSentenceRecording({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                this.sentenceAudio && this.sentenceAudio.pause();
                const {gameSettings: s} = this.state;
                return this.sentenceAudio = new Audio(a.audioRecordingUrl),
                this.sentenceAudio.playbackRate = l || parseFloat(s.textToSpeechSpeed) || 1,
                n && this.sentenceAudio.addEventListener("play", n),
                e && this.sentenceAudio.addEventListener("ended", e),
                t && this.sentenceAudio.addEventListener("error", t),
                this.sentenceAudio.play().catch((e => t && t(e))),
                this.sentenceAudio
            }
            playSentenceTts({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                this.sentenceAudio && this.sentenceAudio.pause();
                const {gameSettings: s} = this.state;
                return this.sentenceAudio = new Audio(a.ttsAudioUrl),
                this.sentenceAudio.playbackRate = l || parseFloat(s.textToSpeechSpeed) || 1,
                n && this.sentenceAudio.addEventListener("play", n),
                e && this.sentenceAudio.addEventListener("ended", e),
                t && this.sentenceAudio.addEventListener("error", t),
                this.sentenceAudio.play().catch(( () => t && t())),
                this.sentenceAudio
            }
            getSystemTtsVoices() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.getSystemTtsVoices(e, t)
            }
            playSystemTts({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                const {targetLanguageIso: s, targetLanguageCode: r} = this.props
                  , {gameSettings: o} = this.state
                  , i = this.getSystemTtsVoices();
                let c = i.filter((e => e.name === o.textToSpeechVoice))[0];
                c || (c = i[Math.floor(Math.random() * i.length)]);
                const d = l || parseFloat(o.textToSpeechSpeed) || 1
                  , u = new SpeechSynthesisUtterance(a.text.replace(/\{\{|\}\}/g, ""));
                return u.voice = c,
                u.lang = c.lang,
                u.rate = window.clozemaster.isIOS8() ? .4 * d : d,
                u.onstart = n,
                u.onend = e,
                u.onerror = t,
                window.speechSynthesis.cancel(),
                setTimeout(( () => window.speechSynthesis.speak(u)), 50),
                u
            }
            shouldLoopTextToSpeech() {
                const {answered: e, gameSettings: t} = this.state;
                return e && "on" === t.textToSpeechLooping
            }
            loopOrPlaySentenceAudio() {
                this.shouldLoopTextToSpeech() ? this.loopSentenceAudio() : this.playSentenceAudio()
            }
            stopSentenceAudio() {
                this.sentenceAudio && this.sentenceAudio.pause(),
                window.speechSynthesis.cancel()
            }
            loopSentenceAudio({looping: e=!1}={}) {
                const {audioLoopCount: t, isAudioLooping: n} = this.state;
                return n && !e ? (this.stopSentenceAudio(),
                this.setState({
                    isAudioLooping: !1
                }),
                !1) : !(!n && e) && void this.playSentenceAudio({
                    onPlay: () => {
                        this.setState({
                            isAudioLooping: !0
                        })
                    }
                    ,
                    onEnded: () => {
                        this.setState({
                            audioLoopCount: t + 1
                        }),
                        this.state.isAudioLooping && this.loopSentenceAudio({
                            looping: !0
                        })
                    }
                    ,
                    onError: () => {
                        this.setState({
                            isAudioLooping: !1
                        })
                    }
                })
            }
            playSentenceAudio({loop: e=!1, onEnded: t=null, onError: n=null, onPlay: a=null, sentence: l=this.getCurrentSentence(), speed: s=null}={}) {
                const {gameSettings: r} = this.state
                  , o = {
                    onEnded: t,
                    onError: n,
                    onPlay: a,
                    sentence: l,
                    speed: s
                };
                return l.audioRecordingUrl && "on" === this.state.gameSettings.audioRecordings ? this.playSentenceRecording(o) : !l.ttsAudioUrl || "on" !== this.state.gameSettings.clozemasterTextToSpeech && this.isSystemTtsAvailable() ? this.playSystemTts(o) : this.playSentenceTts(o)
            }
            isTtsAvailable(e=this.getCurrentSentence()) {
                return e.ttsAudioUrl || this.isSystemTtsAvailable()
            }
            isSystemTtsAvailable() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.systemTtsAvailable(e, t)
            }
            renderTtsBtn() {
                if (!this.isTtsAvailable())
                    return null;
                const {audioLoopCount: e, isAudioLooping: t} = this.state;
                return a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "Text-to-speech controls",
                    style: {
                        marginRight: 4
                    }
                }, a.createElement("button", {
                    className: "btn btn-default control " + (t ? "active" : ""),
                    title: "Play sentence audio (ctl+space)",
                    style: {
                        marginRight: 0
                    },
                    onClick: () => this.loopOrPlaySentenceAudio()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-volume-up"
                }), this.shouldLoopTextToSpeech() && a.createElement("span", {
                    className: "badge tw-ml-5"
                }, e)), a.createElement("button", {
                    className: "btn btn-default control",
                    title: "Play sentence audio half speed",
                    style: {
                        margin: "0 0 0 -1px"
                    },
                    onClick: () => this.playSentenceAudio({
                        speed: .5
                    })
                }, "\xbd"))
            }
            renderAudioHintBtn() {
                return null
            }
            renderManualResetBtn() {
                const e = this.getCurrentSentence()
                  , {gameSettings: t} = this.state
                  , {manualMasterResetConfirm: n} = t
                  , {isSignedIn: l} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default manual-reset",
                    "data-toggle": "on" === n ? "modal" : null,
                    "data-target": "on" === n ? "#reset-modal" : null,
                    disabled: !l || !e.level,
                    onClick: "on" === n ? null : () => this.onResetClick(),
                    title: "Reset to 0% Mastered (alt+r)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-remove"
                }))
            }
            renderManualMasterBtn() {
                const e = this.getCurrentSentence()
                  , {gameSettings: t} = this.state
                  , {manualMasterResetConfirm: n} = t
                  , {isSignedIn: l} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default manual-master",
                    "data-toggle": "on" === n ? "modal" : null,
                    "data-target": "on" === n ? "#master-modal" : null,
                    disabled: !l || 4 === e.level,
                    onClick: "on" === n ? null : () => this.onMasterClick(),
                    title: "Set this sentence to 100% Mastered (alt+m)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-ok"
                }))
            }
            renderKnowItBtn() {
                const e = this.getCurrentSentence()
                  , {gameSettings: t} = this.state
                  , {manualMasterResetConfirm: n} = t
                  , {isSignedIn: l} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default know-it",
                    disabled: !l || !!(e.nextReview || "").match(/2100/),
                    "data-toggle": "on" === n ? "modal" : null,
                    "data-target": "on" === n ? "#know-it-modal" : null,
                    onClick: "on" === n ? null : () => this.onKnowItClick(),
                    title: "Mark this sentence as known - 100% Mastered and next review year 2100 (alt+k)"
                }, "\ud83e\udde0")
            }
            renderImageBtn() {
                if (!this.getCurrentSentence().imageUrl)
                    return null;
                const {answered: e, gameSettings: t} = this.state;
                return e || "always" === t.imageToggle ? a.createElement("button", {
                    className: "btn btn-default toggle-image control",
                    onClick: () => this.setState({
                        currentSentenceImageModalVisible: !0
                    }),
                    title: "Show image (alt+x)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-picture"
                })) : null
            }
            nextReviewControlsEnabled() {
                return this.props.nextReviewControlsEnabled || /[?&]nextReviewControlsEnabled=true/.test(location.search)
            }
            renderNextReviewToggle() {
                const {correct: e, nextReviewControlsVisible: t} = this.state;
                return e ? a.createElement("button", {
                    className: "btn btn-default toggle-next-review-controls " + (t ? "active" : ""),
                    onClick: () => this.setState({
                        nextReviewControlsVisible: !t
                    })
                }, a.createElement(C.default, {
                    name: "time"
                })) : null
            }
            getNextReviewDays(e=1) {
                const {nextReviewByLevel: t} = this.state
                  , n = this.getCurrentSentence()
                  , {level: a} = n;
                return Math.floor(t[a] * e)
            }
            getNextReviewDate(e=1) {
                return s()().add(this.getNextReviewDays(e), "days").format("YYYY-MM-DD")
            }
            onNextReviewControlHardSelected() {
                this.updateCurrentSentence("next_review", this.getNextReviewDate(.5)),
                this.next()
            }
            onNextReviewControlDefaultSelected() {
                this.next()
            }
            onNextReviewControlEasySelected() {
                this.updateCurrentSentence("next_review", this.getNextReviewDate(2)),
                this.next()
            }
            onNextReviewControlHotkeyPress(e) {
                switch (e) {
                case 0:
                    this.onNextReviewControlHardSelected();
                    break;
                case 2:
                    this.onNextReviewControlEasySelected();
                    break;
                default:
                    this.onNextReviewControlDefaultSelected()
                }
            }
            renderNextReviewControls() {
                const {correct: e, nextReviewByLevel: t, nextReviewControlsVisible: n} = this.state;
                if (!this.nextReviewControlsEnabled() || !n)
                    return null;
                const l = this.getCurrentSentence()
                  , {level: s} = l
                  , r = ({days: e, className: t="", hotkey: n=null, label: l, mastered: s=null, onClick: r}) => a.createElement("button", {
                    className: `btn btn-success-outline tw-flex-1 ${t}`,
                    disabled: this.state.updating,
                    onClick: r
                }, a.createElement("span", {
                    className: "joystix tw-block"
                }, l), a.createElement("span", {
                    className: "tw-block"
                }, e, "Never" === e ? "" : " day" + (1 === e ? "" : "s")), !!s && a.createElement("span", {
                    className: "joystix tw-text-base"
                }, s, "% Mastered"));
                return a.createElement("div", {
                    style: {
                        margin: "0 auto",
                        maxWidth: 600
                    }
                }, a.createElement("div", {
                    className: "tw-mt-4 text-center"
                }, a.createElement("strong", null, "Next review:")), a.createElement("div", {
                    className: "tw-mt-2 tw-flex tw-flex-row"
                }, r({
                    days: this.getNextReviewDays(.5),
                    hotkey: "1",
                    label: "Hard",
                    onClick: () => this.onNextReviewControlHardSelected()
                }), r({
                    days: this.getNextReviewDays(),
                    hotkey: "2",
                    label: "Normal",
                    onClick: () => this.onNextReviewControlDefaultSelected()
                }), r({
                    days: this.getNextReviewDays(2),
                    hotkey: "3",
                    label: "Easy",
                    onClick: () => this.onNextReviewControlEasySelected()
                })), a.createElement("div", {
                    className: "tw-mt-4 tw-flex tw-flex-row"
                }, r({
                    days: 0,
                    hotkey: "4",
                    label: "Reset",
                    mastered: "0",
                    onClick: () => {
                        this.updateCurrentSentence("level", 0),
                        this.next()
                    }
                }), 4 !== s && r({
                    days: t[4],
                    hotkey: "5",
                    label: "Mastered",
                    mastered: "100",
                    onClick: () => {
                        this.updateCurrentSentence("level", 4),
                        this.next()
                    }
                }), r({
                    days: "Never",
                    hotkey: "6",
                    label: "Known",
                    mastered: "100",
                    onClick: () => {
                        this.updateSentence({
                            sentence: l,
                            updates: {
                                level: 4,
                                next_review: "2100-01-01"
                            }
                        }),
                        this.next()
                    }
                })))
            }
            renderCurrentSentenceControls() {
                const {answered: e, gameSettings: t, nextReviewControlsVisible: n} = this.state;
                if (!e)
                    return a.createElement("div", {
                        className: "controls"
                    }, this.renderAudioHintBtn(), this.renderTranslationsToggle(), this.renderTextInputToMultipleChoiceBtn(), this.renderTextInputHintBtn(), this.renderImageBtn());
                const {isSignedIn: l} = this.props
                  , s = this.getCurrentSentence()
                  , r = a.createElement(a.Fragment, null, this.renderTtsBtn(), this.renderImageBtn(), this.renderTranslationsToggle(), this.renderPronunciationToggle(), this.renderTransliterationToggle());
                let o = a.createElement(a.Fragment, null, this.renderKnowItBtn(), this.renderManualMasterBtn(), this.renderManualResetBtn());
                return this.nextReviewControlsEnabled() && (o = this.renderNextReviewToggle()),
                a.createElement("div", {
                    className: "controls"
                }, r, a.createElement("span", {
                    className: "signed-in-controls"
                }, this.renderFavoriteToggle(), o, a.createElement("button", {
                    className: "btn btn-default ignore control" + (s.ignored ? " active" : ""),
                    disabled: !l,
                    title: (s.ignored ? "Uni" : "I") + "gnore sentence (alt+i)",
                    "data-toggle": "modal",
                    "data-target": "#ignore-modal",
                    style: {
                        color: "unset"
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-ban-circle"
                })), this.renderGrammarBtn(), a.createElement("button", {
                    className: "btn btn-default control",
                    disabled: !l,
                    id: "discussion-modal-btn",
                    title: "Discuss sentence (alt+u)",
                    onClick: () => this.setState({
                        discussionModalVisible: !0
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-comment"
                }), !!s.commentsCount && a.createElement("span", {
                    className: "badge comment-count",
                    style: {
                        marginLeft: 4
                    }
                }, a.createElement("span", {
                    className: "value"
                }, s.commentsCount))), a.createElement("button", {
                    className: "btn btn-default control edit",
                    disabled: !l,
                    title: "Edit sentence (alt+d)",
                    onClick: () => this.showSentenceEditorModal()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-pencil"
                })), a.createElement("button", {
                    className: "btn btn-default control add-to-collection",
                    disabled: !l,
                    title: "Add to collection (alt+a)",
                    onClick: () => this.addCurrentSentenceToCollection()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }))), this.renderNextReviewControls())
            }
            renderGrammarBtn() {
                const e = this.getCurrentSentence()
                  , {tokensEnabled: t, tokensVisible: n} = this.state
                  , {isSignedIn: l} = this.props;
                if (l && t && e.tokensCount)
                    return a.createElement("button", {
                        className: "btn btn-default control grammar",
                        title: "Grammar (alt+g)",
                        onClick: this.onGrammarBtnClick.bind(this)
                    }, a.createElement(C.default, {
                        name: n ? "chevron-up" : "chevron-down"
                    }))
            }
            onGrammarBtnClick() {
                const {hasShownTokens: e, tokensVisible: t} = this.state;
                this.setState({
                    hasShownTokens: e || t,
                    tokensVisible: !t
                })
            }
            showSentenceEditorModal() {
                this.setState({
                    sentenceEditorModalVisible: !0
                })
            }
            onTextInputBeforeInput(e) {
                const {answered: t, gameSettings: n} = this.state;
                if ("on" === n.hotkeys && t && e.altKey && [65, 67, 68, 69, 70, 73, 77, 82, 85].indexOf(e.which) >= 0)
                    return e.preventDefault(),
                    !0
            }
            onTextInputKeyDown(e) {
                const {answered: t, gameSettings: n} = this.state;
                if (t && "on" === n.keyDownClearsTextInputAfterAnswering && !this.afterAnswerKeyDownTriggered) {
                    if (13 === e.which)
                        return !0;
                    this.afterAnswerKeyDownTriggered = !0,
                    this.setState({
                        textInputValue: ""
                    })
                }
                this.handleAccentsOnKeyDown(e)
            }
            onTextInputKeyUp(e) {
                if (this.justShowedSentenceTextViaEnter)
                    return this.justShowedSentenceTextViaEnter = !1,
                    !1;
                this.state.startedTextInput || this.setState({
                    startedTextInput: !0
                }),
                this.handleAccentsOnKeyUp(e)
            }
            onTextInputChange(e) {
                this.setState({
                    textInputChangedAfterAnswering: this.state.answered,
                    textInputValue: e.target.value
                })
            }
            handleAccentsOnKeyDown(e) {
                if (this.props.test && 0 === e.which)
                    return e.preventDefault(),
                    !1;
                if ("on" !== this.state.gameSettings.accentShortcuts)
                    return null;
                const t = this.textInput.selectionStart
                  , n = String.fromCharCode(e.which)
                  , a = (o.ZJ[this.props.targetLanguageIso] || {})[n.toUpperCase()]
                  , l = this.state.accentDownCount || 0;
                if (!e.altKey || !a)
                    return null;
                e.preventDefault(),
                l || (this.accentingText = this.state.textInputValue);
                let s = a[l % a.length];
                e.shiftKey && (s = s.toUpperCase());
                const r = this.accentingText;
                this.setState({
                    accentDownCount: (l || 0) + 1,
                    textInputValue: r.substring(0, t) + s + r.substring(t)
                }, ( () => {
                    this.textInput.selectionStart = t,
                    this.textInput.selectionEnd = t + 1
                }
                ))
            }
            handleAccentsOnKeyUp(e) {
                if (this.props.test && 0 === e.which)
                    return e.preventDefault(),
                    !1;
                if ("on" !== this.state.gameSettings.accentShortcuts)
                    return null;
                if (18 === e.which && this.state.accentDownCount > 0) {
                    const e = this.textInput.selectionStart;
                    this.setState({
                        accentDownCount: 0
                    }),
                    this.textInput.selectionStart = e + 1,
                    this.textInput.selectionEnd = e + 1
                }
            }
            getCurrentSentenceAnswers() {
                const e = this.getCurrentSentence();
                return [this.getCurrentSentenceCloze()].concat(e.alternativeAnswers || [])
            }
            isTextInputCorrectSoFar() {
                const e = this.replaceAccents((this.state.textInputValue || "").toLowerCase());
                return !!this.getCurrentSentenceAnswers().find((t => 0 === this.replaceAccents(t.toLowerCase()).indexOf(e)))
            }
            replaceAccents(e) {
                return "ru" === this.props.targetLanguageIso ? e.replace(/\u0451/g, "\u0435").replace(/\u0401/g, "\u0415") : e
            }
            onAddToCollectionClick() {
                this.setState({
                    addSentenceToCollectionModalVisible: !0,
                    selectionPopoverId: null
                }, ( () => this.clearSelection()))
            }
            onSearchCollectionClick() {
                this.showManageCollectionModal()
            }
            showManageCollectionModal() {
                this.setState({
                    manageCollectionModalVisible: !0,
                    selectionPopoverId: null
                })
            }
            onSearchSentencesClick() {
                this.showSentenceSearchModal()
            }
            showSentenceSearchModal() {
                const {answered: e} = this.state;
                if (!e)
                    return null;
                this.setState({
                    clozeSentenceSearchModalVisible: !0,
                    selectionPopoverId: null
                })
            }
            getSelectionPopoverProps() {
                const e = this.getCurrentSentence();
                return {
                    baseLanguageIso: this.props.baseLanguageIso,
                    baseLanguageCode: this.props.baseLanguageCode,
                    gameSettings: this.state.gameSettings,
                    gameSettingsUrl: this.state.gameSettingsUrl,
                    isPro: this.state.isPro,
                    isSearchCollectionAvailable: !!this.props.collectionId,
                    onClose: () => this.onSelectionPopoverClose(),
                    onAddToCollectionClick: () => this.onAddToCollectionClick(),
                    onSearchCollectionClick: () => this.onSearchCollectionClick(),
                    onSearchSentencesClick: () => this.onSearchSentencesClick(),
                    openResourceLinksEditor: () => this.openResourceLinksEditor(),
                    searchTranslationEntriesUrl: this.state.searchTranslationEntriesUrl,
                    targetLanguageCode: this.props.targetLanguageCode,
                    targetLanguageEnglishName: this.props.targetLanguageEnglishName,
                    targetLanguageIso: this.props.targetLanguageIso,
                    tokenizeableId: e.id,
                    tokenizeableType: "CollectionClozeSentence",
                    userSelectionTranslationsUrl: this.state.userSelectionTranslationsUrl
                }
            }
            openResourceLinksEditor() {
                this.onSelectionPopoverClose(),
                this.setState({
                    resourceLinksEditorVisible: !0
                })
            }
            renderCloze() {
                const {mode: e} = this.props
                  , {answered: t, gameSettings: n, textInputValue: l} = this.state
                  , s = this.getCurrentSentence()
                  , r = this.getCurrentSentenceCloze();
                return this.isPlayingTextInput() ? a.createElement("input", {
                    autoCapitalize: "off",
                    autoComplete: "off",
                    autoCorrect: "off",
                    className: "input " + this.getTextInputColorClassName(),
                    name: "text_input_value",
                    onChange: e => this.onTextInputChange(e),
                    onKeyDown: e => this.onTextInputKeyDown(e),
                    onKeyUp: e => this.onTextInputKeyUp(e),
                    ref: e => {
                        this.textInput = e
                    }
                    ,
                    spellCheck: "false",
                    style: t || "on" === n.fitTextInputWidth ? {
                        width: this.getAnswerWidth()
                    } : {
                        width: $(window).width() < 1024 ? 140 : 200
                    },
                    type: "text",
                    value: l
                }) : t ? a.createElement(B.default, Object.assign({}, this.getSelectionPopoverProps(), {
                    selection: r,
                    visible: "cloze" === this.state.selectionPopoverId
                }), a.createElement("strong", {
                    className: "cloze",
                    role: "button",
                    onClick: e => {
                        this.setState({
                            selectionPopoverId: "cloze" === this.state.selectionPopoverId ? null : "cloze",
                            selectedSentenceClozeStr: s.text,
                            selectedSentenceText: r
                        })
                    }
                }, a.createElement("u", null, r))) : a.createElement("span", null, "__________")
            }
            getTextInputColorClassName() {
                const {answered: e, correct: t, gameSettings: n, textInputChangedAfterAnswering: a, textInputValue: l} = this.state;
                return e && !a ? t ? "correct" : "" : (e || "on" === n.typingColorHint) && l && (this.isTextInputCorrectSoFar() ? "correct" : "incorrect")
            }
            getAnswerWidth() {
                const e = this.getCurrentSentenceCloze();
                $('<span id="width">').text(e).appendTo(".stage");
                const t = $("#width").width() + 10;
                return $("#width").remove(),
                t
            }
            onWordClick(e, t, n) {
                const a = this.getCurrentSentencePlainText();
                this.setState({
                    selectedSentenceClozeStr: a.substring(0, n) + a.substring(n).replace(e, "{{" + e + "}}"),
                    selectedSentenceText: e,
                    selectionPopoverId: this.state.selectionPopoverId === t ? null : t
                })
            }
            renderWord(e, t, n) {
                return a.createElement(B.default, Object.assign({}, this.getSelectionPopoverProps(), {
                    key: t,
                    selection: e,
                    visible: this.state.selectionPopoverId === t
                }), a.createElement("span", {
                    className: "word",
                    role: "button",
                    onClick: a => this.onWordClick(e, t, n)
                }, e))
            }
            wordify({text: e, idPrefix: t}) {
                const n = /[^\s.,;\?!]+/g;
                let a = 0;
                return e.replace(n, "#!#$&#!#").split(/#!#/g).map(( (e, l) => {
                    const s = e.match(n) ? this.renderWord(e, (t || "") + l, a) : e;
                    return a += e.length,
                    s
                }
                ))
            }
            getCurrentSentencePlainText() {
                return this.getSentencePlainText(this.getCurrentSentence().text)
            }
            getSentencePlainText(e) {
                return e.replace(/{{|}}/g, "")
            }
            clearSelection() {
                window.getSelection ? window.getSelection().empty ? window.getSelection().empty() : window.getSelection().removeAllRanges && window.getSelection().removeAllRanges() : document.selection && document.selection.empty()
            }
            onSelectionPopoverClose() {
                this.clearSelection(),
                this.setState({
                    selectionPopoverId: null,
                    selectedSentenceClozeStr: null,
                    selectedSentenceText: null
                })
            }
            handleSelectionOnMouseUp(e) {
                if ($(e.target).parents(".selection-popover, .selection-slideout").length)
                    return !0;
                if ($(e.target).parents(".modal").length)
                    return !0;
                const t = window.getSelection();
                let n = t.toString();
                const {answered: a} = this.state;
                if (!n.length && this.textInput && $(this.textInput).is(":focus") && (n += this.textInput.value.substring(this.textInput.selectionStart, this.textInput.selectionEnd)),
                !n.length || !a)
                    return !0;
                const l = t.getRangeAt(0)
                  , s = l.commonAncestorContainer.parentNode.cloneNode(!1);
                s.appendChild(l.cloneContents());
                const r = s.innerHTML
                  , o = $("<span>" + r + "</span>");
                if (o.find(".input").length && o.find(".pre, .post").length && (o.find(".input").replaceWith(this.state.textInputValue),
                n = o.text().replace(/\n/g, " ").replace(/\s+/g, " ").replace(/^\s+|\s+$/g, "")),
                !this.getCurrentSentencePlainText().match(n))
                    return !0;
                e.preventDefault(),
                e.stopPropagation(),
                setTimeout(( () => {
                    this.setState({
                        selectionPopoverId: "sentence",
                        selectedSentenceClozeStr: this.getSelectionClozeStr(t),
                        selectedSentenceText: n
                    })
                }
                ), 50)
            }
            getSelectionClozeStr(e) {
                let t = e.anchorOffset
                  , n = e.focusOffset
                  , a = e.anchorNode
                  , l = e.focusNode;
                t > n && (t = n,
                n = e.anchorOffset,
                a = l,
                l = e.anchorNode);
                const s = e => {
                    if ("#text" === e.nodeName)
                        return e === a && e === l ? e.textContent.substring(0, t) + "{{" + e.textContent.substring(t, n) + "}}" + e.textContent.substring(n) : e === a ? e.textContent.substring(0, t) + "{{" + e.textContent.substring(t) : e === l ? e.textContent.substring(0, n) + "}}" + e.textContent.substring(n) : e.textContent;
                    if ("text_input_value" === e.name)
                        return e === a && e === l ? e.value.substring(0, t) + "{{" + e.value.substring(t, n) + "}}" + e.value.substring(n) : e === a ? e.value.substring(0, t) + "{{" + e.value.substring(t) : e === l ? e.value.substring(0, n) + "}}" + e.value.substring(n) : e.value;
                    let r = "";
                    for (let t = 0, n = e.childNodes.length; t < n; t++)
                        r += s(e.childNodes[t]);
                    return r
                }
                ;
                return s($(".sentence")[0])
            }
            getCurrentSentenceParts() {
                let e = this.getCurrentSentence().text.split("{{");
                const t = e[0];
                return e = e[1].split("}}"),
                {
                    preClozeStr: t,
                    cloze: e[0],
                    postClozeStr: e[1]
                }
            }
            onTokenClick({cloze: e, text: t}) {
                const n = this.getCurrentSentence();
                this.setState({
                    selectedSentenceClozeStr: n.text.replace(e || t, "{{" + (e || t) + "}}"),
                    selectedSentenceText: t,
                    selectionPopoverId: "sentence"
                })
            }
            renderTokens() {
                const {hasShownTokens: e, isPro: t, tokensUrl: n, tokensVisible: l} = this.state
                  , {targetLanguageCode: s, targetLanguageIso: r} = this.props;
                if (!l)
                    return null;
                if (!t && e)
                    return a.createElement(O.default, null, a.createElement("div", {
                        className: "alert alert-success",
                        style: {
                            maxWidth: 600,
                            margin: "10px auto 10px",
                            padding: "20px 10px 20px"
                        }
                    }, a.createElement("p", {
                        style: {
                            fontSize: "1.5em",
                            fontWeight: "bold",
                            marginBottom: 10
                        }
                    }, "Get full access to sentence grammar with Clozemaster Pro - subscribe today and get fluent faster!"), a.createElement("p", null, a.createElement("a", {
                        className: "btn btn-success btn-lg joystix",
                        href: "/pro"
                    }, "Get Pro!"))));
                const o = this.getCurrentSentence();
                return a.createElement(O.default, null, a.createElement(_.default, {
                    onClick: this.onTokenClick.bind(this),
                    targetLanguageCode: s,
                    targetLanguageIso: r,
                    tokenizeableId: o.id,
                    tokenizeableType: "CollectionClozeSentence",
                    url: n || o.tokensUrl
                }))
            }
            renderCurrentSentenceFullTextInput() {
                const {baseLanguageRtl: e, targetLanguageRtl: t} = this.props
                  , n = this.getCurrentSentence();
                let {preClozeStr: l, cloze: s, postClozeStr: o} = this.getCurrentSentenceParts();
                const i = l + s + o
                  , {answered: c, gameSettings: d, textInputValue: u} = this.state
                  , m = i.split("").map(( (e, t) => u[t] && this.replaceAccents(u[t].toLowerCase()) === this.replaceAccents(e.toLowerCase()) || e.match(/\s/) || e.match(q) ? e : "_")).join("");
                return a.createElement("div", null, a.createElement("div", {
                    className: "sentence" + (t ? " rtl" : ""),
                    style: {
                        fontSize: "2em"
                    }
                }, m), a.createElement(r.A, {
                    autoCapitalize: "off",
                    autoComplete: "off",
                    autoCorrect: "off",
                    className: `input ${u && "on" === d.typingColorHint ? 0 === i.toLowerCase().indexOf(u.toLowerCase()) ? "correct" : "incorrect" : ""} form-control text-center`,
                    name: "text_input_value",
                    onChange: e => this.setState({
                        textInputValue: e.target.value
                    }, ( () => {
                        this.isCorrectAnswer(this.state.textInputValue) && this.submitAnswer(this.state.textInputValue)
                    }
                    )),
                    ref: e => this.textInput = e,
                    spellCheck: "false",
                    style: {
                        fontSize: "1.5em",
                        margin: "15px auto",
                        maxWidth: 500,
                        padding: 5
                    },
                    value: u
                }), (!this.isPlayingListening() || "visible" === d.translations || this.state.translationVisible) && a.createElement("div", {
                    className: "translation " + (e ? "rtl " : "") + "font-size-" + d.translationFontSize
                }, n.translation), !!n.pronunciation && c && ("on" === d.pronunciation || this.state.pronunciationVisible) && a.createElement(a.Fragment, null, a.createElement("div", null, n.pronunciation)), !!n.transliteration && c && ("on" === d.transliteration || this.state.transliterationVisible) && a.createElement(a.Fragment, null, a.createElement("div", null, n.transliteration)), this.renderAccentButtons(), a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-lg text-input-hint",
                    onClick: () => {
                        const {textInputValue: e} = this.state
                          , t = this.getCurrentSentencePlainText();
                        let n = 0;
                        for (; t[n] && e[n] && e[n].toLowerCase() === t[n].toLowerCase(); )
                            n += 1;
                        this.setState({
                            textInputValue: t.substring(0, n + 1)
                        }, ( () => {
                            this.textInput && this.textInput.focus()
                        }
                        ))
                    }
                    ,
                    title: "Hint!"
                }, a.createElement(C.default, {
                    name: "question-sign"
                }))), a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-success joystix btn-lg",
                    onClick: () => this.submitAnswer(u)
                }, "Submit")))
            }
            showSentenceText() {
                this.setState({
                    sentenceTextVisible: !0
                }, ( () => this.textInput && this.textInput.focus()))
            }
            renderCurrentSentence() {
                if (this.isListening())
                    return null;
                if (!this.state.answered && this.isPlayingFullTextInput())
                    return this.renderCurrentSentenceFullTextInput();
                const {answered: e, gameSettings: t, tokensVisible: n} = this.state
                  , l = this.getCurrentSentence();
                let {preClozeStr: s, cloze: r, postClozeStr: o} = this.getCurrentSentenceParts();
                const {baseLanguageRtl: i, targetLanguageRtl: c} = this.props;
                e && (s = this.wordify({
                    text: s,
                    idPrefix: "pre"
                }),
                o = this.wordify({
                    text: o,
                    idPrefix: "post"
                }));
                let d = a.createElement(B.default, Object.assign({}, this.getSelectionPopoverProps(), {
                    selection: this.state.selectedSentenceText,
                    visible: "sentence" === this.state.selectionPopoverId
                }), a.createElement("span", {
                    className: "pre"
                }, s), this.renderCloze(), a.createElement("span", {
                    className: "post"
                }, o));
                !e && l.hint && "on" === t.hints && (d = a.createElement(v.default, {
                    fontSize: t.hintFontSize,
                    hint: l.hint
                }, d));
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "sentence" + (e ? " answered" : "") + (c ? " rtl" : "")
                }, this.isSentenceTextHidden() ? a.createElement("button", {
                    "aria-label": "show sentence",
                    className: "btn btn-default btn-lg",
                    onClick: () => this.showSentenceText(),
                    style: {
                        width: 120
                    }
                }, a.createElement(C.default, {
                    name: "eye-open",
                    style: {
                        fontSize: "1.5em"
                    }
                })) : d), ("visible" === t.translations || this.state.translationVisible) && a.createElement("div", {
                    className: "translation " + (i ? "rtl " : "") + "font-size-" + t.translationFontSize
                }, l.translation), !!l.pronunciation && e && ("on" === t.pronunciation || this.state.pronunciationVisible) && a.createElement("div", {
                    className: "pronunciation font-size-" + t.pronunciationFontSize
                }, l.pronunciation), !!l.transliteration && e && ("on" === t.transliteration || this.state.transliterationVisible) && a.createElement("div", {
                    className: "transliteration font-size-" + t.transliterationFontSize
                }, l.transliteration), e && !!l.notes && a.createElement("div", {
                    className: "notes font-size-" + t.notesFontSize
                }, a.createElement("strong", null, "Notes:"), " ", l.notes), e && n && this.renderTokens(), !this.isSentenceTextHidden() && a.createElement(a.Fragment, null, this.renderAccentButtons(), this.renderCurrentSentenceControls()))
            }
            renderAccentButtons() {
                if (this.isPlayingMultipleChoice())
                    return null;
                if (this.state.answered)
                    return null;
                let e = [];
                if (this.isPlayingFullTextInput()) {
                    const t = this.getCurrentSentencePlainText().match(q);
                    t && (e = t.filter(( (e, t, n) => n.indexOf(e) === t)))
                }
                return a.createElement(i.default, {
                    accentMap: o.ZJ[this.props.targetLanguageIso] || {},
                    extras: e,
                    onAccentBtnClick: (e, t) => this.onAccentBtnClick(e, t)
                })
            }
            onAccentBtnClick(e, t) {
                e.shiftKey && (t = t.toUpperCase());
                const n = this.state.textInputValue
                  , a = this.textInput.selectionStart;
                this.setState({
                    textInputValue: n.substring(0, a) + t + n.substring(a)
                }, ( () => {
                    this.textInput.focus(),
                    this.textInput.selectionStart = a + 1,
                    this.textInput.selectionEnd = a + 1
                }
                ))
            }
            showOffBy(e) {
                const t = '<span class="off-by">Almost! Off by ' + e + " letter" + (1 === e ? "" : "s") + ".</span>";
                $(".off-by").length ? $(".off-by").replaceWith(t) : $(this.textInput).popover({
                    content: t,
                    html: !0,
                    trigger: "manual",
                    placement: "top"
                }).popover("show")
            }
            sendAnswer({correct: e, timeDiff: t}) {
                if (!this.props.isSignedIn)
                    return !1;
                const {collectionClozeSentencesAnswerUrl: n, gameSettings: a, multipleChoice: l, usedHint: s} = this.state
                  , r = this.getCurrentSentence()
                  , {mode: o, skill: i, scope: c} = this.props;
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        id: r.id,
                        correct: e,
                        mode: this.isPlayingMultipleChoice() || l ? G : this.isPlayingFullTextInput() ? "text_input" : o,
                        skill: i,
                        playing_favorites: this.isFavoritedScope(),
                        time: t,
                        used_hint: s
                    }),
                    method: "put",
                    url: r.collectionClozeSentencesAnswerUrl || n
                }).done((e => {
                    const t = e.languagePairing.level > this.state.languagePairingLevel;
                    this.setState({
                        languagePairingLevel: e.languagePairing.level,
                        leveledUp: this.state.leveledUp || t,
                        leveledUpModalVisible: "on" === a.leveledUpNotifications && t
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error saving that answer. Sorry about that. Your progress up until now has been saved. Please refresh the page and try again, and let us know if you see this message again.")
                }
                ))
            }
            stripTrailingPunctuation(e) {
                for (; e[e.length - 1] && e[e.length - 1].match(q); )
                    e = e.slice(0, -1);
                return e
            }
            isCorrectAnswer(e) {
                if (this.isPlayingFullTextInput()) {
                    return this.stripTrailingPunctuation(this.replaceAccents(e.toLowerCase())) === this.stripTrailingPunctuation(this.replaceAccents(this.getCurrentSentencePlainText().toLowerCase()))
                }
                const t = this.getCurrentSentenceAnswers()
                  , n = this.replaceAccents(e.toLowerCase().replace(/^\s+|\s+$/g, ""));
                return !!t.filter((e => n === this.replaceAccents(e.toLowerCase()))).length
            }
            submitAnswer(e) {
                const t = this.getCurrentSentence()
                  , n = this.getCurrentSentenceCloze()
                  , {mode: a, skill: l, scope: r} = this.props
                  , {collectionClozeSentences: i, collectionClozeSentencesAnswerUrl: c, correctlyAnsweredSentenceCount: d, currentSentenceTimerStart: u, elapsedTime: m, gameSettings: h, multipleChoice: g, nextReviewByLevel: p, numCorrect: b, numIncorrect: f, numMastered: E, numNew: y, numReview: S, playedNew: v, playedReview: C, previousAnswer: w, score: x, translationVisible: k, textInputValue: N, usedHint: T} = this.state
                  , P = this.state.numPlayedToday + (t.wasIncorrect ? 0 : 1)
                  , M = this.isCorrectAnswer(e);
                let R = 0;
                if (this.isPlayingTextInput() && !g && !M && e !== w && "on" === h.spellingHints && Levenshtein && (R = Levenshtein.get(this.replaceAccents(e.toLowerCase()), this.replaceAccents(n.toLowerCase()))) <= 2)
                    return this.setState({
                        previousAnswer: e
                    }),
                    this.showOffBy(R),
                    !0;
                $(this.textInput).popover("destroy");
                const L = JSON.parse(JSON.stringify(i));
                let I = 0;
                const z = t.level;
                let U = t.level;
                M ? this.isFavoritedScope() ? I = M ? 2 : 0 : (U = Math.min(t.level + 1, 4),
                I = U * (this.isPlayingMultipleChoice() || g ? 4 : 8),
                T && (I *= .5),
                t.nextReview && t.nextReview > s()().format("YYYY-MM-DD") && (I *= .5)) : (this.isFavoritedScope() || (U = 0),
                t.wasIncorrect = !0,
                L.push(t));
                const A = !t.nextReview
                  , j = !A && !v[t.id] && !C[t.id] && !!t.nextReview
                  , D = this.isFavoritedScope() ? t.nextReview : s()().add(p[U], "days").format("YYYY-MM-DD");
                L.forEach((e => {
                    e.id === t.id && (e.level = U,
                    e.nextReview = D,
                    e.numIncorrect += M ? 0 : 1,
                    e.numPlayed += 1)
                }
                ));
                const F = Math.min(Math.max((0,
                o.R4)() - u, 0), 30);
                this.sendAnswer({
                    correct: M,
                    timeDiff: F
                }),
                $('[data-toggle="tooltip"]').tooltip("hide"),
                this.afterAnswerKeyDownTriggered = !1,
                this.setState({
                    answered: !0,
                    answerSubmitted: e,
                    collectionClozeSentences: L,
                    correct: M,
                    correctlyAnsweredSentenceCount: d + (M ? 1 : 0),
                    elapsedTime: m + F,
                    lastPlayedDateBeforeAnswering: t.lastPlayedDate,
                    numCorrect: b + (M ? 1 : 0),
                    numIncorrect: f + (M ? 0 : 1),
                    numMastered: E + (t.level < 4 && 4 === U ? 1 : 0),
                    numNew: y + (A ? 1 : 0),
                    numPlayedToday: P,
                    numReview: S + (j ? 1 : 0),
                    playedNew: A ? Object.assign({}, v, {
                        [t.id]: !0
                    }) : v,
                    playedReview: j ? Object.assign({}, C, {
                        [t.id]: !0
                    }) : C,
                    points: I,
                    pronunciationVisible: !1,
                    score: x + I,
                    alreadyMastered: z === U && 4 === U,
                    textInputValue: n,
                    translationVisible: "hidden" === h.translations && k || "show-after" === h.translations,
                    transliterationVisible: !1
                }, ( () => {
                    (t.audioRecordingUrl || this.isTtsAvailable()) && "on" === h.textToSpeech && this.loopOrPlaySentenceAudio(),
                    this.playAnswerSoundEffect(M)
                }
                ))
            }
            playAnswerSoundEffect(e) {
                if ("on" !== this.state.gameSettings.soundEffects)
                    return !1;
                this.setupAudio(),
                this[(e ? "correct" : "incorrect") + "Audio"].play()
            }
            endInfiniteRound() {
                const e = this.state.collectionClozeSentences.filter(( (e, t) => t <= this.state.currentSentenceIndex || e.wasIncorrect));
                this.setState({
                    collectionClozeSentences: e,
                    endingInfiniteRound: !0
                }, ( () => this.next()))
            }
            renderEndInfiniteRoundBtn() {
                return !this.isInfiniteRound() || this.state.endingInfiniteRound ? null : a.createElement("button", {
                    className: "btn btn-danger text-center end-round",
                    "data-title": "Don't stop! Keep going!",
                    "data-toggle": "tooltip",
                    onClick: () => this.endInfiniteRound(),
                    style: {
                        marginRight: 10
                    }
                }, a.createElement(C.default, {
                    name: "stop"
                }), " End Round")
            }
            answerQualityOptionsVisible() {
                const e = this.getCurrentSentence();
                return !this.isFavoritedScope() && !!this.state.alreadyMasteredNextReview && this.state.alreadyMastered && !(e.nextReview || "").match(/2100/) && 4 === e.level && !this.nextReviewControlsEnabled()
            }
            renderNextBtn() {
                if (!this.state.answered)
                    return null;
                let e = null;
                return this.answerQualityOptionsVisible() ? e = a.createElement("span", {
                    className: "srs-controls"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-danger",
                    onClick: () => this.handleAnswerQualityResponse(0)
                }, a.createElement("small", null, "1. "), a.createElement("span", {
                    className: "joystix"
                }, "Hard")), a.createElement("button", {
                    className: "btn btn-lg btn-warning",
                    style: {
                        marginLeft: 10,
                        marginRight: 10
                    },
                    onClick: () => this.handleAnswerQualityResponse(1)
                }, a.createElement("small", null, "2. "), a.createElement("span", {
                    className: "joystix"
                }, "Normal")), a.createElement("button", {
                    className: "btn btn-lg btn-success",
                    onClick: () => this.handleAnswerQualityResponse(2)
                }, a.createElement("small", null, "3. "), a.createElement("span", {
                    className: "joystix"
                }, "Easy"))) : this.nextReviewControlsEnabled() && this.state.correct && this.state.nextReviewControlsVisible || (e = a.createElement("button", {
                    className: "btn btn-lg btn-success next joystix",
                    onClick: () => this.next()
                }, "Next", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))),
                a.createElement("div", {
                    className: "navigation",
                    style: {
                        display: "block"
                    }
                }, this.renderShowExplanationBtn(), e)
            }
            renderShowExplanationBtn() {
                const {isPro: e, showExplanations: t} = this.state
                  , {isSignedIn: n} = this.props;
                if (!t)
                    return null;
                const l = this.getCurrentSentence();
                return l.explanation || l.explanationJobUrl ? a.createElement("button", {
                    className: "btn btn-success-outline joystix",
                    onClick: () => this.setState({
                        explanationModalVisible: !0
                    }),
                    style: {
                        marginRight: 10
                    }
                }, "Explain") : null
            }
            handleAnswerQualityResponse(e) {
                if ("srs" === this.state.alreadyMasteredNextReview) {
                    const t = [1, 4, 7];
                    this.sendSrsResponse(t[e])
                } else if ("static" === this.state.alreadyMasteredNextReview) {
                    const {nextReviewByLevel: t} = this.state
                      , n = 0 === e ? .5 : e;
                    let a = Math.ceil(t[4] * n);
                    if (a >= 8 && this.state.nextReviewFuzzEnabled) {
                        const e = Math.ceil(.05 * a);
                        a += -e + Math.floor(Math.random() * (2 * e + 1))
                    }
                    this.updateCurrentSentence("next_review", s()().add(a, "days").format("YYYY-MM-DD"))
                } else
                    alert("Something's gone terribly wrong! Sorry about that. Your answer's been saved, but not your Hard/Normal/Easy selection. Please let us know.");
                this.next()
            }
            sendSrsResponse(e) {
                const t = this.getCurrentSentence();
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    url: t.collectionClozeSentencesSrsResponseUrl || this.state.collectionClozeSentencesSrsResponseUrl,
                    method: "post",
                    dataType: "json",
                    contentType: "application/json",
                    data: JSON.stringify({
                        srs_response: {
                            collection_cloze_sentence_id: t.id,
                            quality: e
                        }
                    })
                }).done((e => {
                    this.setState({
                        collectionClozeSentences: this.state.collectionClozeSentences.map((n => n.id === t.id ? e.collectionClozeSentence : n)),
                        updating: !1
                    })
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error updating. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            isInfiniteRound() {
                return "infinite" === this.props.count
            }
            runTutorial() {
                this.setState({
                    isRunningTutorial: !0
                });
                const e = [{
                    selector: ".level .progress",
                    opts: {
                        content: "<p>Every sentence has a % Mastered.</p>"
                    }
                }, {
                    selector: ".level .progress",
                    opts: {
                        content: "<p>Answer a sentence correctly 4 times in a row to get it to 100% Mastered.</p>"
                    }
                }, {
                    selector: [".level .next-review", ".level .progress"],
                    opts: {
                        content: "<p>Each time a sentence is answered correctly, it's queued up to be reviewed further in the future.</p>"
                    }
                }, {
                    selector: ".score.total",
                    opts: {
                        content: "<p>A correct answer scores points.</p>"
                    }
                }, {
                    selector: ".score.total",
                    opts: {
                        content: "<p>A sentence with a higher % Mastered scores more points, and playing text input scores more points than multiple choice.</p>"
                    }
                }, {
                    selector: ".score.total",
                    opts: {
                        content: "<p>An incorrect answer scores 0 points and resets the sentence to 0% Mastered.</p>"
                    }
                }, {
                    selector: ".btn.game-settings",
                    opts: {
                        content: "<p>You can change the game settings here. Some settings are different for multiple choice vs. text input.</p>"
                    }
                }, {
                    selector: [".next", ".stage .sentence"],
                    opts: {
                        content: "<p>That's it! \ud83d\ude4c More questions? Click the Help button bottom right.</p>"
                    }
                }];
                let t = 0;
                const n = {
                    animation: !1,
                    container: "body",
                    html: !0,
                    placement: "bottom",
                    template: '\n        <div class="popover tutorial" role="tooltip">\n          <div class="arrow"></div>\n          <h3 class="popover-title"></h3>\n          <div class="popover-content"></div>\n        </div>\n      ',
                    trigger: "manual"
                }
                  , a = () => {
                    if (this.clearTutorialPopovers(),
                    t >= e.length)
                        return this.completedTutorial(),
                        !1;
                    const {opts: a} = e[t];
                    let {selector: l} = e[t];
                    const s = t + 1 >= e.length;
                    a.content = `\n        <div style="font-size: 1.25em">\n          ${a.content}\n        </div>\n        <div style="text-align: right">\n          <span class="joystix" style="margin-right: 10px">${t + 1}/${e.length}</span>\n          <button class="btn btn-success joystix next">${s ? "Done" : "Next"}</button>\n          ${s ? "" : '<button class="btn btn-default joystix skip">Skip</button>'}\n        </div>\n      `,
                    l instanceof Array && (l = $(l[0]).length ? l[0] : l[1]),
                    $(l).addClass("tutorial-target").popover(Object.assign({}, n, a)).popover("show");
                    const r = $(".popover")
                      , o = $(l).offset().top
                      , i = r.offset().top + r.height()
                      , c = $(window).scrollTop()
                      , d = $(window).height();
                    let u = null;
                    i > c + d && (u = i - d),
                    o < c && (u = o - 20),
                    u && $("html, body").animate({
                        scrollTop: u
                    })
                }
                ;
                $("body").on("click.tutorial", ".popover .btn.next", ( () => {
                    t += 1,
                    a()
                }
                )),
                $("body").on("click.tutorial", ".popover .btn.skip", ( () => {
                    this.completedTutorial()
                }
                )),
                a()
            }
            clearTutorialPopovers() {
                $(".tutorial-target").popover("destroy").removeClass("tutorial-target")
            }
            completedTutorial() {
                const {isSignedIn: e} = this.props
                  , {hasRunTutorial: t} = this.state;
                if (this.setState({
                    hasRunTutorial: !0,
                    isRunningTutorial: !1
                }, ( () => this.clearTutorialPopovers())),
                t)
                    return !0;
                e ? $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        user: {
                            has_run_play_tutorial: !0
                        }
                    }),
                    method: "put",
                    url: "/api/v1/users"
                }) : window.localStorage.setItem("hasRunPlayTutorial", "true")
            }
            next() {
                const {shouldRunTutorial: e} = this.props
                  , {currentSentenceIndex: t, collectionClozeSentences: n, gameSettings: a, hasRunTutorial: l, hasShownTokens: s, isRunningTutorial: r, tokensVisible: i} = this.state;
                if (this.isRoundComplete())
                    return !1;
                if (this.stopSentenceAudio(),
                this.isPlayingSpeaking() && this.stopRecordingAndResetRecordBtn(),
                r)
                    this.completedTutorial();
                else if (e && !l)
                    return this.runTutorial();
                this.setState({
                    alreadyMastered: !1,
                    answered: !1,
                    audioLoopCount: 0,
                    correct: null,
                    points: null,
                    currentSentenceIndex: t + 1,
                    currentSentenceTimerStart: (0,
                    o.R4)(),
                    hasShownTokens: s || i,
                    isAudioLooping: !1,
                    listeningControlPlayComplete: !1,
                    multipleChoice: !1,
                    previousAnswer: null,
                    sentenceTextVisible: !1,
                    speakingTranscript: "",
                    startedTextInput: !1,
                    textInputChangedAfterAnswering: !1,
                    textInputValue: "",
                    tokensVisible: !1,
                    translationVisible: "visible" === a.translations,
                    usedHint: !1
                }, ( () => {
                    this.textInput && this.textInput.focus(),
                    this.isInfiniteRound() && this.state.currentSentenceIndex > this.state.collectionClozeSentences.length - 5 && this.loadMoreCollectionClozeSentences()
                }
                ))
            }
            onMultipleChoiceOptionClick(e) {
                this.state.answered ? this.next() : this.submitAnswer(e)
            }
            renderMultipleChoiceOptions() {
                if (!this.isPlayingMultipleChoice() && !this.state.multipleChoice)
                    return null;
                const {answered: e, answerSubmitted: t, currentSentenceIndex: n, correct: l, wordBank: s} = this.state
                  , r = this.getCurrentSentence().multipleChoiceOptions
                  , o = r.length ? r : s;
                return a.createElement(I.default, {
                    actualAnswer: this.getCurrentSentenceCloze(),
                    answered: e,
                    answerSubmitted: t,
                    correct: l,
                    onOptionClick: e => this.onMultipleChoiceOptionClick(e),
                    onClickableOptionClick: e => this.setState({
                        selectionPopoverId: "sentence",
                        selectedSentenceText: e
                    }),
                    options: o,
                    ref: e => this.multipleChoiceOptions = e,
                    sentenceIndex: n,
                    targetLanguageCode: this.props.targetLanguageCode
                })
            }
            renderListeningControl() {
                const {skill: e} = this.props
                  , {currentSentenceIndex: t, gameSettings: n} = this.state;
                if (!this.isPlayingListening())
                    return null;
                this.getCurrentSentence();
                return a.createElement(N.default, {
                    key: t,
                    onPlayComplete: () => this.setState({
                        listeningControlPlayComplete: !0
                    }, ( () => this.textInput && this.textInput.focus())),
                    onError: () => this.setState({
                        listeningControlPlayComplete: !0
                    }, ( () => this.textInput && this.textInput.focus())),
                    playAudio: this.playSentenceAudio.bind(this),
                    playCompleteOnFirstPlayEnded: "on" === n.listeningSkillAutoShowSentence
                })
            }
            startRecording() {
                if (this.state.recording)
                    return !1;
                this.setState({
                    recording: !0
                });
                try {
                    this.recognition.start(),
                    this.recognitionTimeout = setTimeout(( () => {
                        this.stopRecordingAndResetRecordBtn()
                    }
                    ), 1e4)
                } catch (e) {
                    this.onSpeechRecognitionError(e)
                }
            }
            stopRecordingAndResetRecordBtn() {
                this.recognition && this.recognition.stop(),
                this.setState({
                    recording: !1
                }),
                clearTimeout(this.recognitionTimeout)
            }
            renderSpeakingControl() {
                return this.isPlayingSpeaking() ? a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-lg",
                    disabled: this.state.recording,
                    onClick: () => this.startRecording()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-record",
                    style: {
                        color: "#f00"
                    }
                }), " ", this.state.recording ? "Recording..." : "Record"), a.createElement("div", null, this.state.speakingTranscript)) : null
            }
            renderRoundResults() {
                const {collectionClozeSentences: e, collectionClozeSentencesUpsertUrl: t, collectionsUrl: n, elapsedTime: l, hasShownTokens: s, isCollectionEditable: r, isPro: o, languagePairingUrl: i, leveledUp: c, nextReviewByLevel: d, numCorrect: u, numIncorrect: m, numMastered: h, numNew: g, numReview: p, onboarding: b, reportErrorUrl: f, startingNumMastered: E, startingNumPlaying: y, startingNumReadyForReview: S, score: v, tokensUrl: C, updating: w} = this.state
                  , {baseLanguageEnglishName: x, baseLanguageFlagIso: k, collectionId: N, isTeachingCollection: T, languagePairingWebUrl: P, scope: M, targetLanguageCode: R, targetLanguageEnglishName: L, targetLanguageFlagIso: I, targetLanguageIso: z, targetLanguageName: U, teachingCollectionResultsUrl: A} = this.props
                  , j = []
                  , D = {};
                for (let a = 0, F = e.length; a < F; a++)
                    D[e[a].id] || (j.push(e[a]),
                    D[e[a].id] = !0);
                return a.createElement(O.default, null, a.createElement(V.default, {
                    answerTape: e.map((e => ({
                        id: e.id,
                        correct: !e.wasIncorrect
                    }))),
                    baseLanguageEnglishName: x,
                    baseLanguageFlagIso: k,
                    collectionClozeSentences: j,
                    collectionClozeSentencesUpsertUrl: t,
                    collectionId: N,
                    collectionsUrl: n,
                    elapsedTime: l,
                    hasShownTokens: s,
                    isCollectionEditable: r,
                    isPro: o,
                    isSignedIn: this.props.isSignedIn,
                    isTeachingCollection: T,
                    isTtsAvailable: this.isTtsAvailable.bind(this),
                    languagePairingUrl: i,
                    leveledUp: c,
                    nextReviewByLevel: d,
                    numCorrect: u,
                    numIncorrect: m,
                    numMastered: h,
                    numNew: g,
                    numReview: p,
                    onNextRound: () => {
                        b ? this.setState({
                            onboardingNextOptionsVisible: !0
                        }, ( () => $("html, body").animate({
                            scrollTop: 0
                        }))) : this.nextRound()
                    }
                    ,
                    playSoundEffect: () => {
                        if ("on" === this.state.gameSettings.soundEffects && this.props.roundCompleteAudioUrl) {
                            const e = new Audio(this.props.roundCompleteAudioUrl);
                            e.volume = .25,
                            e.play()
                        }
                    }
                    ,
                    onboarding: b,
                    playTts: this.playSentenceAudio.bind(this),
                    reportErrorUrl: f,
                    scope: M,
                    score: v,
                    startingNumMastered: E,
                    startingNumPlaying: y,
                    startingNumReadyForReview: S,
                    targetLanguageCode: R,
                    targetLanguageEnglishName: L,
                    targetLanguageFlagIso: I,
                    targetLanguageIso: z,
                    targetLanguageName: U,
                    teachingCollectionResultsUrl: A,
                    tokensUrl: C,
                    updateHasShownTokens: () => this.setState({
                        hasShownTokens: !0
                    }),
                    updateSentence: this.updateSentence.bind(this),
                    updating: w
                }), this.renderFavoriteProPromoModal())
            }
            renderFavoriteProPromoModal() {
                return this.state.isPro ? null : a.createElement(M.default, {
                    id: "favorite-pro-promo-modal",
                    show: !1,
                    title: "Favorite"
                }, a.createElement(L.default, {
                    can: "favorite sentences and then practice just their favorites or download their favorites (to print out, for import into Anki, etc.).",
                    secondary: "Take control of your learning. Get fluent faster."
                }))
            }
            onKnowItClick() {
                this.knowItModal.hide();
                const e = this.getCurrentSentence();
                this.updateSentence({
                    sentence: e,
                    updates: {
                        level: 4,
                        next_review: "2100-01-01"
                    }
                })
            }
            renderKnowItModal() {
                return a.createElement(M.default, {
                    id: "know-it-modal",
                    onShown: () => this.knowItModal.$modal.find(".btn").focus(),
                    ref: e => this.knowItModal = e,
                    show: !1,
                    size: "small",
                    title: "Known"
                }, a.createElement("h4", {
                    className: "text-center",
                    style: {
                        marginTop: 0
                    }
                }, "Feeling confident?"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block go",
                    onClick: () => this.onKnowItClick()
                }, "Mark as Known")), a.createElement("div", {
                    className: "text-center"
                }, "This will set the sentence to 100% Mastered and set the next review date to the year 2100."))
            }
            onMasterClick() {
                this.masterModal.hide(),
                this.updateCurrentSentence("level", 4)
            }
            renderMasterModal() {
                const {nextReviewByLevel: e} = this.state;
                let t = s()().add(e[4], "days").format("YYYY-MM-DD");
                return t > "2100-01-01" && (t = "the year 2100"),
                a.createElement(M.default, {
                    id: "master-modal",
                    onShown: () => this.masterModal.$modal.find(".btn").focus(),
                    ref: e => this.masterModal = e,
                    show: !1,
                    size: "small",
                    title: "Master"
                }, a.createElement("h4", {
                    className: "text-center",
                    style: {
                        marginTop: 0
                    }
                }, "Already know this sentence?"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block go",
                    onClick: () => this.onMasterClick()
                }, "Set to 100% Mastered")), a.createElement("div", {
                    className: "text-center"
                }, "Next review due date will be ", t, "."))
            }
            onResetClick() {
                this.resetModal.hide(),
                this.updateCurrentSentence("level", 0)
            }
            renderResetModal() {
                const {nextReviewByLevel: e} = this.state;
                let t = s()().add(e[0], "days").format("YYYY-MM-DD");
                return a.createElement(M.default, {
                    id: "reset-modal",
                    onShown: () => this.resetModal.$modal.find(".btn").focus(),
                    ref: e => this.resetModal = e,
                    show: !1,
                    size: "small",
                    title: "Reset"
                }, a.createElement("h4", {
                    className: "text-center",
                    style: {
                        marginTop: 0
                    }
                }, "Want to see this sentence again sooner?"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block go",
                    onClick: () => this.onResetClick()
                }, "Reset to 0% Mastered")), a.createElement("div", {
                    className: "text-center"
                }, "Next review due date will be ", t, "."))
            }
            popLastSentenceIfIgnoredAndIncorrect(e) {
                const {collectionClozeSentences: t} = this.state
                  , n = t[t.length - 1]
                  , a = this.getCurrentSentence();
                n.id === a.id && n.wasIncorrect && n.ignored && t.pop(),
                this.setState({
                    collectionClozeSentences: JSON.parse(JSON.stringify(t))
                }, e)
            }
            onIgnoreAllClick() {
                this.ignoreModal.hide(),
                this.ignoreAll(( () => this.popLastSentenceIfIgnoredAndIncorrect(( () => this.next()))))
            }
            onIgnoreClick() {
                this.ignoreModal.hide(),
                this.updateCurrentSentence("ignored", !0, ( () => {
                    this.popLastSentenceIfIgnoredAndIncorrect(( () => this.next()))
                }
                ))
            }
            renderIgnoreModal() {
                const {pro: e} = this.state;
                return a.createElement(M.default, {
                    id: "ignore-modal",
                    onShown: () => this.ignoreModal.$modal.find(".btn").first().focus(),
                    ref: e => this.ignoreModal = e,
                    show: !1,
                    size: "small",
                    title: "Ignore"
                }, a.createElement("p", null, "Ignoring a sentence removes it from your queue. You'll no longer see it and it won't count towards your progress.", a.createElement("button", {
                    className: "btn btn-danger btn-block joystix ignore-sentence",
                    style: {
                        marginTop: 5
                    },
                    onClick: () => this.onIgnoreClick()
                }, "Ignore")), !!this.props.collectionId && a.createElement("p", null, "Or you can ignore all sentences with the same missing word.", a.createElement("button", {
                    className: "btn btn-danger btn-block joystix ignore-all",
                    onClick: () => this.onIgnoreAllClick(),
                    style: {
                        marginTop: 5
                    }
                }, "Ignore All")), !e && a.createElement("small", null, a.createElement("strong", null, a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), " subscribers can unignore sentences as well as search all sentences!")))
            }
            renderGameSettingsControl() {
                return a.createElement("button", {
                    className: "btn btn-default game-settings",
                    "data-toggle": "modal",
                    "data-target": "#game-settings-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cog"
                }))
            }
            renderExplanationModal() {
                const {explanationModalVisible: e, isPro: t, showExplanations: n} = this.state;
                if (!n || !e)
                    return null;
                const l = this.getCurrentSentence();
                return a.createElement(M.default, {
                    footer: a.createElement("div", {
                        style: {
                            display: "flex",
                            flexDirection: "row",
                            alignItems: "center",
                            justifyContent: "space-between"
                        }
                    }, a.createElement("small", null, "In beta. Generated by ChatGPT. Like it? Hate it? ", a.createElement("a", {
                        href: "/contact",
                        target: "_blank"
                    }, "Let us know"), "!"), a.createElement(R.default, null)),
                    id: "explanation-modal",
                    onHidden: () => this.setState({
                        explanationModalVisible: !1
                    }),
                    show: e,
                    title: "Explanation"
                }, a.createElement(h.default, {
                    collectionClozeSentence: l,
                    isPro: t,
                    key: l.id,
                    onExplanation: e => this.setState({
                        collectionClozeSentences: this.state.collectionClozeSentences.map((t => t.id === l.id ? {
                            ...t,
                            explanation: e
                        } : t))
                    }),
                    test: this.props.test
                }))
            }
            renderGameSettingsModal() {
                return a.createElement(M.default, {
                    footer: a.createElement(R.default, null),
                    id: "game-settings-modal",
                    show: !1,
                    title: "Game Settings"
                }, a.createElement(y.default, {
                    audioRecordingsAvailable: this.audioRecordingsAvailable(),
                    clozemasterTtsAvailable: !!this.getCurrentSentence().ttsAudioUrl,
                    initialSettings: this.state.gameSettings,
                    isPlayingListening: this.isPlayingListening(),
                    isPlayingMultipleChoice: this.isPlayingMultipleChoice(),
                    isSignedIn: this.props.isSignedIn,
                    onUpdate: e => {
                        let t = this.state.translationVisible;
                        ("show-after" === e.translations && !this.state.answered || "hidden" === e.translations) && (t = !1),
                        this.setState({
                            gameSettings: e,
                            translationVisible: t
                        })
                    }
                    ,
                    ref: e => this.gameSettings = e,
                    systemTtsAvailable: this.isSystemTtsAvailable(),
                    systemTtsVoices: this.getSystemTtsVoices(),
                    targetLanguageName: this.props.targetLanguageName,
                    transliterationsAvailable: this.transliterationsAvailable(),
                    url: this.state.gameSettingsUrl
                }))
            }
            transliterationsAvailable() {
                const {collectionClozeSentences: e} = this.state;
                return !!e.find((e => !!e.transliteration))
            }
            audioRecordingsAvailable() {
                const {collectionClozeSentences: e} = this.state;
                return !!e.find((e => !!e.audioRecordingUrl))
            }
            renderTextInputSubmitBtn() {
                if (this.isPlayingTextInput() && !this.state.multipleChoice && !this.state.answered) {
                    const {textInputValue: e} = this.state;
                    return a.createElement("button", {
                        className: "btn btn-success joystix btn-lg",
                        onClick: () => this.submitAnswer(e),
                        disabled: !e
                    }, "Submit")
                }
            }
            renderSoundEffects() {
                const {correctAudioUrl: e, incorrectAudioUrl: t} = this.props;
                return a.createElement("div", {
                    className: "audio"
                }, a.createElement("audio", {
                    ref: e => this.correctAudio = e,
                    src: e
                }), a.createElement("audio", {
                    ref: e => this.incorrectAudio = e,
                    src: t
                }))
            }
            getUpdatedCollectionClozeSentences(e, t) {
                const n = JSON.parse(JSON.stringify(this.state.collectionClozeSentences));
                for (let a = 0, l = n.length; a < l; a++)
                    n[a].id === e && (n[a] = Object.assign(n[a], t));
                return n
            }
            onSentenceEditorUpdate(e) {
                this.sentenceEditorModal && this.sentenceEditorModal.hide();
                const t = this.getCurrentSentence()
                  , n = this.getUpdatedCollectionClozeSentences(t.id, e);
                this.setState({
                    collectionClozeSentences: n,
                    textInputChangedAfterAnswering: e.text !== t.text
                })
            }
            addCurrentSentenceToCollection() {
                this.getCurrentSentence();
                this.setState({
                    addSentenceToCollectionModalVisible: !0
                })
            }
            renderAddSentenceToCollectionModal() {
                if (!this.state.addSentenceToCollectionModalVisible)
                    return null;
                const {isPro: e, nextReviewByLevel: t, selectedSentenceClozeStr: n, selectedSentenceText: l} = this.state
                  , s = Object.assign({}, this.getCurrentSentence());
                delete s.id;
                let r = !0;
                return n && n.match(/.*\{\{.+\}\}.*/) ? (s.text = n,
                r = !1) : l && (s.text = s.text.replace(/{{|}}/g, ""),
                s.text = s.text.replace(l, "{{" + l + "}}"),
                r = !1),
                a.createElement(c.default, {
                    collectionClozeSentence: s,
                    collectionsUrl: this.state.collectionsUrl,
                    copyable: r,
                    isPro: e,
                    nextReviewByLevel: t,
                    onHidden: () => this.setState({
                        addSentenceToCollectionModalVisible: !1,
                        selectedSentenceClozeStr: null,
                        selectedSentenceText: null
                    }),
                    onSentenceAdded: e => this.addSentenceToCollectionModal && this.addSentenceToCollectionModal.hide(),
                    ref: e => this.addSentenceToCollectionModal = e
                })
            }
            renderSentenceEditorModal() {
                if (!this.state.sentenceEditorModalVisible)
                    return null;
                const e = this.getCurrentSentence();
                return a.createElement(m.default, {
                    alreadyMasteredNextReview: this.state.alreadyMasteredNextReview,
                    answerQualityOptionsVisible: this.answerQualityOptionsVisible(),
                    isPro: this.state.isPro,
                    isTextEditable: this.state.isCollectionEditable,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => this.setState({
                        sentenceEditorModalVisible: !1
                    }),
                    onUpdate: e => this.onSentenceEditorUpdate(e),
                    ref: e => this.sentenceEditorModal = e,
                    sentence: e,
                    upsertUrl: e.collectionClozeSentencesUpsertUrl || this.state.collectionClozeSentencesUpsertUrl
                })
            }
            renderLeveledUpModal() {
                if (!this.state.leveledUpModalVisible)
                    return null;
                const {baseLanguageEnglishName: e, baseLanguageFlagIso: t, leveledUpImageUrl: n, leveledUpShareUrl: l, targetLanguageEnglishName: s, targetLanguageFlagIso: r} = this.props;
                return a.createElement(k.default, {
                    baseLanguageEnglishName: e,
                    baseLanguageFlagIso: t,
                    imagePath: n,
                    level: this.state.languagePairingLevel,
                    onHidden: () => this.setState({
                        leveledUpModalVisible: !1
                    }),
                    shareUrl: l,
                    targetLanguageEnglishName: s,
                    targetLanguageFlagIso: r
                })
            }
            renderManageCollectionModal() {
                if (!this.state.manageCollectionModalVisible)
                    return null;
                const {baseLanguageEnglishName: e, targetLanguageCode: t, targetLanguageEnglishName: n, targetLanguageIso: l, targetLanguageName: s} = this.props;
                return a.createElement(P.default, {
                    baseLanguageEnglishName: e,
                    collectionClozeSentencesUrl: this.state.manageCollectionCollectionClozeSentencesUrl || this.state.collectionClozeSentencesUrl,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.isPro,
                    onHidden: () => this.setState({
                        manageCollectionCollectionClozeSentencesUrl: null,
                        manageCollectionModalVisible: !1,
                        manageCollectionQuery: ""
                    }),
                    onUpdate: e => {
                        const {collectionClozeSentences: t} = this.state
                          , n = e.reduce(( (e, t) => (e[t.id] = t,
                        e)), {})
                          , a = [];
                        for (let l = 0, s = t.length; l < s; l++)
                            a.push(Object.assign({}, t[l], n[t[l].id] || {}));
                        this.setState({
                            collectionClozeSentences: a
                        })
                    }
                    ,
                    query: this.state.selectedSentenceText || this.state.manageCollectionQuery,
                    targetLanguageCode: t,
                    targetLanguageEnglishName: n,
                    targetLanguageIso: l,
                    targetLanguageName: s
                })
            }
            isListening() {
                const {skill: e} = this.props
                  , {listeningControlPlayComplete: t} = this.state;
                return this.isPlayingListening() && !t
            }
            isSentenceTextHidden() {
                const {answered: e, gameSettings: t, sentenceTextVisible: n} = this.state;
                return !e && "on" === t.sentenceTextInitiallyHidden && !n
            }
            renderGameControls() {
                return this.isListening() || this.isSentenceTextHidden() ? null : a.createElement(f.default, null, this.renderTextInputSubmitBtn(), this.renderNextBtn(), this.renderMultipleChoiceOptions(), this.renderDontKnowBtn())
            }
            renderDontKnowBtn() {
                const {level: e} = this.getCurrentSentence()
                  , {answered: t} = this.state
                  , {dontKnowBtnEnabled: n} = this.props;
                return !n || t ? null : a.createElement("div", {
                    style: this.isPlayingTextInput() || this.isPlayingFullTextInput() ? {
                        marginTop: 10
                    } : null
                }, a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    onClick: this.onDontKnowClick.bind(this)
                }, "No idea \xaf\\_(\u30c4)_/\xaf"))
            }
            onDontKnowClick() {
                const e = this.getCurrentSentenceCloze()
                  , {textInputValue: t} = this.state;
                this.setState({
                    previousAnswer: ""
                }, ( () => {
                    this.submitAnswer(t || ""),
                    this.setState({
                        selectionPopoverId: "sentence",
                        selectedSentenceText: e
                    })
                }
                ))
            }
            renderClozeSentenceSearchModal() {
                return this.state.clozeSentenceSearchModalVisible ? a.createElement(u.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.isPro,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => {
                        this.setState({
                            clozeSentenceSearchModalVisible: !1
                        })
                    }
                    ,
                    query: this.state.selectedSentenceText,
                    url: this.state.clozeSentencesUrl
                }) : null
            }
            renderDiscussionModal() {
                const {discussionModalVisible: e} = this.state;
                if (!e)
                    return null;
                const {baseLanguageEnglishName: t, targetLanguageEnglishName: n, targetLanguageName: l} = this.props
                  , s = this.getCurrentSentence()
                  , {translation: r} = s;
                return a.createElement(p.default, Object.assign({}, this.getCurrentSentenceParts(), {
                    baseLanguageEnglishName: t,
                    isPro: this.state.isPro,
                    onHidden: () => this.setState({
                        discussionModalVisible: !1
                    }),
                    sentencePlainText: this.getCurrentSentencePlainText(),
                    translation: r,
                    targetLanguageEnglishName: n,
                    targetLanguageName: l
                }))
            }
            renderRoundHistoryModal() {
                const {answered: e, collectionClozeSentences: t, currentSentenceIndex: n, isPro: l, roundHistoryModalVisible: s} = this.state;
                return s ? a.createElement(F.default, {
                    collectionClozeSentences: t.slice(0, n + (e ? 1 : 0)),
                    isPro: l,
                    onEditClick: e => {
                        this.setState({
                            manageCollectionCollectionClozeSentencesUrl: e.collectionClozeSentencesUrl,
                            manageCollectionModalVisible: !0,
                            manageCollectionQuery: this.getSentencePlainText(e.text)
                        })
                    }
                    ,
                    onHidden: () => this.setState({
                        roundHistoryModalVisible: !1
                    })
                }) : null
            }
            renderResourceLinksEditorModal() {
                const {isPro: e, resourceLinksEditorVisible: t, resourceLinksUrl: n} = this.state;
                return a.createElement(M.default, {
                    onHidden: () => this.setState({
                        resourceLinksEditorVisible: !1
                    }),
                    show: !!t,
                    title: "Resource Links"
                }, t && a.createElement(D.ResourceLinksEditor, {
                    isPro: e,
                    onCancel: () => this.setState({
                        resourceLinksEditorVisible: !1
                    }),
                    onUpdate: () => this.setState({
                        resourceLinksEditorVisible: !1
                    }),
                    resourceLinksUrl: n
                }))
            }
            renderHelpModal() {
                return a.createElement(S.default, {
                    accentMap: o.ZJ[this.props.targetLanguageIso],
                    isPlayingTextInput: this.isPlayingTextInput(),
                    isUsingSrsControls: !!this.state.alreadyMasteredNextReview,
                    runTutorial: this.runTutorial.bind(this)
                })
            }
            renderCurrentSentenceImageModal() {
                const {currentSentenceImageModalVisible: e} = this.state;
                if (!e)
                    return null;
                const t = this.getCurrentSentence()
                  , {answered: n} = this.state;
                return a.createElement(M.default, {
                    footer: a.createElement("div", {
                        style: {
                            display: "flex",
                            flexDirection: "row",
                            alignItems: "center",
                            justifyContent: "space-between"
                        }
                    }, a.createElement("small", null, "Images are in beta. Like them? Hate them? ", a.createElement("a", {
                        href: "/contact",
                        target: "_blank"
                    }, "Let us know"), "!"), a.createElement(R.default, null)),
                    onHidden: () => this.setState({
                        currentSentenceImageModalVisible: !1
                    }),
                    ref: e => this.currentSentenceImageModal = e,
                    show: !!e,
                    title: "Image"
                }, n && a.createElement("p", null, a.createElement(d.default, {
                    text: t.text
                }), a.createElement("br", null), t.translation), a.createElement("p", {
                    className: "text-center"
                }, a.createElement("img", {
                    src: t.imageUrl,
                    style: {
                        maxWidth: "100%"
                    }
                })), a.createElement("div", null, a.createElement("small", null, "Change when and how images are shown in the game settings. "), a.createElement("button", {
                    className: "btn btn-xs btn-default game-settings",
                    onClick: () => {
                        this.currentSentenceImageModal.hide(),
                        $("#game-settings-modal").modal("show")
                    }
                }, a.createElement(C.default, {
                    name: "cog"
                }))))
            }
            renderModals() {
                return a.createElement(a.Fragment, null, this.renderAddSentenceToCollectionModal(), this.renderClozeSentenceSearchModal(), this.renderCurrentSentenceImageModal(), this.renderDiscussionModal(), this.renderExplanationModal(), this.renderFavoriteProPromoModal(), this.renderGameSettingsModal(), this.renderHelpModal(), this.renderIgnoreModal(), this.renderKnowItModal(), this.renderLeveledUpModal(), this.renderManageCollectionModal(), this.renderMasterModal(), this.renderMaxPlayedTodayModal(), this.renderResetModal(), this.renderResourceLinksEditorModal(), this.renderRoundHistoryModal(), this.renderSentenceEditorModal())
            }
            isRoundComplete() {
                const {currentSentenceIndex: e, collectionClozeSentences: t, loading: n} = this.state;
                return !n && e >= t.length
            }
            renderSearchSentencesBtn() {
                if (!this.state.isSignedIn)
                    return null
            }
            renderManageCollectionBtn() {
                if (!this.state.isSignedIn || !this.props.collectionId)
                    return null
            }
            renderRoundHistoryBtn() {
                return a.createElement("button", {
                    className: "btn btn-default round-history",
                    onClick: () => this.setState({
                        roundHistoryModalVisible: !0
                    }),
                    style: {
                        marginRight: 10
                    },
                    title: "Round history (alt+y)"
                }, a.createElement(C.default, {
                    name: "history",
                    type: "fa"
                }))
            }
            renderReportErrorBtn() {
                if (!this.state.isSignedIn)
                    return null;
                const e = this.getCurrentSentence();
                return a.createElement(j.default, {
                    collectionClozeSentence: e,
                    url: e.collectionClozeSentencesErrorUrl || this.state.reportErrorUrl
                })
            }
            renderHelpBtn() {
                return a.createElement("button", {
                    className: "btn btn-default",
                    "data-target": "#help-modal",
                    "data-toggle": "modal",
                    style: {
                        marginRight: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-info-circle",
                    "aria-hidden": "true"
                }), " Help!")
            }
            isNoSentences() {
                const {currentSentenceIndex: e, collectionClozeSentences: t, loading: n} = this.state;
                return !n && 0 === e && !t.length
            }
            renderNoSentences() {
                return a.createElement("div", {
                    className: "text-center"
                }, a.createElement("h2", null, "No more sentences to play!"), a.createElement("p", null, a.createElement("img", {
                    src: "https://cdn.clozemaster.com/images/sad-pikachu.gif"
                })), a.createElement("p", null, "Check back later as sentences become ready for review."), a.createElement("a", {
                    href: "/dashboard",
                    className: "btn btn-default joystix btn-lg"
                }, a.createElement(C.default, {
                    name: "chevron-left"
                }), " Dashboard"))
            }
            renderCurrentSentenceSourceLink() {
                const e = this.getCurrentSentence()
                  , {answered: t} = this.state;
                if (t && e.tatoebaId)
                    return a.createElement("div", {
                        style: {
                            marginTop: 10
                        }
                    }, a.createElement("a", {
                        className: "btn btn-xs btn-default",
                        href: `https://tatoeba.org/eng/sentences/show/${e.tatoebaId}`,
                        target: "_blank",
                        rel: "noopener"
                    }, "Sentence Source ", a.createElement(C.default, {
                        name: "new-window"
                    })))
            }
            renderExplanationRequest() {
                const e = this.getCurrentSentence()
                  , {collectionId: t} = this.props
                  , {answered: n, languagePairingId: l} = this.state;
                return n ? a.createElement(b.default, {
                    collectionId: t,
                    collectionClozeSentenceId: e.id,
                    languagePairingId: l
                }) : null
            }
            renderCopyCurrentSentenceToCollectionPopover() {
                if (!this.state.copyPopoverVisible)
                    return null;
                const e = this.getCurrentSentence()
                  , {collectionsUrl: t} = this.state;
                return a.createElement(g.default, {
                    collectionClozeSentence: e,
                    collectionsUrl: t,
                    onClose: () => this.setState({
                        copyPopoverVisible: !1
                    }),
                    onCopy: () => null
                })
            }
            renderMaxPlayedTodayModal() {
                const {answered: e, maxPlayableToday: t, numPlayedToday: n, dailyReminderEmail: l, dailyReminderEmailUrl: s} = this.state
                  , {languagePairingWebUrl: r, dailyLimitDailyReminderEnabled: o, timeZone: i} = this.props;
                if (!e && t && n >= t)
                    return a.createElement(z.default, {
                        dailyReminder: {
                            selected: l,
                            show: o,
                            timeZone: i,
                            updateUrl: s
                        },
                        languagePairingWebUrl: r,
                        sentenceLimit: t
                    })
            }
            getSentenceImageBackgroundStyles() {
                return {}
            }
            getClozeableElementStyle() {
                const e = {
                    display: "block"
                }
                  , {gameSettings: t} = this.state;
                if ("on" === t.imageBackground) {
                    const n = this.getCurrentSentence();
                    n && n.imageUrl && (e.background = "dark" === t.theme ? "rgba(0,0,0,0.7)" : "rgba(255,255,255,0.85)",
                    e.borderRadius = 10,
                    e.padding = 10)
                }
                return e
            }
            renderStage() {
                return this.isNoSentences() ? this.renderNoSentences() : this.isRoundComplete() ? this.renderRoundResults() : a.createElement("div", {
                    className: "stage"
                }, a.createElement("div", {
                    className: "clozeable",
                    style: this.getClozeableElementStyle()
                }, this.renderHeader(), this.renderListeningControl(), this.renderSpeakingControl(), this.renderCurrentSentence(), this.renderGameControls(), a.createElement("div", {
                    className: "text-right",
                    style: {
                        marginTop: 10
                    }
                }, this.renderEndInfiniteRoundBtn(), this.renderHelpBtn(), this.renderRoundHistoryBtn(), this.renderSearchSentencesBtn(), this.renderManageCollectionBtn(), this.renderGameSettingsControl(), a.createElement("span", {
                    style: {
                        marginLeft: 10
                    }
                }, this.renderReportErrorBtn()), this.renderCurrentSentenceSourceLink()), this.props.explanationRequestsEnabled && this.renderExplanationRequest(), this.renderModals(), this.props.test && this.isPlayingTextInput() && a.createElement("span", {
                    id: "text-input-answer"
                }, this.getCurrentSentenceCloze()), this.props.test && this.isPlayingFullTextInput() && a.createElement("span", {
                    id: "text-input-answer"
                }, this.getCurrentSentencePlainText())))
            }
            onStageFadeInComplete() {
                this.textInput && setTimeout(( () => this.textInput.focus()), 0)
            }
            renderOnboardingNextOption({btnClassName: e, btnText: t, explainer: n=null, onClick: l, text: s}) {
                return a.createElement(U.default, {
                    style: {
                        margin: "0 auto 20px",
                        maxWidth: 360
                    }
                }, a.createElement("h4", {
                    style: {
                        marginTop: 0
                    }
                }, s), n && a.createElement("p", null, n), a.createElement("button", {
                    className: `btn btn-block btn-${e} joystix`,
                    onClick: l
                }, t))
            }
            renderOnboardingNextOptions() {
                const {mode: e, skill: t} = this.props
                  , {collectionName: n, collectionTtsAvailable: l, isPro: s} = this.state
                  , r = !!l
                  , o = !(!window.clozemaster.speechRecognition.isSupported(this.props.targetLanguageIso) || !window.clozemaster.speechRecognition.isAvailable());
                return a.createElement("div", {
                    className: "container",
                    style: {
                        marginTop: 40
                    }
                }, this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Continue ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: `${n}, ${t} skill option, ${e.split("_").join(" ")}.`,
                    onClick: () => this.nextRound(),
                    text: a.createElement("strong", null, "Keep playing what I've been playing")
                }), a.createElement("div", {
                    style: {
                        margin: "20px 0",
                        textAlign: "center"
                    }
                }, "or"), (this.isPlayingTextInput() || this.isPlayingFullTextInput()) && this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Play ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: "Select from four options for each sentence.",
                    onClick: () => window.location.href = window.location.pathname + "?onboarding=true",
                    text: "Play multiple choice"
                }), !(this.isPlayingTextInput() || this.isPlayingFullTextInput()) && this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Play ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: "Type in the missing word.",
                    onClick: () => window.location.href = window.location.pathname + "?mode=text_input&onboarding=true",
                    text: "Try text input"
                }), r && !(this.isPlayingListening() && this.isPlayingMultipleChoice()) && this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Play ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: "Hear the sentence before you see it then select the correct answer.",
                    onClick: () => window.location.href = window.location.pathname + "?mode=multiple_choice&onboarding=true&skill=listening",
                    text: "Try listening with multiple choice"
                }), r && !(this.isPlayingListening() && this.isPlayingTextInput()) && this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Play ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: "Hear the sentence before you see it then type in the correct answer.",
                    onClick: () => window.location.href = window.location.pathname + "?mode=multiple_choice&onboarding=true&skill=listening",
                    text: "Try listening with text input"
                }), r && !(this.isPlayingListening() && this.isPlayingFullTextInput()) && this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Play ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: "Type in the entire sentence based on what you hear.",
                    onClick: () => window.location.href = window.location.pathname + "?mode=multiple_choice&onboarding=true&skill=listening",
                    text: "Try listening with transcribe"
                }), o && !this.isPlayingSpeaking() && this.renderOnboardingNextOption({
                    btnClassName: "success",
                    btnText: a.createElement(a.Fragment, null, "Play ", a.createElement(C.default, {
                        name: "chevron-right"
                    })),
                    explainer: "Use your microphone to speak the correct answer.",
                    onClick: () => window.location.href = window.location.pathname + "?mode=multiple_choice&onboarding=true&skill=listening",
                    text: "Try speaking"
                }), this.renderOnboardingNextOption({
                    btnClassName: "default",
                    btnText: a.createElement(a.Fragment, null, a.createElement(C.default, {
                        name: "chevron-left"
                    }), " Dashboard"),
                    explainer: "View all collections, stats, and everything available on Clozemaster.",
                    onClick: () => window.location.href = s ? "/" : "/welcome-pro",
                    text: "Go to the Dashboard"
                }))
            }
            render() {
                const {loading: e, intraRoundAd: t, intraRoundAdVisible: n, onboardingNextOptionsVisible: l} = this.state;
                return e ? a.createElement(T.default, null) : l ? this.renderOnboardingNextOptions() : n ? a.createElement(x.default, {
                    ad: t,
                    nextRound: () => this.nextRound(),
                    onLinkClick: () => this.resetRoundsPlayedCount(),
                    onNextRoundable: () => this.setState({
                        intraRoundAdNextRoundable: !0
                    })
                }) : a.createElement("div", null, a.createElement(O.default, null, this.renderRoundStats()), a.createElement("div", {
                    className: "container"
                }, a.createElement(f.default, {
                    complete: () => this.onStageFadeInComplete()
                }, this.renderStage())), this.renderSoundEffects())
            }
        }
    },
    94626: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    shiftKeyDown: !1
                }
            }
            componentDidMount() {
                $(window).on("keydown", (e => {
                    this.setState({
                        shiftKeyDown: e.shiftKey
                    })
                }
                )).on("keyup", (e => {
                    this.setState({
                        shiftKeyDown: e.shiftKey
                    })
                }
                ))
            }
            render() {
                const {accentMap: e, extras: t, onAccentBtnClick: n} = this.props
                  , {shiftKeyDown: l} = this.state
                  , s = [];
                for (var r in e)
                    e[r].split("").forEach((e => {
                        s.push(a.createElement("button", {
                            className: "btn btn-default btn-sm",
                            key: e,
                            onClick: t => n(t, e),
                            title: "alt+" + r
                        }, l ? e.toUpperCase() : e))
                    }
                    ));
                return t.forEach((e => {
                    s.push(a.createElement("button", {
                        className: "btn btn-default btn-sm",
                        key: "extra-" + e,
                        onClick: t => n(t, e)
                    }, e))
                }
                )),
                s.length ? a.createElement("div", {
                    className: "accent-btns"
                }, s) : null
            }
        }
    },
    50964: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(73898)
          , s = n(40897);
        class r extends a.Component {
            constructor(e) {
                super(e);
                const {baseLanguageEnglishName: t, targetLanguageName: n, translation: a} = e;
                this.state = {
                    content: "",
                    formattingHelpVisible: !1
                }
            }
            onModalReady() {
                const e = $("#discussion-modal");
                e.on("submit", "form", (n => {
                    n.preventDefault();
                    var c = e.find("form");
                    c.find(":input").prop({
                        readonly: !0
                    }),
                    c.find(":submit").prop("disabled", !0),
                    $("<input>").attr({
                        type: "hidden",
                        name: "sentence"
                    }).val(this.props.sentencePlainText).appendTo(c),
                    $("<input>").attr({
                        type: "hidden",
                        name: "targetLanguage"
                    }).val(this.props.targetLanguageEnglishName).appendTo(c),
                    o();
                    const {baseLanguageEnglishName: g, targetLanguageName: p, translation: b} = this.props
                      , f = c.serializeArray().map((e => "content" !== e.name || e.value.match(/^\[details=.+Translation/) ? e : {
                        name: e.name,
                        value: `[details="${g} Translation"]${b}[/details]\n\n${e.value}`
                    }));
                    return $.ajax({
                        url: c.attr("action"),
                        method: "post",
                        data: f
                    }).done((function(e) {
                        r(),
                        $(".discussion .comments").html(e),
                        $(".discussion .comments a").attr("target", "_blank"),
                        t(),
                        a(),
                        l(),
                        s(),
                        d(),
                        h(),
                        i()
                    }
                    )).error((function(e) {
                        i(),
                        u(),
                        m("Something went wrong with the post, please try again or try reloading the page")
                    }
                    )).always((function() {
                        c.find(":input").prop({
                            readonly: !1
                        }),
                        c.find(":submit").prop("disabled", !1)
                    }
                    )),
                    !1
                }
                ));
                var t = function() {
                    $(".comments").data("proUser") && ($(".comments .reply").off("click"),
                    $(".comments .reply").on("click", (function(t) {
                        o(),
                        e.find(".post").removeClass("highlight");
                        var a = $(this).closest(".post");
                        a.addClass("highlight"),
                        u(),
                        $.ajax({
                            url: "/discourse/get_form",
                            method: "get",
                            contentType: "text/html",
                            data: {
                                post_id: a.data("postId"),
                                post_number: a.data("postNumber"),
                                post_author: a.data("author"),
                                post_topic_id: a.data("topicId"),
                                post_type: "reply"
                            }
                        }).done((function(t) {
                            i(),
                            e.find(".discussion .form").replaceWith(t),
                            c(),
                            n()
                        }
                        )).error((function() {
                            i(),
                            u(),
                            m("Something went wrong with the reply, please try again or try reloading the page")
                        }
                        ))
                    }
                    )))
                }
                  , n = function() {
                    $(".cancel-form").on("click", (function(e) {
                        return e.preventDefault(),
                        l(),
                        !1
                    }
                    ))
                }
                  , a = function() {
                    $(".comments").data("proUser") && ($(".comments .edit").off("click"),
                    $(".comments .edit").on("click", (function(t) {
                        t.preventDefault(),
                        o();
                        var a = $(this).closest(".post");
                        return u(),
                        $.ajax({
                            url: "/discourse/get_form",
                            method: "get",
                            contentType: "text/html",
                            data: {
                                post_id: a.data("postId"),
                                post_content: a.find(".content p").text(),
                                post_type: "edit"
                            }
                        }).done((function(t) {
                            i(),
                            e.find(".discussion .form").replaceWith(t),
                            c(),
                            n()
                        }
                        )).error((function() {
                            i(),
                            u(),
                            m("Something went wrong with the edit, please try again or try reloading the page")
                        }
                        )),
                        !1
                    }
                    )))
                }
                  , l = function() {
                    o(),
                    $.ajax({
                        url: "/discourse/get_form",
                        method: "get",
                        contentType: "text/html",
                        data: {
                            post_type: "post"
                        }
                    }).done((function(t) {
                        i(),
                        e.find(".discussion .form").replaceWith(t),
                        e.find("#discussion-input").focus(),
                        c()
                    }
                    )).error((function() {
                        i(),
                        u(),
                        m("Something went wrong, please try again")
                    }
                    ))
                }
                  , s = function() {
                    $(".comments [data-reply-to-post-number]").each((function() {
                        const e = $(this)
                          , t = $(e).data("replyToPostNumber")
                          , n = $(".comments").find("[data-post-number='" + t + "']").data("author");
                        e.find(".reply-author").html(n)
                    }
                    ))
                };
                e.on("click", ".post .reply-author", (function(t) {
                    t.preventDefault(),
                    e.find(".post").removeClass("highlight");
                    var n = $(this).closest(".post").data("reply-to-post-number")
                      , a = e.find('.post[data-post-number="' + n + '"]');
                    return e.animate({
                        scrollTop: a.offset().top - e.offset().top
                    }, "slow", (function() {
                        a.addClass("highlight")
                    }
                    )),
                    !1
                }
                ));
                var r = function() {
                    $("#discussion-input").val("")
                }
                  , o = function() {
                    $(".modal-overlay").css({
                        visibility: "visible"
                    }),
                    $(".modal-loading").css("visibility", "visible")
                }
                  , i = function() {
                    $(".modal-overlay").css({
                        visibility: "hidden"
                    }),
                    $(".modal-loading").css("visibility", "hidden")
                }
                  , c = function() {
                    $("#discussion-input").on("input", (function(e) {
                        var t = $("#discussion-input").parents("form:first").find(":submit");
                        $("#discussion-input").val().length < 20 ? (t.prop("disabled", !0),
                        $(".post-length").show()) : "true" == t.attr("pro") ? t.prop("disabled", !0) : (t.prop("disabled", !1),
                        $(".post-length").hide())
                    }
                    ))
                };
                c(),
                e.on("click", ".post .like", (function(e) {
                    e.preventDefault();
                    var t = $(this)
                      , n = t.closest(".post")
                      , a = n.find(".likes");
                    return $.ajax({
                        url: "/discourse/toggle_post_like",
                        method: "put",
                        data: {
                            post_id: n.data("postId")
                        }
                    }).done((function(e) {
                        t.toggleClass("liked"),
                        a.html(e)
                    }
                    )).error((function(e) {
                        console.log("error", e),
                        u(),
                        m("Something went wrong liking this post, please try again or refresh the page.")
                    }
                    )),
                    !1
                }
                )),
                e.on("click", ".post .flag", (function(e) {
                    e.preventDefault();
                    var t = $(this);
                    if (t.hasClass("flagged"))
                        return !1;
                    if (!confirm("Are you sure you want to flag this comment for the mods? Please only flag comments that are inappropriate or off-topic."))
                        return !1;
                    var n = t.closest(".post").data("postId");
                    return $.ajax({
                        url: "/discourse/flag_post",
                        method: "put",
                        data: {
                            post_id: n
                        }
                    }).done((function(e) {
                        t.addClass("flagged")
                    }
                    )).error((function(e) {
                        console.log("error", e),
                        u(),
                        m("Something went wrong flagging this post, please try again or refresh the page.")
                    }
                    )),
                    !1
                }
                ));
                var d = function() {
                    var e = parseInt($(".comment-count .value").text(), 10) + 1;
                    $(".comment-count .value").text(e)
                }
                  , u = function() {
                    e.animate({
                        scrollTop: e.find(".form").offset().top
                    }, "slow")
                }
                  , m = function(t) {
                    e.find(".errors").show().html(t)
                }
                  , h = function() {
                    var t = $(".comments").find(".post").first().data("topicId")
                      , n = "/forum/t/" + t;
                    e.find(".forum-topic-link").attr("href", n).toggle(!!t),
                    t && e.find(".modal-footer a").attr("href", n)
                };
                e.find(".sentence .text").html(this.props.preClozeStr + "<strong>" + this.props.cloze + "</strong>" + this.props.postClozeStr),
                ( () => {
                    o(),
                    e.find(".discussion .comments").html("Loading..."),
                    $.ajax({
                        url: "/discourse/sentence_topic",
                        method: "get",
                        contentType: "text/html",
                        data: {
                            clozeable_sentence: this.props.sentencePlainText
                        }
                    }).done((function(n) {
                        i(),
                        e.find(".discussion .comments").html(n),
                        e.find(".discussion .comments a").attr("target", "_blank"),
                        t(),
                        a(),
                        c(),
                        s(),
                        h();
                        var l = $(n).filter(".post").length;
                        $(".comment-count").find(".value").text(l)
                    }
                    )).error((function() {
                        e.find(".discussion .comments").html(""),
                        i(),
                        u(),
                        m("Something went wrong with the post, please try again or try reloading the page")
                    }
                    ))
                }
                )()
            }
            onFormattingHelpClick(e) {
                e.preventDefault(),
                this.setState({
                    formattingHelpVisible: !this.state.formattingHelpVisible
                })
            }
            renderFormattingHelp() {
                return this.state.formattingHelpVisible ? a.createElement(a.Fragment, null, a.createElement("table", {
                    className: "table"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    style: {
                        width: "50%"
                    }
                }, "What you type:"), a.createElement("th", null, "How it will look:"))), a.createElement("tbody", null, a.createElement("tr", null, a.createElement("td", null, "*italics*"), a.createElement("td", null, a.createElement("em", null, "italics"))), a.createElement("tr", null, a.createElement("td", null, "**bold**"), a.createElement("td", null, a.createElement("strong", null, "bold"))), a.createElement("tr", null, a.createElement("td", null, "~~strikethrough~~"), a.createElement("td", null, a.createElement("strike", null, "strikethrough"))), a.createElement("tr", null, a.createElement("td", null, "* item 1", a.createElement("br", null), "* item 2", a.createElement("br", null), "* item 3"), a.createElement("td", null, a.createElement("ul", null, a.createElement("li", null, "item 1"), a.createElement("li", null, "item 2"), a.createElement("li", null, "item 3")))), a.createElement("tr", null, a.createElement("td", null, "> quoted text"), a.createElement("td", null, a.createElement("blockquote", {
                    style: {
                        fontSize: "unset"
                    }
                }, "quoted text"))), a.createElement("tr", null, a.createElement("td", null, '[details="heading"]some text[/details]'), a.createElement("td", null, a.createElement("details", null, a.createElement("summary", {
                    style: {
                        display: "list-item"
                    }
                }, "heading"), "some text"))))), a.createElement("hr", null)) : null
            }
            renderPostForm() {
                if (!this.props.isPro)
                    return a.createElement("div", {
                        className: "form text-center"
                    }, a.createElement("h3", null, "Sign up for Clozemaster Pro to join the discussion!"), a.createElement("a", {
                        href: "/pro",
                        className: "btn btn-lg btn-success btn-block joystix"
                    }, "Go Pro ", a.createElement("span", {
                        className: "glyphicon glyphicon-chevron-right"
                    })));
                const {content: e} = this.state;
                return a.createElement("div", {
                    className: "form"
                }, a.createElement("form", {
                    action: "/discourse/new_sentence_post",
                    className: "discussion-form",
                    "data-type": "post"
                }, a.createElement("input", {
                    type: "hidden",
                    name: "form_type",
                    value: "post"
                }), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("textarea", {
                    autoFocus: !0,
                    className: "form-control",
                    id: "discussion-input",
                    name: "content",
                    onChange: e => this.setState({
                        content: e.target.value
                    }),
                    rows: "4",
                    value: e
                }), a.createElement("div", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn-link btn-xs",
                    onClick: e => this.onFormattingHelpClick(e)
                }, "Formatting help"))), this.renderFormattingHelp(), a.createElement("button", {
                    className: "btn btn-success joystix",
                    disabled: !0
                }, "Post"), a.createElement("small", {
                    className: "post-length",
                    style: {
                        marginLeft: 5
                    }
                }, "Discussion comments must be 20 characters or more.")))
            }
            render() {
                const {isPro: e, onHidden: t} = this.props;
                return a.createElement(s.default, {
                    footer: a.createElement(a.Fragment, null, a.createElement("span", {
                        style: {
                            marginRight: 5
                        }
                    }, "All sentence comments also appear in the forum - ", a.createElement("a", {
                        href: "/forum",
                        target: "_blank"
                    }, "check it out"), "!"), a.createElement("button", {
                        className: "btn btn-default",
                        "data-dismiss": "modal"
                    }, "Close")),
                    id: "discussion-modal",
                    modalContentExtra: a.createElement(a.Fragment, null, a.createElement("div", {
                        className: "modal-overlay"
                    }), a.createElement("div", {
                        className: "modal-loading"
                    }, a.createElement(l.default, null))),
                    onHidden: t,
                    onShow: () => this.onModalReady(),
                    show: !0,
                    title: a.createElement(a.Fragment, null, "Discussion", a.createElement("small", {
                        style: {
                            paddingLeft: 10
                        }
                    }, a.createElement("a", {
                        className: "forum-topic-link",
                        style: {
                            color: "#fff",
                            display: "none"
                        },
                        target: "_blank"
                    }, "View in the forum ", a.createElement("span", {
                        className: "glyphicon glyphicon-new-window"
                    }))))
                }, a.createElement("div", {
                    className: "sentence"
                }, a.createElement("div", {
                    className: "text"
                }), a.createElement("div", {
                    className: "translation"
                })), a.createElement("div", {
                    className: "discussion"
                }, a.createElement("div", {
                    className: "comments",
                    "data-pro-user": e ? "true" : "false"
                }), a.createElement("div", {
                    className: "errors"
                }), this.renderPostForm()))
            }
        }
    },
    43302: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(23314)
          , s = n(75148);
        const r = function({label: e, onChange: t, value: n}) {
            const l = parseFloat(n.replace(/-/, "."));
            return a.createElement("div", {
                className: `${e.toLowerCase().replace(/\W/, "-")}-font-sizer`,
                style: {
                    display: "flex",
                    flexDirection: "row",
                    marginTop: 10,
                    textAlign: "left"
                }
            }, a.createElement("div", {
                style: {
                    flex: 2
                }
            }, e), a.createElement("div", {
                style: {
                    flex: 1,
                    textAlign: "center"
                }
            }, l, "x"), a.createElement("div", {
                style: {
                    flex: 3,
                    marginLeft: 10
                }
            }, a.createElement("input", {
                min: "1",
                max: "4",
                onChange: e => t(e.target.value.toString().replace(/\./, "-") + "x"),
                step: "0.5",
                type: "range",
                value: l
            }), a.createElement("div", {
                className: `font-size-${n}`
            }, "Sample text.")))
        };
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = Object.assign({}, {
                    accentShortcuts: "on",
                    audioRecordings: "on",
                    clozemasterTextToSpeech: "on",
                    enterSubmitsEmpty: "on",
                    fitTextInputWidth: "on",
                    hints: "on",
                    hintFontSize: "1x",
                    hotkeys: "on",
                    imageBackground: "off",
                    imageToggle: "after",
                    keyDownClearsTextInputAfterAnswering: "on",
                    leveledUpNotifications: "on",
                    listeningTextToSpeechVoice: "random",
                    listeningSkillAutoShowSentence: "off",
                    manualMasterResetConfirm: "on",
                    notesFontSize: "1x",
                    pronunciation: "on",
                    pronunciationFontSize: "1x",
                    sentenceTextInitiallyHidden: "off",
                    soundEffects: "on",
                    spellingHints: "on",
                    textToSpeech: "on",
                    textToSpeechSpeed: 1,
                    textToSpeechVoice: "random",
                    textToSpeechLooping: "off",
                    theme: "light",
                    translationFontSize: "1x",
                    translations: "visible",
                    transliteration: "on",
                    transliterationFontSize: "1x",
                    typingColorHint: "on"
                }, e.initialSettings)
            }
            componentDidMount() {
                this.props.onUpdate && this.props.onUpdate(this.state)
            }
            componentDidUpdate(e, t) {
                t.theme !== this.state.theme && $("body").toggleClass("dark-mode", "dark" === this.state.theme)
            }
            updateSetting(e, t) {
                const {onUpdate: n, url: a} = this.props;
                let l = {};
                "object" === typeof e && null == t ? l = e : l[e] = t;
                const s = Object.assign({}, this.state, l);
                this.setState(s, ( () => n && n(s))),
                $.ajax({
                    url: a,
                    data: {
                        settings: s
                    },
                    method: "post"
                }).fail(( () => {}
                ))
            }
            renderBtnGroupBtn(e, t, n, l) {
                return a.createElement("button", {
                    className: "btn " + (n === t ? "btn-success active" : "btn-default"),
                    key: e + "-" + t,
                    onClick: () => this.updateSetting(e, t),
                    type: "button",
                    value: t
                }, l)
            }
            renderHints() {
                const e = this.state.hints;
                return a.createElement("div", {
                    className: "group hints"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Hints:"), a.createElement("small", null, "(appear above the missing word when available)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("hints", "on", e, "On"), this.renderBtnGroupBtn("hints", "off", e, "Off")))
            }
            renderSpellingHints() {
                if (this.props.isPlayingMultipleChoice)
                    return null;
                const e = this.state.spellingHints;
                return a.createElement("div", {
                    className: "group spelling-hints"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Spelling Hints:"), a.createElement("small", null, "(lets you know if your answer is incorrect by up to 2 letters)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("spellingHints", "on", e, "On"), this.renderBtnGroupBtn("spellingHints", "off", e, "Off")))
            }
            renderClearAfterAnswering() {
                if (this.props.isPlayingMultipleChoice)
                    return null;
                const {keyDownClearsTextInputAfterAnswering: e} = this.state;
                return a.createElement("div", {
                    className: "group clear-after-answering"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Clear After Answering:"), a.createElement("small", null, "(keypress clears the text input after answering so you can practice re-typing the answer)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("keyDownClearsTextInputAfterAnswering", "on", e, "On"), this.renderBtnGroupBtn("keyDownClearsTextInputAfterAnswering", "off", e, "Off")))
            }
            renderColorHint() {
                if (this.props.isPlayingMultipleChoice)
                    return null;
                const e = this.state.typingColorHint;
                return a.createElement("div", {
                    className: "group color-hint"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Typing Color Hint:"), a.createElement("small", null, "(see if you're entering the correct answer as you type)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("typingColorHint", "on", e, "On"), this.renderBtnGroupBtn("typingColorHint", "off", e, "Off")))
            }
            renderEnterSubmitsEmpty() {
                if (this.props.isPlayingMultipleChoice)
                    return null;
                const {enterSubmitsEmpty: e} = this.state;
                return a.createElement("div", {
                    className: "group enter-submit-empty"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Enter Submits Empty:"), a.createElement("small", null, "(pressing Enter when the input is empty will submit a blank answer)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("enterSubmitsEmpty", "on", e, "On"), this.renderBtnGroupBtn("enterSubmitsEmpty", "off", e, "Off")))
            }
            renderTextBoxSize() {
                if (this.props.isPlayingMultipleChoice)
                    return null;
                const {fitTextInputWidth: e} = this.state;
                return a.createElement("div", {
                    className: "group"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Text Box Size:"), a.createElement("small", null, "(text box size can change to match the missing word)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("fitTextInputWidth", "on", e, "Changes"), this.renderBtnGroupBtn("fitTextInputWidth", "off", e, "Always the Same")))
            }
            renderAudioRecordings() {
                const {audioRecordingsAvailable: e} = this.props
                  , {audioRecordings: t} = this.state;
                return e ? a.createElement("div", {
                    className: "group audio-recordings",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Prefer Audio Recordings:"), a.createElement("small", null, "(when available, otherwise will fallback to text-to-speech if available)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("audioRecordings", "on", t, "On"), this.renderBtnGroupBtn("audioRecordings", "off", t, "Off"))) : null
            }
            renderTextToSpeech() {
                const {clozemasterTtsAvailable: e, systemTtsAvailable: t, systemTtsVoices: n} = this.props
                  , {clozemasterTextToSpeech: l, textToSpeech: r, textToSpeechSpeed: o, textToSpeechVoice: i, textToSpeechLooping: c} = this.state;
                return a.createElement(s.default, {
                    clozemasterTextToSpeech: l,
                    clozemasterTtsAvailable: e,
                    onSpeedChanged: e => this.updateSetting("textToSpeechSpeed", e),
                    onVoiceSelected: e => this.updateSetting("textToSpeechVoice", e),
                    renderBtnGroupBtn: (...e) => this.renderBtnGroupBtn(...e),
                    systemTtsAvailable: t,
                    systemTtsVoices: n,
                    textToSpeech: r,
                    textToSpeechLooping: c,
                    textToSpeechSpeed: o,
                    textToSpeechVoice: i
                })
            }
            renderAccentShortcutsToggle() {
                return this.props.isPlayingMultipleChoice ? null : a.createElement("div", {
                    className: "group"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Accent Shortcuts:"), a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    type: "checkbox",
                    name: "game_settings_accent_shortcuts",
                    id: "game_settings_accent_shortcuts",
                    checked: "on" === this.state.accentShortcuts,
                    onChange: e => this.updateSetting("accentShortcuts", e.target.checked ? "on" : "off")
                }), "Enabled")), a.createElement("small", null, "alt+letter to insert accented version of letter pressed. Press letter multiple times while holding alt key for different available accents. May conflict with system shortcuts."))
            }
            renderShortcutHotkeysList() {
                return a.createElement("div", {
                    className: "group"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Shortcut Hotkeys:"), a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    type: "checkbox",
                    name: "game_settings_hotkeys",
                    id: "game_settings_hotkeys",
                    value: "1",
                    checked: "on" === this.state.hotkeys,
                    onChange: e => this.updateSetting("hotkeys", e.target.checked ? "on" : "off")
                }), " Enabled")), a.createElement(l.default, null))
            }
            renderDarkMode() {
                const {theme: e} = this.state;
                return a.createElement("div", {
                    className: "group dark-mode"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Dark Mode:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("theme", "dark", e, "On"), this.renderBtnGroupBtn("theme", "light", e, "Off")))
            }
            renderLeveledUpNotificationsToggle() {
                if (!this.props.isSignedIn)
                    return null;
                const {leveledUpNotifications: e} = this.state;
                return a.createElement("div", {
                    className: "group leveled-up-notifications"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Leveled Up Notifications:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("leveledUpNotifications", "on", e, "On"), this.renderBtnGroupBtn("leveledUpNotifications", "off", e, "Off")))
            }
            renderFontSizes() {
                const {hintFontSize: e, notesFontSize: t, pronunciationFontSize: n, transliterationFontSize: l, translationFontSize: s} = this.state;
                return a.createElement("div", {
                    className: "group font-sizes"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Font Sizes:"), a.createElement(r, {
                    label: "Hint",
                    onChange: e => this.updateSetting("hintFontSize", e),
                    value: e
                }), a.createElement(r, {
                    label: "Notes",
                    onChange: e => this.updateSetting("notesFontSize", e),
                    value: t
                }), a.createElement(r, {
                    label: "Pronunciation",
                    onChange: e => this.updateSetting("pronunciationFontSize", e),
                    value: n
                }), a.createElement(r, {
                    label: "Translation",
                    onChange: e => this.updateSetting("translationFontSize", e),
                    value: s
                }), a.createElement(r, {
                    label: "Transliteration",
                    onChange: e => this.updateSetting("transliterationFontSize", e),
                    value: l
                }))
            }
            renderTranslationFontSize() {
                const {translationFontSize: e} = this.state;
                return a.createElement("div", {
                    className: "group translation-font-size"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Translation Font Size:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("translationFontSize", "1x", e, "1x"), this.renderBtnGroupBtn("translationFontSize", "1-5x", e, "1.5x"), this.renderBtnGroupBtn("translationFontSize", "2x", e, "2x"), this.renderBtnGroupBtn("translationFontSize", "3x", e, "3x")))
            }
            renderHintFontSize() {
                const {hintFontSize: e} = this.state;
                return a.createElement("div", {
                    className: "group hint-font-size"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Hint Font Size:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("hintFontSize", "1x", e, "1x"), this.renderBtnGroupBtn("hintFontSize", "1-5x", e, "1.5x"), this.renderBtnGroupBtn("hintFontSize", "2x", e, "2x"), this.renderBtnGroupBtn("hintFontSize", "3x", e, "3x")))
            }
            renderNotesFontSize() {
                const {notesFontSize: e} = this.state;
                return a.createElement("div", {
                    className: "group notes-font-size"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Notes Font Size:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("notesFontSize", "1x", e, "1x"), this.renderBtnGroupBtn("notesFontSize", "1-5x", e, "1.5x"), this.renderBtnGroupBtn("notesFontSize", "2x", e, "2x"), this.renderBtnGroupBtn("notesFontSize", "3x", e, "3x")))
            }
            renderManualMasterResetConfirmToggle() {
                if (!this.props.isSignedIn)
                    return null;
                const {manualMasterResetConfirm: e} = this.state;
                return a.createElement("div", {
                    className: "group manual-master-reset-confirm"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Manual Master/Reset Confirmation:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("manualMasterResetConfirm", "on", e, "On"), this.renderBtnGroupBtn("manualMasterResetConfirm", "off", e, "Off")))
            }
            renderListeningSkillAutoShowSentence() {
                const {listeningSkillAutoShowSentence: e} = this.state
                  , {isPlayingListening: t} = this.props;
                return t ? a.createElement("div", {
                    className: "group listening-auto-show"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Automatically Show Sentence After First Listen:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("listeningSkillAutoShowSentence", "on", e, "On"), this.renderBtnGroupBtn("listeningSkillAutoShowSentence", "off", e, "Off")), a.createElement("div", {
                    style: {
                        marginTop: 4
                    }
                }, "(when playing listening skill)")) : null
            }
            renderTransliterationToggle() {
                const {transliterationsAvailable: e} = this.props
                  , {transliteration: t} = this.state;
                return e ? a.createElement("div", {
                    className: "group transliteration",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Transliteration:"), a.createElement("small", null, "(shown after answering when available)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("transliteration", "on", t, "On"), this.renderBtnGroupBtn("transliteration", "off", t, "Off"))) : null
            }
            renderSentenceTextInitiallyHidden() {
                const {sentenceTextInitiallyHidden: e} = this.state;
                return a.createElement("div", {
                    className: "group sentence-text-initially-hidden"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Sentence Text Initially Hidden:"), a.createElement("small", null, "(see just the translation, then click a button to see the sentence text)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, a.createElement("button", {
                    className: "btn " + ("on" === e ? "btn-success active" : "btn-default"),
                    onClick: () => this.updateSetting({
                        sentenceTextInitiallyHidden: "on",
                        translations: "visible"
                    }),
                    type: "button",
                    value: "on"
                }, "On"), a.createElement("button", {
                    className: "btn " + ("off" === e ? "btn-success active" : "btn-default"),
                    onClick: () => this.updateSetting({
                        sentenceTextInitiallyHidden: "off"
                    }),
                    type: "button",
                    value: "off"
                }, "Off")))
            }
            render() {
                const {imageBackground: e, imageToggle: t, isPlayingMultipleChoice: n, pronunciation: l, soundEffects: s, translations: r, transliteration: o} = this.state;
                return a.createElement("div", {
                    className: "game-settings text-center"
                }, this.renderListeningSkillAutoShowSentence(), this.renderAudioRecordings(), a.createElement("div", {
                    className: "group translations"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Translations:"), a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "translations"
                }, this.renderBtnGroupBtn("translations", "visible", r, "Visible"), this.renderBtnGroupBtn("translations", "show-after", r, a.createElement("span", null, a.createElement("span", {
                    className: "hidden-xs"
                }, "Show "), "After Answering")), this.renderBtnGroupBtn("translations", "hidden", r, "Hidden"))), this.renderSentenceTextInitiallyHidden(), !n && this.renderHints(), !n && this.renderSpellingHints(), !n && this.renderColorHint(), !n && this.renderTextBoxSize(), !n && this.renderEnterSubmitsEmpty(), !n && this.renderClearAfterAnswering(), a.createElement("div", {
                    className: "group image-toggle"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Image Toggle:"), a.createElement("small", null, "(toggle button, if sentence image available)")), a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "translations"
                }, this.renderBtnGroupBtn("imageToggle", "after", t, "After Answering"), this.renderBtnGroupBtn("imageToggle", "always", t, "Before and After"), this.renderBtnGroupBtn("imageToggle", "off", t, "Off"))), a.createElement("div", {
                    className: "group image-background"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Image Background:"), a.createElement("small", null, "(use sentence image as background, if available)")), a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "translations"
                }, this.renderBtnGroupBtn("imageBackground", "on", e, "On"), this.renderBtnGroupBtn("imageBackground", "off", e, "Off"))), a.createElement("div", {
                    className: "group pronunciation",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Pronunciation:"), a.createElement("small", null, "(shown after answering when available)")), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("pronunciation", "on", l, "On"), this.renderBtnGroupBtn("pronunciation", "off", l, "Off"))), this.renderTransliterationToggle(), a.createElement("div", {
                    className: "group"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Sound Effects:"), a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons"
                }, this.renderBtnGroupBtn("soundEffects", "on", s, "On"), this.renderBtnGroupBtn("soundEffects", "off", s, "Off"))), this.renderTextToSpeech(), this.renderDarkMode(), this.renderLeveledUpNotificationsToggle(), this.renderManualMasterResetConfirmToggle(), this.renderFontSizes(), this.renderAccentShortcutsToggle(), this.renderShortcutHotkeysList())
            }
        }
    },
    45895: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(40897)
          , r = n(23314);
        class o extends a.Component {
            runTutorial() {
                const {runTutorial: e} = this.props;
                this.modal.hide({
                    onHidden: () => {
                        $("html, body").animate({
                            scrollTop: 0
                        }),
                        e()
                    }
                })
            }
            renderIconTable() {
                return this.props.isPlayingTextInput ? a.createElement("table", {
                    className: "table"
                }, a.createElement("tbody", null, a.createElement("tr", null, a.createElement("td", null, a.createElement("span", {
                    className: "glyphicon glyphicon-transfer"
                })), a.createElement("td", null, "alt+t"), a.createElement("td", null, "Toggle translation")), a.createElement("tr", null, a.createElement("td", null, a.createElement(l.default, {
                    name: "th-large"
                })), a.createElement("td", null, "alt+p"), a.createElement("td", null, "Switch sentence to multiple choice - half points!")), a.createElement("tr", null, a.createElement("td", null, a.createElement(l.default, {
                    name: "question-sign"
                })), a.createElement("td", null, "alt+h"), a.createElement("td", null, "Single letter hint - only 1 per sentence and half the points!")))) : null
            }
            render() {
                const {isUsingSrsControls: e} = this.props;
                return a.createElement(s.default, {
                    id: "help-modal",
                    ref: e => this.modal = e,
                    show: !1,
                    title: "Help"
                }, a.createElement("h4", {
                    style: {
                        marginTop: 0
                    }
                }, "Complete the sentence with the correct missing word!"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-default btn-block",
                    onClick: this.runTutorial.bind(this)
                }, "\ud83d\udc49 Run Tutorial \ud83d\udc48")), a.createElement("p", null, "Points are determined as follows:"), a.createElement("p", {
                    className: "text-center"
                }, a.createElement("kbd", {
                    style: {
                        display: "inline-block"
                    }
                }, "(4 points for multiple choice, 8 points for text input)", a.createElement("br", null), "\xa0x (", a.createElement("span", {
                    className: "joystix"
                }, "% Mastered"), " divided by 25)")), a.createElement("ul", null, a.createElement("li", null, "Points are cut in half if you use a hint while playing text input or you review a sentence before it's ready for review."), a.createElement("li", null, "An incorrect answer gets 0 points."), a.createElement("li", null, "Playing favorites doesn't use the same equation - correct answers always get 2 points.")), this.renderIconTable(), a.createElement("p", null, "Clozemaster uses a spaced-repetition system to help maximize your learning efficiency with sentences starting at 0% Mastered. If a sentence is answered correctly it goes to 25% Mastered and is set to review the next day. Correct again? It goes to 50% Mastered and is set to review 10 days in the future. 75% Mastered is 30 days in the future, and 100% Mastered is 180 days in the future. Incorrect at any point resets the sentence to 0% Mastered. Pro users can customize these intervals via the Dashboard."), e && a.createElement(a.Fragment, null, a.createElement("p", null, "Once a sentence is 100% Mastered, each additional correct answer results in the review interval getting larger using a variation of the ", a.createElement("a", {
                    href: "https://www.supermemo.com/en/archives1990-2015/english/ol/sm2",
                    target: "_blank"
                }, "SuperMemo 2 algorithm"), "."), a.createElement("p", null, "If a sentence is 100% Mastered and answered correctly again, you'll see three buttons: ", a.createElement("span", {
                    className: "btn btn-xs btn-danger joystix"
                }, "Hard"), " ", a.createElement("span", {
                    className: "btn btn-xs btn-warning joystix"
                }, "Normal"), " ", a.createElement("span", {
                    className: "btn btn-xs btn-success joystix"
                }, "Easy"), ". These buttons are used to help determine the next review due date for the sentence. Hard will result in the next review being a bit sooner, and Easy will result in the next review being a bit further in the future.")), a.createElement("p", null, a.createElement("strong", null, "Questions? Something else you'd like to see here? ", a.createElement("a", {
                    href: "/contact",
                    target: "_blank"
                }, "Let us know"), ".")), a.createElement("p", {
                    className: "joystix text-center"
                }, "Shortcut Hotkeys"), a.createElement(r.default, null))
            }
        }
    },
    80240: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            componentDidMount() {
                const {fontSize: e} = this.props;
                this.$container = $(this.container),
                this.$container.tooltip({
                    template: `\n        <div class="hint tooltip font-size-${e}" role="tooltip">\n          <div class="tooltip-arrow"></div>\n          <div class="tooltip-inner"></div>\n        </div>\n      `,
                    title: this.props.hint,
                    trigger: "manual"
                }),
                setTimeout(( () => this.$container.tooltip("show")), 500)
            }
            componentDidUpdate(e, t) {
                e.fontSize !== this.props.fontSize && ($(".hint.tooltip").removeClass("font-size-" + e.fontSize),
                $(".hint.tooltip").addClass("font-size-" + this.props.fontSize),
                this.$container.tooltip("show"))
            }
            componentWillUnmount() {
                this.$container.tooltip("destroy")
            }
            render() {
                return a.createElement("span", {
                    ref: e => this.container = e
                }, this.props.children)
            }
        }
    },
    52226: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(36460);
        class s extends a.Component {
            render() {
                return a.createElement(l.default, {
                    delay: 3e3
                }, a.createElement("div", {
                    style: {
                        position: "relative"
                    }
                }, a.createElement("div", {
                    style: {
                        color: "#e00",
                        fontSize: "3em",
                        position: "absolute",
                        textAlign: "center",
                        width: "100%"
                    }
                }, a.createElement("i", {
                    className: "fa fa-times",
                    "aria-hidden": "true"
                }))))
            }
        }
    },
    66148: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(57955)
          , s = n(40727);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    timer: 3
                }
            }
            componentDidMount() {
                const {onNextRoundable: e} = this.props;
                this.interval = setInterval(( () => {
                    this.setState({
                        timer: this.state.timer - 1
                    }, ( () => {
                        this.state.timer <= 0 && (clearInterval(this.interval),
                        e && e())
                    }
                    ))
                }
                ), 1e3)
            }
            renderTimer() {
                let e = a.createElement("button", {
                    className: "btn btn-success joystix",
                    onClick: this.props.nextRound
                }, "Continue ", a.createElement(s.default, {
                    name: "chevron-right"
                }));
                return this.state.timer > 0 && (e = a.createElement(a.Fragment, null, "Continue in ", this.state.timer, "...")),
                a.createElement("p", {
                    className: "intra-round-vert-timer"
                }, e)
            }
            renderAd() {
                const {ad: e, onLinkClick: t} = this.props;
                return a.createElement(l.default, {
                    ad: e,
                    className: "intra-round-vert-content",
                    onCopyLinkClick: t,
                    onCallToActionClick: t,
                    onLinkClick: t,
                    onRemoveAdsClick: t
                })
            }
            render() {
                return a.createElement("div", {
                    className: "text-center intra-round-vert"
                }, a.createElement("p", null, "Advertisement"), this.renderAd(), this.renderTimer())
            }
        }
    },
    88622: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(28737)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            componentDidMount() {
                window.clozemaster.loadTwitterSDK(),
                window.clozemaster.loadFacebookSDK()
            }
            getShareMessage({service: e=null}) {
                return "I just leveled up playing " + ("twitter" === e ? "@clozemaster" : "Clozemaster") + "! Now at level " + this.props.level + " learning " + this.props.targetLanguageEnglishName + " from " + this.props.baseLanguageEnglishName + "."
            }
            getTwitterShareUrl() {
                return "https://twitter.com/intent/tweet?url=" + encodeURIComponent(this.props.shareUrl) + "&text=" + encodeURIComponent(this.getShareMessage({
                    service: "twitter"
                }))
            }
            onFacebookClick() {
                FB.ui({
                    method: "share",
                    href: this.props.shareUrl,
                    quote: this.getShareMessage()
                }, (function(e) {}
                ))
            }
            onTumblrClick() {
                window.open("http://tumblr.com/widgets/share/tool?posttype=text&tags=" + encodeURIComponent("langblr,studyblr,languages,language learning") + "&title=" + encodeURIComponent("Leveled up playing Clozemaster!") + "&content=" + encodeURIComponent(this.getShareMessage() + " " + this.props.shareUrl) + "&canonicalUrl=" + encodeURIComponent(window.location.href), "_blank", "height=600,width=540")
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    id: "levelup-modal",
                    ref: e => this.modal = e,
                    size: "small",
                    title: "Leveled Up!"
                }, a.createElement("div", {
                    className: "text-center",
                    ref: e => this.content = e
                }, a.createElement("div", {
                    className: "challenge levelup",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "title joystix"
                }, a.createElement(l.default, {
                    flagIso: this.props.targetLanguageFlagIso
                }), " / ", a.createElement(l.default, {
                    flagIso: this.props.baseLanguageFlagIso
                }), a.createElement("div", null, "Level:")), a.createElement("div", {
                    className: "value"
                }, a.createElement("div", {
                    className: "level"
                }, this.props.level), a.createElement("div", {
                    className: "plus"
                }, "+1", a.createElement("span", {
                    className: "glyphicon glyphicon-arrow-up"
                })))), a.createElement("img", {
                    src: this.props.imagePath,
                    style: {
                        maxWidth: 250
                    }
                }), a.createElement("h3", null, "Tell the world!"), a.createElement("button", {
                    className: "btn btn-primary btn-sm facebook",
                    onClick: () => this.onFacebookClick()
                }, a.createElement("i", {
                    className: "fa fa-facebook",
                    "aria-hidden": "true"
                }), " Share"), a.createElement("a", {
                    className: "twitter-share-button",
                    href: this.getTwitterShareUrl(),
                    "data-size": "large"
                }, "Tweet"), a.createElement("button", {
                    className: "btn btn-default btn-sm tumblr",
                    onClick: () => this.onTumblrClick()
                }, a.createElement("i", {
                    className: "fa fa-tumblr",
                    "aria-hidden": "true"
                }), " Post")))
            }
        }
    },
    33405: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40727);
        class s extends a.Component {
            constructor(e) {
                super(e);
                const t = new Proxy(new URLSearchParams(window.location.search),{
                    get: (e, t) => e.get(t)
                });
                this.state = {
                    firstPlayEnded: !1,
                    playing: !1,
                    playComplete: !1,
                    showPlayButton: "off" === t.auto_play
                }
            }
            componentDidMount() {
                $(window).on("keydown.listening-control", (e => {
                    this.state.firstPlayEnded && !this.state.playComplete && (32 === e.which ? (e.preventDefault(),
                    this.playAudio()) : 13 === e.which && (e.preventDefault(),
                    this.setState({
                        playComplete: !0
                    })))
                }
                )),
                this.state.showPlayButton || this.playAudio()
            }
            componentWillUnmount() {
                $(window).off("keydown.listening-control")
            }
            componentDidUpdate(e, t) {
                this.state.playComplete && !t.playComplete && this.props.onPlayComplete()
            }
            playAudio() {
                this.audio = this.props.playAudio({
                    onPlay: () => {
                        this.setState({
                            playing: !0,
                            showPlayButton: !1
                        })
                    }
                    ,
                    onEnded: () => {
                        this.setState({
                            firstPlayEnded: !0,
                            playing: !1,
                            playComplete: this.state.playComplete || this.props.playCompleteOnFirstPlayEnded
                        })
                    }
                    ,
                    onError: e => window.SpeechSynthesisEvent && e instanceof window.SpeechSynthesisEvent && e.elapsedTime > 0 ? null : this.state.showPlayButton || this.state.firstPlayEnded ? (alert("Oh no! There was an error with the audio.\n" + e + " " + (e || {}).name + "\nSorry about that. Please try again and let us know if you see this message again."),
                    this.props.onError(),
                    void this.setState({
                        firstPlayEnded: !0,
                        playing: !1,
                        playComplete: this.state.playComplete || this.props.playCompleteOnFirstPlayEnded
                    })) : this.setState({
                        showPlayButton: !0
                    })
                })
            }
            componentWillUnmount() {
                this.audio instanceof SpeechSynthesisUtterance ? window.speechSynthesis.cancel() : this.audio && this.audio.pause()
            }
            render() {
                const {firstPlayEnded: e, playComplete: t, playing: n, showPlayButton: s} = this.state;
                return a.createElement("div", null, a.createElement("div", {
                    className: "listening-control",
                    style: {
                        opacity: n ? .6 : 1
                    },
                    onClick: () => this.playAudio()
                }, a.createElement(l.default, {
                    name: "volume-up"
                }), s ? a.createElement("div", {
                    style: {
                        fontSize: "2rem"
                    }
                }, "Click to play!") : null), e && !t && a.createElement("div", {
                    className: "text-center"
                }, a.createElement("div", {
                    style: {
                        display: "inline-block",
                        marginRight: 5
                    }
                }, a.createElement("button", {
                    "aria-label": "replay audio",
                    className: "btn btn-default btn-lg",
                    id: "listening-control-replay-btn",
                    onClick: () => this.playAudio(),
                    style: {
                        width: 120
                    }
                }, a.createElement(l.default, {
                    name: "volume-up",
                    style: {
                        fontSize: "1.5em"
                    }
                })), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, "(space)")), a.createElement("div", {
                    style: {
                        display: "inline-block",
                        marginLeft: 5
                    }
                }, a.createElement("button", {
                    "aria-label": "show sentence",
                    className: "btn btn-default btn-lg",
                    id: "listening-control-sentence-btn",
                    onClick: () => this.setState({
                        playComplete: !0
                    }),
                    style: {
                        width: 120
                    }
                }, a.createElement(l.default, {
                    name: "eye-open",
                    style: {
                        fontSize: "1.5em"
                    }
                })), a.createElement("small", {
                    style: {
                        display: "block"
                    }
                }, "(enter)"))))
            }
        }
    },
    19782: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    options: []
                }
            }
            componentDidMount() {
                this.setState({
                    options: this.getOptions()
                })
            }
            componentDidUpdate(e) {
                this.props.sentenceIndex !== e.sentenceIndex && this.setState({
                    options: this.getOptions()
                })
            }
            getOptions() {
                const {actualAnswer: e, currentSentence: t, options: n} = this.props;
                let a = n.slice(0).sort((function() {
                    return .5 - Math.random()
                }
                ));
                for (let l = 0, s = a.length; l < s; l++)
                    a[l] = a[l].toLowerCase();
                return a = a.filter((t => t !== e.toLowerCase())),
                a < 4 ? a = a.concat([e]).sort() : (a = a.slice(0, 3),
                a.splice(Math.floor(4 * Math.random()), 0, e)),
                e.toUpperCase()[0] === e[0] && (a = a.map((function(e) {
                    return e.charAt(0).toUpperCase() + e.slice(1)
                }
                ))),
                a
            }
            getAnsweredOptionClassNames(e) {
                const {answered: t, answerSubmitted: n, correct: a, actualAnswer: l} = this.props;
                return t ? e === l ? "correct" : e !== n || a ? "wrong" : "wrong incorrect" : ""
            }
            clickOptionAtIndex(e) {
                const {options: t} = this.state;
                this.props.onOptionClick(t[e])
            }
            renderButtonColumn({o: e, i: t}) {
                return a.createElement("div", {
                    key: e + t,
                    className: "col-xs-12 col-sm-4" + (t % 2 === 0 ? " col-sm-offset-2" : "")
                }, a.createElement("button", {
                    className: "btn btn-block btn-lg btn-default option " + this.getAnsweredOptionClassNames(e),
                    onClick: () => this.props.onOptionClick(e),
                    style: this.props.targetLanguageCode.match(/cmn|yue/) && {
                        fontWeight: "normal"
                    }
                }, !this.props.answered && a.createElement("small", {
                    className: "number"
                }, t + 1, ". "), a.createElement("span", {
                    className: "answer"
                }, e)))
            }
            renderClickableOptions() {
                const {answered: e, onClickableOptionClick: t} = this.props
                  , {options: n} = this.state;
                return e ? a.createElement("div", {
                    className: "text-center"
                }, a.createElement("small", {
                    style: {
                        marginRight: 4
                    }
                }, "Learn more:"), n.map((e => a.createElement("button", {
                    className: "btn btn-sm btn-link",
                    key: e,
                    onClick: () => t(e),
                    style: {
                        margin: "0 4px"
                    }
                }, e)))) : null
            }
            render() {
                const e = this.state.options;
                return a.createElement("div", {
                    className: "multiple-choice row",
                    style: {
                        display: "block"
                    }
                }, e.map(( (t, n) => n % 2 === 1 ? null : a.createElement("div", {
                    className: "row",
                    key: t + n
                }, this.renderButtonColumn({
                    o: t,
                    i: n
                }), !!e[n + 1] && this.renderButtonColumn({
                    o: e[n + 1],
                    i: n + 1
                })))), a.createElement("div", {
                    className: "clearfix"
                }), this.renderClickableOptions())
            }
        }
    },
    60846: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(36460);
        class s extends a.Component {
            render() {
                const {points: e} = this.props;
                return e ? a.createElement(l.default, {
                    delay: 3e3
                }, a.createElement("div", {
                    className: "score current joystix",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "content"
                }, a.createElement("span", {
                    className: "plus"
                }, "+"), a.createElement("span", {
                    className: "value"
                }, e)))) : null
            }
        }
    },
    93491: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(13104);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    modalVisible: !1
                }
            }
            renderModal() {
                if (!this.state.modalVisible)
                    return null;
                const {collectionClozeSentence: e, modalBackdrop: t, url: n} = this.props;
                return a.createElement(l.default, {
                    backdrop: t,
                    collectionClozeSentence: e,
                    onHidden: () => this.setState({
                        modalVisible: !1
                    }),
                    url: n
                })
            }
            render() {
                const {className: e, disabled: t, showText: n, title: l} = this.props;
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    className: e || "report-error btn btn-danger",
                    disabled: t,
                    onClick: () => this.setState({
                        modalVisible: !0
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-flag"
                }), !1 !== n && " Report"), this.renderModal())
            }
        }
    },
    13104: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(21663)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    category: "sentence",
                    feedback: "",
                    submitted: !1,
                    submitting: !1
                }
            }
            renderTatoebaNotice() {
                const {collectionClozeSentence: e} = this.props;
                return e.tatoebaId ? a.createElement("p", {
                    className: "alert alert-info"
                }, "This sentence is originally from Tatoeba. Please ", a.createElement("u", null, a.createElement("strong", null, a.createElement("a", {
                    href: "https://tatoeba.org/eng/sentences/show/" + e.tatoebaId,
                    target: "_blank"
                }, "click here"))), " to update it there.") : null
            }
            onSubmit(e) {
                e.preventDefault();
                const {collectionClozeSentence: t, url: n} = this.props
                  , {category: a, feedback: l} = this.state;
                this.setState({
                    submitting: !0
                }),
                $.ajax({
                    data: {
                        collection_cloze_sentence_error: {
                            category: a,
                            collection_cloze_sentence_id: t.id,
                            feedback: l
                        }
                    },
                    method: "post",
                    url: n
                }).done((e => {
                    this.setState({
                        submitted: !0
                    })
                }
                )).fail(( (e, t, n) => {
                    alert('Oh no! There was an error reporting the error. "' + t + " => " + n + '". Yikes, sorry about that. Please try again and let us know if you see this message again.')
                }
                ))
            }
            renderPleaseIgnore() {
                return a.createElement("p", {
                    className: "alert alert-danger"
                }, a.createElement("strong", null, "Note!"), " If you would like to remove the sentence from your review queue, you can ignore it by clicking the ", a.createElement("span", {
                    className: "glyphicon glyphicon-ban-circle"
                }), " button after answering.")
            }
            renderContent() {
                if (this.state.submitted)
                    return a.createElement(a.Fragment, null, a.createElement("p", {
                        className: "alert alert-success",
                        role: "alert"
                    }, "Thanks for reporting the issue!"), this.renderTatoebaNotice(), this.renderPleaseIgnore());
                const {collectionClozeSentence: e} = this.props
                  , {category: t, feedback: n, submitting: s} = this.state;
                return a.createElement(a.Fragment, null, a.createElement("p", null, "Thanks for your help to improve Clozemaster! You can report any issues here."), this.renderTatoebaNotice(), this.renderPleaseIgnore(), a.createElement("p", null, a.createElement("strong", null, "Text:"), " ", e.text), a.createElement("p", null, a.createElement("strong", null, "Translation:"), " ", e.translation), e.pronunciation && a.createElement("p", null, a.createElement("strong", null, "Pronunciation:"), " ", e.pronunciation), a.createElement("hr", null), a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "category"
                }, "Category"), a.createElement("select", {
                    className: "form-control",
                    name: "category",
                    disabled: s,
                    value: t,
                    onChange: e => this.setState({
                        category: e.target.value
                    })
                }, a.createElement("option", {
                    value: "sentence"
                }, "Sentence"), a.createElement("option", {
                    value: "translation"
                }, "Translation"), e.pronunciation && a.createElement("option", {
                    value: "pronunciation"
                }, "Pronunciation"), a.createElement("option", {
                    value: "other"
                }, "Other"))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "feedback"
                }, "Feedback (optional)"), a.createElement(l.A, {
                    name: "feedback",
                    className: "form-control",
                    disabled: s,
                    value: n,
                    onChange: e => this.setState({
                        feedback: e.target.value
                    })
                })), a.createElement("button", {
                    disabled: s,
                    className: "btn btn-success btn-block joystix"
                }, "Submit")))
            }
            render() {
                const {backdrop: e, onHidden: t} = this.props
                  , {submitted: n} = this.state;
                return a.createElement(s.default, {
                    backdrop: e,
                    footer: a.createElement(r.default, {
                        text: n ? "Close" : "Cancel"
                    }),
                    onHidden: t,
                    size: "small",
                    title: "Report Error"
                }, this.renderContent())
            }
        }
    },
    85964: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(68462)
          , s = n(40727)
          , r = n(40897)
          , o = n(508);
        class i extends a.Component {
            renderContent() {
                const {collectionClozeSentences: e, onEditClick: t, onHidden: n} = this.props;
                return e && e.length ? a.createElement("table", {
                    className: "table"
                }, a.createElement("tbody", null, e.map(( (e, n) => a.createElement("tr", {
                    className: "round-history-sentence",
                    key: e.id + "-" + n
                }, a.createElement("td", {
                    style: {
                        borderTopWidth: 0,
                        fontSize: "1.25em"
                    }
                }, n + 1, "."), a.createElement("td", {
                    style: {
                        borderTopWidth: 0,
                        width: "100%"
                    }
                }, a.createElement("div", {
                    style: {
                        fontSize: "1.25em"
                    }
                }, a.createElement(l.default, {
                    text: e.text
                })), a.createElement("div", null, e.translation)), a.createElement("td", {
                    style: {
                        borderTopWidth: 0
                    }
                }, a.createElement("button", {
                    className: "btn btn-default manage",
                    "data-title": "Manage sentence",
                    onClick: () => t(e),
                    style: {
                        marginLeft: 8
                    }
                }, a.createElement(s.default, {
                    name: "list"
                })))))))) : a.createElement("p", {
                    className: "text-center"
                }, "Sentences you play through will be listed here. Keep going!")
            }
            render() {
                const {onHidden: e} = this.props;
                return a.createElement(r.default, {
                    footer: a.createElement(o.default, null),
                    onHidden: e,
                    title: "Round History"
                }, this.renderContent())
            }
        }
    },
    89025: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return E
            }
        });
        var a = n(96540)
          , l = (n(48318),
        n(65935))
          , s = n(70550)
          , r = n(68462)
          , o = n(84842)
          , i = n(48507)
          , c = n(17162)
          , d = n(28737)
          , u = n(40727)
          , m = n(18152)
          , h = n(93491)
          , g = n(11088)
          , p = n(74885)
          , b = n(58108);
        class f extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    sentenceEditorModalVisible: !1
                }
            }
            componentDidMount() {
                $("body").popover({
                    container: "body",
                    selector: ".collection-progress [data-toggle=popover]"
                })
            }
            renderFavoriteBtn() {
                const {collectionClozeSentence: e, isPro: t, updateSentence: n, updating: l} = this.props;
                return t ? a.createElement("button", {
                    className: "btn btn-default favorite" + (e.favorited ? " active" : ""),
                    disabled: l,
                    onClick: () => n("favorited", !e.favorited),
                    title: "Toggle favorite"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-star" + (e.favorited ? "" : "-empty")
                })) : a.createElement("button", {
                    disabled: l,
                    className: "btn btn-default favorite",
                    title: "Favorite sentence",
                    "data-toggle": "modal",
                    "data-target": "#favorite-pro-promo-modal",
                    title: "Toggle favorite"
                }, a.createElement(u.default, {
                    name: "star-empty"
                }))
            }
            renderAudioBtn() {
                const {collectionClozeSentence: e, isTtsAvailable: t, playTts: n, updating: l} = this.props;
                return t(e) ? a.createElement("button", {
                    disabled: l,
                    className: "btn btn-default audio",
                    onClick: () => n({
                        sentence: e
                    }),
                    title: "Play sentence audio"
                }, a.createElement(u.default, {
                    name: "volume-up"
                })) : null
            }
            renderControls() {
                const {baseLanguageEnglishName: e, collectionClozeSentence: t, collectionsUrl: n, isPro: s, isReportable: r, isSignedIn: o, nextReviewByLevel: i, reportErrorUrl: d, targetLanguageEnglishName: m, targetLanguageName: g, updateSentence: p, updating: b} = this.props;
                return o ? a.createElement("div", {
                    className: "sentence-controls text-right"
                }, a.createElement("div", {
                    className: "btn-group btn-group-sm",
                    role: "group",
                    "aria-label": "Sentence controls"
                }, this.renderAudioBtn(), a.createElement("button", {
                    disabled: b,
                    className: "btn btn-default edit-sentence",
                    onClick: () => this.setState({
                        sentenceEditorModalVisible: !0
                    }),
                    title: "Edit sentence"
                }, a.createElement(u.default, {
                    name: "pencil"
                })), this.renderFavoriteBtn(), a.createElement("button", {
                    className: "btn btn-default ignore" + (t.ignored ? " active" : ""),
                    disabled: b,
                    onClick: () => p("ignored", !t.ignored),
                    title: "Toggle ignore"
                }, a.createElement(u.default, {
                    name: "ban-circle"
                }))), a.createElement("br", null), a.createElement("div", {
                    className: "btn-group btn-group-sm",
                    role: "group",
                    "aria-label": "More sentence controls",
                    style: {
                        marginTop: 10
                    }
                }, this.renderTokensBtn(), a.createElement(l.default, {
                    className: "btn btn-default add-sentence-to-collection",
                    collectionClozeSentence: t,
                    collectionsUrl: n,
                    copyable: !0,
                    isPro: s,
                    nextReviewByLevel: i,
                    text: !1,
                    title: "Add sentence to collection"
                }), a.createElement(c.default, {
                    baseLanguageEnglishName: e,
                    className: "btn btn-default discussion",
                    clozeSentence: t,
                    disabled: b,
                    isPro: s,
                    targetLanguageEnglishName: m,
                    targetLanguageName: g,
                    title: "Discussion"
                }), r && a.createElement(h.default, {
                    className: "btn btn-default report-error",
                    collectionClozeSentence: t,
                    disabled: b,
                    title: "Report error",
                    url: t.collectionClozeSentencesErrorUrl || d
                }))) : null
            }
            renderSentenceEditorModal() {
                if (!this.state.sentenceEditorModalVisible)
                    return null;
                const {collectionClozeSentence: e, collectionClozeSentencesUpsertUrl: t, isPro: n, isTextEditable: l, nextReviewByLevel: s, onUpdate: r} = this.props;
                return a.createElement(o.default, {
                    isPro: n,
                    isTextEditable: l,
                    nextReviewByLevel: s,
                    onHidden: () => this.setState({
                        sentenceEditorModalVisible: !1
                    }),
                    onUpdate: e => r(e),
                    ref: e => this.sentenceEditorModal = e,
                    sentence: e,
                    upsertUrl: e.collectionClozeSentencesUpsertUrl || t
                })
            }
            renderTokensBtn() {
                const {collectionClozeSentence: e} = this.props;
                if (!e.tokensCount)
                    return null;
                const {tokensVisible: t} = this.state
                  , {updateHasShownTokens: n} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default toggle-tokens",
                    onClick: () => this.setState({
                        tokensVisible: !t
                    }, ( () => {
                        this.hasShownTokens && n(),
                        this.hasShownTokens = !0
                    }
                    )),
                    title: "Toggle grammar"
                }, a.createElement(u.default, {
                    name: "chevron-" + (t ? "up" : "down")
                }))
            }
            renderTokens() {
                if (!this.state.tokensVisible)
                    return null;
                const {collectionClozeSentence: e, hasShownTokens: t, isPro: n, targetLanguageCode: l, targetLanguageIso: s, tokensUrl: r} = this.props;
                return !n && t ? a.createElement("div", {
                    className: "alert alert-success text-center",
                    style: {
                        clear: "both",
                        margin: "10px 0 5px"
                    }
                }, a.createElement("p", {
                    style: {
                        fontWeight: "bold",
                        marginBottom: 10
                    }
                }, "Get full access to sentence grammar with Clozemaster Pro - subscribe today and get fluent faster!"), a.createElement("p", null, a.createElement("a", {
                    className: "btn btn-success joystix",
                    href: "/pro"
                }, "Get Pro!"))) : a.createElement("div", {
                    className: "scrollbar-always-visible",
                    style: {
                        overflowY: "scroll",
                        textAlign: "center",
                        whiteSpace: "nowrap",
                        width: "100%"
                    }
                }, a.createElement(p.default, {
                    targetLanguageCode: l,
                    targetLanguageIso: s,
                    tokenizeableId: e.id,
                    tokenizeableType: "CollectionClozeSentence",
                    url: r || e.tokensUrl
                }))
            }
            render() {
                const {collectionClozeSentence: e} = this.props;
                return a.createElement("tr", {
                    className: "round-result-sentence"
                }, a.createElement("td", null, a.createElement("div", {
                    className: "pull-right",
                    style: {
                        marginLeft: 10
                    }
                }, this.renderControls()), a.createElement("div", {
                    style: {
                        fontSize: "2rem"
                    }
                }, a.createElement(r.default, {
                    text: e.text
                })), this.renderTokens(), a.createElement("div", null, a.createElement("small", null, e.translation)), this.renderSentenceEditorModal()))
            }
        }
        class E extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collectionClozeSentences: e.collectionClozeSentences,
                    loadingLanguagePairingStats: !0
                }
            }
            componentDidMount() {
                this.props.playSoundEffect(),
                this.props.isSignedIn && this.loadLanguagePairingStats()
            }
            loadLanguagePairingStats() {
                this.setState({
                    loadingLanguagePairingStats: !0
                });
                const e = this.isReviewScope() ? {} : {
                    collection_id: this.props.collectionId
                };
                $.ajax({
                    data: e,
                    url: this.props.languagePairingUrl
                }).done((e => {
                    console.log("loadLanguagePairingStats", e);
                    const {baseLanguageFlagIso: t, currentLevelPoints: n, currentWeekLeaderboardRank: a, dailyGoalHoursLeftToday: l, dailyGoalPointsPerDay: s, dailyGoalStreak: r, daysPlayedCount: o, level: i, nextLevelPoints: c, numPointsToday: d, pointsToNextCurrentWeekLeaderboardRank: u, prevWeekLeaderboardRank: m, progressPerChunk: h, score: g, showDaysPlayedInsteadOfStreak: p, targetLanguageFlagIso: b, useProgressChunks: f} = e.languagePairing
                      , E = e.collections.filter((e => e.numReadyForReview > 0));
                    let y = {};
                    if (this.props.collectionId) {
                        const t = e.collections.find((e => e.id === this.props.collectionId));
                        y = {
                            collectionName: t.name,
                            collectionNumMastered: t.numMastered,
                            collectionNumPlaying: t.numPlaying,
                            collectionNumReadyForReview: t.numReadyForReview,
                            collectionNumSentences: t.numSentences,
                            collectionSlug: t.slug,
                            nextCollectionToReview: E[0] && E[0].slug
                        }
                    }
                    this.setState(Object.assign(y, {
                        baseLanguageFlagIso: t,
                        collectionsReadyForReview: E,
                        currentLevelPoints: n,
                        currentWeekLeaderboardRank: a,
                        dailyGoalHoursLeftToday: l,
                        dailyGoalPointsPerDay: s,
                        dailyGoalStreak: r,
                        daysPlayedCount: o,
                        level: i,
                        loadingLanguagePairingStats: !1,
                        nextLevelPoints: c,
                        numPointsToday: d,
                        pointsToNextCurrentWeekLeaderboardRank: u,
                        prevWeekLeaderboardRank: m,
                        progressPerChunk: h,
                        score: g,
                        showDaysPlayedInsteadOfStreak: p,
                        targetLanguageFlagIso: b,
                        useProgressChunks: f
                    }))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the latest stats. Sorry about that. Please let us know if you see this message again.")
                }
                ))
            }
            renderStats() {
                const {elapsedTime: e, isTeachingCollection: t, numCorrect: n, numIncorrect: l, numNew: s, numReview: r, score: o} = this.props;
                return a.createElement("div", null, a.createElement("h2", {
                    className: "joystix text-center"
                }, "Stats:"), a.createElement("table", {
                    className: "table table-striped text-center stats",
                    style: {
                        marginBottom: 0
                    }
                }, a.createElement("tbody", null, a.createElement("tr", null, a.createElement("td", {
                    className: "score"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Score:"), " ", a.createElement("span", {
                    className: "value"
                }, "+", o)), a.createElement("td", {
                    className: "time"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Time:"), " ", a.createElement("span", {
                    className: "value"
                }, Math.floor(e / 60), ":", e % 60 < 10 ? "0" : "", e % 60))), !t && a.createElement("tr", null, a.createElement("td", {
                    className: "new"
                }, a.createElement("span", {
                    className: "joystix"
                }, "New:"), " ", a.createElement("span", {
                    className: "value"
                }, s)), a.createElement("td", {
                    className: "review"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Review:"), " ", a.createElement("span", {
                    className: "value"
                }, r))), a.createElement("tr", null, a.createElement("td", {
                    className: "correct"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Correct:"), " ", a.createElement("span", {
                    className: "value"
                }, n)), a.createElement("td", {
                    className: "incorrect"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Incorrect:"), " ", a.createElement("span", {
                    className: "value"
                }, l))))))
            }
            goToNextCollectionToReview() {
                window.location = window.location.toString().replace("collections/" + this.state.collectionSlug, "collections/" + this.state.nextCollectionToReview)
            }
            renderNextRoundBtn() {
                if (this.props.isTeachingCollection)
                    return a.createElement("a", {
                        className: "btn btn-success joystix btn-block btn-lg",
                        href: ""
                    }, "Play Again ", a.createElement(u.default, {
                        name: "repeat"
                    }));
                if (!this.isReviewScope() || this.state.loadingLanguagePairingStats)
                    return a.createElement("button", {
                        className: "btn btn-success joystix btn-block btn-lg",
                        disabled: this.props.isSignedIn && this.state.loadingLanguagePairingStats,
                        onClick: this.props.onNextRound
                    }, "Continue ", a.createElement(u.default, {
                        name: "chevron-right"
                    }));
                const {collectionNumReadyForReview: e, collectionsReadyForReview: t, nextCollectionToReview: n} = this.state;
                return e ? a.createElement("button", {
                    className: "btn btn-primary joystix btn-block btn-lg",
                    onClick: this.props.onNextRound
                }, "Continue (", e, ") ", a.createElement(u.default, {
                    name: "chevron-right"
                })) : !this.props.collectionId && t.length ? a.createElement("button", {
                    className: "btn btn-primary joystix btn-block btn-lg",
                    onClick: this.props.onNextRound
                }, "Continue (", t.reduce(( (e, t) => e + t.numReadyForReview), 0), ") ", a.createElement(u.default, {
                    name: "chevron-right"
                })) : t.length ? a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("select", {
                    name: "next_collection_to_review",
                    className: "form-control input-lg",
                    value: n,
                    onChange: e => this.setState({
                        nextCollectionToReview: e.target.value
                    })
                }, t.map((e => a.createElement("option", {
                    key: e.id,
                    value: e.slug
                }, e.name, " (", e.numReadyForReview, ")"))))), a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("button", {
                    className: "btn btn-primary joystix btn-block btn-lg",
                    onClick: () => this.goToNextCollectionToReview()
                }, "Review ", a.createElement(u.default, {
                    name: "chevron-right"
                })))) : a.createElement("div", {
                    className: "text-center joystix"
                }, "No more sentences ready for review! \ud83d\ude4c")
            }
            renderControls() {
                const {isPro: e, languagePairingWebUrl: t, onboarding: n} = this.props
                  , l = n && !e ? "/welcome-pro" : t || "/dashboard";
                return a.createElement("div", {
                    className: "row",
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("div", {
                    className: "col-xs-6"
                }, a.createElement("a", {
                    href: l,
                    className: "btn btn-default joystix btn-block btn-lg"
                }, a.createElement(u.default, {
                    name: "chevron-left"
                }), " Dashboard")), a.createElement("div", {
                    className: "col-xs-6"
                }, this.renderNextRoundBtn()))
            }
            renderDailyGoal() {
                const {dailyGoalHoursLeftToday: e, numPointsToday: t, dailyGoalPointsPerDay: n, dailyGoalStreak: l, loadingLanguagePairingStats: s} = this.state;
                return s ? null : n ? a.createElement("div", {
                    className: "text-center"
                }, a.createElement("h2", {
                    className: "joystix"
                }, "Daily Goal:"), a.createElement(i.default, {
                    hoursLeftToday: e,
                    numPointsToday: t,
                    pointsPerDay: n,
                    streak: l,
                    style: {
                        display: "inline-block"
                    }
                })) : null
            }
            renderCollectionProgress() {
                if (!this.props.collectionId)
                    return null;
                const {startingNumMastered: e, startingNumPlaying: t, startingNumReadyForReview: n} = this.props
                  , {collectionName: l, collectionNumMastered: r, collectionNumPlaying: o, collectionNumReadyForReview: i, collectionNumSentences: c, progressPerChunk: d, useProgressChunks: m} = this.state
                  , h = r - e
                  , g = o - t
                  , p = i - n
                  , f = (0,
                b.Xc)(r, c)
                  , E = (0,
                b.Xc)(o, c);
                return a.createElement("div", {
                    className: "panel panel-default collection-progress"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, l), a.createElement("ul", {
                    className: "list-group"
                }, a.createElement("li", {
                    className: "list-group-item"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Playing: ", o.toLocaleString(), " / ", c.toLocaleString(), g > 0 ? a.createElement("span", {
                    className: "stat-change"
                }, "+", g) : null), a.createElement("br", null), g > 0 ? a.createElement(a.Fragment, null, (0,
                b.Xc)(t, c), a.createElement("span", {
                    style: {
                        marginLeft: 4,
                        marginRight: 4
                    }
                }, a.createElement(u.default, {
                    name: "arrow-right"
                }))) : null, E, !!m && a.createElement(s.default, {
                    includePopoverHelperBtn: !0,
                    num: o,
                    pct: E,
                    perChunk: d,
                    style: {
                        marginTop: 2
                    },
                    total: c,
                    type: "playing"
                })), a.createElement("li", {
                    className: "list-group-item"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Mastered: ", r.toLocaleString(), " / ", c.toLocaleString(), h > 0 ? a.createElement("span", {
                    className: "stat-change"
                }, "+", h) : null), a.createElement("br", null), h > 0 ? a.createElement(a.Fragment, null, (0,
                b.Xc)(e, c), a.createElement("span", {
                    style: {
                        marginLeft: 4,
                        marginRight: 4
                    }
                }, a.createElement(u.default, {
                    name: "arrow-right"
                }))) : null, f, !!m && a.createElement(s.default, {
                    num: r,
                    pct: f,
                    perChunk: d,
                    style: {
                        marginTop: 2
                    },
                    total: c,
                    type: "mastered"
                })), a.createElement("li", {
                    className: "list-group-item"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Ready for Review: ", i, p > 0 ? a.createElement("span", {
                    className: "stat-change"
                }, "-", p) : null))))
            }
            renderLeveledUpIndicator() {
                if (this.props.leveledUp)
                    return a.createElement("span", {
                        className: "leveled-up-indicator",
                        style: {
                            color: "#5cb85c",
                            paddingLeft: 10
                        }
                    }, "\u2b06\ud83c\udf89\ud83d\ude4c")
            }
            renderProgress() {
                const {baseLanguageFlagIso: e, currentLevelPoints: t, currentWeekLeaderboardRank: n, level: l, loadingLanguagePairingStats: s, nextLevelPoints: r, pointsToNextCurrentWeekLeaderboardRank: o, prevWeekLeaderboardRank: i, score: c, targetLanguageFlagIso: m} = this.state;
                if (s)
                    return null;
                let h = null;
                if (1 === n)
                    h = a.createElement("span", {
                        style: {
                            marginLeft: 6
                        }
                    }, "\ud83c\udfc6");
                else if (n && n > 1 && o) {
                    const e = n - 1;
                    h = a.createElement("small", null, a.createElement("br", null), "(", o.toLocaleString(), " points to ", e, a.createElement("sup", null, (0,
                    b.fG)(e)), ")")
                }
                let g = null;
                if (i) {
                    const e = n > i;
                    g = a.createElement("span", {
                        "data-toggle": "tooltip",
                        title: "Ranked " + i + " last week"
                    }, a.createElement(u.default, {
                        name: "arrow-" + (e ? "up" : "down")
                    }))
                }
                return a.createElement("div", {
                    className: "text-center"
                }, a.createElement("h2", {
                    className: "joystix"
                }, "Progress:"), this.renderCollectionProgress(), a.createElement("div", {
                    className: "panel panel-default"
                }, a.createElement("div", {
                    className: "panel-heading joystix"
                }, a.createElement(d.default, {
                    flagIso: m,
                    size: 24
                }), " / ", a.createElement(d.default, {
                    flagIso: e,
                    size: 24
                })), a.createElement("ul", {
                    className: "list-group"
                }, a.createElement("li", {
                    className: "list-group-item"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Level: ", l, this.renderLeveledUpIndicator()), a.createElement("br", null), a.createElement("div", {
                    className: "progress",
                    style: {
                        height: 10,
                        marginBottom: 4
                    }
                }, a.createElement("div", {
                    "aria-valuemax": "100",
                    "aria-valuemin": "0",
                    className: "progress-bar progress-bar-success",
                    role: "progressbar",
                    style: {
                        width: (c - t) / (r - t) * 100 + "%"
                    }
                })), (r - c).toLocaleString(), " points to level ", l + 1, " - keep going!"), !!n && a.createElement("li", {
                    className: "list-group-item"
                }, a.createElement("span", {
                    className: "joystix"
                }, "Ranked: ", n, a.createElement("sup", null, (0,
                b.fG)(n)), g, " this week"), h))))
            }
            renderProPromo() {
                return !this.props.isSignedIn || this.props.isPro ? null : a.createElement("div", {
                    className: "panel panel-default",
                    style: {
                        marginTop: 20
                    }
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("p", {
                    className: "text-center",
                    style: {
                        fontSize: "1.5em"
                    }
                }, "Get fluent faster."), a.createElement("a", {
                    href: "/pro",
                    className: "btn btn-block btn-lg pro-promo joystix"
                }, "Get ", a.createElement("span", {
                    className: "hidden-xs"
                }, "Clozemaster Pro"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))
            }
            renderSignUpPromo() {
                if (this.props.isSignedIn)
                    return null;
                let e = "Save your progress!";
                return this.props.isTeachingCollection && (e = "Get fluent faster with Clozemaster!"),
                a.createElement("div", {
                    className: "panel panel-default",
                    style: {
                        marginTop: 20
                    }
                }, a.createElement("div", {
                    className: "panel-body"
                }, a.createElement("p", {
                    className: "text-center",
                    style: {
                        fontSize: "1.5em"
                    }
                }, e), a.createElement("a", {
                    href: "/pro",
                    className: "btn btn-block btn-lg btn-success joystix"
                }, "Sign Up ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))
            }
            renderTeachingCollectionResultsForm() {
                if (!this.props.isTeachingCollection)
                    return null;
                if ("false" === new URLSearchParams(window.location.search).get("results"))
                    return null;
                const {answerTape: e, elapsedTime: t, numCorrect: n, numIncorrect: l, score: s} = this.props
                  , r = {
                    answerTape: e,
                    elapsedTime: t,
                    numCorrect: n,
                    numIncorrect: l,
                    score: s
                };
                return a.createElement(m.default, null, a.createElement(g.default, {
                    stats: r,
                    teachingCollectionResultsUrl: this.props.teachingCollectionResultsUrl
                }))
            }
            mergeUpdatedCollectionClozeSentence(e) {
                const t = JSON.parse(JSON.stringify(this.state.collectionClozeSentences));
                for (let n = 0, a = t.length; n < a; n++)
                    if (t[n].id === e.id) {
                        t[n] = e;
                        break
                    }
                this.setState({
                    collectionClozeSentences: t
                })
            }
            renderSentences() {
                const {collectionClozeSentences: e} = this.state
                  , t = e.map((e => a.createElement(f, {
                    baseLanguageEnglishName: this.props.baseLanguageEnglishName,
                    collectionClozeSentence: e,
                    collectionClozeSentencesUpsertUrl: this.props.collectionClozeSentencesUpsertUrl,
                    collectionsUrl: this.props.collectionsUrl,
                    hasShownTokens: this.props.hasShownTokens,
                    isPro: this.props.isPro,
                    isReportable: !this.props.isCollectionEditable,
                    isSignedIn: this.props.isSignedIn,
                    isTextEditable: this.props.isCollectionEditable,
                    isTtsAvailable: this.props.isTtsAvailable,
                    key: e.id,
                    nextReviewByLevel: this.props.nextReviewByLevel,
                    updateHasShownTokens: this.props.updateHasShownTokens,
                    onUpdate: e => this.mergeUpdatedCollectionClozeSentence(e),
                    playTts: this.props.playTts,
                    reportErrorUrl: this.props.reportErrorUrl,
                    targetLanguageCode: this.props.targetLanguageCode,
                    targetLanguageEnglishName: this.props.targetLanguageEnglishName,
                    targetLanguageIso: this.props.targetLanguageIso,
                    targetLanguageName: this.props.targetLanguageName,
                    tokensUrl: this.props.tokensUrl,
                    updateSentence: (t, n) => {
                        this.props.updateSentence({
                            sentence: e,
                            attr: t,
                            value: n,
                            callback: () => {
                                e[t] = n,
                                this.mergeUpdatedCollectionClozeSentence(e)
                            }
                        })
                    }
                    ,
                    update: this.props.updating
                })));
                return a.createElement("div", null, a.createElement("h2", {
                    className: "joystix text-center"
                }, "Sentences:"), a.createElement("table", {
                    className: "table table-striped",
                    style: {
                        marginBottom: 0,
                        tableLayout: "fixed"
                    }
                }, a.createElement("tbody", null, t)))
            }
            isReviewScope() {
                return "ready_for_review" === this.props.scope
            }
            render() {
                const {numCorrect: e, numIncorrect: t, score: n} = this.props;
                return a.createElement("div", {
                    className: "done round-complete",
                    style: {
                        display: "block"
                    }
                }, this.renderControls(), a.createElement("div", {
                    className: "container-fluid"
                }, a.createElement("div", {
                    className: "panel panel-" + (this.isReviewScope() ? "primary" : "success") + " results",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "panel-heading joystix text-center"
                }, "Round Results"), a.createElement("div", {
                    className: "panel-body container-fluid"
                }, this.renderStats(), this.renderProPromo(), this.renderSignUpPromo(), this.renderTeachingCollectionResultsForm(), this.renderDailyGoal(), this.renderProgress(), this.renderSentences()))), this.renderControls())
            }
        }
    },
    23314: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l() {
            return a.createElement("div", null, a.createElement("table", {
                className: "table table-striped"
            }, a.createElement("tbody", null, a.createElement("tr", null, a.createElement("td", null, "Enter"), a.createElement("td", {
                className: "text-left"
            }, "Submit answer, next sentence, next round")), a.createElement("tr", null, a.createElement("td", null, "1-4"), a.createElement("td", {
                className: "text-left"
            }, "Select multiple choice answer")), a.createElement("tr", null, a.createElement("td", null, "ctl+Space"), a.createElement("td", {
                className: "text-left"
            }, "Replay audio (when available)")), a.createElement("tr", null, a.createElement("td", null, "ctl+Enter"), a.createElement("td", {
                className: "text-left"
            }, "Record audio (for speaking)")), a.createElement("tr", null, a.createElement("td", null, "alt+a"), a.createElement("td", {
                className: "text-left"
            }, "Add current sentence to a collection  ", a.createElement("small", {
                className: "joystix"
            }, a.createElement("em", null, "Pro!")))), a.createElement("tr", null, a.createElement("td", null, "alt+c"), a.createElement("td", {
                className: "text-left"
            }, "Open collection search ", a.createElement("small", {
                className: "joystix"
            }, a.createElement("em", null, "Pro!")))), a.createElement("tr", null, a.createElement("td", null, "alt+d"), a.createElement("td", {
                className: "text-left"
            }, "Edit current sentence ", a.createElement("small", {
                className: "joystix"
            }, a.createElement("em", null, "Pro!")))), a.createElement("tr", null, a.createElement("td", null, "alt+g"), a.createElement("td", {
                className: "text-left"
            }, "Toggle grammar after answering (when available)")), a.createElement("tr", null, a.createElement("td", null, "alt+e"), a.createElement("td", {
                className: "text-left"
            }, "Report current sentence error")), a.createElement("tr", null, a.createElement("td", null, "alt+f"), a.createElement("td", {
                className: "text-left"
            }, "Toggle favorite ", a.createElement("small", {
                className: "joystix"
            }, a.createElement("em", null, "Pro!")))), a.createElement("tr", null, a.createElement("td", null, "alt+h"), a.createElement("td", {
                className: "text-left"
            }, "Use hint when playing text input")), a.createElement("tr", null, a.createElement("td", null, "alt+i"), a.createElement("td", {
                className: "text-left"
            }, "Ignore current sentence")), a.createElement("tr", null, a.createElement("td", null, "alt+k"), a.createElement("td", {
                className: "text-left"
            }, "Mark current sentence as 'Known' (100% Mastered and next review year 2100)")), a.createElement("tr", null, a.createElement("td", null, "alt+m"), a.createElement("td", {
                className: "text-left"
            }, "Set current sentence to '100% Mastered'")), a.createElement("tr", null, a.createElement("td", null, "alt+p"), a.createElement("td", {
                className: "text-left"
            }, "Switch current sentence to multiple choice")), a.createElement("tr", null, a.createElement("td", null, "alt+r"), a.createElement("td", {
                className: "text-left"
            }, "Reset current sentence to '0% Mastered'")), a.createElement("tr", null, a.createElement("td", null, "alt+s"), a.createElement("td", {
                className: "text-left"
            }, "Open sentence search ", a.createElement("small", {
                className: "joystix"
            }, a.createElement("em", null, "Pro!")))), a.createElement("tr", null, a.createElement("td", null, "alt+t"), a.createElement("td", {
                className: "text-left"
            }, "Toggle translation")), a.createElement("tr", null, a.createElement("td", null, "alt+u"), a.createElement("td", {
                className: "text-left"
            }, "Open sentence discussion ", a.createElement("small", {
                className: "joystix"
            }, a.createElement("em", null, "Pro!")))), a.createElement("tr", null, a.createElement("td", null, "alt+x"), a.createElement("td", {
                className: "text-left"
            }, "Toggle image (if available)")), a.createElement("tr", null, a.createElement("td", null, "shift+alt+x"), a.createElement("td", {
                className: "text-left"
            }, "Toggle explanation (if available)")), a.createElement("tr", null, a.createElement("td", null, "alt+y"), a.createElement("td", {
                className: "text-left"
            }, "Open round history")))), a.createElement("em", null, a.createElement("small", null, "*Different browsers may handle shortcut keys differently. Please let us know if you notice any issues.")))
        }
    },
    11088: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    name: "",
                    submitted: !1,
                    submitting: !1
                }
            }
            onTeachingCollectionResultSubmit(e) {
                return e.preventDefault(),
                !!this.state.name && (this.setState({
                    submitting: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        teaching_collection_result: {
                            name: this.state.name,
                            stats: this.props.stats
                        }
                    }),
                    method: "post",
                    url: this.props.teachingCollectionResultsUrl
                }).done((e => {
                    this.setState({
                        submitted: !0
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error sending your results. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        submitting: !1
                    })
                }
                )),
                !1)
            }
            render() {
                return a.createElement("form", {
                    onSubmit: e => this.onTeachingCollectionResultSubmit(e)
                }, a.createElement("p", null, "This is a Teaching Collection. Enter your name below if you want to let the collection creator know how you did!"), this.state.submitted && a.createElement("p", {
                    className: "alert alert-success text-center"
                }, a.createElement("strong", null, "\ud83c\udf89 Sent! \ud83c\udf89")), !this.state.submitted && a.createElement("div", null, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "teaching_collection_result[name]"
                }, "Name"), a.createElement("input", {
                    className: "form-control",
                    disabled: this.state.submitting || this.state.submitted,
                    name: "teaching_collection_result[name]",
                    onChange: e => this.setState({
                        name: e.target.value.substring(0, 255)
                    }),
                    type: "text",
                    value: this.state.name
                })), a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    disabled: this.state.submitting || this.state.submitted
                }, "Submit")))
            }
        }
    },
    75148: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            renderToggle() {
                return a.createElement("div", {
                    className: "subgroup text-to-speech-option"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Auto-Play:"), a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "Text-to-speech auto-play"
                }, this.props.renderBtnGroupBtn("textToSpeech", "on", this.props.textToSpeech, "On"), this.props.renderBtnGroupBtn("textToSpeech", "off", this.props.textToSpeech, "Off")))
            }
            renderLoopingToggle() {
                return a.createElement("div", {
                    className: "subgroup text-to-speech-option"
                }, a.createElement("div", {
                    className: "header"
                }, a.createElement("div", {
                    className: "joystix"
                }, "Loop:"), a.createElement("small", null, "(sentence audio will play on repeat for chorusing)")), a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "Text-to-speech looping"
                }, this.props.renderBtnGroupBtn("textToSpeechLooping", "on", this.props.textToSpeechLooping, "On"), this.props.renderBtnGroupBtn("textToSpeechLooping", "off", this.props.textToSpeechLooping, "Off")))
            }
            renderSystemVoices() {
                return this.props.clozemasterTtsAvailable && "on" === this.props.clozemasterTextToSpeech ? null : this.props.systemTtsAvailable ? a.createElement("div", {
                    className: "subgroup text-to-speech-option"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "System Voice:"), a.createElement("select", {
                    className: "form-control",
                    name: "system_voice",
                    value: this.props.textToSpeechVoice,
                    onChange: e => this.props.onVoiceSelected(e.target.value)
                }, a.createElement("option", {
                    value: "random"
                }, "Random"), this.props.systemTtsVoices.map((e => a.createElement("option", {
                    value: e.name,
                    key: e.voiceURI || e.name
                }, e.lang, " ", e.id, " ", e.name))))) : null
            }
            renderControls() {
                return this.props.clozemasterTtsAvailable || this.props.systemTtsAvailable ? a.createElement(a.Fragment, null, this.renderToggle(), this.renderLoopingToggle(), this.renderClozemasterTtsToggle(), this.renderSystemVoices(), this.renderSpeedControl()) : a.createElement("div", {
                    className: "no-voices"
                }, a.createElement("em", null, "There are currently no voices available for ", this.props.targetLanguageName, " on your browser/device. Text-to-speech works best on Chrome and Safari for desktop."))
            }
            renderClozemasterTtsToggle() {
                return this.props.clozemasterTtsAvailable && this.props.systemTtsAvailable ? a.createElement("div", {
                    className: "subgroup use-clozemaster-voice"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Use Clozemaster Voice:"), a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "Use Clozemaster text-to-speech"
                }, this.props.renderBtnGroupBtn("clozemasterTextToSpeech", "on", this.props.clozemasterTextToSpeech, "On"), this.props.renderBtnGroupBtn("clozemasterTextToSpeech", "off", this.props.clozemasterTextToSpeech, "Off"))) : null
            }
            renderSpeedControl() {
                const e = parseFloat(this.props.textToSpeechSpeed);
                return a.createElement("div", {
                    className: "subgroup text-to-speech-option",
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Speed:"), a.createElement("div", {
                    className: "text-to-speech-speed"
                }, a.createElement("div", {
                    className: "btn-group",
                    "data-toggle": "buttons",
                    "aria-label": "Text-to-speech speed"
                }, [.5, .75, 1, 1.25, 1.5, 2].map((t => this.props.renderBtnGroupBtn("textToSpeechSpeed", t, e, t + "x"))))))
            }
            render() {
                return a.createElement("div", {
                    className: "group text-to-speech"
                }, a.createElement("div", {
                    className: "header joystix"
                }, "Text-to-Speech"), this.renderControls())
            }
        }
    },
    74885: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(33829)
          , s = n(73898)
          , r = n(46402);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.id = `tokens-${(0,
                l.A)()}`,
                this.state = {
                    loading: !0
                }
            }
            componentDidMount() {
                this.loadTokens()
            }
            componentDidUpdate(e, t) {
                const {loading: n, tokens: a} = this.state;
                t.loading && !n && a && a.length && $(`#${this.id} [data-toggle=popover]`).popover()
            }
            componentWillUnmount() {
                $(`#${this.id} [data-toggle=popover]`).popover("destroy")
            }
            loadTokens() {
                const {tokenizeableId: e, tokenizeableType: t, url: n} = this.props;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        tokenizeable_id: e,
                        tokenizeable_type: t
                    },
                    url: n
                }).done((e => {
                    console.log(e);
                    const {tokens: t} = e;
                    this.setState({
                        loading: !1,
                        tokens: t
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the tokens. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderMorphologicalFeatures(e) {
                if (!e.morphologicalFeatures || !e.morphologicalFeatures.length)
                    return null;
                const {onClick: t} = this.props;
                return a.createElement("div", null, a.createElement("a", {
                    tabIndex: "0",
                    className: "btn btn-default btn-xs",
                    "data-html": "true",
                    "data-content": e.morphologicalFeatures.map((e => `<strong>${e.keyLabel.charAt(0).toUpperCase() + e.keyLabel.slice(1)}:</strong> ${e.valueLabel}`)).join("<br />"),
                    "data-placement": "bottom",
                    "data-toggle": "popover",
                    "data-trigger": "focus",
                    role: "button",
                    style: {
                        marginTop: 10
                    }
                }, "More"))
            }
            renderLemma(e) {
                if (!e.lemma || !e.lemma.text || e.text === e.lemma.text)
                    return null;
                const {onClick: t, targetLanguageCode: n, targetLanguageIso: l} = this.props
                  , s = t ? a.createElement("button", {
                    className: "btn btn-link",
                    onClick: () => t({
                        cloze: e.text,
                        text: e.lemma.text
                    })
                }, e.lemma.text) : a.createElement("span", {
                    style: {
                        display: "inline-block",
                        padding: "6px 12px"
                    }
                }, e.lemma.text);
                return a.createElement("div", null, s, a.createElement("div", null, a.createElement(r.default, {
                    targetLanguageCode: n,
                    targetLanguageIso: l,
                    text: e.lemma.text
                })), !!e.lemma.pronunciation && e.lemma.pronunciation !== e.lemma.text && a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, e.lemma.pronunciation))
            }
            renderTokenText(e) {
                const {onClick: t} = this.props;
                return t ? a.createElement("button", {
                    className: "btn btn-lg btn-link",
                    disabled: e.posTag && "PUNCT" === e.posTag.key,
                    onClick: () => t({
                        text: e.text
                    }),
                    style: {
                        fontWeight: "bold"
                    }
                }, e.text) : a.createElement("strong", {
                    style: {
                        display: "inline-block",
                        padding: "10px 16px",
                        fontSize: 18,
                        lineHeight: 1.33333
                    }
                }, e.text)
            }
            render() {
                const {loading: e, tokens: t} = this.state
                  , {onClick: n, targetLanguageCode: l, targetLanguageIso: o} = this.props;
                return e ? a.createElement(s.default, null) : t && t.length ? a.createElement("div", {
                    className: "tokens",
                    id: this.id,
                    style: {
                        marginBottom: 20
                    }
                }, t.map((e => a.createElement("div", {
                    key: e.id,
                    className: "token",
                    style: {
                        display: "inline-block",
                        margin: "0 2px",
                        verticalAlign: "top"
                    }
                }, a.createElement("div", null, this.renderTokenText(e), (!e.posTag || "PUNCT" !== e.posTag.key) && a.createElement("div", null, a.createElement(r.default, {
                    style: {
                        marginBottom: 10
                    },
                    targetLanguageCode: l,
                    targetLanguageIso: o,
                    text: e.text
                })), !!e.pronunciation && e.pronunciation !== e.text && a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, e.pronunciation)), a.createElement("div", null, !!e.posTag && e.posTag.key), this.renderLemma(e), this.renderMorphologicalFeatures(e))))) : "No tokens found!"
            }
        }
    },
    63014: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return O
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(21663)
          , o = n(58108)
          , i = n(78780)
          , c = n(80931)
          , d = n(84842)
          , u = n(73677)
          , m = n(50964)
          , h = n(15584)
          , g = n(61291)
          , p = (n(36460),
        n(28737))
          , b = n(43302)
          , f = n(45895)
          , E = n(80240)
          , y = n(40727)
          , S = n(52226)
          , v = n(66148)
          , C = n(88622)
          , w = n(33405)
          , x = n(73898)
          , k = n(94870)
          , N = n(40897)
          , T = n(508)
          , P = n(61703)
          , M = n(19782)
          , R = n(60846)
          , L = n(93491)
          , I = n(85964)
          , z = n(89025)
          , U = n(72717)
          , A = n(20997)
          , j = n(74885);
        const D = "full_text_input"
          , F = "multiple_choice"
          , V = "text_input"
          , B = /[!-/:-@[-`{-~\xa1-\xa9\xab-\xac\xae-\xb1\xb4\xb6-\xb8\xbb\xbf\xd7\xf7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u037e\u0384-\u0385\u0387\u03f6\u0482\u055a-\u055f\u0589-\u058a\u05be\u05c0\u05c3\u05c6\u05f3-\u05f4\u0606-\u060f\u061b\u061e-\u061f\u066a-\u066d\u06d4\u06e9\u06fd-\u06fe\u0700-\u070d\u07f6-\u07f9\u0964-\u0965\u0970\u09f2-\u09f3\u09fa\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0cf1-\u0cf2\u0d79\u0df4\u0e3f\u0e4f\u0e5a-\u0e5b\u0f01-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0f3a-\u0f3d\u0f85\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce-\u0fd4\u104a-\u104f\u109e-\u109f\u10fb\u1360-\u1368\u1390-\u1399\u166d-\u166e\u169b-\u169c\u16eb-\u16ed\u1735-\u1736\u17d4-\u17d6\u17d8-\u17db\u1800-\u180a\u1940\u1944-\u1945\u19de-\u19ff\u1a1e-\u1a1f\u1b5a-\u1b6a\u1b74-\u1b7c\u1c3b-\u1c3f\u1c7e-\u1c7f\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd-\u1ffe\u2000-\u206e\u207a-\u207e\u208a-\u208e\u20a0-\u20b5\u2100-\u2101\u2103-\u2106\u2108-\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a-\u213b\u2140-\u2144\u214a-\u214d\u214f\u2190-\u23e7\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u269d\u26a0-\u26bc\u26c0-\u26c3\u2701-\u2704\u2706-\u2709\u270c-\u2727\u2729-\u274b\u274d\u274f-\u2752\u2756\u2758-\u275e\u2761-\u2775\u2794\u2798-\u27af\u27b1-\u27be\u27c0-\u27ca\u27cc\u27d0-\u2b4c\u2b50-\u2b54\u2ce5-\u2cea\u2cf9-\u2cfc\u2cfe-\u2cff\u2e00-\u2e7e\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3000-\u303f\u309b-\u309c\u30a0\u30fb\u3190-\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3243\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua60d-\ua60f\ua673\ua67e\ua700-\ua716\ua720-\ua721\ua789-\ua78a\ua828-\ua82b\ua874-\ua877\ua8ce-\ua8cf\ua92e-\ua92f\ua95f\uaa5c-\uaa5f\ufb29\ufd3e-\ufd3f\ufdfc-\ufdfd\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\uff01-\uff0f\uff1a-\uff20\uff3b-\uff40\uff5b-\uff65\uffe0-\uffe6\uffe8-\uffee\ufffc-\ufffd]|\ud800[\udd00-\udd02\udd37-\udd3f\udd79-\udd89\udd90-\udd9b\uddd0-\uddfc\udf9f\udfd0]|\ud802[\udd1f\udd3f\ude50-\ude58]|\ud809[\udc00-\udc7e]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83-\udd84\udd8c-\udda9\uddae-\udddd\ude00-\ude41\ude45\udf00-\udf56]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud83c[\udc00-\udc2b\udc30-\udc93]/g;
        class O extends a.Component {
            constructor(e) {
                super(e),
                this.state = Object.assign(this.getInitialGameState(), {
                    gameSettings: e.gameSettings || {},
                    hasRunTutorial: e.hasRunTutorial || !!window.localStorage.getItem("hasRunPlayTutorial"),
                    intraRoundAd: e.intraRoundAd,
                    isRunningTutorial: !1,
                    translationVisible: !0
                })
            }
            componentDidMount() {
                this.setupHotkeys(),
                this.initTts(),
                this.initSpeaking(),
                $("body").tooltip({
                    selector: '[data-toggle="tooltip"]'
                }).on("click", (e => {
                    this.state.selectionPopoverId && !$(e.target).parents(".selection-popover, .sentence").length && this.setState({
                        selectionPopoverId: null,
                        selectedSentenceClozeStr: null,
                        selectedSentenceText: null
                    })
                }
                )).on("mouseup", (e => this.handleSelectionOnMouseUp(e))),
                $("footer.footer a").on("click", (function(e) {
                    e.preventDefault(),
                    confirm("Are you sure you want to leave this page?") && (window.location = e.currentTarget.href)
                }
                )),
                this.shouldShowIntraRoundAd() ? this.setState({
                    intraRoundAdVisible: !0,
                    loading: !1
                }) : (this.incrementRoundsPlayedCount(),
                this.loadCollectionClozeSentences())
            }
            initTts() {
                this.isSystemTtsAvailable()
            }
            initSpeaking() {
                if (!this.isPlayingSpeaking())
                    return !1;
                if (window.webkitSpeechRecognition)
                    this.recognition = new webkitSpeechRecognition;
                else {
                    if (!window.SpeechRecongition)
                        return alert("Unable to play speaking on this browser! Sorry about that. Please try the latest Google Chrome.");
                    this.recognition = new SpeechRecongition
                }
                this.recognition.continuous = !0,
                this.recognition.lang = this.props.targetLanguageIso.toLowerCase() + "-" + this.props.targetLanguageIso.toUpperCase(),
                this.recognition.interimResults = !0,
                this.recognition.onresult = e => {
                    const t = e.results[0][0].transcript;
                    if (this.setState({
                        speakingTranscript: t
                    }),
                    e.results[0].isFinal) {
                        this.stopRecordingAndResetRecordBtn();
                        const e = this.getCurrentSentenceAnswers().find((e => t.toLowerCase().match(e.toLowerCase())));
                        !this.state.answered && e && (this.isPlayingTextInput() && this.setState({
                            textInputValue: t
                        }),
                        this.submitAnswer(e))
                    }
                }
                ,
                this.recognition.onerror = e => this.onSpeechRecognitionError(e)
            }
            onSpeechRecognitionError(e) {
                alert("Oh no! There was an error: " + e.error + " " + e.message + " - sorry about that. Speaking is an experimental feature. You may need to refresh the page or update your browser permissions. Please let us know if the issue persists. Speaking works best on the latest version of Chrome on desktop."),
                this.stopRecordingAndResetRecordBtn()
            }
            setupAudio() {
                if (this.hasSetupAudio)
                    return !0;
                this.correctAudio.volume = .25,
                this.incorrectAudio.volume = .25,
                this.hasSetupAudio = !0
            }
            getInitialGameState() {
                return {
                    answered: !1,
                    collectionClozeSentences: [],
                    correct: null,
                    correctlyAnsweredSentenceCount: 0,
                    currentSentenceIndex: 0,
                    discussionModalVisible: !1,
                    elapsedTime: 0,
                    endingInfiniteRound: !1,
                    hasShownTokens: !1,
                    intraRoundAdNextRoundable: !1,
                    intraRoundAdVisible: !1,
                    listeningControlPlayComplete: !1,
                    loading: !0,
                    multipleChoice: !1,
                    numCorrect: 0,
                    numIncorrect: 0,
                    numMastered: 0,
                    numNew: 0,
                    numReview: 0,
                    playedNew: {},
                    playedReview: {},
                    points: null,
                    previousAnswer: null,
                    roundHistoryModalVisible: !1,
                    score: 0,
                    sentenceEditorModalVisible: !1,
                    speakingTranscript: "",
                    startedTextInput: !1,
                    textInputChangedAfterAnswering: !1,
                    textInputValue: "",
                    tokensVisible: !1,
                    usedHint: !1
                }
            }
            setupHotkeys() {
                $(window).on("keydown", (e => {
                    if ($(".modal").is(":visible"))
                        return !0;
                    if (this.isRoundComplete() && $("input").is(":focus"))
                        return !0;
                    const {answered: t, gameSettings: n, multipleChoice: a, usedHint: l} = this.state;
                    if ("on" !== n.hotkeys)
                        return !0;
                    if (13 === e.which)
                        if (e.ctrlKey)
                            this.isPlayingSpeaking() && (e.preventDefault(),
                            this.startRecording());
                        else if (this.isRoundComplete())
                            this.nextRound();
                        else if (t)
                            this.answerQualityOptionsVisible() ? this.handleAnswerQualityResponse(1) : (e.preventDefault(),
                            this.next());
                        else if (this.isPlayingTextInput() || this.isPlayingFullTextInput()) {
                            if (!this.state.textInputValue && !this.state.startedTextInput)
                                return !1;
                            if (!this.state.textInputValue && "off" === n.enterSubmitsEmpty)
                                return !1;
                            this.submitAnswer(this.state.textInputValue)
                        }
                    if (32 === e.which)
                        if (this.isRoundComplete())
                            e.preventDefault(),
                            this.nextRound();
                        else {
                            if (e.ctrlKey)
                                return e.preventDefault(),
                                this.playSentenceAudio();
                            e.altKey && this.isPlayingSpeaking() ? (e.preventDefault(),
                            this.startRecording()) : !t || this.isPlayingTextInput() || this.isPlayingFullTextInput() || (e.preventDefault(),
                            this.answerQualityOptionsVisible() ? this.handleAnswerQualityResponse(1) : this.next())
                        }
                    39 === e.which && (this.isRoundComplete() ? (e.preventDefault(),
                    this.nextRound()) : t && !$(this.textInput).is(":focus") && (e.preventDefault(),
                    this.next())),
                    this.multipleChoiceOptions && !t && [49, 50, 51, 52].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.multipleChoiceOptions.clickOptionAtIndex(e.which - 49)),
                    this.multipleChoiceOptions && !t && [97, 98, 99, 100].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.multipleChoiceOptions.clickOptionAtIndex(e.which - 97)),
                    t && this.answerQualityOptionsVisible() && [49, 50, 51].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.handleAnswerQualityResponse(e.which - 49)),
                    t && this.answerQualityOptionsVisible() && [97, 98, 99].indexOf(e.which) >= 0 && (e.preventDefault(),
                    this.handleAnswerQualityResponse(e.which - 97)),
                    65 === e.which && e.altKey && t && (e.preventDefault(),
                    this.addCurrentSentenceToCollection()),
                    67 === e.which && e.altKey && t && (e.preventDefault(),
                    this.showManageCollectionModal()),
                    68 === e.which && e.altKey && t && (e.preventDefault(),
                    this.showSentenceEditorModal()),
                    69 === e.which && e.altKey && t && (e.preventDefault(),
                    $(".report-error.btn").click()),
                    70 === e.which && e.altKey && t && (e.preventDefault(),
                    $(".favorite-clozeable").click()),
                    71 === e.which && e.altKey && t && (e.preventDefault(),
                    this.onGrammarBtnClick()),
                    72 === e.which && e.altKey && (!this.isPlayingTextInput() || t || a || l || (e.preventDefault(),
                    this.useTextInputHint())),
                    73 === e.which && e.altKey && t && (e.preventDefault(),
                    this.ignoreModal.show()),
                    75 === e.which && e.altKey && t && (e.preventDefault(),
                    "on" === n.manualMasterResetConfirm ? this.knowItModal.show() : this.onKnowItClick()),
                    77 === e.which && e.altKey && t && (e.preventDefault(),
                    "on" === n.manualMasterResetConfirm ? this.masterModal.show() : this.onMasterClick()),
                    80 === e.which && e.altKey && (!this.isPlayingTextInput() || t || a || (e.preventDefault(),
                    this.setState({
                        multipleChoice: !0
                    }))),
                    82 === e.which && e.altKey && t && (e.preventDefault(),
                    "on" === n.manualMasterResetConfirm ? this.resetModal.show() : this.onResetClick()),
                    83 === e.which && e.altKey && (e.preventDefault(),
                    this.showSentenceSearchModal()),
                    84 === e.which && e.altKey && (e.preventDefault(),
                    this.toggleTranslation()),
                    85 === e.which && e.altKey && t && (e.preventDefault(),
                    this.setState({
                        discussionModalVisible: !this.state.discussionModalVisible
                    })),
                    89 === e.which && e.altKey && (e.preventDefault(),
                    this.setState({
                        roundHistoryModalVisible: !this.state.roundHistoryModalVisible
                    }))
                }
                )),
                $(window).on("keyup", (e => {
                    27 === e.which && this.state.leveledUpModalVisible && this.setState({
                        leveledUpModalVisible: !1
                    })
                }
                ))
            }
            isPlayingFullTextInput() {
                return this.props.mode === D
            }
            isPlayingMultipleChoice() {
                return this.props.mode === F
            }
            isPlayingTextInput() {
                return this.props.mode === V
            }
            isPlayingListening() {
                return "listening" === this.props.skill
            }
            isPlayingSpeaking() {
                return "speaking" === this.props.skill
            }
            shouldShowIntraRoundAd() {
                if (!this.state.intraRoundAd || this.props.isTeachingCollection)
                    return !1;
                const e = this.getRoundsPlayedCount();
                return !!e && e % 4 === 0
            }
            getRoundsPlayedCount() {
                return parseInt(window.localStorage.getItem("roundsPlayedCount")) || 0
            }
            incrementRoundsPlayedCount() {
                const e = this.getRoundsPlayedCount();
                window.localStorage.setItem("roundsPlayedCount", "" + (e + 1))
            }
            resetRoundsPlayedCount() {
                window.localStorage.removeItem("roundsPlayedCount")
            }
            nextRound() {
                const {intraRoundAdNextRoundable: e, intraRoundAdVisible: t} = this.state;
                return this.shouldShowIntraRoundAd() && !t ? this.setState({
                    intraRoundAdVisible: !0
                }) : !(t && !e) && (this.incrementRoundsPlayedCount(),
                void this.setState(this.getInitialGameState(), ( () => this.loadCollectionClozeSentences())))
            }
            loadMoreCollectionClozeSentences() {
                const {playUrl: e, mode: t, skill: n, scope: a, count: l} = this.props;
                if (this.isRoundComplete() || this.state.endingInfiniteRound)
                    return !1;
                $.ajax({
                    url: e,
                    data: {
                        mode: t,
                        skill: n,
                        scope: a,
                        count: l
                    }
                }).done((e => {
                    console.log(e);
                    const {collectionClozeSentences: t} = this.state
                      , n = t.reduce(( (e, t) => (e[t.id] = !0,
                    e)), {})
                      , a = e.collectionClozeSentences.filter((e => !n[e.id]));
                    this.setState({
                        loading: !1,
                        collectionClozeSentences: t.concat(a)
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading more sentences. Sorry about that. Please refresh the page to try again and let us know if you see the message again.")
                }
                ))
            }
            loadCollectionClozeSentences() {
                this.setState({
                    loading: !0
                });
                const {playUrl: e, mode: t, skill: n, scope: a, count: l} = this.props;
                $.ajax({
                    url: e,
                    data: {
                        mode: t,
                        skill: n,
                        scope: a,
                        count: l
                    }
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loading: !1,
                        alreadyMasteredNextReview: e.languagePairing.alreadyMasteredNextReview,
                        clozeSentencesUrl: e.languagePairing.clozeSentencesUrl,
                        collectionClozeSentences: e.collectionClozeSentences,
                        collectionClozeSentencesUrl: e.collection.collectionClozeSentencesUrl,
                        collectionClozeSentencesUpsertUrl: e.collection.collectionClozeSentencesUpsertUrl,
                        collectionClozeSentencesIgnoreAllUrl: e.collection.collectionClozeSentencesIgnoreAllUrl,
                        collectionClozeSentencesAnswerUrl: e.collection.collectionClozeSentencesAnswerUrl,
                        collectionClozeSentencesSrsResponseUrl: e.collection.collectionClozeSentencesSrsResponseUrl,
                        collectionsUrl: e.collectionsUrl,
                        currentSentenceTimerStart: (0,
                        o.R4)(),
                        gameSettingsUrl: e.languagePairing.gameSettingsUrl,
                        intraRoundAd: e.intraRoundAd,
                        isCollectionEditable: e.collection.isEditable,
                        isPro: e.user.isPro,
                        isSignedIn: e.user.isSignedIn,
                        languagePairingId: e.languagePairing.id,
                        languagePairingLevel: e.languagePairing.level,
                        languagePairingUrl: e.languagePairing.url,
                        nextReviewByLevel: e.languagePairing.nextReviewByLevel,
                        numMastered: 0,
                        numNew: 0,
                        numPlaying: 0,
                        numReview: 0,
                        playedNew: {},
                        playedReview: {},
                        reportErrorUrl: e.collection.collectionClozeSentencesErrorUrl,
                        searchTranslationEntriesUrl: e.languagePairing.searchTranslationEntriesUrl,
                        startingNumMastered: e.collection.numMastered,
                        startingNumPlaying: e.collection.numPlaying,
                        startingNumReadyForReview: e.collection.numReadyForReview,
                        tokensEnabled: e.collection.tokensEnabled,
                        tokensUrl: e.collection.tokensUrl,
                        userSelectionTranslationsUrl: e.languagePairing.userSelectionTranslationsUrl,
                        wordBank: e.wordBank
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading sentences. Sorry about that. Please refresh the page to try again and let us know if you see the message again.")
                }
                ))
            }
            isReviewScope() {
                return "ready_for_review" === this.props.scope
            }
            isFavoritedScope() {
                return "favorited" === this.props.scope
            }
            renderPlayingName() {
                let e = "Playing";
                return this.isReviewScope() ? e = "Reviewing" : this.isFavoritedScope() && (e = "Favorites"),
                a.createElement("div", {
                    className: "playing-name"
                }, e, ": ", a.createElement("strong", null, this.props.collectionName))
            }
            renderRoundStats() {
                const {answered: e, currentSentenceIndex: t, collectionClozeSentences: n, correctlyAnsweredSentenceCount: l, numCorrect: s, numIncorrect: r} = this.state
                  , o = l / n.filter((e => !e.wasIncorrect)).length * 100;
                return a.createElement("div", {
                    className: "container-fluid"
                }, a.createElement("div", {
                    className: "row status",
                    ref: e => this.statusBar = e,
                    style: {
                        display: "block"
                    }
                }, a.createElement("div", {
                    className: "col-xs-4 text-right"
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "Correct"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-ok"
                }, ":"), " ", a.createElement("span", {
                    className: "num correct"
                }, s)), a.createElement("div", {
                    className: "col-xs-4 text-center"
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "Incorrect"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-remove"
                }, ":"), " ", a.createElement("span", {
                    className: "num incorrect"
                }, r)), a.createElement("div", {
                    className: "col-xs-4 text-left"
                }, a.createElement("span", {
                    className: "hidden-xs"
                }, "To go"), " ", a.createElement("span", {
                    className: "glyphicon glyphicon-arrow-right"
                }, ":"), " ", a.createElement("span", {
                    className: "num togo"
                }, this.isInfiniteRound() && !this.state.endingInfiniteRound ? "Inf" : n.length - t - (e ? 1 : 0)))), (!this.isInfiniteRound() || this.state.endingInfiniteRound) && a.createElement("div", {
                    className: "row progress round",
                    style: {
                        marginBottom: 0
                    }
                }, a.createElement("div", {
                    "aria-valuemax": "100",
                    "aria-valuemin": "0",
                    "aria-valuenow": o,
                    className: "progress-bar progress-bar-success",
                    role: "progressbar",
                    style: {
                        width: o + "%"
                    }
                })), this.renderPlayingNameBanner(), this.renderSignUpInPromo(), this.renderRoundCompleteBanner())
            }
            renderPlayingNameBanner() {
                if (this.props.isSignedIn || this.props.isTeachingCollection)
                    return a.createElement("div", {
                        className: "row bg-" + (this.isReviewScope() ? "primary" : "success") + " text-center lead",
                        style: {
                            padding: "4px 0",
                            marginBottom: 0
                        }
                    }, this.renderPlayingName())
            }
            renderSignUpInPromo() {
                return this.props.isSignedIn || this.props.isTeachingCollection ? null : a.createElement("div", {
                    className: "row bg-success text-center lead",
                    style: {
                        padding: "4px 0",
                        marginBottom: 0
                    }
                }, a.createElement("a", {
                    className: "btn btn-sm btn-success joystix",
                    href: "/sign-up"
                }, "Sign up"), a.createElement("span", {
                    style: {
                        margin: "0 8px"
                    }
                }, "or"), a.createElement("a", {
                    className: "btn btn-sm btn-success joystix",
                    href: "/login",
                    style: {
                        marginRight: 8
                    }
                }, "Login"), "to save your progress!")
            }
            renderRoundCompleteBanner() {
                return this.isRoundComplete() ? this.isNoSentences() ? null : a.createElement("div", {
                    className: "row"
                }, a.createElement(A.default, null, a.createElement("div", {
                    className: "round-complete-banner notification notice" + (this.isReviewScope() ? " review" : "")
                }, a.createElement("h1", null, "Round Complete!")))) : null
            }
            renderPoints() {
                return this.state.answered && !this.state.correct ? a.createElement(S.default, null) : a.createElement(R.default, {
                    points: this.state.points
                })
            }
            renderHeader() {
                const {baseLanguageFlagIso: e, targetLanguageFlagIso: t} = this.props
                  , {score: n, collectionClozeSentences: l, currentSentenceIndex: s, points: r, answered: o, correct: i} = this.state
                  , c = l[s]
                  , d = Math.round(c.level / 4 * 100);
                return a.createElement("div", {
                    className: "stats row"
                }, this.renderPoints(), a.createElement("div", {
                    className: "col-xs-5 col-sm-4 joystix column text-left"
                }, a.createElement("div", {
                    className: "content-wrapper"
                }, a.createElement("div", {
                    className: "languages"
                }, a.createElement(p.default, {
                    flagIso: t,
                    size: 24
                }), " / ", a.createElement(p.default, {
                    flagIso: e,
                    size: 24
                })), a.createElement("div", {
                    className: "score total"
                }, a.createElement("span", {
                    className: "text"
                }, "Score:"), " ", a.createElement("span", {
                    className: "value"
                }, n)))), a.createElement("div", {
                    className: "col-sm-2 col-sm-offset-5 col-xs-4 col-xs-offset-3 column text-right"
                }, a.createElement("div", {
                    className: "content-wrapper"
                }, a.createElement("div", {
                    className: "level"
                }, a.createElement("div", {
                    style: {
                        color: "#aaa",
                        fontSize: "1.5em"
                    }
                }, a.createElement(y.default, {
                    name: "ok-circle",
                    style: {
                        color: c.level >= 1 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                }), a.createElement(y.default, {
                    name: "ok-circle",
                    style: {
                        color: c.level >= 2 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                }), a.createElement(y.default, {
                    name: "ok-circle",
                    style: {
                        color: c.level >= 3 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                }), a.createElement(y.default, {
                    name: "ok-circle",
                    style: {
                        color: c.level >= 4 ? "#5cb85c" : null,
                        margin: "0 5px"
                    }
                })), a.createElement("div", {
                    className: "joystix percent-mastered",
                    style: {
                        fontSize: "0.9em"
                    }
                }, a.createElement("span", {
                    className: "value"
                }, d, "%"), " Mastered", a.createElement("span", {
                    "data-placement": "bottom",
                    "data-title": "Answer a sentence correctly 4x in a row to get it to 100% Mastered",
                    "data-toggle": "tooltip"
                }, a.createElement(y.default, {
                    name: "question-sign",
                    style: {
                        color: "#000",
                        marginLeft: 5
                    }
                })))))), a.createElement("div", {
                    className: "clearfix"
                }))
            }
            getCurrentSentence() {
                const {collectionClozeSentences: e, currentSentenceIndex: t} = this.state;
                return e[t]
            }
            getCurrentSentenceCloze() {
                return this.getCurrentSentence().text.split("{{")[1].split("}}")[0]
            }
            ignoreAll(e) {
                this.setState({
                    updating: !0
                });
                const t = this.getCurrentSentence();
                $.ajax({
                    url: this.state.collectionClozeSentencesIgnoreAllUrl,
                    method: "put",
                    data: {
                        collection_cloze_sentence_id: t.id
                    }
                }).done((n => {
                    const a = this.getUpdatedCollectionClozeSentences(t.id, {
                        ignored: !0
                    });
                    this.setState({
                        collectionClozeSentences: a,
                        updating: !1
                    }, e)
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }, e),
                    alert("Oh no! There was an error updating the sentences. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            updateCurrentSentence(e, t, n) {
                const a = this.getCurrentSentence();
                this.updateSentence({
                    sentence: a,
                    attr: e,
                    value: t,
                    callback: n
                })
            }
            updateSentence({attr: e=null, callback: t, sentence: n, updates: a=null, value: l=null}) {
                this.setState({
                    updating: !0
                });
                let s = {
                    id: n.id
                };
                a ? s = Object.assign(a, s) : s[e] = l,
                $.ajax({
                    url: n.collectionClozeSentencesUpsertUrl || this.state.collectionClozeSentencesUpsertUrl,
                    method: "post",
                    dataType: "json",
                    contentType: "application/json",
                    data: JSON.stringify({
                        updates: [s]
                    })
                }).then((e => $.ajax({
                    data: {
                        ids: e.ids
                    },
                    method: "post",
                    url: e.collectionClozeSentencesBatchUrl
                }))).done((e => {
                    const n = e.collectionClozeSentences[0];
                    this.setState({
                        collectionClozeSentences: this.state.collectionClozeSentences.map((e => n.id === e.id ? Object.assign(e, n) : e)),
                        updating: !1
                    }, t)
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }, t),
                    alert("Oh no! There was an error updating. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderFavoriteToggle() {
                const {isSignedIn: e} = this.props;
                if (!this.state.isPro)
                    return a.createElement("button", {
                        className: "btn btn-default favorite-clozeable control",
                        disabled: !e,
                        title: "Favorite sentence (alt+f)",
                        "data-toggle": "modal",
                        "data-target": "#favorite-pro-promo-modal"
                    }, a.createElement("span", {
                        className: "glyphicon glyphicon-star-empty not-favorited"
                    }));
                const t = this.getCurrentSentence();
                return a.createElement("button", {
                    className: "btn btn-default favorite-clozeable control" + (t.favorited ? " favorited active" : ""),
                    title: (t.favorited ? "Unf" : "F") + "avorite sentence (alt+f)",
                    onClick: () => this.updateCurrentSentence("favorited", !t.favorited)
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-star" + (t.favorited ? " favorited" : "-empty not-favorited")
                }))
            }
            toggleTranslation() {
                this.setState({
                    translationVisible: !this.state.translationVisible
                })
            }
            renderTranslationsToggle() {
                const {gameSettings: e, answered: t} = this.state;
                if ("visible" === e.translations || "show-after" === e.translations && t)
                    return null;
                return a.createElement("button", {
                    className: "btn btn-default toggle-translation control",
                    onClick: () => this.toggleTranslation(),
                    title: "Toggle translation (alt+t)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-transfer"
                }))
            }
            renderTransliterationToggle() {
                const {gameSettings: e} = this.state;
                return "on" === e.transliteration ? null : this.getCurrentSentence().transliteration ? a.createElement("button", {
                    className: "btn btn-default toggle-transliteration control",
                    onClick: () => this.setState({
                        transliterationVisible: !this.state.transliterationVisible
                    }),
                    title: "Toggle transliteration"
                }, "T") : null
            }
            renderPronunciationToggle() {
                const {gameSettings: e} = this.state;
                return "on" === e.pronunciation ? null : this.getCurrentSentence().pronunciation || this.getCurrentSentence().transliteration ? a.createElement("button", {
                    className: "btn btn-default toggle-pronunciation control",
                    onClick: () => this.setState({
                        pronunciationVisible: !this.state.pronunciationVisible
                    }),
                    title: "Toggle pronunciation"
                }, "P") : null
            }
            useTextInputHint() {
                const e = this.state.textInputValue
                  , t = this.getCurrentSentenceCloze();
                let n = 0;
                for (; e[n] && t[n] && e[n].toLowerCase() === t[n].toLowerCase(); )
                    n += 1;
                this.setState({
                    textInputValue: t.substring(0, n + 1),
                    usedHint: !0
                }, ( () => this.textInput.focus()))
            }
            onHintBtnClick(e) {
                $(e.currentTarget).tooltip("destroy"),
                this.useTextInputHint()
            }
            renderTextInputHintBtn() {
                return this.isPlayingMultipleChoice() || this.state.multipleChoice || this.state.usedHint ? null : a.createElement("button", {
                    className: "btn btn-default text-input-hint",
                    onClick: e => this.onHintBtnClick(e),
                    title: "Single letter hint - you only get 1 per sentence and score half the points! alt+h"
                }, a.createElement(y.default, {
                    name: "question-sign"
                }))
            }
            renderTextInputToMultipleChoiceBtn() {
                return this.isPlayingMultipleChoice() || this.state.multipleChoice ? null : a.createElement("button", {
                    className: "btn btn-default switch-to-multiple-choice",
                    onClick: e => this.onSwitchToMultipleChoiceBtnClick(e),
                    title: "Switch sentence to multiple choice alt+p"
                }, a.createElement(y.default, {
                    name: "th-large"
                }))
            }
            onSwitchToMultipleChoiceBtnClick(e) {
                $(e.currentTarget).tooltip("destroy"),
                this.setState({
                    multipleChoice: !0
                }, ( () => this.textInput.focus()))
            }
            playSentenceRecording({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                this.sentenceAudio && this.sentenceAudio.pause();
                const {gameSettings: s} = this.state;
                return this.sentenceAudio = new Audio(a.audioRecordingUrl),
                this.sentenceAudio.playbackRate = l || parseFloat(s.textToSpeechSpeed) || 1,
                n && this.sentenceAudio.addEventListener("play", n),
                e && this.sentenceAudio.addEventListener("ended", e),
                t && this.sentenceAudio.addEventListener("error", t),
                this.sentenceAudio.play().catch(( () => t && t())),
                this.sentenceAudio
            }
            playSentenceTts({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                this.sentenceAudio && this.sentenceAudio.pause();
                const {gameSettings: s} = this.state;
                return this.sentenceAudio = new Audio(a.ttsAudioUrl),
                this.sentenceAudio.playbackRate = l || parseFloat(s.textToSpeechSpeed) || 1,
                n && this.sentenceAudio.addEventListener("play", n),
                e && this.sentenceAudio.addEventListener("ended", e),
                t && this.sentenceAudio.addEventListener("error", t),
                this.sentenceAudio.play().catch(( () => t && t())),
                this.sentenceAudio
            }
            getSystemTtsVoices() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.getSystemTtsVoices(e, t)
            }
            playSystemTts({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                const {targetLanguageIso: s, targetLanguageCode: r} = this.props
                  , {gameSettings: o} = this.state
                  , i = this.getSystemTtsVoices();
                let c = i.filter((e => e.name === o.textToSpeechVoice))[0];
                c || (c = i[Math.floor(Math.random() * i.length)]);
                const d = l || parseFloat(o.textToSpeechSpeed) || 1
                  , u = new SpeechSynthesisUtterance(a.text.replace(/\{\{|\}\}/g, ""));
                return u.voice = c,
                u.lang = c.lang,
                u.rate = window.clozemaster.isIOS8() ? .4 * d : d,
                u.onstart = n,
                u.onend = e,
                u.onerror = t,
                window.speechSynthesis.cancel(),
                window.speechSynthesis.speak(u),
                u
            }
            playSentenceAudio({onEnded: e=null, onError: t=null, onPlay: n=null, sentence: a=this.getCurrentSentence(), speed: l=null}={}) {
                const {gameSettings: s} = this.state;
                return a.audioRecordingUrl && "on" === this.state.gameSettings.audioRecordings ? this.playSentenceRecording({
                    onEnded: e,
                    onEnded: e,
                    onPlay: n,
                    sentence: a,
                    speed: l
                }) : !a.ttsAudioUrl || "on" !== this.state.gameSettings.clozemasterTextToSpeech && this.isSystemTtsAvailable() ? this.playSystemTts({
                    onEnded: e,
                    onError: t,
                    onPlay: n,
                    sentence: a,
                    speed: l
                }) : this.playSentenceTts({
                    onEnded: e,
                    onError: t,
                    onPlay: n,
                    sentence: a,
                    speed: l
                })
            }
            isTtsAvailable(e=this.getCurrentSentence()) {
                return e.ttsAudioUrl || this.isSystemTtsAvailable()
            }
            isSystemTtsAvailable() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.systemTtsAvailable(e, t)
            }
            renderTtsBtn() {
                return this.isTtsAvailable() ? a.createElement("div", {
                    className: "btn-group",
                    role: "group",
                    "aria-label": "Text-to-speech controls",
                    style: {
                        marginRight: 4
                    }
                }, a.createElement("button", {
                    className: "btn btn-default control",
                    title: "Play sentence audio (ctl+space)",
                    style: {
                        marginRight: 0
                    },
                    onClick: () => this.playSentenceAudio()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-volume-up"
                })), a.createElement("button", {
                    className: "btn btn-default control",
                    title: "Play sentence audio half speed",
                    style: {
                        margin: "0 0 0 -1px"
                    },
                    onClick: () => this.playSentenceAudio({
                        speed: .5
                    })
                }, "\xbd")) : null
            }
            renderAudioHintBtn() {
                return null
            }
            renderManualResetBtn() {
                const e = this.getCurrentSentence()
                  , {gameSettings: t} = this.state
                  , {manualMasterResetConfirm: n} = t
                  , {isSignedIn: l} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default manual-reset",
                    "data-toggle": "on" === n ? "modal" : null,
                    "data-target": "on" === n ? "#reset-modal" : null,
                    disabled: !l || !e.level,
                    onClick: "on" === n ? null : () => this.onResetClick(),
                    title: "Reset to 0% Mastered (alt+r)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-remove"
                }))
            }
            renderManualMasterBtn() {
                const e = this.getCurrentSentence()
                  , {gameSettings: t} = this.state
                  , {manualMasterResetConfirm: n} = t
                  , {isSignedIn: l} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default manual-master",
                    "data-toggle": "on" === n ? "modal" : null,
                    "data-target": "on" === n ? "#master-modal" : null,
                    disabled: !l || 4 === e.level,
                    onClick: "on" === n ? null : () => this.onMasterClick(),
                    title: "Set this sentence to 100% Mastered (alt+m)"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-ok"
                }))
            }
            renderKnowItBtn() {
                const e = this.getCurrentSentence()
                  , {gameSettings: t} = this.state
                  , {manualMasterResetConfirm: n} = t
                  , {isSignedIn: l} = this.props;
                return a.createElement("button", {
                    className: "btn btn-default know-it",
                    disabled: !l || !!(e.nextReview || "").match(/2100/),
                    "data-toggle": "on" === n ? "modal" : null,
                    "data-target": "on" === n ? "#know-it-modal" : null,
                    onClick: "on" === n ? null : () => this.onKnowItClick(),
                    title: "Mark this sentence as known - 100% Mastered and next review year 2100 (alt+k)"
                }, "\ud83e\udde0")
            }
            renderCurrentSentenceControls() {
                const {answered: e, gameSettings: t, nextReviewControlsVisible: n} = this.state;
                if (!e)
                    return a.createElement("div", {
                        className: "controls"
                    }, this.renderAudioHintBtn(), this.renderTranslationsToggle(), this.renderTextInputToMultipleChoiceBtn(), this.renderTextInputHintBtn());
                const {isSignedIn: l} = this.props
                  , r = this.getCurrentSentence()
                  , o = a.createElement(a.Fragment, null, this.renderTtsBtn(), this.renderTranslationsToggle(), this.renderPronunciationToggle(), this.renderTransliterationToggle());
                return a.createElement("div", {
                    className: "controls"
                }, a.createElement("button", {
                    className: "btn btn-default control" + (n ? " active" : ""),
                    onClick: () => this.setState({
                        nextReviewControlsVisible: !n
                    })
                }, a.createElement(y.default, {
                    name: "time"
                }), " ", s()(r.nextReview).diff(s()(), "days"), " days"), o, a.createElement("span", {
                    className: "signed-in-controls"
                }, this.renderFavoriteToggle(), a.createElement("button", {
                    className: "btn btn-default ignore control" + (r.ignored ? " active" : ""),
                    disabled: !l,
                    title: (r.ignored ? "Uni" : "I") + "gnore sentence (alt+i)",
                    "data-toggle": "modal",
                    "data-target": "#ignore-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-ban-circle"
                })), this.renderGrammarBtn(), a.createElement("button", {
                    className: "btn btn-default control",
                    disabled: !l,
                    id: "discussion-modal-btn",
                    title: "Discuss sentence (alt+u)",
                    onClick: () => this.setState({
                        discussionModalVisible: !0
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-comment"
                }), !!r.commentsCount && a.createElement("span", {
                    className: "badge comment-count",
                    style: {
                        marginLeft: 4
                    }
                }, a.createElement("span", {
                    className: "value"
                }, r.commentsCount))), a.createElement("button", {
                    className: "btn btn-default control edit",
                    disabled: !l,
                    title: "Edit sentence (alt+d)",
                    onClick: () => this.showSentenceEditorModal()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-pencil"
                })), a.createElement("button", {
                    className: "btn btn-default control add-to-collection",
                    disabled: !l,
                    title: "Add to collection (alt+a)",
                    onClick: () => this.addCurrentSentenceToCollection()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }))))
            }
            renderGrammarBtn() {
                const e = this.getCurrentSentence()
                  , {tokensEnabled: t, tokensVisible: n} = this.state
                  , {isSignedIn: l} = this.props;
                if (l && t && e.tokensCount)
                    return a.createElement("button", {
                        className: "btn btn-default control grammar",
                        title: "Grammar (alt+g)",
                        onClick: this.onGrammarBtnClick.bind(this)
                    }, a.createElement(y.default, {
                        name: n ? "chevron-up" : "chevron-down"
                    }))
            }
            onGrammarBtnClick() {
                const {hasShownTokens: e, tokensVisible: t} = this.state;
                this.setState({
                    hasShownTokens: e || t,
                    tokensVisible: !t
                })
            }
            showSentenceEditorModal() {
                this.setState({
                    sentenceEditorModalVisible: !0
                })
            }
            onTextInputBeforeInput(e) {
                const {answered: t, gameSettings: n} = this.state;
                if ("on" === n.hotkeys && t && e.altKey && [65, 67, 68, 69, 70, 73, 77, 82, 85].indexOf(e.which) >= 0)
                    return e.preventDefault(),
                    !0
            }
            onTextInputKeyDown(e) {
                const {answered: t, gameSettings: n} = this.state;
                if (t && "on" === n.keyDownClearsTextInputAfterAnswering && !this.afterAnswerKeyDownTriggered) {
                    if (13 === e.which)
                        return !0;
                    this.afterAnswerKeyDownTriggered = !0,
                    this.setState({
                        textInputValue: ""
                    })
                }
                this.handleAccentsOnKeyDown(e)
            }
            onTextInputKeyUp(e) {
                this.state.startedTextInput || this.setState({
                    startedTextInput: !0
                }),
                this.handleAccentsOnKeyUp(e)
            }
            onTextInputChange(e) {
                this.setState({
                    textInputChangedAfterAnswering: this.state.answered,
                    textInputValue: e.target.value
                })
            }
            handleAccentsOnKeyDown(e) {
                if (this.props.test && 0 === e.which)
                    return e.preventDefault(),
                    !1;
                if ("on" !== this.state.gameSettings.accentShortcuts)
                    return null;
                const t = this.textInput.selectionStart
                  , n = String.fromCharCode(e.which)
                  , a = (o.ZJ[this.props.targetLanguageIso] || {})[n.toUpperCase()]
                  , l = this.state.accentDownCount || 0;
                if (!e.altKey || !a)
                    return null;
                e.preventDefault(),
                l || (this.accentingText = this.state.textInputValue);
                let s = a[l % a.length];
                e.shiftKey && (s = s.toUpperCase());
                const r = this.accentingText;
                this.setState({
                    accentDownCount: (l || 0) + 1,
                    textInputValue: r.substring(0, t) + s + r.substring(t)
                }, ( () => {
                    this.textInput.selectionStart = t,
                    this.textInput.selectionEnd = t + 1
                }
                ))
            }
            handleAccentsOnKeyUp(e) {
                if (this.props.test && 0 === e.which)
                    return e.preventDefault(),
                    !1;
                if ("on" !== this.state.gameSettings.accentShortcuts)
                    return null;
                if (18 === e.which && this.state.accentDownCount > 0) {
                    const e = this.textInput.selectionStart;
                    this.setState({
                        accentDownCount: 0
                    }),
                    this.textInput.selectionStart = e + 1,
                    this.textInput.selectionEnd = e + 1
                }
            }
            getCurrentSentenceAnswers() {
                const e = this.getCurrentSentence();
                return [this.getCurrentSentenceCloze()].concat(e.alternativeAnswers || [])
            }
            isTextInputCorrectSoFar() {
                const e = this.replaceAccents((this.state.textInputValue || "").toLowerCase());
                return !!this.getCurrentSentenceAnswers().find((t => 0 === this.replaceAccents(t.toLowerCase()).indexOf(e)))
            }
            replaceAccents(e) {
                return "ru" === this.props.targetLanguageIso ? e.replace(/\u0451/g, "\u0435").replace(/\u0401/g, "\u0415") : e
            }
            onAddToCollectionClick() {
                this.setState({
                    addSentenceToCollectionModalVisible: !0,
                    selectionPopoverId: null
                }, ( () => this.clearSelection()))
            }
            onSearchCollectionClick() {
                this.showManageCollectionModal()
            }
            showManageCollectionModal() {
                this.setState({
                    manageCollectionModalVisible: !0,
                    selectionPopoverId: null
                })
            }
            onSearchSentencesClick() {
                this.showSentenceSearchModal()
            }
            showSentenceSearchModal() {
                const {answered: e} = this.state;
                if (!e)
                    return null;
                this.setState({
                    clozeSentenceSearchModalVisible: !0,
                    selectionPopoverId: null
                })
            }
            getSelectionPopoverProps() {
                return {
                    baseLanguageIso: this.props.baseLanguageIso,
                    baseLanguageCode: this.props.baseLanguageCode,
                    isPro: this.state.isPro,
                    isSearchCollectionAvailable: !!this.props.collectionId,
                    onClose: () => this.onSelectionPopoverClose(),
                    onAddToCollectionClick: () => this.onAddToCollectionClick(),
                    onSearchCollectionClick: () => this.onSearchCollectionClick(),
                    onSearchSentencesClick: () => this.onSearchSentencesClick(),
                    searchTranslationEntriesUrl: this.state.searchTranslationEntriesUrl,
                    targetLanguageCode: this.props.targetLanguageCode,
                    targetLanguageEnglishName: this.props.targetLanguageEnglishName,
                    targetLanguageIso: this.props.targetLanguageIso,
                    userSelectionTranslationsUrl: this.state.userSelectionTranslationsUrl
                }
            }
            renderCloze() {
                const {mode: e} = this.props
                  , {answered: t, gameSettings: n, textInputValue: l} = this.state
                  , s = this.getCurrentSentence()
                  , r = this.getCurrentSentenceCloze();
                return this.isPlayingTextInput() ? a.createElement("input", {
                    autoCapitalize: "off",
                    autoComplete: "off",
                    autoCorrect: "off",
                    className: "input " + this.getTextInputColorClassName(),
                    name: "text_input_value",
                    onChange: e => this.onTextInputChange(e),
                    onKeyDown: e => this.onTextInputKeyDown(e),
                    onKeyUp: e => this.onTextInputKeyUp(e),
                    ref: e => {
                        this.textInput = e
                    }
                    ,
                    spellCheck: "false",
                    style: t || "on" === n.fitTextInputWidth ? {
                        width: this.getAnswerWidth()
                    } : {
                        width: $(window).width() < 1024 ? 140 : 200
                    },
                    type: "text",
                    value: l
                }) : t ? a.createElement(U.default, Object.assign({}, this.getSelectionPopoverProps(), {
                    selection: r,
                    visible: "cloze" === this.state.selectionPopoverId
                }), a.createElement("strong", {
                    className: "cloze",
                    role: "button",
                    onClick: e => {
                        this.setState({
                            selectionPopoverId: "cloze" === this.state.selectionPopoverId ? null : "cloze",
                            selectedSentenceClozeStr: s.text,
                            selectedSentenceText: r
                        })
                    }
                }, a.createElement("u", null, r))) : a.createElement("span", null, "__________")
            }
            getTextInputColorClassName() {
                const {answered: e, correct: t, gameSettings: n, textInputChangedAfterAnswering: a, textInputValue: l} = this.state;
                return e && !a ? t ? "correct" : "" : (e || "on" === n.typingColorHint) && l && (this.isTextInputCorrectSoFar() ? "correct" : "incorrect")
            }
            getAnswerWidth() {
                const e = this.getCurrentSentenceCloze();
                $('<span id="width">').text(e).appendTo(".stage");
                const t = $("#width").width() + 10;
                return $("#width").remove(),
                t
            }
            onWordClick(e, t, n) {
                const a = this.getCurrentSentencePlainText();
                this.setState({
                    selectedSentenceClozeStr: a.substring(0, n) + a.substring(n).replace(e, "{{" + e + "}}"),
                    selectedSentenceText: e,
                    selectionPopoverId: this.state.selectionPopoverId === t ? null : t
                })
            }
            renderWord(e, t, n) {
                return a.createElement(U.default, Object.assign({}, this.getSelectionPopoverProps(), {
                    key: t,
                    selection: e,
                    visible: this.state.selectionPopoverId === t
                }), a.createElement("span", {
                    className: "word",
                    role: "button",
                    onClick: a => this.onWordClick(e, t, n)
                }, e))
            }
            wordify({text: e, idPrefix: t}) {
                const n = /[^\s.,;\?!]+/g;
                let a = 0;
                return e.replace(n, "#!#$&#!#").split(/#!#/g).map(( (e, l) => {
                    const s = e.match(n) ? this.renderWord(e, (t || "") + l, a) : e;
                    return a += e.length,
                    s
                }
                ))
            }
            getCurrentSentencePlainText() {
                return this.getSentencePlainText(this.getCurrentSentence().text)
            }
            getSentencePlainText(e) {
                return e.replace(/{{|}}/g, "")
            }
            clearSelection() {
                window.getSelection ? window.getSelection().empty ? window.getSelection().empty() : window.getSelection().removeAllRanges && window.getSelection().removeAllRanges() : document.selection && document.selection.empty()
            }
            onSelectionPopoverClose() {
                this.clearSelection(),
                this.setState({
                    selectionPopoverId: null,
                    selectedSentenceClozeStr: null,
                    selectedSentenceText: null
                })
            }
            handleSelectionOnMouseUp(e) {
                if ($(e.target).parents(".selection-popover").length)
                    return !0;
                if ($(e.target).parents(".modal").length)
                    return !0;
                const t = window.getSelection();
                let n = t.toString();
                const {answered: a} = this.state;
                if (!n.length && this.textInput && $(this.textInput).is(":focus") && (n += this.textInput.value.substring(this.textInput.selectionStart, this.textInput.selectionEnd)),
                !n.length || !a)
                    return !0;
                const l = t.getRangeAt(0)
                  , s = l.commonAncestorContainer.parentNode.cloneNode(!1);
                s.appendChild(l.cloneContents());
                const r = s.innerHTML
                  , o = $("<span>" + r + "</span>");
                if (o.find(".input").length && o.find(".pre, .post").length && (o.find(".input").replaceWith(this.state.textInputValue),
                n = o.text().replace(/\n/g, " ").replace(/\s+/g, " ").replace(/^\s+|\s+$/g, "")),
                !this.getCurrentSentencePlainText().match(n))
                    return !0;
                e.preventDefault(),
                e.stopPropagation(),
                setTimeout(( () => {
                    this.setState({
                        selectionPopoverId: "sentence",
                        selectedSentenceClozeStr: this.getSelectionClozeStr(t),
                        selectedSentenceText: n
                    })
                }
                ), 50)
            }
            getSelectionClozeStr(e) {
                let t = e.anchorOffset
                  , n = e.focusOffset
                  , a = e.anchorNode
                  , l = e.focusNode;
                t > n && (t = n,
                n = e.anchorOffset,
                a = l,
                l = e.anchorNode);
                const s = e => {
                    if ("#text" === e.nodeName)
                        return e === a && e === l ? e.textContent.substring(0, t) + "{{" + e.textContent.substring(t, n) + "}}" + e.textContent.substring(n) : e === a ? e.textContent.substring(0, t) + "{{" + e.textContent.substring(t) : e === l ? e.textContent.substring(0, n) + "}}" + e.textContent.substring(n) : e.textContent;
                    if ("text_input_value" === e.name)
                        return e === a && e === l ? e.value.substring(0, t) + "{{" + e.value.substring(t, n) + "}}" + e.value.substring(n) : e === a ? e.value.substring(0, t) + "{{" + e.value.substring(t) : e === l ? e.value.substring(0, n) + "}}" + e.value.substring(n) : e.value;
                    let r = "";
                    for (let t = 0, n = e.childNodes.length; t < n; t++)
                        r += s(e.childNodes[t]);
                    return r
                }
                ;
                return s($(".sentence")[0])
            }
            getCurrentSentenceParts() {
                let e = this.getCurrentSentence().text.split("{{");
                const t = e[0];
                return e = e[1].split("}}"),
                {
                    preClozeStr: t,
                    cloze: e[0],
                    postClozeStr: e[1]
                }
            }
            onTokenClick({cloze: e, text: t}) {
                const n = this.getCurrentSentence();
                this.setState({
                    selectedSentenceClozeStr: n.text.replace(e || t, "{{" + (e || t) + "}}"),
                    selectedSentenceText: t,
                    selectionPopoverId: "sentence"
                })
            }
            renderTokens() {
                const {hasShownTokens: e, isPro: t, tokensUrl: n, tokensVisible: l} = this.state
                  , {targetLanguageCode: s, targetLanguageIso: r} = this.props;
                if (!l)
                    return null;
                if (!t && e)
                    return a.createElement(A.default, null, a.createElement("div", {
                        className: "alert alert-success",
                        style: {
                            maxWidth: 600,
                            margin: "10px auto 10px",
                            padding: "20px 10px 20px"
                        }
                    }, a.createElement("p", {
                        style: {
                            fontSize: "1.5em",
                            fontWeight: "bold",
                            marginBottom: 10
                        }
                    }, "Get full access to sentence grammar with Clozemaster Pro - subscribe today and get fluent faster!"), a.createElement("p", null, a.createElement("a", {
                        className: "btn btn-success btn-lg joystix",
                        href: "/pro"
                    }, "Get Pro!"))));
                const o = this.getCurrentSentence();
                return a.createElement(A.default, null, a.createElement(j.default, {
                    onClick: this.onTokenClick.bind(this),
                    targetLanguageCode: s,
                    targetLanguageIso: r,
                    tokenizeableId: o.id,
                    tokenizeableType: "CollectionClozeSentence",
                    url: n || o.tokensUrl
                }))
            }
            renderCurrentSentenceFullTextInput() {
                const {baseLanguageRtl: e, targetLanguageRtl: t} = this.props
                  , n = this.getCurrentSentence();
                let {preClozeStr: l, cloze: s, postClozeStr: o} = this.getCurrentSentenceParts();
                const i = l + s + o
                  , {answered: c, gameSettings: d, textInputValue: u} = this.state
                  , m = i.split("").map(( (e, t) => u[t] === e || e.match(/\s/) || e.match(B) ? e : "_")).join("");
                return a.createElement("div", null, a.createElement("div", {
                    className: "sentence" + (t ? " rtl" : ""),
                    style: {
                        fontSize: "2em"
                    }
                }, m), a.createElement(r.A, {
                    autoCapitalize: "off",
                    autoComplete: "off",
                    autoCorrect: "off",
                    className: `input ${u ? 0 === i.indexOf(u) ? "correct" : "incorrect" : ""} form-control text-center`,
                    name: "text_input_value",
                    onChange: e => this.setState({
                        textInputValue: e.target.value
                    }, ( () => {
                        this.isCorrectAnswer(this.state.textInputValue) && this.submitAnswer(this.state.textInputValue)
                    }
                    )),
                    ref: e => this.textInput = e,
                    style: {
                        fontSize: "1.5em",
                        margin: "15px auto",
                        maxWidth: 500,
                        padding: 5
                    },
                    value: u
                }), (!this.isPlayingListening() || "visible" === d.translations || this.state.translationVisible) && a.createElement("div", {
                    className: "translation " + (e ? "rtl " : "") + "font-size-" + d.translationFontSize
                }, n.translation), !!n.pronunciation && c && ("on" === d.pronunciation || this.state.pronunciationVisible) && a.createElement(a.Fragment, null, a.createElement("div", null, n.pronunciation)), !!n.transliteration && c && ("on" === d.transliteration || this.state.transliterationVisible) && a.createElement(a.Fragment, null, a.createElement("div", null, n.transliteration)), this.renderAccentButtons(), a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-lg text-input-hint",
                    onClick: () => {
                        const {textInputValue: e} = this.state
                          , t = this.getCurrentSentencePlainText();
                        let n = 0;
                        for (; t[n] && e[n] === t[n]; )
                            n += 1;
                        this.setState({
                            textInputValue: t.substring(0, n + 1)
                        }, ( () => {
                            this.textInput && this.textInput.focus()
                        }
                        ))
                    }
                    ,
                    title: "Hint!"
                }, a.createElement(y.default, {
                    name: "question-sign"
                }))), a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-success joystix btn-lg",
                    onClick: () => this.submitAnswer(u)
                }, "Submit")))
            }
            renderCurrentSentence() {
                if (this.isListening())
                    return null;
                if (!this.state.answered && this.isPlayingFullTextInput())
                    return this.renderCurrentSentenceFullTextInput();
                const {answered: e, gameSettings: t, nextReviewControlsVisible: n, tokensVisible: l} = this.state
                  , r = this.getCurrentSentence();
                let {preClozeStr: o, cloze: i, postClozeStr: c} = this.getCurrentSentenceParts();
                const {baseLanguageRtl: d, targetLanguageRtl: u} = this.props;
                e && (o = this.wordify({
                    text: o,
                    idPrefix: "pre"
                }),
                c = this.wordify({
                    text: c,
                    idPrefix: "post"
                }));
                let m = a.createElement(U.default, Object.assign({}, this.getSelectionPopoverProps(), {
                    selection: this.state.selectedSentenceText,
                    visible: "sentence" === this.state.selectionPopoverId
                }), a.createElement("span", {
                    className: "pre"
                }, o), this.renderCloze(), a.createElement("span", {
                    className: "post"
                }, c));
                !e && r.hint && "on" === t.hints && (m = a.createElement(E.default, {
                    fontSize: t.hintFontSize,
                    hint: r.hint
                }, m));
                const h = s()(r.nextReview).diff(s()(), "days")
                  , p = a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "sentence" + (e ? " answered" : "") + (u ? " rtl" : "")
                }, m), ("visible" === t.translations || this.state.translationVisible) && a.createElement("div", {
                    className: "translation " + (d ? "rtl " : "") + "font-size-" + t.translationFontSize
                }, r.translation), !!r.pronunciation && e && ("on" === t.pronunciation || this.state.pronunciationVisible) && a.createElement(a.Fragment, null, a.createElement("div", null, r.pronunciation)), !!r.transliteration && e && ("on" === t.transliteration || this.state.transliterationVisible) && a.createElement(a.Fragment, null, a.createElement("div", null, r.transliteration)), e && !!r.notes && a.createElement("div", {
                    className: "notes font-size-" + t.notesFontSize
                }, a.createElement("strong", null, "Notes:"), " ", r.notes), e && l && this.renderTokens(), this.renderAccentButtons(), this.renderCurrentSentenceControls(), e && n && a.createElement("ul", {
                    className: "list-inline text-center"
                }, a.createElement("li", {
                    style: {
                        paddingTop: 5,
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    className: "joystix"
                }, "Next review:")), a.createElement("li", {
                    style: {
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-title": "0% Mastered",
                    style: {
                        display: "inline-block"
                    }
                }, this.renderManualResetBtn()), a.createElement("br", null), a.createElement("small", null, "0 days")), a.createElement("li", {
                    style: {
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-title": "Sooner",
                    style: {
                        display: "inline-block"
                    }
                }, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: 0 === r.level,
                    style: {
                        height: 34,
                        fontFamily: "joystix"
                    }
                }, a.createElement(y.default, {
                    name: "minus-sign"
                }))), a.createElement("br", null), a.createElement("small", null, Math.round(.75 * h), " days")), a.createElement("li", {
                    style: {
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-title": "Later",
                    style: {
                        display: "inline-block"
                    }
                }, a.createElement("button", {
                    className: "btn btn-default",
                    style: {
                        height: 34,
                        fontFamily: "joystix"
                    }
                }, a.createElement(y.default, {
                    name: "plus-sign"
                }))), a.createElement("br", null), a.createElement("small", null, Math.round(1.25 * h) || 2, " days")), a.createElement("li", {
                    style: {
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-title": "100% Mastered",
                    style: {
                        display: "inline-block"
                    }
                }, this.renderManualMasterBtn()), a.createElement("br", null), a.createElement("small", null, "180 days")), a.createElement("li", {
                    style: {
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-title": "Known - 100% Mastered",
                    style: {
                        display: "inline-block"
                    }
                }, this.renderKnowItBtn()), a.createElement("br", null), a.createElement("small", null, "Never")), a.createElement("li", {
                    style: {
                        verticalAlign: "top"
                    }
                }, a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-title": "Custom",
                    style: {
                        display: "inline-block"
                    }
                }, a.createElement("button", {
                    className: "btn btn-default",
                    style: {
                        height: 34,
                        fontFamily: "joystix"
                    }
                }, a.createElement(y.default, {
                    name: "calendar"
                }))), a.createElement("br", null), a.createElement("small", null, "Custom"))));
                return e ? p : a.createElement(g.default, null, p)
            }
            renderAccentButtons() {
                if (this.isPlayingMultipleChoice())
                    return null;
                if (this.state.answered)
                    return null;
                const e = o.ZJ[this.props.targetLanguageIso] || {}
                  , t = [];
                for (var n in e)
                    e[n].split("").forEach((e => {
                        t.push(a.createElement("button", {
                            className: "btn btn-default btn-sm",
                            key: e,
                            onClick: t => this.onAccentBtnClick(t, e),
                            title: "alt+" + n
                        }, e))
                    }
                    ));
                if (this.isPlayingFullTextInput()) {
                    this.getCurrentSentencePlainText().match(B).filter(( (e, t, n) => n.indexOf(e) === t)).forEach((e => {
                        t.push(a.createElement("button", {
                            className: "btn btn-default btn-sm",
                            key: "punct-" + e,
                            onClick: t => this.onAccentBtnClick(t, e)
                        }, e))
                    }
                    ))
                }
                return t.length ? a.createElement("div", {
                    className: "accent-btns"
                }, t) : null
            }
            onAccentBtnClick(e, t) {
                e.shiftKey && (t = t.toUpperCase());
                const n = this.state.textInputValue
                  , a = this.textInput.selectionStart;
                this.setState({
                    textInputValue: n.substring(0, a) + t + n.substring(a)
                }, ( () => {
                    this.textInput.focus(),
                    this.textInput.selectionStart = a + 1,
                    this.textInput.selectionEnd = a + 1
                }
                ))
            }
            showOffBy(e) {
                const t = '<span class="off-by">Almost! Off by ' + e + " letter" + (1 === e ? "" : "s") + ".</span>";
                $(".off-by").length ? $(".off-by").replaceWith(t) : $(this.textInput).popover({
                    content: t,
                    html: !0,
                    trigger: "manual",
                    placement: "top"
                }).popover("show")
            }
            sendAnswer({correct: e, timeDiff: t}) {
                if (!this.props.isSignedIn)
                    return !1;
                const {collectionClozeSentencesAnswerUrl: n, gameSettings: a, multipleChoice: l, usedHint: s} = this.state
                  , r = this.getCurrentSentence()
                  , {mode: o, skill: i, scope: c} = this.props;
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        id: r.id,
                        correct: e,
                        mode: this.isPlayingMultipleChoice() || l ? F : this.isPlayingFullTextInput() ? "text_input" : o,
                        skill: i,
                        playing_favorites: this.isFavoritedScope(),
                        time: t,
                        used_hint: s
                    }),
                    method: "put",
                    url: r.collectionClozeSentencesAnswerUrl || n
                }).done((e => {
                    const t = e.languagePairing.level > this.state.languagePairingLevel;
                    this.setState({
                        languagePairingLevel: e.languagePairing.level,
                        leveledUp: this.state.leveledUp || t,
                        leveledUpModalVisible: "on" === a.leveledUpNotifications && t
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error saving that answer. Sorry about that. Your progress up until now has been saved. Please refresh the page and try again, and let us know if you see this message again.")
                }
                ))
            }
            isCorrectAnswer(e) {
                if (this.isPlayingFullTextInput())
                    return e === this.getCurrentSentencePlainText();
                const t = this.getCurrentSentenceAnswers()
                  , n = this.replaceAccents(e.toLowerCase().replace(/^\s+|\s+$/g, ""));
                return !!t.filter((e => n === this.replaceAccents(e.toLowerCase()))).length
            }
            submitAnswer(e) {
                const t = this.getCurrentSentence()
                  , n = this.getCurrentSentenceCloze()
                  , {mode: a, skill: l, scope: r} = this.props
                  , {collectionClozeSentences: i, collectionClozeSentencesAnswerUrl: c, correctlyAnsweredSentenceCount: d, currentSentenceTimerStart: u, elapsedTime: m, gameSettings: h, multipleChoice: g, nextReviewByLevel: p, numCorrect: b, numIncorrect: f, numMastered: E, numNew: y, numReview: S, playedNew: v, playedReview: C, previousAnswer: w, score: x, translationVisible: k, textInputValue: N, usedHint: T} = this.state
                  , P = this.isCorrectAnswer(e);
                let M = 0;
                if (this.isPlayingTextInput() && !g && !P && e !== w && "on" === h.spellingHints && Levenshtein && (M = Levenshtein.get(this.replaceAccents(e.toLowerCase()), this.replaceAccents(n.toLowerCase()))) <= 2)
                    return this.setState({
                        previousAnswer: e
                    }),
                    this.showOffBy(M),
                    !0;
                $(this.textInput).popover("destroy");
                const R = JSON.parse(JSON.stringify(i));
                let L = 0;
                const I = t.level;
                let z = t.level;
                P ? this.isFavoritedScope() ? L = P ? 2 : 0 : (z = Math.min(t.level + 1, 4),
                L = z * (this.isPlayingMultipleChoice() || g ? 4 : 8),
                T && (L *= .5),
                t.nextReview && t.nextReview > s()().format("YYYY-MM-DD") && (L *= .5)) : (this.isFavoritedScope() || (z = 0),
                t.wasIncorrect = !0,
                R.push(t));
                const U = !t.nextReview
                  , A = !U && !v[t.id] && !C[t.id] && !!t.nextReview
                  , j = this.isFavoritedScope() ? t.nextReview : s()().add(p[z], "days").format("YYYY-MM-DD");
                R.forEach((e => {
                    e.id === t.id && (e.level = z,
                    e.nextReview = j)
                }
                ));
                const D = Math.min((0,
                o.R4)() - u, 30);
                this.sendAnswer({
                    correct: P,
                    timeDiff: D
                }),
                (t.audioRecordingUrl || this.isTtsAvailable()) && "on" === h.textToSpeech && this.playSentenceAudio(),
                this.playAnswerSoundEffect(P),
                $('[data-toggle="tooltip"]').tooltip("hide"),
                this.afterAnswerKeyDownTriggered = !1,
                this.setState({
                    answered: !0,
                    answerSubmitted: e,
                    collectionClozeSentences: R,
                    correct: P,
                    correctlyAnsweredSentenceCount: d + (P ? 1 : 0),
                    elapsedTime: m + D,
                    numCorrect: b + (P ? 1 : 0),
                    numIncorrect: f + (P ? 0 : 1),
                    numMastered: E + (t.level < 4 && 4 === z ? 1 : 0),
                    numNew: y + (U ? 1 : 0),
                    numReview: S + (A ? 1 : 0),
                    playedNew: U ? Object.assign({}, v, {
                        [t.id]: !0
                    }) : v,
                    playedReview: A ? Object.assign({}, C, {
                        [t.id]: !0
                    }) : C,
                    points: L,
                    pronunciationVisible: !1,
                    score: x + L,
                    alreadyMastered: I === z && 4 === z,
                    textInputValue: n,
                    translationVisible: "hidden" === h.translations && k || "show-after" === h.translations,
                    transliterationVisible: !1
                })
            }
            playAnswerSoundEffect(e) {
                if ("on" !== this.state.gameSettings.soundEffects)
                    return !1;
                this.setupAudio(),
                this[(e ? "correct" : "incorrect") + "Audio"].play()
            }
            endInfiniteRound() {
                const e = this.state.collectionClozeSentences.filter(( (e, t) => t <= this.state.currentSentenceIndex || e.wasIncorrect));
                this.setState({
                    collectionClozeSentences: e,
                    endingInfiniteRound: !0
                }, ( () => this.next()))
            }
            renderEndInfiniteRoundBtn() {
                return !this.isInfiniteRound() || this.state.endingInfiniteRound ? null : a.createElement("button", {
                    className: "btn btn-xs btn-danger joystix text-center end-round",
                    "data-title": "Don't stop! Keep going!",
                    "data-toggle": "tooltip",
                    onClick: () => this.endInfiniteRound(),
                    style: {
                        marginRight: 10
                    }
                }, a.createElement("small", null, "End", a.createElement("br", null), "Round"))
            }
            answerQualityOptionsVisible() {
                const e = this.getCurrentSentence();
                return !this.isFavoritedScope() && !!this.state.alreadyMasteredNextReview && this.state.alreadyMastered && !(e.nextReview || "").match(/2100/) && 4 === e.level
            }
            renderNextBtn() {
                if (!this.state.answered)
                    return null;
                let e = null;
                return e = this.answerQualityOptionsVisible() ? a.createElement("span", {
                    className: "srs-controls"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-danger",
                    onClick: () => this.handleAnswerQualityResponse(0)
                }, a.createElement("small", null, "1. "), a.createElement("span", {
                    className: "joystix"
                }, "Hard")), a.createElement("button", {
                    className: "btn btn-lg btn-warning",
                    style: {
                        marginLeft: 10,
                        marginRight: 10
                    },
                    onClick: () => this.handleAnswerQualityResponse(1)
                }, a.createElement("small", null, "2. "), a.createElement("span", {
                    className: "joystix"
                }, "Normal")), a.createElement("button", {
                    className: "btn btn-lg btn-success",
                    onClick: () => this.handleAnswerQualityResponse(2)
                }, a.createElement("small", null, "3. "), a.createElement("span", {
                    className: "joystix"
                }, "Easy"))) : a.createElement("button", {
                    className: "btn btn-lg btn-success next joystix",
                    onClick: () => this.next()
                }, "Next", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                })),
                a.createElement("div", {
                    className: "navigation",
                    style: {
                        display: "block"
                    }
                }, this.renderEndInfiniteRoundBtn(), e)
            }
            handleAnswerQualityResponse(e) {
                if ("srs" === this.state.alreadyMasteredNextReview) {
                    const t = [1, 4, 7];
                    this.sendSrsResponse(t[e])
                } else if ("static" === this.state.alreadyMasteredNextReview) {
                    const {nextReviewByLevel: t} = this.state
                      , n = 0 === e ? .5 : e;
                    this.updateCurrentSentence("next_review", s()().add(Math.ceil(t[4] * n), "days").format("YYYY-MM-DD"))
                } else
                    alert("Something's gone terribly wrong! Sorry about that. Your answer's been saved, but not your Hard/Normal/Easy selection. Please let us know.");
                this.next()
            }
            sendSrsResponse(e) {
                const t = this.getCurrentSentence();
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    url: t.collectionClozeSentencesSrsResponseUrl || this.state.collectionClozeSentencesSrsResponseUrl,
                    method: "post",
                    dataType: "json",
                    contentType: "application/json",
                    data: JSON.stringify({
                        srs_response: {
                            collection_cloze_sentence_id: t.id,
                            quality: e
                        }
                    })
                }).done((e => {
                    this.setState({
                        collectionClozeSentences: this.state.collectionClozeSentences.map((n => n.id === t.id ? e.collectionClozeSentence : n)),
                        updating: !1
                    })
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error updating. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            isInfiniteRound() {
                return "infinite" === this.props.count
            }
            runTutorial() {
                this.setState({
                    isRunningTutorial: !0
                });
                const e = [{
                    selector: ".level .progress",
                    opts: {
                        content: "<p>Every sentence has a % Mastered.</p>"
                    }
                }, {
                    selector: ".level .progress",
                    opts: {
                        content: "<p>Answer a sentence correctly 4 times in a row to get it to 100% Mastered.</p>"
                    }
                }, {
                    selector: [".level .next-review", ".level .progress"],
                    opts: {
                        content: "<p>Each time a sentence is answered correctly, it's queued up to be reviewed further in the future.</p>"
                    }
                }, {
                    selector: ".score.total",
                    opts: {
                        content: "<p>A correct answer scores points.</p>"
                    }
                }, {
                    selector: ".score.total",
                    opts: {
                        content: "<p>A sentence with a higher % Mastered scores more points, and playing text input scores more points than multiple choice.</p>"
                    }
                }, {
                    selector: ".score.total",
                    opts: {
                        content: "<p>An incorrect answer scores 0 points and resets the sentence to 0% Mastered.</p>"
                    }
                }, {
                    selector: ".btn.game-settings",
                    opts: {
                        content: "<p>You can change the game settings here. Some settings are different for multiple choice vs. text input.</p>"
                    }
                }, {
                    selector: [".next", ".stage .sentence"],
                    opts: {
                        content: "<p>That's it! \ud83d\ude4c More questions? Click the Help button bottom right.</p>"
                    }
                }];
                let t = 0;
                const n = {
                    animation: !1,
                    container: "body",
                    html: !0,
                    placement: "bottom",
                    template: '\n        <div class="popover tutorial" role="tooltip">\n          <div class="arrow"></div>\n          <h3 class="popover-title"></h3>\n          <div class="popover-content"></div>\n        </div>\n      ',
                    trigger: "manual"
                }
                  , a = () => {
                    if (this.clearTutorialPopovers(),
                    t >= e.length)
                        return this.completedTutorial(),
                        !1;
                    const {opts: a} = e[t];
                    let {selector: l} = e[t];
                    const s = t + 1 >= e.length;
                    a.content = `\n        <div style="font-size: 1.25em">\n          ${a.content}\n        </div>\n        <div style="text-align: right">\n          <span class="joystix" style="margin-right: 10px">${t + 1}/${e.length}</span>\n          <button class="btn btn-success joystix next">${s ? "Done" : "Next"}</button>\n          ${s ? "" : '<button class="btn btn-default joystix skip">Skip</button>'}\n        </div>\n      `,
                    l instanceof Array && (l = $(l[0]).length ? l[0] : l[1]),
                    $(l).addClass("tutorial-target").popover(Object.assign({}, n, a)).popover("show");
                    const r = $(".popover")
                      , o = $(l).offset().top
                      , i = r.offset().top + r.height()
                      , c = $(window).scrollTop()
                      , d = $(window).height();
                    let u = null;
                    i > c + d && (u = i - d),
                    o < c && (u = o - 20),
                    u && $("html, body").animate({
                        scrollTop: u
                    })
                }
                ;
                $("body").on("click.tutorial", ".popover .btn.next", ( () => {
                    t += 1,
                    a()
                }
                )),
                $("body").on("click.tutorial", ".popover .btn.skip", ( () => {
                    this.completedTutorial()
                }
                )),
                a()
            }
            clearTutorialPopovers() {
                $(".tutorial-target").popover("destroy").removeClass("tutorial-target")
            }
            completedTutorial() {
                const {isSignedIn: e} = this.props
                  , {hasRunTutorial: t} = this.state;
                if (this.setState({
                    hasRunTutorial: !0,
                    isRunningTutorial: !1
                }, ( () => this.clearTutorialPopovers())),
                t)
                    return !0;
                e ? $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        user: {
                            has_run_play_tutorial: !0
                        }
                    }),
                    method: "put",
                    url: "/api/v1/users"
                }) : window.localStorage.setItem("hasRunPlayTutorial", "true")
            }
            next() {
                const {shouldRunTutorial: e} = this.props
                  , {currentSentenceIndex: t, collectionClozeSentences: n, gameSettings: a, hasRunTutorial: l, hasShownTokens: s, isRunningTutorial: r, tokensVisible: i} = this.state;
                if (this.isRoundComplete())
                    return !1;
                if (this.sentenceAudio && this.sentenceAudio.pause(),
                this.isPlayingSpeaking() && this.stopRecordingAndResetRecordBtn(),
                r)
                    this.completedTutorial();
                else if (e && !l)
                    return this.runTutorial();
                this.setState({
                    alreadyMastered: !1,
                    answered: !1,
                    correct: null,
                    points: null,
                    currentSentenceIndex: t + 1,
                    currentSentenceTimerStart: (0,
                    o.R4)(),
                    hasShownTokens: s || i,
                    listeningControlPlayComplete: !1,
                    multipleChoice: !1,
                    previousAnswer: null,
                    speakingTranscript: "",
                    startedTextInput: !1,
                    textInputChangedAfterAnswering: !1,
                    textInputValue: "",
                    tokensVisible: !1,
                    translationVisible: "visible" === a.translations,
                    usedHint: !1
                }, ( () => {
                    this.textInput && this.textInput.focus(),
                    this.isInfiniteRound() && this.state.currentSentenceIndex > this.state.collectionClozeSentences.length - 5 && this.loadMoreCollectionClozeSentences()
                }
                ))
            }
            onMultipleChoiceOptionClick(e) {
                this.state.answered ? this.next() : this.submitAnswer(e)
            }
            renderMultipleChoiceOptions() {
                if (!this.isPlayingMultipleChoice() && !this.state.multipleChoice)
                    return null;
                const {answered: e, answerSubmitted: t, currentSentenceIndex: n, correct: l, wordBank: s} = this.state
                  , r = this.getCurrentSentence().multipleChoiceOptions
                  , o = r.length ? r : s;
                return a.createElement(M.default, {
                    actualAnswer: this.getCurrentSentenceCloze(),
                    answered: e,
                    answerSubmitted: t,
                    correct: l,
                    onOptionClick: e => this.onMultipleChoiceOptionClick(e),
                    onClickableOptionClick: e => this.setState({
                        selectionPopoverId: "sentence",
                        selectedSentenceText: e
                    }),
                    options: o,
                    ref: e => this.multipleChoiceOptions = e,
                    sentenceIndex: n,
                    targetLanguageCode: this.props.targetLanguageCode
                })
            }
            renderListeningControl() {
                const {skill: e} = this.props
                  , {currentSentenceIndex: t, gameSettings: n} = this.state;
                if (!this.isPlayingListening())
                    return null;
                this.getCurrentSentence();
                return a.createElement(w.default, {
                    key: t,
                    onPlayComplete: () => this.setState({
                        listeningControlPlayComplete: !0
                    }, ( () => this.textInput && this.textInput.focus())),
                    onError: () => this.setState({
                        listeningControlPlayComplete: !0
                    }, ( () => this.textInput && this.textInput.focus())),
                    playAudio: this.playSentenceAudio.bind(this),
                    playCompleteOnFirstPlayEnded: "on" === n.listeningSkillAutoShowSentence
                })
            }
            startRecording() {
                if (this.state.recording)
                    return !1;
                this.setState({
                    recording: !0
                });
                try {
                    this.recognition.start(),
                    this.recognitionTimeout = setTimeout(( () => {
                        this.stopRecordingAndResetRecordBtn()
                    }
                    ), 1e4)
                } catch (e) {
                    this.onSpeechRecognitionError(e)
                }
            }
            stopRecordingAndResetRecordBtn() {
                this.recognition && this.recognition.stop(),
                this.setState({
                    recording: !1
                }),
                clearTimeout(this.recognitionTimeout)
            }
            renderSpeakingControl() {
                return this.isPlayingSpeaking() ? a.createElement("div", {
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-lg",
                    disabled: this.state.recording,
                    onClick: () => this.startRecording()
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-record",
                    style: {
                        color: "#f00"
                    }
                }), " ", this.state.recording ? "Recording..." : "Record"), a.createElement("div", null, this.state.speakingTranscript)) : null
            }
            renderRoundResults() {
                const {collectionClozeSentences: e, collectionClozeSentencesUpsertUrl: t, collectionsUrl: n, elapsedTime: l, hasShownTokens: s, isCollectionEditable: r, isPro: o, languagePairingUrl: i, leveledUp: c, nextReviewByLevel: d, numCorrect: u, numIncorrect: m, numMastered: h, numNew: g, numReview: p, reportErrorUrl: b, startingNumMastered: f, startingNumPlaying: E, startingNumReadyForReview: y, score: S, tokensUrl: v, updating: C} = this.state
                  , {baseLanguageEnglishName: w, baseLanguageFlagIso: x, collectionId: k, isTeachingCollection: N, languagePairingWebUrl: T, scope: P, targetLanguageCode: M, targetLanguageEnglishName: R, targetLanguageFlagIso: L, targetLanguageIso: I, targetLanguageName: U, teachingCollectionResultsUrl: j} = this.props
                  , D = []
                  , F = {};
                for (let a = 0, z = e.length; a < z; a++)
                    F[e[a].id] || (D.push(e[a]),
                    F[e[a].id] = !0);
                return a.createElement(A.default, null, a.createElement(z.default, {
                    answerTape: e.map((e => ({
                        id: e.id,
                        correct: !e.wasIncorrect
                    }))),
                    baseLanguageEnglishName: w,
                    baseLanguageFlagIso: x,
                    collectionClozeSentences: D,
                    collectionClozeSentencesUpsertUrl: t,
                    collectionId: k,
                    collectionsUrl: n,
                    elapsedTime: l,
                    hasShownTokens: s,
                    isCollectionEditable: r,
                    isPro: o,
                    isSignedIn: this.props.isSignedIn,
                    isTeachingCollection: N,
                    isTtsAvailable: this.isTtsAvailable.bind(this),
                    languagePairingUrl: i,
                    leveledUp: c,
                    nextReviewByLevel: d,
                    numCorrect: u,
                    numIncorrect: m,
                    numMastered: h,
                    numNew: g,
                    numReview: p,
                    onNextRound: () => this.nextRound(),
                    playSoundEffect: () => {
                        if ("on" === this.state.gameSettings.soundEffects && this.props.roundCompleteAudioUrl) {
                            const e = new Audio(this.props.roundCompleteAudioUrl);
                            e.volume = .25,
                            e.play()
                        }
                    }
                    ,
                    playTts: this.playSentenceAudio.bind(this),
                    reportErrorUrl: b,
                    scope: P,
                    score: S,
                    startingNumMastered: f,
                    startingNumPlaying: E,
                    startingNumReadyForReview: y,
                    targetLanguageCode: M,
                    targetLanguageEnglishName: R,
                    targetLanguageFlagIso: L,
                    targetLanguageIso: I,
                    targetLanguageName: U,
                    teachingCollectionResultsUrl: j,
                    tokensUrl: v,
                    updateHasShownTokens: () => this.setState({
                        hasShownTokens: !0
                    }),
                    updateSentence: this.updateSentence.bind(this),
                    updating: C
                }), this.renderFavoriteProPromoModal())
            }
            renderFavoriteProPromoModal() {
                return this.state.isPro ? null : a.createElement(N.default, {
                    id: "favorite-pro-promo-modal",
                    show: !1,
                    title: "Favorite"
                }, a.createElement(P.default, {
                    can: "favorite sentences and then practice just their favorites or download their favorites (to print out, for import into Anki, etc.).",
                    secondary: "Take control of your learning. Get fluent faster."
                }))
            }
            onKnowItClick() {
                this.knowItModal.hide();
                const e = this.getCurrentSentence();
                this.updateSentence({
                    sentence: e,
                    updates: {
                        level: 4,
                        next_review: "2100-01-01"
                    }
                })
            }
            renderKnowItModal() {
                return a.createElement(N.default, {
                    id: "know-it-modal",
                    onShown: () => this.knowItModal.$modal.find(".btn").focus(),
                    ref: e => this.knowItModal = e,
                    show: !1,
                    size: "small",
                    title: "Known"
                }, a.createElement("h4", {
                    className: "text-center",
                    style: {
                        marginTop: 0
                    }
                }, "Feeling confident?"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block go",
                    onClick: () => this.onKnowItClick()
                }, "Mark as Known")), a.createElement("div", {
                    className: "text-center"
                }, "This will set the sentence to 100% Mastered and set the next review date to the year 2100."))
            }
            onMasterClick() {
                this.masterModal.hide(),
                this.updateCurrentSentence("level", 4)
            }
            renderMasterModal() {
                const {nextReviewByLevel: e} = this.state;
                let t = s()().add(e[4], "days").format("YYYY-MM-DD");
                return t > "2100-01-01" && (t = "the year 2100"),
                a.createElement(N.default, {
                    id: "master-modal",
                    onShown: () => this.masterModal.$modal.find(".btn").focus(),
                    ref: e => this.masterModal = e,
                    show: !1,
                    size: "small",
                    title: "Master"
                }, a.createElement("h4", {
                    className: "text-center",
                    style: {
                        marginTop: 0
                    }
                }, "Already know this sentence?"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block go",
                    onClick: () => this.onMasterClick()
                }, "Set to 100% Mastered")), a.createElement("div", {
                    className: "text-center"
                }, "Next review due date will be ", t, "."))
            }
            onResetClick() {
                this.resetModal.hide(),
                this.updateCurrentSentence("level", 0)
            }
            renderResetModal() {
                const {nextReviewByLevel: e} = this.state;
                let t = s()().add(e[0], "days").format("YYYY-MM-DD");
                return a.createElement(N.default, {
                    id: "reset-modal",
                    onShown: () => this.resetModal.$modal.find(".btn").focus(),
                    ref: e => this.resetModal = e,
                    show: !1,
                    size: "small",
                    title: "Reset"
                }, a.createElement("h4", {
                    className: "text-center",
                    style: {
                        marginTop: 0
                    }
                }, "Want to see this sentence again sooner?"), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success joystix btn-block go",
                    onClick: () => this.onResetClick()
                }, "Reset to 0% Mastered")), a.createElement("div", {
                    className: "text-center"
                }, "Next review due date will be ", t, "."))
            }
            onIgnoreAllClick() {
                this.ignoreModal.hide(),
                this.ignoreAll(( () => this.next()))
            }
            onIgnoreClick() {
                this.ignoreModal.hide(),
                this.updateCurrentSentence("ignored", !0, ( () => this.next()))
            }
            renderIgnoreModal() {
                const {pro: e} = this.state;
                return a.createElement(N.default, {
                    id: "ignore-modal",
                    onShown: () => this.ignoreModal.$modal.find(".btn").first().focus(),
                    ref: e => this.ignoreModal = e,
                    show: !1,
                    size: "small",
                    title: "Ignore"
                }, a.createElement("p", null, "Ignoring a sentence removes it from your queue. You'll no longer see it and it won't count towards your progress.", a.createElement("button", {
                    className: "btn btn-danger btn-block joystix ignore-sentence",
                    style: {
                        marginTop: 5
                    },
                    onClick: () => this.onIgnoreClick()
                }, "Ignore")), !!this.props.collectionId && a.createElement("p", null, "Or you can ignore all sentences with the same missing word.", a.createElement("button", {
                    className: "btn btn-danger btn-block joystix ignore-all",
                    onClick: () => this.onIgnoreAllClick(),
                    style: {
                        marginTop: 5
                    }
                }, "Ignore All")), !e && a.createElement("small", null, a.createElement("strong", null, a.createElement("a", {
                    href: "/pro"
                }, "Clozemaster Pro"), " subscribers can unignore sentences as well as search all sentences!")))
            }
            renderGameSettingsControl() {
                return a.createElement("button", {
                    className: "btn btn-default game-settings",
                    "data-toggle": "modal",
                    "data-target": "#game-settings-modal"
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-cog"
                }))
            }
            renderGameSettingsModal() {
                return a.createElement(N.default, {
                    footer: a.createElement(T.default, null),
                    id: "game-settings-modal",
                    show: !1,
                    title: "Game Settings"
                }, a.createElement(b.default, {
                    audioRecordingsAvailable: this.audioRecordingsAvailable(),
                    clozemasterTtsAvailable: !!this.getCurrentSentence().ttsAudioUrl,
                    initialSettings: this.state.gameSettings,
                    isPlayingListening: this.isPlayingListening(),
                    isPlayingMultipleChoice: this.isPlayingMultipleChoice(),
                    isSignedIn: this.props.isSignedIn,
                    onUpdate: e => {
                        let t = this.state.translationVisible;
                        ("show-after" === e.translations && !this.state.answered || "hidden" === e.translations) && (t = !1),
                        this.setState({
                            gameSettings: e,
                            translationVisible: t
                        })
                    }
                    ,
                    ref: e => this.gameSettings = e,
                    systemTtsAvailable: this.isSystemTtsAvailable(),
                    systemTtsVoices: this.getSystemTtsVoices(),
                    targetLanguageName: this.props.targetLanguageName,
                    transliterationsAvailable: this.transliterationsAvailable(),
                    url: this.state.gameSettingsUrl
                }))
            }
            transliterationsAvailable() {
                const {collectionClozeSentences: e} = this.state;
                return !!e.find((e => !!e.transliteration))
            }
            audioRecordingsAvailable() {
                const {collectionClozeSentences: e} = this.state;
                return !!e.find((e => !!e.audioRecordingUrl))
            }
            renderTextInputSubmitBtn() {
                if (this.isPlayingTextInput() && !this.state.multipleChoice && !this.state.answered) {
                    const {textInputValue: e} = this.state;
                    return a.createElement("button", {
                        className: "btn btn-success joystix btn-lg",
                        onClick: () => this.submitAnswer(e),
                        disabled: !e
                    }, "Submit")
                }
            }
            renderSoundEffects() {
                const {correctAudioUrl: e, incorrectAudioUrl: t} = this.props;
                return a.createElement("div", {
                    className: "audio"
                }, a.createElement("audio", {
                    ref: e => this.correctAudio = e,
                    src: e
                }), a.createElement("audio", {
                    ref: e => this.incorrectAudio = e,
                    src: t
                }))
            }
            getUpdatedCollectionClozeSentences(e, t) {
                const n = JSON.parse(JSON.stringify(this.state.collectionClozeSentences));
                for (let a = 0, l = n.length; a < l; a++)
                    n[a].id === e && (n[a] = Object.assign(n[a], t));
                return n
            }
            onSentenceEditorUpdate(e) {
                this.sentenceEditorModal && this.sentenceEditorModal.hide();
                const t = this.getCurrentSentence()
                  , n = this.getUpdatedCollectionClozeSentences(t.id, e);
                this.setState({
                    collectionClozeSentences: n,
                    textInputChangedAfterAnswering: e.text !== t.text
                })
            }
            addCurrentSentenceToCollection() {
                this.getCurrentSentence();
                this.setState({
                    addSentenceToCollectionModalVisible: !0
                })
            }
            renderAddSentenceToCollectionModal() {
                if (!this.state.addSentenceToCollectionModalVisible)
                    return null;
                const {isPro: e, nextReviewByLevel: t, selectedSentenceClozeStr: n, selectedSentenceText: l} = this.state
                  , s = Object.assign({}, this.getCurrentSentence());
                delete s.id;
                let r = !0;
                return n && n.match(/.*\{\{.+\}\}.*/) ? (s.text = n,
                r = !1) : l && (s.text = s.text.replace(/{{|}}/g, ""),
                s.text = s.text.replace(l, "{{" + l + "}}"),
                r = !1),
                a.createElement(i.default, {
                    collectionClozeSentence: s,
                    collectionsUrl: this.state.collectionsUrl,
                    copyable: r,
                    isPro: e,
                    nextReviewByLevel: t,
                    onHidden: () => this.setState({
                        addSentenceToCollectionModalVisible: !1,
                        selectedSentenceClozeStr: null,
                        selectedSentenceText: null
                    }),
                    onSentenceAdded: e => this.addSentenceToCollectionModal && this.addSentenceToCollectionModal.hide(),
                    ref: e => this.addSentenceToCollectionModal = e
                })
            }
            renderSentenceEditorModal() {
                if (!this.state.sentenceEditorModalVisible)
                    return null;
                const e = this.getCurrentSentence();
                return a.createElement(d.default, {
                    alreadyMasteredNextReview: this.state.alreadyMasteredNextReview,
                    answerQualityOptionsVisible: this.answerQualityOptionsVisible(),
                    isPro: this.state.isPro,
                    isTextEditable: this.state.isCollectionEditable,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => this.setState({
                        sentenceEditorModalVisible: !1
                    }),
                    onUpdate: e => this.onSentenceEditorUpdate(e),
                    ref: e => this.sentenceEditorModal = e,
                    sentence: e,
                    upsertUrl: e.collectionClozeSentencesUpsertUrl || this.state.collectionClozeSentencesUpsertUrl
                })
            }
            renderLeveledUpModal() {
                if (!this.state.leveledUpModalVisible)
                    return null;
                const {baseLanguageEnglishName: e, baseLanguageFlagIso: t, leveledUpImageUrl: n, leveledUpShareUrl: l, targetLanguageEnglishName: s, targetLanguageFlagIso: r} = this.props;
                return a.createElement(C.default, {
                    baseLanguageEnglishName: e,
                    baseLanguageFlagIso: t,
                    imagePath: n,
                    level: this.state.languagePairingLevel,
                    onHidden: () => this.setState({
                        leveledUpModalVisible: !1
                    }),
                    shareUrl: l,
                    targetLanguageEnglishName: s,
                    targetLanguageFlagIso: r
                })
            }
            renderManageCollectionModal() {
                if (!this.state.manageCollectionModalVisible)
                    return null;
                const {baseLanguageEnglishName: e, targetLanguageCode: t, targetLanguageEnglishName: n, targetLanguageIso: l, targetLanguageName: s} = this.props;
                return a.createElement(k.default, {
                    baseLanguageEnglishName: e,
                    collectionClozeSentencesUrl: this.state.manageCollectionCollectionClozeSentencesUrl || this.state.collectionClozeSentencesUrl,
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.isPro,
                    onHidden: () => this.setState({
                        manageCollectionCollectionClozeSentencesUrl: null,
                        manageCollectionModalVisible: !1,
                        manageCollectionQuery: ""
                    }),
                    onUpdate: e => {
                        const {collectionClozeSentences: t} = this.state
                          , n = e.reduce(( (e, t) => (e[t.id] = t,
                        e)), {})
                          , a = [];
                        for (let l = 0, s = t.length; l < s; l++)
                            a.push(Object.assign({}, t[l], n[t[l].id] || {}));
                        this.setState({
                            collectionClozeSentences: a
                        })
                    }
                    ,
                    query: this.state.selectedSentenceText || this.state.manageCollectionQuery,
                    targetLanguageCode: t,
                    targetLanguageEnglishName: n,
                    targetLanguageIso: l,
                    targetLanguageName: s
                })
            }
            isListening() {
                const {skill: e} = this.props
                  , {listeningControlPlayComplete: t} = this.state;
                return this.isPlayingListening() && !t
            }
            renderGameControls() {
                return this.isListening() ? null : a.createElement(g.default, null, this.renderTextInputSubmitBtn(), this.renderNextBtn(), this.renderMultipleChoiceOptions())
            }
            renderClozeSentenceSearchModal() {
                return this.state.clozeSentenceSearchModalVisible ? a.createElement(c.default, {
                    collectionsUrl: this.state.collectionsUrl,
                    isPro: this.state.isPro,
                    nextReviewByLevel: this.state.nextReviewByLevel,
                    onHidden: () => {
                        this.setState({
                            clozeSentenceSearchModalVisible: !1
                        })
                    }
                    ,
                    query: this.state.selectedSentenceText,
                    url: this.state.clozeSentencesUrl
                }) : null
            }
            renderDiscussionModal() {
                const {discussionModalVisible: e} = this.state;
                if (!e)
                    return null;
                const {baseLanguageEnglishName: t, targetLanguageEnglishName: n, targetLanguageName: l} = this.props
                  , s = this.getCurrentSentence()
                  , {translation: r} = s;
                return a.createElement(m.default, Object.assign({}, this.getCurrentSentenceParts(), {
                    baseLanguageEnglishName: t,
                    isPro: this.state.isPro,
                    onHidden: () => this.setState({
                        discussionModalVisible: !1
                    }),
                    sentencePlainText: this.getCurrentSentencePlainText(),
                    translation: r,
                    targetLanguageEnglishName: n,
                    targetLanguageName: l
                }))
            }
            renderRoundHistoryModal() {
                const {collectionClozeSentences: e, currentSentenceIndex: t, isPro: n, roundHistoryModalVisible: l} = this.state;
                return l ? a.createElement(I.default, {
                    collectionClozeSentences: e.slice(0, t),
                    isPro: n,
                    onEditClick: e => {
                        this.setState({
                            manageCollectionCollectionClozeSentencesUrl: e.collectionClozeSentencesUrl,
                            manageCollectionModalVisible: !0,
                            manageCollectionQuery: this.getSentencePlainText(e.text)
                        })
                    }
                    ,
                    onHidden: () => this.setState({
                        roundHistoryModalVisible: !1
                    })
                }) : null
            }
            renderHelpModal() {
                return a.createElement(f.default, {
                    accentMap: o.ZJ[this.props.targetLanguageIso],
                    isPlayingTextInput: this.isPlayingTextInput(),
                    isUsingSrsControls: !!this.state.alreadyMasteredNextReview,
                    runTutorial: this.runTutorial.bind(this)
                })
            }
            renderModals() {
                return a.createElement(a.Fragment, null, this.renderAddSentenceToCollectionModal(), this.renderClozeSentenceSearchModal(), this.renderFavoriteProPromoModal(), this.renderGameSettingsModal(), this.renderIgnoreModal(), this.renderLeveledUpModal(), this.renderManageCollectionModal(), this.renderKnowItModal(), this.renderMasterModal(), this.renderResetModal(), this.renderSentenceEditorModal(), this.renderDiscussionModal(), this.renderRoundHistoryModal(), this.renderHelpModal())
            }
            isRoundComplete() {
                const {currentSentenceIndex: e, collectionClozeSentences: t, loading: n} = this.state;
                return !n && e >= t.length
            }
            renderSearchSentencesBtn() {
                if (!this.state.isSignedIn)
                    return null
            }
            renderManageCollectionBtn() {
                if (!this.state.isSignedIn || !this.props.collectionId)
                    return null
            }
            renderRoundHistoryBtn() {
                return a.createElement("button", {
                    className: "btn btn-default round-history",
                    onClick: () => this.setState({
                        roundHistoryModalVisible: !0
                    }),
                    style: {
                        marginRight: 10
                    },
                    title: "Round history (alt+y)"
                }, a.createElement(y.default, {
                    name: "history",
                    type: "fa"
                }))
            }
            renderReportErrorBtn() {
                if (!this.state.isSignedIn)
                    return null;
                const e = this.getCurrentSentence();
                return a.createElement(L.default, {
                    className: "btn btn-default",
                    collectionClozeSentence: e,
                    url: e.collectionClozeSentencesErrorUrl || this.state.reportErrorUrl
                })
            }
            renderHelpBtn() {
                return a.createElement("button", {
                    className: "btn btn-default",
                    "data-target": "#help-modal",
                    "data-toggle": "modal",
                    style: {
                        marginRight: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-info-circle",
                    "aria-hidden": "true"
                }), " Help!")
            }
            isNoSentences() {
                const {currentSentenceIndex: e, collectionClozeSentences: t, loading: n} = this.state;
                return !n && 0 === e && !t.length
            }
            renderNoSentences() {
                return a.createElement("div", {
                    className: "text-center"
                }, a.createElement("h2", null, "No more sentences to play!"), a.createElement("p", null, a.createElement("img", {
                    src: "https://cdn.clozemaster.com/images/sad-pikachu.gif"
                })), a.createElement("p", null, "Check back later as sentences become ready for review."), a.createElement("a", {
                    href: "/dashboard",
                    className: "btn btn-default joystix btn-lg"
                }, a.createElement(y.default, {
                    name: "chevron-left"
                }), " Dashboard"))
            }
            renderCurrentSentenceSourceLink() {
                const e = this.getCurrentSentence()
                  , {answered: t} = this.state;
                if (t && e.tatoebaId)
                    return a.createElement("div", {
                        style: {
                            marginTop: 10
                        }
                    }, a.createElement("a", {
                        className: "btn btn-xs btn-default",
                        href: `https://tatoeba.org/eng/sentences/show/${e.tatoebaId}`,
                        target: "_blank",
                        rel: "noopener"
                    }, "Sentence Source ", a.createElement(y.default, {
                        name: "new-window"
                    })))
            }
            renderExplanationRequest() {
                const e = this.getCurrentSentence()
                  , {collectionId: t} = this.props
                  , {answered: n, languagePairingId: l} = this.state;
                return n ? a.createElement(h.default, {
                    collectionId: t,
                    collectionClozeSentenceId: e.id,
                    languagePairingId: l
                }) : null
            }
            renderCopyCurrentSentenceToCollectionPopover() {
                if (!this.state.copyPopoverVisible)
                    return null;
                const e = this.getCurrentSentence()
                  , {collectionsUrl: t} = this.state;
                return a.createElement(u.default, {
                    collectionClozeSentence: e,
                    collectionsUrl: t,
                    onClose: () => this.setState({
                        copyPopoverVisible: !1
                    }),
                    onCopy: () => null
                })
            }
            renderStage() {
                return this.isNoSentences() ? this.renderNoSentences() : this.isRoundComplete() ? this.renderRoundResults() : a.createElement("div", {
                    className: "stage"
                }, a.createElement("div", {
                    className: "clozeable",
                    style: {
                        display: "block"
                    }
                }, this.renderHeader(), this.renderListeningControl(), this.renderSpeakingControl(), this.renderCurrentSentence(), this.renderGameControls(), a.createElement("div", {
                    className: "text-right",
                    style: {
                        marginTop: 10
                    }
                }, this.renderHelpBtn(), this.renderRoundHistoryBtn(), this.renderSearchSentencesBtn(), this.renderManageCollectionBtn(), this.renderGameSettingsControl(), a.createElement("span", {
                    style: {
                        marginLeft: 10
                    }
                }, this.renderReportErrorBtn()), this.renderCurrentSentenceSourceLink()), this.props.explanationRequestsEnabled && this.renderExplanationRequest(), this.renderModals(), this.props.test && this.isPlayingTextInput() && a.createElement("span", {
                    id: "text-input-answer"
                }, this.getCurrentSentenceCloze()), this.props.test && this.isPlayingFullTextInput() && a.createElement("span", {
                    id: "text-input-answer"
                }, this.getCurrentSentencePlainText())))
            }
            onStageFadeInComplete() {
                this.textInput && setTimeout(( () => this.textInput.focus()), 0)
            }
            render() {
                const {loading: e, intraRoundAd: t, intraRoundAdVisible: n} = this.state;
                return e ? a.createElement(x.default, null) : n ? a.createElement(v.default, {
                    ad: t,
                    nextRound: () => this.nextRound(),
                    onLinkClick: () => this.resetRoundsPlayedCount(),
                    onNextRoundable: () => this.setState({
                        intraRoundAdNextRoundable: !0
                    })
                }) : a.createElement("div", null, a.createElement(A.default, null, this.renderRoundStats()), a.createElement("div", {
                    className: "container"
                }, a.createElement(g.default, {
                    complete: () => this.onStageFadeInComplete()
                }, this.renderStage())), this.renderSoundEffects())
            }
        }
    },
    64639: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(40897);
        const s = {
            display: "block",
            marginTop: 4,
            textAlign: "center"
        };
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    count: 10,
                    mode: "multiple_choice",
                    skill: "vocabulary"
                }
            }
            componentDidMount() {
                try {
                    const {playOptions: e} = this.props;
                    if (e) {
                        let t = e.count || this.state.count
                          , n = e.skill || this.state.skill
                          , a = e.mode;
                        "text_input" !== a && "multiple_choice" !== a && (a = this.state.mode),
                        this.props.isPro ? ("listening" !== n || this.props.isListeningSkillAvailable) && ("speaking" !== n || this.isSpeakingSkillAvailable()) || (n = "vocabluary") : (t = 10,
                        n = "vocabulary"),
                        this.setState({
                            count: t,
                            mode: a,
                            skill: n
                        })
                    }
                } catch (e) {}
            }
            isSpeakingSkillAvailable() {
                const e = window.clozemaster.speechRecognition.isSupported(this.props.targetLanguageIso) && window.clozemaster.speechRecognition.isAvailable();
                return this.props.isSpeakingSkillAvailable || e
            }
            componentDidUpdate(e, t) {
                t.count === this.state.count && t.mode === this.state.mode && t.skill === this.state.skill || this.savePlayOptions()
            }
            savePlayOptions() {
                try {
                    window.localStorage.setItem("playOptions", JSON.stringify({
                        count: this.state.count,
                        mode: this.state.mode,
                        skill: this.state.skill
                    }))
                } catch (e) {}
            }
            renderScope() {
                const {scope: e} = this.props;
                let t = "";
                if ("ready_for_review" === e)
                    t = "Ready for Review";
                else if ("favorited" === e)
                    t = "Favorites";
                else {
                    if ("frequency_collections" !== e)
                        return null;
                    t = "Most Common Words"
                }
                return a.createElement("small", {
                    className: "joystix",
                    style: {
                        display: "block"
                    }
                }, t)
            }
            radioButton({disabled: e=!1, key: t, label: n, name: l, value: s}) {
                return a.createElement("div", {
                    className: "radio",
                    key: t
                }, a.createElement("label", null, a.createElement("input", {
                    type: "radio",
                    disabled: e,
                    name: l,
                    value: s,
                    checked: this.state[l] === s,
                    onChange: e => this.setState({
                        [l]: e.target.value
                    })
                }), n))
            }
            getSkillOptions() {
                const {isListeningSkillAvailable: e, isSignedIn: t, targetLanguageIso: n} = this.props
                  , a = [this.radioButton({
                    disabled: !t,
                    key: "vocabulary",
                    label: "Vocabulary",
                    name: "skill",
                    value: "vocabulary"
                })];
                return e && a.push(this.radioButton({
                    disabled: !t,
                    key: "listening",
                    label: "Listening",
                    name: "skill",
                    value: "listening"
                })),
                this.isSpeakingSkillAvailable() && a.push(this.radioButton({
                    disabled: !t,
                    key: "speaking",
                    label: "Speaking",
                    name: "skill",
                    value: "speaking"
                })),
                a
            }
            renderSkillProPromo() {
                const {skill: e} = this.state
                  , {isPro: t, listeningTrialExpired: n, speakingTrialExpired: l} = this.props;
                return t || "listening" !== e ? t || "speaking" !== e ? void 0 : a.createElement("small", {
                    style: s
                }, l && a.createElement("span", {
                    className: "text-danger"
                }, "You've already played your one free round for today. "), !l && "Play one round of speaking for free per day. ", a.createElement("strong", null, a.createElement("a", {
                    href: "/pro"
                }, "Get Clozemaster Pro")), " for unlimited speaking practice!") : a.createElement("small", {
                    style: s
                }, n && a.createElement("span", {
                    className: "text-danger"
                }, "You've already played your one free round for today. "), !n && "Play one round of listening for free per day. ", a.createElement("strong", null, a.createElement("a", {
                    href: "/pro"
                }, "Get Clozemaster Pro")), " for unlimited listening practice!")
            }
            isSkillValid() {
                const {isPro: e, listeningTrialExpired: t, speakingTrialExpired: n} = this.props
                  , {skill: a} = this.state;
                return !("listening" === a && !e && t) && !("speaking" === a && !e && n)
            }
            isSubmittable() {
                return this.isSkillValid()
            }
            renderSkill() {
                const {skill: e} = this.state
                  , t = this.getSkillOptions();
                return 1 === t.length ? a.createElement("input", {
                    type: "hidden",
                    name: "skill",
                    value: e
                }) : a.createElement("div", {
                    className: "form-group" + (this.isSkillValid() ? "" : " has-error")
                }, a.createElement("strong", null, "Skill:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, t), this.renderSkillProPromo())
            }
            renderSentencesPerRound() {
                const {count: e} = this.state
                  , {isPro: t} = this.props;
                return a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "count"
                }, "Sentences per round:"), a.createElement("select", {
                    className: "form-control",
                    name: "count",
                    value: e,
                    onChange: e => this.setState({
                        count: e.target.value
                    })
                }, [5, 10, 20, 30, 40, 50, 100, "Infinite"].map((e => a.createElement("option", {
                    key: e,
                    disabled: !t && 10 !== e,
                    value: e.toString().toLowerCase()
                }, e)))), !t && a.createElement("small", {
                    style: s
                }, a.createElement("strong", null, a.createElement("a", {
                    href: "/pro"
                }, "Get Clozemaster Pro")), " to change the number of sentences per round!"))
            }
            renderMode() {
                const {translateTranscribeAvailable: e} = this.props
                  , {mode: t, skill: n} = this.state
                  , l = a.createElement(a.Fragment, null, this.radioButton({
                    label: "Multiple Choice (Easy)",
                    name: "mode",
                    value: "multiple_choice"
                }), this.radioButton({
                    label: "Text Input (Difficult)",
                    name: "mode",
                    value: "text_input"
                }), "listening" === n && this.radioButton({
                    label: "Transcribe (Hard)",
                    name: "mode",
                    value: "full_text_input"
                }));
                return a.createElement("div", {
                    className: "form-group"
                }, a.createElement("strong", null, "Mode:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, l, a.createElement("small", {
                    style: {
                        display: "block",
                        marginTop: -5
                    }
                }, "Score 2x the points with Text Input", "listening" === n && " and Transcribe", "!")))
            }
            render() {
                const {onHidden: e, collection: t, scope: n, skill: s} = this.props
                  , {mode: r} = this.state;
                return a.createElement(l.default, {
                    onHidden: e,
                    size: "small",
                    title: "Play"
                }, a.createElement("p", {
                    className: "text-center"
                }, a.createElement("span", {
                    className: "joystix"
                }, t.name), this.renderScope()), a.createElement("form", {
                    method: "get",
                    action: t.playWebUrl
                }, a.createElement("input", {
                    type: "hidden",
                    name: "scope",
                    value: n || ""
                }), this.renderSkill(), this.renderSentencesPerRound(), this.renderMode(), a.createElement("button", {
                    disabled: !this.isSubmittable(),
                    className: "btn btn-block joystix btn-success"
                }, "Go ", a.createElement("span", {
                    className: "glyphicon glyphicon-chevron-right"
                }))))
            }
        }
    },
    46402: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40727);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    ttsAvailable: !1
                }
            }
            componentDidMount() {
                this.initTts()
            }
            componentWillUnmount() {
                clearTimeout(this.ttsTimeout)
            }
            initTts() {
                this.ttsTimeoutCount = 0,
                this.checkForTts()
            }
            checkForTts() {
                const e = this.isSystemTtsAvailable();
                this.setState({
                    ttsAvailable: e
                }),
                this.ttsTimeoutCount += 1,
                !e && this.ttsTimeoutCount < 5 && (this.ttsTimeout = setTimeout(( () => this.checkForTts()), 1e3))
            }
            isSystemTtsAvailable() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.systemTtsAvailable(e, t)
            }
            getSystemTtsVoices() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.getSystemTtsVoices(e, t)
            }
            playTts() {
                const {text: e} = this.props
                  , t = this.getSystemTtsVoices()[0]
                  , n = new SpeechSynthesisUtterance(e);
                n.voice = t,
                n.lang = t.lang,
                window.speechSynthesis.cancel(),
                window.speechSynthesis.speak(n)
            }
            render() {
                const {ttsAvailable: e} = this.state;
                if (!e)
                    return null;
                const {className: t, style: n} = this.props;
                return a.createElement("button", {
                    className: t || "btn btn-default btn-xs",
                    onClick: () => this.playTts(),
                    style: n
                }, a.createElement(l.default, {
                    name: "volume-up"
                }))
            }
        }
    },
    50715: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return a.createElement("span", {
                className: "glyphicon glyphicon-play-circle played-count-icon",
                style: e.style
            })
        }
    },
    20126: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l(e) {
            return a.createElement("div", {
                className: "progress",
                style: e.style
            }, a.createElement("div", {
                className: "progress-bar progress-bar-" + (e.context || "success"),
                role: "progressbar",
                "aria-valuenow": e.percent,
                "aria-valuemin": "0",
                "aria-valuemax": "100",
                style: {
                    width: e.percent + "%"
                }
            }, a.createElement("span", {
                className: "sr-only"
            }, e.percent, "% Complete"), e.children))
        }
    },
    31842: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(68462)
          , r = n(40727)
          , o = n(73898);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    playing: !1,
                    sentences: []
                }
            }
            componentDidMount() {
                this.isSystemTtsAvailable(),
                this.loadSentences()
            }
            isSystemTtsAvailable() {
                const {baseLanguageIso: e, baseLanguageCode: t} = this.props;
                return window.clozemaster.systemTtsAvailable(e, t)
            }
            loadSentences() {
                $.ajax({
                    data: {
                        count: 100,
                        radio: !0
                    },
                    url: this.props.url
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loading: !1,
                        sentences: e.collectionClozeSentences
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading more sentences. Sorry about that. Please refresh the page and let us know if you see this message again.")
                }
                ))
            }
            async playAudio() {
                if (clearTimeout(this.playAudioTimeout),
                !this.state.sentences.length)
                    return null;
                !this.state.loading && this.state.sentences.length <= 5 && this.loadSentences();
                const e = this.state.sentences[0]
                  , t = ["text", "pause", "translation", "pause", "text", "pause", "text", "pause", "text", "pause"];
                console.log(e);
                let n = !1;
                this.playAudioTimeout = setTimeout(( () => {
                    n = !0,
                    this.next()
                }
                ), 18e4);
                try {
                    for (let a = 0, l = t.length; a < l && (console.log(t[a]),
                    !n); a++)
                        "text" === t[a] ? await this.playRemoteAudio(e.ttsAudioUrl) : "translation" === t[a] ? await this.playSystemTts(e.translation) : await this.sleep(2)
                } catch (a) {
                    console.log("playAudio error", a)
                }
                n || this.next()
            }
            next() {
                this.setState({
                    sentences: this.state.sentences.slice(1)
                }, ( () => this.playAudio()))
            }
            playRemoteAudio(e) {
                return new Promise(( (t, n) => {
                    const a = new Audio(e);
                    a.addEventListener("playing", ( () => {
                        clearTimeout(this.playRemoteAudioTimeout),
                        this.playRemoteAudioTimeout = setTimeout(n, 1e4)
                    }
                    )),
                    a.addEventListener("ended", ( () => {
                        clearTimeout(this.playRemoteAudioTimeout),
                        t()
                    }
                    )),
                    a.addEventListener("error", (e => {
                        clearTimeout(this.playRemoteAudioTimeout),
                        n(e)
                    }
                    )),
                    this.playRemoteAudioTimeout = setTimeout(n, 5e3),
                    a.play().catch(n)
                }
                ))
            }
            playSystemTts(e) {
                return new Promise(( (t, n) => {
                    const {baseLanguageIso: a, baseLanguageCode: s} = this.props;
                    this.playSystemTtsTimeout = setTimeout(n, 5e3);
                    const r = window.clozemaster.getSystemTtsVoices(a, s);
                    (0,
                    l.R3)(r),
                    console.log(r);
                    const o = r.find((e => e.name.match(/Google/))) || r[0];
                    console.log(o);
                    const i = new SpeechSynthesisUtterance(e);
                    i.voice = o,
                    i.lang = o.lang,
                    i.onstart = () => {
                        clearTimeout(this.playSystemTtsTimeout),
                        this.playSystemTtsTimeout = setTimeout(n, 1e4)
                    }
                    ,
                    i.onend = () => {
                        clearTimeout(this.playSystemTtsTimeout),
                        t()
                    }
                    ,
                    i.onerror = e => {
                        clearTimeout(this.playSystemTtsTimeout),
                        n(e)
                    }
                    ,
                    window.speechSynthesis.cancel(),
                    window.speechSynthesis.speak(i)
                }
                ))
            }
            getCurrentSentencePlainText() {
                return this.state.sentences[0].text.replace(/{{|}}/g, "")
            }
            sleep(e) {
                return new Promise(( (t, n) => {
                    setTimeout(t, 1e3 * e)
                }
                ))
            }
            renderContent() {
                if (this.state.loading && !this.state.sentences.length)
                    return a.createElement(o.default, null);
                if (!this.state.playing)
                    return a.createElement("button", {
                        className: "btn btn-lg btn-default",
                        onClick: () => this.setState({
                            playing: !0
                        }, ( () => this.playAudio())),
                        style: {
                            marginTop: 10
                        }
                    }, a.createElement(r.default, {
                        name: "play"
                    }));
                const e = this.state.sentences[0];
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    style: {
                        fontFamily: "joystix"
                    }
                }, "Clozemaster Radio"), a.createElement("div", null, a.createElement("span", {
                    style: {
                        fontSize: "2em"
                    }
                }, a.createElement(s.default, {
                    text: e.text
                })), a.createElement("div", null, e.translation)), a.createElement("div", null, a.createElement("div", null, a.createElement("a", {
                    href: this.props.googlePlayUrl,
                    target: "_blank"
                }, a.createElement("img", {
                    src: this.props.googlePlayBadgeUrl,
                    height: 120
                })), a.createElement("a", {
                    href: this.props.appStoreUrl,
                    target: "_blank"
                }, a.createElement("img", {
                    src: this.props.appStoreBadgeUrl,
                    height: 80
                }))), a.createElement("div", {
                    style: {
                        fontFamily: "joystix"
                    }
                }, "Get Clozemaster. Get fluent faster.")))
            }
            render() {
                return a.createElement("div", {
                    style: {
                        alignItems: "center",
                        background: "#000",
                        bottom: 0,
                        color: "#fff",
                        display: "flex",
                        flexDirection: "column",
                        fontSize: "3em",
                        justifyContent: this.state.playing ? "space-between" : "center",
                        left: 0,
                        padding: 20,
                        position: "fixed",
                        right: 0,
                        textAlign: "center",
                        top: 0
                    }
                }, this.renderContent())
            }
        }
    },
    64942: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(68462)
          , s = n(40727);
        function r({demoSentences: e}) {
            const [t,n] = (0,
            a.useState)(0)
              , [r,o] = (0,
            a.useState)(null)
              , [i,c] = (0,
            a.useState)(null)
              , d = e[t]
              , u = () => {
                n((t => (t + 1) % e.length)),
                o(null),
                c(null)
            }
            ;
            return a.createElement("div", null, a.createElement("div", {
                style: {
                    alignItems: "flex-start",
                    display: "flex",
                    flexDirection: "row",
                    justifyContent: "space-between"
                }
            }, a.createElement("div", {
                className: "label label-default",
                style: {
                    alignItems: "center",
                    display: "flex",
                    flexDirection: "row",
                    gap: 8
                }
            }, a.createElement("img", {
                src: d.flagUrl,
                height: 16
            }), a.createElement("span", {
                style: {
                    fontSize: "14px"
                }
            }, d.language)), a.createElement("div", null, a.createElement("button", {
                className: "btn btn-default",
                onClick: () => {
                    new Audio(d.ttsAudioUrl).play()
                }
            }, a.createElement(s.default, {
                name: "volume-up"
            })))), a.createElement("div", {
                style: {
                    textAlign: "center"
                }
            }, a.createElement("p", {
                style: {
                    fontSize: "2em"
                }
            }, "correct" === i ? a.createElement(l.default, {
                text: d.text
            }) : d.text.replace(/{{.+}}/, "_____")), a.createElement("p", null, d.translation), a.createElement("br", null), a.createElement("div", {
                style: {
                    display: "flex",
                    flexDirection: "row",
                    flexWrap: "wrap",
                    gap: 20,
                    justifyContent: "center",
                    marginBottom: 20
                }
            }, d.multipleChoiceOptions.map((e => {
                const t = r === e
                  , n = (d.cloze,
                "correct" === i && t)
                  , l = "incorrect" === i && t;
                return a.createElement("button", {
                    className: `btn btn-lg btn-default ${n ? "btn-success" : ""} ${l ? "btn-danger" : ""}`,
                    key: e,
                    onClick: () => (e => {
                        i && u(),
                        o(e),
                        e === d.cloze ? c("correct") : (c("incorrect"),
                        setTimeout(( () => {
                            c(null),
                            o(null)
                        }
                        ), 1e3))
                    }
                    )(e),
                    style: {
                        width: 300
                    }
                }, e, n && a.createElement(s.default, {
                    name: "ok",
                    style: {
                        paddingLeft: 10
                    }
                }), l && a.createElement(s.default, {
                    name: "remove",
                    style: {
                        paddingLeft: 10
                    }
                }))
            }
            ))), a.createElement("button", {
                className: "btn btn-success btn-lg joystix",
                disabled: "correct" !== i,
                onClick: u,
                style: {
                    opacity: "correct" === i ? 1 : 0
                }
            }, "Next"), a.createElement("div", {
                style: {
                    display: "flex",
                    flexDirection: "row",
                    gap: 10,
                    justifyContent: "center",
                    marginTop: 20
                }
            }, e.map(( (e, n) => a.createElement("div", {
                key: n,
                style: {
                    backgroundColor: n === t ? "#000" : "#efefef",
                    borderRadius: "calc(infinity * 1px)",
                    height: 10,
                    width: 10
                }
            }))))))
        }
    },
    28499: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            render() {
                const {checked: e, disabled: t, id: n, label: l, name: s, onChange: r, style: o, value: i} = this.props;
                return a.createElement("div", {
                    className: "radio",
                    style: o
                }, a.createElement("label", null, a.createElement("input", {
                    checked: !!e,
                    disabled: t,
                    id: n,
                    name: s,
                    onChange: r,
                    type: "radio",
                    value: i
                }), l))
            }
        }
    },
    89977: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(95093)
          , s = n.n(l)
          , r = n(58108)
          , o = n(73898);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    group: e.group || "everyone",
                    metric: e.metric || "num_points",
                    period: e.period || "weekly",
                    loading: !0,
                    results: []
                }
            }
            componentDidMount() {
                this.submitRankingRequest(),
                $(this.content).tooltip({
                    selector: '[data-toggle="tooltip"]'
                })
            }
            componentWillUnmount() {
                clearTimeout(this.getRankingResultsTimeout)
            }
            submitRankingRequest() {
                const {group: e, metric: t, period: n} = this.state;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        ranking: {
                            count: 50,
                            count_around_user: 3,
                            group: e,
                            metric: t,
                            period: n
                        }
                    },
                    method: "post",
                    url: this.props.rankingsUrl
                }).done((e => {
                    console.log(e);
                    const {url: t} = e.ranking;
                    this.getRankingResults(t)
                }
                )).fail(( () => {
                    this.handleError()
                }
                ))
            }
            getRankingResults(e) {
                $.ajax({
                    url: e
                }).done((t => {
                    console.log(t);
                    const {results: n, status: a} = t.ranking;
                    "complete" === a ? this.setState({
                        loading: !1,
                        results: n
                    }) : "error" === a ? this.handleError() : "working" === a || "pending" === a ? this.getRankingResultsTimeout = setTimeout(( () => this.getRankingResults(e)), 1e3) : this.handleError()
                }
                )).fail(( () => {
                    this.handleError()
                }
                ))
            }
            handleError() {
                alert("Oh no! There was an error loading the leaderboards. Please try again, and please let us know if you see this message again."),
                this.setState({
                    loading: !1,
                    results: []
                })
            }
            getPeriodFromDate() {
                const e = "YYYY-MM-DD"
                  , {period: t} = this.state;
                return "weekly" === t ? s()().startOf("isoWeek").format(e) : "monthly" === t ? s()().startOf("month").format(e) : "yearly" === t ? s()().startOf("year").format(e) : null
            }
            getPeriodToDate() {
                const e = "YYYY-MM-DD"
                  , {period: t} = this.state;
                return "weekly" === t ? s()().endOf("isoWeek").format(e) : "monthly" === t ? s()().endOf("month").format(e) : "yearly" === t ? s()().endOf("year").format(e) : null
            }
            renderRankingTable() {
                const {metric: e, results: t} = this.state;
                return t && t.length ? a.createElement("table", {
                    className: "table table-striped",
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("tbody", null, t.map((t => a.createElement("tr", {
                    className: "result",
                    key: t.rank
                }, a.createElement("td", null, t.rank, "."), a.createElement("td", {
                    style: {
                        width: "100%"
                    }
                }, a.createElement("a", {
                    href: t.userProfileUrl,
                    className: "joystix"
                }, t.username), a.createElement("sup", {
                    "data-toggle": "tooltip",
                    title: "Level " + t.level
                }, t.level), "" + t.rank === "1" && a.createElement("span", {
                    style: {
                        marginLeft: 4
                    }
                }, "\ud83c\udfc6")), a.createElement("td", null, "time_played" === e ? (0,
                r.YS)(t.sum) : t.sum.toLocaleString())))))) : a.createElement("div", {
                    className: "text-center"
                }, a.createElement("em", null, "No one yet - be the first!"))
            }
            renderResults() {
                return this.state.loading ? a.createElement(o.default, null) : a.createElement("div", {
                    className: "text-center"
                }, this.renderResultsHeader(), this.renderRankingTable(), this.renderMetricNotes())
            }
            renderMetricNotes() {
                if ("time_played" === this.state.metric)
                    return a.createElement("p", null, a.createElement("small", null, "*Max 15 seconds per sentence played."))
            }
            renderResultsHeader() {
                const {period: e} = this.state;
                let t = null
                  , n = null;
                return "weekly" === e ? n = a.createElement(a.Fragment, null, "Week of ", s()().startOf("isoWeek").format("MMM D"), "-", s()().endOf("isoWeek").format("MMM D")) : "monthly" === e ? n = a.createElement(a.Fragment, null, "Month of ", s()().startOf("month").format("MMM D"), "-", s()().endOf("month").format("MMM D")) : "yearly" === e ? n = a.createElement(a.Fragment, null, "Year of ", s()().startOf("year").format("MMM D"), "-", s()().endOf("year").format("MMM D YYYY")) : t = "All-Time",
                a.createElement("h4", null, t || n)
            }
            renderSocial() {
                const {group: e} = this.state;
                return null
            }
            onFormSubmit(e) {
                e.preventDefault(),
                this.submitRankingRequest()
            }
            renderForm() {
                const {group: e, loading: t, metric: n, period: l} = this.state;
                return a.createElement("form", {
                    onSubmit: e => this.onFormSubmit(e)
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("select", {
                    className: "form-control",
                    disabled: t,
                    name: "group",
                    onChange: e => this.setState({
                        group: e.target.value
                    }, ( () => this.submitRankingRequest())),
                    value: e
                }, a.createElement("option", {
                    value: "everyone"
                }, "Everyone"), a.createElement("option", {
                    value: "following"
                }, "Following"))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("select", {
                    className: "form-control",
                    disabled: t,
                    name: "period",
                    onChange: e => this.setState({
                        period: e.target.value
                    }, ( () => this.submitRankingRequest())),
                    value: l
                }, a.createElement("option", {
                    value: "weekly"
                }, "This Week"), a.createElement("option", {
                    value: "monthly"
                }, "This Month"), a.createElement("option", {
                    value: "yearly"
                }, "This Year"), a.createElement("option", {
                    value: "all_time"
                }, "All-Time"))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("select", {
                    className: "form-control",
                    disabled: t,
                    name: "metric",
                    onChange: e => this.setState({
                        metric: e.target.value
                    }, ( () => this.submitRankingRequest())),
                    value: n
                }, a.createElement("option", {
                    value: "num_listening"
                }, "Listening"), a.createElement("option", {
                    value: "num_mastered"
                }, "Mastered"), a.createElement("option", {
                    value: "num_multiple_choice"
                }, "Multiple Choice"), a.createElement("option", {
                    value: "num_new"
                }, "New"), a.createElement("option", {
                    value: "num_points"
                }, "Points"), a.createElement("option", {
                    value: "num_review"
                }, "Review"), a.createElement("option", {
                    value: "num_speaking"
                }, "Speaking"), a.createElement("option", {
                    value: "num_text_input"
                }, "Text Input"), a.createElement("option", {
                    value: "time_played"
                }, "Time"), a.createElement("option", {
                    value: "num_played"
                }, "Total Played"))))
            }
            renderContent() {
                return a.createElement(a.Fragment, null, this.renderForm(), this.renderResults(), this.renderSocial())
            }
            render() {
                return a.createElement("div", {
                    id: "rankings",
                    ref: e => this.content = e
                }, this.renderContent())
            }
        }
    },
    79585: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return b
            }
        });
        var a = n(96540)
          , l = (n(58108),
        n(68135))
          , s = n(36052)
          , r = n(1988)
          , o = n(10065)
          , i = n(83915)
          , c = n(40727)
          , d = n(73898)
          , u = n(40897)
          , m = n(508)
          , h = n(86956)
          , g = n(20126)
          , p = n(57297);
        class b extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collections: null,
                    includeResolved: !0,
                    includeSeen: !0,
                    languagePairings: null,
                    loading: !0,
                    notifyUsersOnResolve: !0,
                    orderBy: null,
                    page: 1,
                    perPage: 50,
                    reportedSentence: null,
                    reportedSentences: [],
                    resolveModalVisible: !1,
                    selectedCollectionId: parseInt(e.selectedCollectionId) || "",
                    selectedLanguagePairingId: parseInt(e.selectedLanguagePairingId) || "",
                    total: 0
                }
            }
            componentDidMount() {
                this.loadErrors()
            }
            loadErrors() {
                this.setState({
                    loading: !0
                });
                const e = {
                    include_resolved: this.state.includeResolved,
                    include_marked_as_seen: this.state.includeSeen,
                    order_by: this.state.orderBy,
                    page: this.state.page
                };
                this.props.languagePairingsSelector && (e.collection_id = this.state.selectedCollectionId,
                e.language_pairing_id = this.state.selectedLanguagePairingId,
                e.include_language_pairings = !0),
                $.ajax({
                    data: e,
                    url: this.props.url
                }).done((e => {
                    console.log(e);
                    const t = {
                        loading: !1,
                        reportedSentences: e.reportedCollectionClozeSentences,
                        total: e.total
                    };
                    this.props.languagePairingsSelector && (t.collections = e.collections,
                    t.languagePairings = e.languagePairings,
                    t.allLanguagePairingsResolvedCount = e.languagePairings.reduce(( (e, t) => e + t.resolved), 0),
                    t.allLanguagePairingsTotalCount = e.languagePairings.reduce(( (e, t) => e + t.total), 0)),
                    this.setState(t)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading errors. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            onEditSentenceClick(e) {
                this.setState({
                    editingReportedSentence: e
                })
            }
            onClaimClick(e) {
                this.updateClaim({
                    url: e.claimUrl
                })
            }
            onRemoveClaimClick(e) {
                this.updateClaim({
                    url: e.removeClaimUrl
                })
            }
            updateClaim({url: e}) {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    method: "post",
                    url: e
                }).done((e => {
                    console.log(e);
                    const {reportedCollectionClozeSentence: t} = e;
                    this.setState({
                        reportedSentences: this.state.reportedSentences.map((e => e.id === t.id ? Object.assign({}, e, t) : e)),
                        updating: !1
                    })
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error claiming the sentence! Sorry about that. Please try again let us know if you see this message again.")
                }
                ))
            }
            onMarkAsSeenClick(e) {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    method: "post",
                    url: e.markAsSeenUrl
                }).done((e => {
                    console.log(e);
                    const {reportedCollectionClozeSentence: t} = e;
                    this.setState({
                        reportedSentences: this.state.reportedSentences.map((e => e.id === t.id ? Object.assign({}, e, t) : e)),
                        updating: !1
                    })
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error marking the sentence as seen! Sorry about that. Please try again let us know if you see this message again.")
                }
                ))
            }
            onResolveClick(e) {
                this.setState({
                    reportedSentence: e,
                    resolveModalVisible: !0
                })
            }
            resolve({reportedSentence: e, notifyUsers: t=!1}) {
                this.setState({
                    updating: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        notify_users: t
                    }),
                    method: "put",
                    url: e.resolveUrl
                }).done((t => {
                    console.log(t);
                    const {reportedCollectionClozeSentence: n} = t
                      , a = {
                        reportedSentences: this.state.reportedSentences.map((e => e.id === n.id ? Object.assign({}, e, n) : e)),
                        updating: !1
                    };
                    this.props.languagePairingsSelector && (a.languagePairings = this.state.languagePairings.map((t => e.languagePairingId === t.id ? Object.assign({}, t, {
                        resolved: t.resolved + 1
                    }) : t))),
                    a.allLanguagePairingsResolvedCount = this.state.allLanguagePairingsResolvedCount + 1,
                    this.setState(a)
                }
                )).fail(( () => {
                    this.setState({
                        updating: !1
                    }),
                    alert("Oh no! There was an error resolving the sentence! Sorry about that. Please try again let us know if you see this message again.")
                }
                ))
            }
            renderResolveModal() {
                const {notifyUsersOnResolve: e, reportedSentence: t, resolveModalVisible: n} = this.state;
                return n ? a.createElement(u.default, {
                    footer: a.createElement(m.default, {
                        text: "Cancel"
                    }),
                    onHidden: () => this.setState({
                        reportedSentence: null,
                        resolveModalVisible: !1
                    }),
                    ref: e => this.resolveModal = e,
                    size: "small",
                    title: "Resolve Sentence"
                }, a.createElement("p", {
                    className: "alert alert-danger"
                }, "Are you sure? The sentence will no longer be editable and the users who reported the sentence will be notified. This action cannot be undone."), a.createElement(l.default, {
                    checked: e,
                    label: "Notify users",
                    onChange: e => this.setState({
                        notifyUsersOnResolve: e.target.checked
                    })
                }), a.createElement("button", {
                    className: "btn btn-success joystix btn-block",
                    onClick: () => this.resolveModal.hide({
                        onHidden: () => this.resolve({
                            notifyUsers: this.state.notifyUsersOnResolve,
                            reportedSentence: t
                        })
                    })
                }, "Resolve")) : null
            }
            renderCollectionClozeSentenceExplanationModal() {
                const {explanationModalVisible: e, reportedSentence: t} = this.state;
                return e ? a.createElement(u.default, {
                    footer: a.createElement(m.default, {
                        text: "Cancel"
                    }),
                    onHidden: () => this.setState({
                        explanationModalVisible: !1,
                        reportedSentence: null
                    }),
                    ref: e => this.explanationModal = e,
                    title: "Explanation"
                }, a.createElement("p", null, "Explanations are from ChatGPT. Sometimes they come back from ChatGPT as Markdown. Until we get a Markdown editor implemented, the only option for now is to delete the explanation so it regenerates the next time a user clicks/taps the Explain button after answering."), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-danger",
                    onClick: () => confirm("Are you sure?") && this.unsetExplanation(t)
                }, "Delete Explanation")), a.createElement("pre", null, t.explanation)) : null
            }
            unsetExplanation(e) {
                const {collectionClozeSentenceUnsetExplanationUrl: t} = e;
                $.ajax({
                    method: "put",
                    url: t
                }).done(( ({collectionClozeSentence: t}) => {
                    const n = Object.assign({}, e, {
                        explanation: t.explanation
                    });
                    this.setState({
                        reportedSentences: this.state.reportedSentences.map((t => t.id === e.id ? n : t))
                    })
                }
                )).fail(( () => {
                    alert("Error!")
                }
                )),
                this.explanationModal && this.explanationModal.hide()
            }
            renderPagination() {
                const {page: e, perPage: t, total: n, updating: l} = this.state;
                return a.createElement(h.default, {
                    onNextClick: () => this.setState({
                        page: this.state.page + 1
                    }, ( () => this.loadErrors())),
                    onPrevClick: () => this.setState({
                        page: this.state.page - 1
                    }, ( () => this.loadErrors())),
                    page: e,
                    perPage: t,
                    total: n,
                    updating: l
                })
            }
            onDelete(e) {
                this.setState({
                    updating: !0
                }),
                this.resolve({
                    notifyUsers: !1,
                    reportedSentence: e
                })
            }
            renderCollectionClozeSentenceEditorModal() {
                const {editingReportedSentence: e} = this.state;
                if (!e)
                    return null;
                const t = !!(e.collectionName || "").match(/Fast Track Level/);
                return a.createElement(o.default, {
                    collectionClozeSentence: e,
                    collectionClozeSentenceUrl: e.collectionClozeSentenceUrl,
                    clozeSentenceUrl: e.clozeSentenceUrl,
                    onDelete: () => this.onDelete(e),
                    onHidden: () => this.setState({
                        editingReportedSentence: !1
                    }),
                    onUpdate: t => {
                        const n = Object.assign({}, e, t);
                        this.setState({
                            editingReportedSentence: n,
                            reportedSentences: this.state.reportedSentences.map((t => t.id === e.id ? n : t))
                        })
                    }
                    ,
                    textEditingDisabled: !(!e.languagePairingSlug.match(/^eng/) || !t),
                    translationEditingDisabled: !(!e.languagePairingSlug.match(/eng$/) || !t)
                })
            }
            renderCollectionClozeSentenceTokensEditor() {
                const {tokensReportedSentence: e} = this.state;
                return e ? a.createElement(p.default, {
                    clozeText: e.text,
                    onHidden: () => this.setState({
                        tokensReportedSentence: null
                    }),
                    tokensUrl: e.collectionClozeSentenceTokensUrl
                }) : null
            }
            renderCollectionClozeSentenceChangesModal() {
                const {changesReportedSentence: e} = this.state;
                return e ? a.createElement(r.default, {
                    onHidden: () => this.setState({
                        changesReportedSentence: null
                    }),
                    url: e.collectionClozeSentenceChangesUrl
                }) : null
            }
            renderCollectionClozeSentenceTtsModal() {
                const {ttsReportedSentence: e} = this.state;
                return e ? a.createElement(i.default, {
                    clozeSentenceTtsJobUrl: e.clozeSentenceTtsJobUrl,
                    clozeSentenceUrl: e.clozeSentenceUrl,
                    collectionClozeSentenceTtsJobUrl: e.collectionClozeSentenceTtsJobUrl,
                    collectionClozeSentenceUrl: e.collectionClozeSentenceUrl,
                    onHidden: () => this.setState({
                        ttsReportedSentence: null
                    })
                }) : null
            }
            renderSeen(e) {
                return e.resolved || e.claimedByUserUsername ? null : e.markedAsSeen ? a.createElement("div", {
                    style: {
                        marginTop: 5
                    }
                }, a.createElement("span", {
                    className: "label label-info"
                }, "\ud83d\udc40 Marked as seen by ", e.markedAsSeenByUserUsername)) : a.createElement("div", {
                    style: {
                        marginTop: 5
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    disabled: this.state.updating,
                    onClick: () => this.onMarkAsSeenClick(e)
                }, "Mark as Seen"))
            }
            renderClaim(e) {
                if (e.claimedByCurrentUser)
                    return a.createElement("div", null, a.createElement("div", null, "\ud83d\udc49 Me!"), !e.resolved && a.createElement("button", {
                        className: "btn btn-warning btn-xs",
                        disabled: this.state.updating,
                        onClick: () => this.onClaimClick(e)
                    }, "Unclaim"));
                if (!e.claimedByUserUsername)
                    return a.createElement("button", {
                        className: "btn btn-default",
                        disabled: this.state.updating,
                        onClick: () => this.onClaimClick(e)
                    }, "Claim");
                const {admin: t} = this.props;
                return a.createElement("div", null, a.createElement("a", {
                    className: "claimed-by",
                    href: "/players/" + e.claimedByUserUsername,
                    rel: "noreferrer",
                    target: "_blank"
                }, e.claimedByUserUsername), !!t && a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("small", null, a.createElement("button", {
                    className: "btn btn-link btn-xs",
                    disabled: this.state.updating,
                    onClick: () => this.onRemoveClaimClick(e)
                }, "Remove claim"))))
            }
            renderEdit(e) {
                return a.createElement(a.Fragment, null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e.claimedByCurrentUser || this.state.updating,
                    onClick: () => this.onEditSentenceClick(e)
                }, "Edit"), !!e.explanation && a.createElement("div", {
                    style: {
                        marginTop: 5
                    }
                }, a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    disabled: !e.claimedByCurrentUser || this.state.updating,
                    onClick: () => this.setState({
                        explanationModalVisible: !0,
                        reportedSentence: e
                    })
                }, "Explanation")))
            }
            renderResolve(e) {
                return e.resolved ? a.createElement("div", null, "Resolved! \ud83c\udf89") : a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e.claimedByCurrentUser || this.state.updating,
                    onClick: () => this.onResolveClick(e)
                }, "Resolve"))
            }
            renderLanguagePairing() {
                const {baseLanguageName: e, targetLanguageName: t} = this.props;
                return e && t ? a.createElement("small", null, "Learning ", t, " from ", e) : null
            }
            renderLanguagePairingSelector() {
                if (this.props.languagePairingsSelector) {
                    const {allLanguagePairingsResolvedCount: e, allLanguagePairingsTotalCount: t} = this.state;
                    return a.createElement("div", {
                        className: "pull-right"
                    }, a.createElement("ul", {
                        className: "list-inline"
                    }, a.createElement("li", null, a.createElement("select", {
                        className: "form-control",
                        id: "language-pairing-selector",
                        onChange: e => this.setState({
                            collections: null,
                            page: 1,
                            selectedCollectionId: "",
                            selectedLanguagePairingId: parseInt(e.target.value) || ""
                        }, ( () => this.loadErrors())),
                        value: this.state.selectedLanguagePairingId
                    }, a.createElement("option", {
                        value: ""
                    }, "All - ", e, "/", t, " (", Math.round(e / t * 100), "%)"), this.state.languagePairings.map((e => {
                        const t = Math.round(e.resolved / e.total * 100);
                        return a.createElement("option", {
                            key: e.id,
                            value: e.id
                        }, e.targetLanguageEnglishName, " from ", e.baseLanguageEnglishName, " - ", e.resolved, "/", e.total, " (", t, "%)")
                    }
                    )))), a.createElement("li", null, this.renderCollectionSelector())))
                }
            }
            renderCollectionSelector() {
                return this.state.selectedLanguagePairingId && this.state.collections ? a.createElement("select", {
                    className: "form-control",
                    id: "collection-selector",
                    onChange: e => this.setState({
                        page: 1,
                        selectedCollectionId: parseInt(e.target.value) || ""
                    }, ( () => this.loadErrors())),
                    value: this.state.selectedCollectionId
                }, a.createElement("option", {
                    value: ""
                }, "All Collections"), this.state.collections.map((e => a.createElement("option", {
                    key: e.id,
                    value: e.id
                }, e.name)))) : null
            }
            orderBy(e) {
                this.setState({
                    orderBy: e,
                    page: 1
                }, ( () => this.loadErrors()))
            }
            toggleResolved(e) {
                this.setState({
                    includeResolved: e,
                    page: 1
                }, ( () => this.loadErrors()))
            }
            toggleSeen(e) {
                this.setState({
                    includeSeen: e,
                    page: 1
                }, ( () => this.loadErrors()))
            }
            renderControls() {
                const {includeResolved: e, includeSeen: t, orderBy: n} = this.state;
                return a.createElement("div", null, a.createElement("small", null, "Order by:"), a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-default" + (n ? "" : " active"),
                    onClick: () => this.orderBy(null)
                }, "Last report (newest first)")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-default" + ("oldest" === n ? " active" : ""),
                    onClick: () => this.orderBy("oldest")
                }, "Last report (oldest first)")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-sm btn-default" + ("most_reports" === n ? " active" : ""),
                    onClick: () => this.orderBy("most_reports")
                }, "Most reports")), a.createElement("li", null, a.createElement("label", {
                    style: {
                        fontWeight: "normal"
                    }
                }, "Include resolved ", a.createElement("input", {
                    checked: e,
                    name: "include_resolved",
                    onChange: e => this.toggleResolved(e.target.checked),
                    type: "checkbox"
                }))), a.createElement("li", null, a.createElement("label", {
                    style: {
                        fontWeight: "normal"
                    }
                }, "Include seen ", a.createElement("input", {
                    checked: t,
                    name: "include_seen",
                    onChange: e => this.toggleSeen(e.target.checked),
                    type: "checkbox"
                })))))
            }
            renderProgressBar() {
                const {languagePairings: e, selectedLanguagePairingId: t} = this.state;
                let n, l;
                if (t) {
                    const a = e.find((e => e.id === t));
                    a && (n = a.resolved,
                    l = a.total)
                } else
                    n = this.state.allLanguagePairingsResolvedCount,
                    l = this.state.allLanguagePairingsTotalCount;
                if (!l)
                    return null;
                const s = Math.round(n / l * 1e3) / 10;
                return a.createElement(g.default, {
                    percent: s
                }, n, "/", l, " (", s, "%) resolved")
            }
            renderTts(e) {
                return e.hasTts ? a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e.claimedByCurrentUser || this.state.updating,
                    onClick: () => this.setState({
                        ttsReportedSentence: e
                    })
                }, "TTS") : "N/A"
            }
            renderTokensBtn(e) {
                return e.tokensCount ? a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !e.claimedByCurrentUser || this.state.updating,
                    onClick: () => this.setState({
                        tokensReportedSentence: e
                    })
                }, "Tokens") : null
            }
            renderContent() {
                const {reportedSentences: e, loading: t} = this.state;
                return t ? a.createElement(d.default, null) : a.createElement("div", null, this.renderProgressBar(), a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, this.renderControls()), a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, this.renderLanguagePairingSelector())), a.createElement("table", {
                    className: "table table-striped"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", null, "Source"), a.createElement("th", null, "Sentence"), a.createElement("th", null, "User"), a.createElement("th", null, "Category"), a.createElement("th", null, "Feedback"), a.createElement("th", null, "Assigned"), a.createElement("th", null, "Edit"), a.createElement("th", null, "TTS"), a.createElement("th", null, "Tokens"), a.createElement("th", null, "Resolve"))), a.createElement("tbody", null, e.map((e => a.createElement("tr", {
                    className: "reported-sentence " + (e.resolved ? "success resolved" : e.claimedByCurrentUser ? "warning" : ""),
                    key: e.id,
                    style: e.resolved ? {
                        textDecorationLine: "line-through"
                    } : null
                }, a.createElement("td", {
                    style: {
                        minWidth: 150
                    }
                }, !!e.languagePairingSlug && a.createElement("div", null, e.languagePairingSlug), a.createElement("div", null, a.createElement("small", null, a.createElement("strong", null, e.collectionName))), a.createElement("small", null, "Last report: ", e.lastCreatedAt)), a.createElement("td", {
                    style: {
                        minWidth: 220
                    }
                }, e.text ? a.createElement(s.default, {
                    baseLanguageIso: e.baseLanguageIso,
                    clozeSentence: e,
                    includeTranslationLinks: !0,
                    targetLanguageIso: e.targetLanguageIso
                }) : "DELETED"), a.createElement("td", null, e.usernames.map((e => a.createElement("a", {
                    className: "user",
                    href: "/players/" + e,
                    key: e,
                    rel: "noreferrer",
                    target: "_blank"
                }, e))).reduce(( (e, t) => [e, ", ", t]))), a.createElement("td", null, e.categories.join(" /  ")), a.createElement("td", null, e.feedbacks.join(" / "), !!e.text && a.createElement(a.Fragment, null, a.createElement("br", null), a.createElement("small", null, a.createElement("a", {
                    href: `https://forum.clozemaster.com/search?q=${encodeURI(e.text.replace(/\{\{|\}\}/g, ""))}`,
                    target: "_blank"
                }, "Forum Comments (", e.commentsCount, ") ", a.createElement(c.default, {
                    name: "new-window"
                }))))), a.createElement("td", null, this.renderClaim(e), this.renderSeen(e)), a.createElement("td", null, this.renderEdit(e)), a.createElement("td", null, this.renderTts(e)), a.createElement("td", null, this.renderTokensBtn(e)), a.createElement("td", null, this.renderResolve(e), a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    onClick: () => this.setState({
                        changesReportedSentence: e
                    })
                }, "Changes"))))))), this.renderPagination(), this.renderCollectionClozeSentenceChangesModal(), this.renderCollectionClozeSentenceEditorModal(), this.renderCollectionClozeSentenceExplanationModal(), this.renderCollectionClozeSentenceTtsModal(), this.renderCollectionClozeSentenceTokensEditor(), this.renderResolveModal())
            }
            render() {
                return a.createElement("div", {
                    className: "container-fluid"
                }, a.createElement("h1", null, "Reported Sentences ", this.renderLanguagePairing()), a.createElement("p", null, "How it works: claim a sentence you'd like to fix, make the corrections, then click resolve. \ud83c\udf89"), this.renderContent(), a.createElement("a", {
                    href: "/reported-sentences/report-counts-by-week"
                }, "Report counts by week"))
            }
        }
    },
    4349: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            ResourceLinksEditor: function() {
                return r
            },
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(73898);
        n(40897);
        function r({isPro: e, onCancel: t, onUpdate: n, resourceLinksUrl: r}) {
            const [o,i] = a.useState(null)
              , [c,d] = a.useState("cats")
              , [u,m] = a.useState(!1);
            a.useEffect(( () => {
                $.ajax({
                    url: r
                }).done(( ({resourceLinks: e}) => {
                    i(e)
                }
                )).fail(( () => {
                    alert("Error!")
                }
                ))
            }
            ), []);
            return o ? a.createElement("div", null, a.createElement("p", null, "Add links to your favorite resources for any word or text selected after answering. Each URL needs the word ", a.createElement("code", null, "QUERY"), ". ", a.createElement("code", null, "QUERY"), " will be replaced with the search term."), a.createElement("p", null, "For example, if you add ", a.createElement("code", null, "Google"), " with the URL ", a.createElement("code", null, "https://www.google.com/search?q=QUERY"), ' and click the word "cats" after answering, you\'ll see a link to "Google" that will take you to ', a.createElement("code", null, "https://www.google.com/search?q=cats"), "."), !e && a.createElement("p", {
                className: "alert alert-success"
            }, "Get ", a.createElement("span", {
                className: "joystix"
            }, "Clozemaster Pro"), " to customize resource links and add your own!", a.createElement("br", null), a.createElement("br", null), a.createElement("a", {
                href: "/pro",
                className: "btn btn-lg btn-success btn-block joystix"
            }, "Get Pro")), a.createElement("p", null, 'Enter a sample query, then click "Try it" beneath each URL below.', a.createElement("input", {
                "aria-label": "sample query",
                className: "form-control",
                disabled: !e || u,
                onChange: e => d(e.target.value),
                placeholder: "Sample query",
                value: c
            })), a.createElement("hr", null), o.map(( (t, n) => a.createElement("div", {
                className: t.name && t.url.match(/QUERY/) ? null : "has-error bg-danger",
                key: n,
                style: {
                    marginLeft: -5,
                    marginRight: -5,
                    marginBottom: 5,
                    padding: 5
                }
            }, a.createElement("input", {
                "aria-label": "name",
                className: "form-control",
                disabled: !e || u,
                onChange: e => i(o.map(( (t, a) => n === a ? {
                    ...t,
                    name: e.target.value
                } : t))),
                placeholder: "Name",
                style: {
                    marginBottom: 10
                },
                value: t.name
            }), a.createElement("input", {
                "aria-label": "url",
                className: "form-control",
                disabled: !e || u,
                onChange: e => i(o.map(( (t, a) => n === a ? {
                    ...t,
                    url: e.target.value
                } : t))),
                placeholder: "URL",
                style: {
                    marginBottom: 10
                },
                value: t.url
            }), !t.url.match(/QUERY/) && a.createElement("small", {
                className: "text-danger",
                style: {
                    marginBottom: 5,
                    marginTop: -5
                }
            }, "URL missing QUERY. QUERY is replaced with the search query. For example https://www.google.com/search?q=QUERY."), a.createElement("div", {
                style: {
                    display: "flex",
                    flexDirection: "row",
                    justifyContent: "space-between"
                }
            }, a.createElement("small", null, a.createElement("a", {
                href: t.url.replace(/QUERY/, encodeURI(c)),
                target: "_blank",
                rel: "noopener noreferrer"
            }, "Try it ", a.createElement(l.default, {
                name: "new-window"
            }))), a.createElement("button", {
                "aria-label": "delete",
                className: "btn btn-xs btn-default",
                disabled: !e || u,
                onClick: () => i(o.filter(( (e, t) => t !== n)))
            }, "Delete"))))), a.createElement("hr", null), a.createElement("button", {
                className: "btn btn-success",
                disabled: !e || u || !o.length || o.find((e => !e.name || !e.url.match(/QUERY/))),
                onClick: () => {
                    m(!0),
                    $.ajax({
                        contentType: "application/json",
                        data: JSON.stringify({
                            resource_links: o
                        }),
                        method: "put",
                        url: r
                    }).done(( ({resourceLinks: e}) => {
                        n(e)
                    }
                    )).fail(( () => {
                        alert("Error!"),
                        m(!1)
                    }
                    ))
                }
                ,
                style: {
                    marginRight: 10
                }
            }, "Save"), a.createElement("button", {
                className: "btn btn-default",
                disabled: !e || u,
                onClick: t,
                style: {
                    marginRight: 10
                }
            }, "Cancel"), a.createElement("button", {
                className: "btn btn-default",
                disabled: !e || u,
                onClick: () => i([...o, {
                    name: "",
                    url: ""
                }]),
                style: {
                    marginRight: 10
                }
            }, "Add Link")) : a.createElement(s.default, null)
        }
        function o({onEditClick: e, query: t, resourceLinks: n, targetLanguageCode: s}) {
            const r = encodeURI("deu" === s ? t : t.toLowerCase());
            return a.createElement("ul", {
                className: "links list-inline"
            }, n.sort(( (e, t) => e.name > t.name ? 1 : -1)).map(( (e, t) => a.createElement("li", {
                className: "link",
                key: e.url,
                style: {
                    paddingLeft: 0
                }
            }, a.createElement("a", {
                className: "btn btn-link btn-xs",
                href: e.url.replace(/QUERY/, r),
                rel: "noopener noreferrer",
                target: "_blank"
            }, e.name, " ", a.createElement(l.default, {
                name: "new-window"
            }))))), a.createElement("li", null, a.createElement("button", {
                "aria-label": "edit links",
                className: "btn btn-default btn-xs",
                id: "edit-resource-links-btn",
                onClick: e
            }, a.createElement(l.default, {
                name: "pencil"
            }))))
        }
    },
    70485: function(e, t, n) {
        "use strict";
        n.r(t);
        var a = n(96540);
        t.default = ({ends: e}) => {
            const t = new Date(`${e} 23:59:59`)
              , [n,l] = (0,
            a.useState)(s());
            function s() {
                const e = new Date
                  , n = t - e;
                let a = {};
                return n > 0 && (a = {
                    days: Math.floor(n / 864e5),
                    hours: Math.floor(n / 36e5 % 24),
                    minutes: Math.floor(n / 1e3 / 60 % 60),
                    seconds: Math.floor(n / 1e3 % 60)
                }),
                a
            }
            if ((0,
            a.useEffect)(( () => {
                const e = setInterval(( () => {
                    l(s())
                }
                ), 1e3);
                return () => clearInterval(e)
            }
            ), []),
            void 0 === n.days)
                return null;
            const r = (e, t) => a.createElement("span", {
                style: {
                    display: "flex",
                    flexDirection: "column",
                    alignItems: "center",
                    width: 50
                }
            }, a.createElement("span", {
                className: "lead",
                style: {
                    marginBottom: 0
                }
            }, a.createElement("strong", null, e)), a.createElement("span", null, t));
            return a.createElement("span", {
                style: {
                    display: "flex",
                    flexDirection: "row",
                    gap: 15,
                    justifyContent: "center"
                }
            }, r(n.days, "Days"), r(n.hours, "Hours"), r(n.minutes, "Minutes"), r(n.seconds, "Seconds"))
        }
    },
    72717: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return g
            }
        });
        var a = n(96540)
          , l = n(40961)
          , s = n(16802)
          , r = n(22884)
          , o = n(77550)
          , i = n(40727)
          , c = n(4349)
          , d = n(92313)
          , u = n(27025)
          , m = n(58896);
        class h extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    conjugationEntryUrl: null,
                    loadingTranslations: !0,
                    translationEntryUrl: null,
                    translations: null,
                    ttsAvailable: !1
                }
            }
            componentDidMount() {
                this.loadTranslations(),
                this.initTts()
            }
            initTts() {
                this.ttsTimeoutCount = 0,
                this.checkForTts()
            }
            checkForTts() {
                const e = this.isSystemTtsAvailable();
                this.setState({
                    ttsAvailable: e
                }),
                this.ttsTimeoutCount += 1,
                !e && this.ttsTimeoutCount < 5 && (this.ttsTimeout = setTimeout(( () => this.checkForTts()), 1e3))
            }
            componentWillUnmount() {
                clearTimeout(this.ttsTimeout)
            }
            isSystemTtsAvailable() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.systemTtsAvailable(e, t)
            }
            getSystemTtsVoices() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.getSystemTtsVoices(e, t)
            }
            playTts() {
                const {selection: e} = this.props
                  , t = this.getSystemTtsVoices()[0]
                  , n = new SpeechSynthesisUtterance(e);
                n.voice = t,
                n.lang = t.lang,
                window.speechSynthesis.cancel(),
                window.speechSynthesis.speak(n)
            }
            loadTranslations() {
                this.setState({
                    loadingTranslations: !0
                });
                const {baseLanguageIso: e, selection: t, targetLanguageIso: n, tokenizeableId: a, tokenizeableType: l, userSelectionTranslationsUrl: s} = this.props;
                $.ajax({
                    data: {
                        from: n,
                        to: e,
                        tokenizeable_id: a,
                        tokenizeable_type: l,
                        translate: t
                    },
                    method: "post",
                    url: s
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loadingTranslations: !1,
                        resourceLinks: e.resourceLinks,
                        resourceLinksUrl: e.resourceLinksUrl,
                        token: e.token,
                        tokenText: e.tokenText,
                        translations: e.translations && e.translations.map((e => e.translatedText)).join("; ")
                    })
                }
                )).fail(( (e, t, n) => {
                    401 === e.status ? this.setState({
                        loadingTranslations: !1,
                        translations: !1
                    }) : alert("Oh no! There was an error loading translations. Sorry about that. Please let us know if you see this error message again.")
                }
                )).always(( () => {
                    this.loadTranslationEntry()
                }
                ))
            }
            loadTranslationEntry() {
                const {searchTranslationEntriesUrl: e, selection: t} = this.props;
                if (!e)
                    return !1;
                $.ajax({
                    data: {
                        term: t
                    },
                    url: e
                }).done((e => {
                    if (!e || !e.translationEntry)
                        return null;
                    const {translationEntry: t} = e
                      , {conjugationEntry: n} = t;
                    this.setState({
                        conjugationEntryUrl: n && n.webUrl,
                        translationEntryUrl: t.webUrl
                    })
                }
                )).fail(( () => {}
                ))
            }
            renderLinks() {
                const {loadingTranslations: e, resourceLinks: t, resourceLinksUrl: n} = this.state;
                if (e)
                    return null;
                if (t) {
                    const {openResourceLinksEditor: e, selection: n, targetLanguageCode: l} = this.props;
                    return a.createElement(c.default, {
                        onEditClick: e,
                        query: n,
                        resourceLinks: t,
                        targetLanguageCode: l
                    })
                }
                const {baseLanguageIso: l, baseLanguageCode: s, targetLanguageCode: r, targetLanguageEnglishName: o, targetLanguageIso: i} = this.props
                  , {conjugationEntryUrl: d, translationEntryUrl: u} = this.state
                  , m = this.props.selection
                  , h = [{
                    name: "Google Translate",
                    url: window.clozemaster.getGoogleTranslateUrl(i, l, m)
                }, {
                    name: "Google Images",
                    url: "https://www.google.com/images?q=" + encodeURI(m)
                }, {
                    name: "Forvo",
                    url: "https://forvo.com/search/" + encodeURI(m) + "/"
                }, {
                    name: "Wiktionary",
                    url: this.getWiktionaryUrl()
                }, {
                    name: "Tatoeba",
                    url: "https://tatoeba.org/eng/sentences/search?from=" + r + "&to=" + s + "&query=" + encodeURI(m)
                }];
                return "es" === i && h.push({
                    name: "SpanishDict",
                    url: "https://www.spanishdict.com/translate/" + encodeURI(m)
                }),
                "he" === i && (h.push({
                    name: "Morfix",
                    url: "https://www.morfix.co.il/" + encodeURI(m)
                }),
                h.push({
                    name: "Pealim",
                    url: "https://www.pealim.com/search/?q=" + encodeURI(m)
                })),
                "it" === i && h.push({
                    name: "Treccani",
                    url: "https://www.treccani.it/vocabolario/ricerca/" + encodeURI(m) + "/"
                }),
                "ja" === i && h.push({
                    name: "Jisho",
                    url: "https://jisho.org/search/" + encodeURI(m) + "/"
                }),
                "de" === i && h.push({
                    name: "dict.cc",
                    url: "https://www.dict.cc/?s=" + encodeURI(m)
                }),
                "jbo" === i && h.push({
                    name: "la sutysisku",
                    url: "https://la-lojban.github.io/sutysisku/jb/#seskari=cnano&sisku=" + encodeURI(m)
                }),
                "tr" === i && h.push({
                    name: "Tureng",
                    url: "https://tureng.com/en/turkish-english/" + encodeURI(m)
                }),
                u && h.push({
                    name: "Translation Entry",
                    url: u
                }),
                d && h.push({
                    name: "Conjugation Entry",
                    url: d
                }),
                a.createElement("div", {
                    className: "links"
                }, h.sort(( (e, t) => e.name > t.name ? 1 : -1)).map(( (e, t) => a.createElement("div", {
                    className: "link",
                    key: e.url
                }, a.createElement("a", {
                    href: e.url,
                    target: "_blank"
                }, e.name, " ", a.createElement("span", {
                    className: "glyphicon glyphicon-new-window"
                }))))))
            }
            getWiktionaryUrl() {
                const {baseLanguageIso: e, selection: t, targetLanguageEnglishName: n} = this.props;
                return "https://" + e + ".wiktionary.org/wiki/" + encodeURI("German" === n ? t : t.toLowerCase()) + "#" + n
            }
            renderTranslations() {
                return this.state.loadingTranslations ? a.createElement("p", {
                    className: "translations"
                }, "Loading...") : !1 === this.state.translations ? a.createElement("p", null, "Get automatic Google translations for any word or selected text with ", a.createElement("span", {
                    className: "joystix"
                }, "Clozemaster Pro"), ".", a.createElement("br", null), "Take control of your learning. Get fluent faster. ", a.createElement("a", {
                    href: "/pro"
                }, a.createElement("strong", null, "Get Pro today!"))) : a.createElement("div", {
                    className: "translations"
                }, a.createElement("div", {
                    dangerouslySetInnerHTML: {
                        __html: this.state.translations
                    }
                }), a.createElement("p", {
                    className: "attribution"
                }, a.createElement("a", {
                    href: "https://translate.google.com/",
                    target: "_blank"
                }, a.createElement("img", {
                    src: "/assets/google-translate-attribution/png/color-short-db1357358c54ba873f60dae0b7fab45f96d57c1ed7e3205853bc64be7941e279.png",
                    alt: "Color short"
                }))))
            }
            renderControlBtn(e, t, n) {
                return a.createElement("button", {
                    className: "btn btn-success btn-xs btn-block joystix",
                    onClick: n
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-" + t
                }), " ", e)
            }
            renderControls() {
                const {isSearchCollectionAvailable: e, onAddToCollectionClick: t, onSearchCollectionClick: n, onSearchSentencesClick: l} = this.props;
                return a.createElement("div", {
                    className: "controls"
                }, !!t && this.renderControlBtn("Add to Collection", "plus", ( () => t())), !!e && this.renderControlBtn("Collection Sentences", "search", ( () => n())), this.renderControlBtn((e ? "All " : "") + "Sentences", "search", ( () => l())))
            }
            renderAudioControl() {
                const {tokenText: e, ttsAvailable: t} = this.state;
                let n = null;
                if (e && e.ttsUrl)
                    n = () => {
                        new Audio(e.ttsUrl).play()
                    }
                    ;
                else {
                    if (!t)
                        return null;
                    n = () => this.playTts()
                }
                return a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    onClick: n,
                    style: {
                        marginLeft: 5
                    }
                }, a.createElement(i.default, {
                    name: "volume-up"
                }))
            }
            renderToken() {
                const {token: e} = this.state;
                return a.createElement(u.default, {
                    token: e
                })
            }
            renderTokenText() {
                const {tokenText: e} = this.state;
                return a.createElement(m.default, {
                    tokenText: e
                })
            }
            render() {
                return a.createElement("div", {
                    id: "translation-popover"
                }, a.createElement("button", {
                    type: "button",
                    className: "close",
                    "aria-label": "Close",
                    onClick: () => this.props.onClose()
                }, a.createElement("span", {
                    "aria-hidden": "true"
                }, "\xd7")), a.createElement("div", {
                    className: "selection"
                }, a.createElement("strong", null, this.props.selection), this.renderAudioControl()), this.renderLinks(), this.renderTranslations(), this.renderToken(), this.renderTokenText(), this.renderControls(), this.props.switchToSlideout && a.createElement("div", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-link btn-xs",
                    onClick: this.props.switchToSlideout
                }, "Use Slideout ", a.createElement(i.default, {
                    name: "arrow-right"
                }))))
            }
        }
        class g extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    slideout: "false" !== localStorage.getItem("selectionPopoverSlideout")
                }
            }
            renderSelectionContent() {
                return a.createElement(h, Object.assign({}, this.props, {
                    switchToSlideout: () => this.useSlideout(!0)
                }))
            }
            useSlideout(e) {
                if (void 0 !== e) {
                    localStorage.setItem("selectionPopoverSlideout", e ? "true" : "false");
                    const {gameSettings: t, gameSettingsUrl: n} = this.props;
                    t && n && $.ajax({
                        data: {
                            settings: Object.assign({}, this.props.gameSettings, {
                                selectionPopoverSlideout: e ? "true" : "false"
                            })
                        },
                        method: "post",
                        url: this.props.gameSettingsUrl
                    }),
                    this.setState({
                        slideout: e
                    })
                }
                return "false" !== localStorage.getItem("selectionPopoverSlideout")
            }
            render() {
                return this.useSlideout() ? a.createElement(a.Fragment, null, this.props.children, this.props.visible && a.createElement(d.default, Object.assign({}, this.props, {
                    onHidden: this.props.onClose,
                    switchToPopover: () => this.useSlideout(!1)
                }))) : a.createElement(s.Ay, null, a.createElement(r.A, null, ( ({ref: e}) => a.createElement("span", {
                    ref: e
                }, this.props.children))), this.props.visible && l.createPortal(a.createElement(o.Ay, {
                    placement: "bottom",
                    modifiers: {
                        flip: {
                            enabled: !1
                        }
                    }
                }, ( ({ref: e, style: t, placement: n, arrowProps: l}) => a.createElement("div", {
                    className: "popover bottom selection-popover",
                    role: "tooltip",
                    ref: e,
                    style: {
                        ...t,
                        display: "block"
                    },
                    "data-placement": n
                }, a.createElement("div", {
                    className: "arrow"
                }), a.createElement("div", {
                    className: "popover-content"
                }, this.renderSelectionContent())))), document.querySelector("body")))
            }
        }
    },
    50933: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(33829)
          , s = n(80931)
          , r = n(72717);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.id = (0,
                l.A)(),
                this.state = {
                    popoverVisible: !1
                }
            }
            componentDidMount() {
                $("body").on("click.selection-popoverable-link-" + this.id, (e => {
                    this.state.popoverVisible && !$(e.target).parents(".selection-popover").length && this.setState({
                        popoverVisible: !1
                    })
                }
                ))
            }
            componentWillUnmount() {
                $("body").off("click.selection-popoverable-link-" + this.id)
            }
            onLinkClick(e) {
                e.preventDefault(),
                this.setState({
                    popoverVisible: !0
                })
            }
            onAddToCollectionClick() {}
            onSearchSentencesClick() {
                this.setState({
                    clozeSentenceSearchModalVisible: !0,
                    popoverVisible: !1
                })
            }
            renderSentenceSearch() {
                if (!this.state.clozeSentenceSearchModalVisible)
                    return null;
                const {clozeSentencesUrl: e, collectionsUrl: t, isPlayingLanguagePairing: n, isPro: l, nextReviewByLevel: r, text: o} = this.props;
                return a.createElement(s.default, {
                    addToCollectionDisabled: !n,
                    collectionsUrl: t,
                    isPro: l,
                    nextReviewByLevel: r,
                    onHidden: () => {
                        this.setState({
                            clozeSentenceSearchModalVisible: !1
                        })
                    }
                    ,
                    query: o,
                    url: e
                })
            }
            onClose() {
                this.setState({
                    popoverVisible: !1
                })
            }
            render() {
                const {baseLanguageIso: e, baseLanguageCode: t, className: n, isPro: l, style: s, targetLanguageCode: o, targetLanguageEnglishName: i, targetLanguageIso: c, text: d, userSelectionTranslationsUrl: u} = this.props
                  , {popoverVisible: m} = this.state;
                return a.createElement(r.default, {
                    baseLanguageIso: e,
                    baseLanguageCode: t,
                    isPro: l,
                    onClose: () => this.onClose(),
                    onSearchSentencesClick: () => this.onSearchSentencesClick(),
                    selection: d,
                    targetLanguageCode: o,
                    targetLanguageEnglishName: i,
                    targetLanguageIso: c,
                    userSelectionTranslationsUrl: u,
                    visible: m
                }, a.createElement("a", {
                    className: n,
                    href: "#",
                    onClick: e => this.onLinkClick(e),
                    role: "button",
                    style: s
                }, d), this.renderSentenceSearch())
            }
        }
    },
    92313: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = (n(40961),
        n(68135),
        n(40727))
          , s = n(4349)
          , r = n(27025)
          , o = n(58896)
          , i = n(18173);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    conjugationEntryUrl: null,
                    loadingTranslations: !0,
                    translationEntryUrl: null,
                    translations: null,
                    ttsAvailable: !1,
                    wiktionaryIframeVisible: "false" !== localStorage.getItem("wiktionaryIframeVisible")
                }
            }
            componentDidMount() {
                this.loadTranslations(),
                this.initTts()
            }
            componentDidUpdate(e, t) {
                this.state.wiktionaryIframeVisible !== t.wiktionaryIframeVisible && localStorage.setItem("wiktionaryIframeVisible", this.state.wiktionaryIframeVisible ? "true" : "false")
            }
            initTts() {
                this.ttsTimeoutCount = 0,
                this.checkForTts()
            }
            checkForTts() {
                const e = this.isSystemTtsAvailable();
                this.setState({
                    ttsAvailable: e
                }),
                this.ttsTimeoutCount += 1,
                !e && this.ttsTimeoutCount < 5 && (this.ttsTimeout = setTimeout(( () => this.checkForTts()), 1e3))
            }
            componentWillUnmount() {
                clearTimeout(this.ttsTimeout)
            }
            isSystemTtsAvailable() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.systemTtsAvailable(e, t)
            }
            getSystemTtsVoices() {
                const {targetLanguageIso: e, targetLanguageCode: t} = this.props;
                return window.clozemaster.getSystemTtsVoices(e, t)
            }
            playTts() {
                const {selection: e} = this.props
                  , t = this.getSystemTtsVoices()[0]
                  , n = new SpeechSynthesisUtterance(e);
                n.voice = t,
                n.lang = t.lang,
                window.speechSynthesis.cancel(),
                window.speechSynthesis.speak(n)
            }
            loadTranslations() {
                this.setState({
                    loadingTranslations: !0
                });
                const {baseLanguageIso: e, selection: t, targetLanguageIso: n, tokenizeableId: a, tokenizeableType: l, userSelectionTranslationsUrl: s} = this.props;
                $.ajax({
                    data: {
                        from: n,
                        to: e,
                        tokenizeable_id: a,
                        tokenizeable_type: l,
                        translate: t
                    },
                    method: "post",
                    url: s
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loadingTranslations: !1,
                        resourceLinks: e.resourceLinks,
                        token: e.token,
                        tokenText: e.tokenText,
                        translations: e.translations && e.translations.map((e => e.translatedText)).join("; ")
                    })
                }
                )).fail(( (e, t, n) => {
                    401 === e.status ? this.setState({
                        loadingTranslations: !1,
                        translations: !1
                    }) : alert("Oh no! There was an error loading translations. Sorry about that. Please let us know if you see this error message again.")
                }
                )).always(( () => {
                    this.loadTranslationEntry()
                }
                ))
            }
            loadTranslationEntry() {
                const {searchTranslationEntriesUrl: e, selection: t} = this.props;
                if (!e)
                    return !1;
                $.ajax({
                    data: {
                        term: t
                    },
                    url: e
                }).done((e => {
                    if (!e || !e.translationEntry)
                        return null;
                    const {translationEntry: t} = e
                      , {conjugationEntry: n} = t;
                    this.setState({
                        conjugationEntryUrl: n && n.webUrl,
                        translationEntryUrl: t.webUrl
                    })
                }
                )).fail(( () => {}
                ))
            }
            renderLinks() {
                const {loadingTranslations: e, resourceLinks: t, resourceLinksUrl: n} = this.state;
                if (e)
                    return null;
                if (t) {
                    const {openResourceLinksEditor: e, selection: n, targetLanguageCode: l} = this.props;
                    return a.createElement(s.default, {
                        onEditClick: e,
                        query: n,
                        resourceLinks: t,
                        targetLanguageCode: l
                    })
                }
                const {baseLanguageIso: l, baseLanguageCode: r, targetLanguageCode: o, targetLanguageEnglishName: i, targetLanguageIso: c} = this.props
                  , {conjugationEntryUrl: d, translationEntryUrl: u} = this.state
                  , m = this.props.selection
                  , h = [{
                    name: "Google Translate",
                    url: window.clozemaster.getGoogleTranslateUrl(c, l, m)
                }, {
                    name: "Google Images",
                    url: "https://www.google.com/images?q=" + encodeURI(m)
                }, {
                    name: "Forvo",
                    url: "https://forvo.com/search/" + encodeURI(m) + "/"
                }, {
                    name: "Wiktionary",
                    url: this.getWiktionaryUrl()
                }, {
                    name: "Tatoeba",
                    url: "https://tatoeba.org/eng/sentences/search?from=" + o + "&to=" + r + "&query=" + encodeURI(m)
                }];
                return "es" === c && h.push({
                    name: "SpanishDict",
                    url: "https://www.spanishdict.com/translate/" + encodeURI(m)
                }),
                "he" === c && (h.push({
                    name: "Morfix",
                    url: "https://www.morfix.co.il/" + encodeURI(m)
                }),
                h.push({
                    name: "Pealim",
                    url: "https://www.pealim.com/search/?q=" + encodeURI(m)
                })),
                "it" === c && h.push({
                    name: "Treccani",
                    url: "https://www.treccani.it/vocabolario/ricerca/" + encodeURI(m) + "/"
                }),
                "ja" === c && h.push({
                    name: "Jisho",
                    url: "https://jisho.org/search/" + encodeURI(m) + "/"
                }),
                "de" === c && h.push({
                    name: "dict.cc",
                    url: "https://www.dict.cc/?s=" + encodeURI(m)
                }),
                "jbo" === c && h.push({
                    name: "la sutysisku",
                    url: "https://la-lojban.github.io/sutysisku/jb/#seskari=cnano&sisku=" + encodeURI(m)
                }),
                "tr" === c && h.push({
                    name: "Tureng",
                    url: "https://tureng.com/en/turkish-english/" + encodeURI(m)
                }),
                u && h.push({
                    name: "Translation Entry",
                    url: u
                }),
                d && h.push({
                    name: "Conjugation Entry",
                    url: d
                }),
                a.createElement("ul", {
                    className: "links list-inline"
                }, h.sort(( (e, t) => e.name > t.name ? 1 : -1)).map(( (e, t) => a.createElement("li", {
                    className: "link",
                    key: e.url,
                    style: {
                        paddingLeft: 0
                    }
                }, a.createElement("a", {
                    className: "btn btn-link btn-xs",
                    href: e.url,
                    target: "_blank"
                }, e.name, " ", a.createElement("span", {
                    className: "glyphicon glyphicon-new-window"
                }))))))
            }
            getWiktionaryUrl({mobile: e=!1}={}) {
                const {baseLanguageIso: t, selection: n, targetLanguageEnglishName: a} = this.props;
                return "https://" + t + (e ? ".m" : "") + ".wiktionary.org/wiki/" + encodeURI("German" === a ? n : n.toLowerCase()) + "#" + a
            }
            getWiktionaryIframeSrc() {
                return this.getWiktionaryUrl({
                    mobile: !0
                })
            }
            renderTranslations() {
                return this.state.loadingTranslations ? a.createElement("p", {
                    className: "translations"
                }, "Loading...") : !1 === this.state.translations ? a.createElement("p", null, "Get automatic Google translations for any word or selected text with ", a.createElement("a", {
                    className: "joystix",
                    href: "/pro"
                }, "Clozemaster Pro"), ".") : a.createElement("p", {
                    className: "translations"
                }, a.createElement("span", {
                    dangerouslySetInnerHTML: {
                        __html: this.state.translations
                    }
                }), a.createElement("span", {
                    className: "attribution",
                    style: {
                        display: "block"
                    }
                }, a.createElement("a", {
                    href: "https://translate.google.com/",
                    target: "_blank"
                }, a.createElement("img", {
                    src: "/assets/google-translate-attribution/png/color-short-db1357358c54ba873f60dae0b7fab45f96d57c1ed7e3205853bc64be7941e279.png",
                    alt: "Color short"
                }))))
            }
            renderControlBtn(e, t, n) {
                return a.createElement("button", {
                    className: "btn btn-success btn-xs btn-block joystix",
                    onClick: n,
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-" + t
                }), " ", e)
            }
            renderControls() {
                const {isSearchCollectionAvailable: e, onAddToCollectionClick: t, onSearchCollectionClick: n, onSearchSentencesClick: l} = this.props;
                return a.createElement("div", {
                    className: "controls",
                    style: {
                        marginBottom: 10
                    }
                }, !!t && this.renderControlBtn("Add to Collection", "plus", ( () => t())), !!e && this.renderControlBtn("Collection Sentences", "search", ( () => n())), this.renderControlBtn((e ? "All " : "") + "Sentences", "search", ( () => l())))
            }
            renderAudioControl() {
                const {tokenText: e, ttsAvailable: t} = this.state;
                let n = null;
                if (e && e.ttsUrl)
                    n = () => {
                        new Audio(e.ttsUrl).play()
                    }
                    ;
                else {
                    if (!t)
                        return null;
                    n = () => this.playTts()
                }
                return a.createElement("button", {
                    className: "btn btn-default btn-xs",
                    onClick: n,
                    style: {
                        marginLeft: 5
                    }
                }, a.createElement(l.default, {
                    name: "volume-up"
                }))
            }
            renderToken() {
                const {token: e} = this.state;
                return a.createElement(r.default, {
                    token: e
                })
            }
            renderTokenText() {
                const {tokenText: e} = this.state;
                return a.createElement(o.default, {
                    tokenText: e
                })
            }
            render() {
                const {onHidden: e} = this.props
                  , {wiktionaryIframeVisible: t} = this.state;
                return a.createElement(i.default, {
                    className: "selection-slideout",
                    header: !1,
                    onHidden: e,
                    ref: e => this.slideout = e
                }, a.createElement("div", {
                    style: {
                        display: "flex",
                        flexDirection: "row",
                        alignItems: "flex-start",
                        justifyContent: "space-between"
                    }
                }, a.createElement("div", {
                    className: "selection"
                }, a.createElement("strong", {
                    style: {
                        fontSize: "2em",
                        verticalAlign: "middle"
                    }
                }, this.props.selection), this.renderAudioControl()), a.createElement("button", {
                    type: "button",
                    className: "close",
                    "aria-label": "Close",
                    onClick: () => this.slideout && this.slideout.hide()
                }, a.createElement("span", {
                    "aria-hidden": "true"
                }, "\xd7"))), this.renderLinks(), this.renderTranslations(), this.renderToken(), this.renderTokenText(), a.createElement("div", {
                    style: {
                        alignItems: "flex-end",
                        display: "flex",
                        flexDirection: "row",
                        justifyContent: "space-between"
                    }
                }, a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    onClick: () => this.setState({
                        wiktionaryIframeVisible: !t
                    })
                }, a.createElement(l.default, {
                    name: "collapse-" + (t ? "up" : "down")
                }), " Wiktionary")), t && a.createElement("iframe", {
                    src: this.getWiktionaryIframeSrc(),
                    style: {
                        border: "1px solid #000",
                        flex: 1,
                        marginTop: 10,
                        minHeight: 300,
                        width: "100%"
                    }
                }), this.renderControls(), this.props.switchToPopover && a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, a.createElement("button", {
                    className: "btn btn-link btn-xs",
                    onClick: this.props.switchToPopover
                }, a.createElement(l.default, {
                    name: "arrow-left"
                }), " Use Popover")))
            }
        }
    },
    27025: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l({token: e}) {
            if (!e)
                return null;
            const {lemma: t, morphologicalFeatures: n, posTag: l, text: s} = e;
            const r = [l && l.label, t && t.text !== s && t.text].filter((e => !!e)).join(" / ");
            return r ? a.createElement("p", null, r, n.length ? " / " : "", n.map(( (e, t) => a.createElement("span", {
                key: t
            }, a.createElement("abbr", {
                title: `${e.key}: ${e.valueLabel.charAt(0).toUpperCase() + e.valueLabel.slice(1)}`
            }, e.value.toLowerCase()), t === n.length - 1 ? "" : " / ")))) : null
        }
    },
    58896: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40727);
        function s({tokenText: e}) {
            if (!e)
                return null;
            const [t,n] = a.useState(!1)
              , {chatgptExplanation: s, dictionaryLookup: r, exampleSentences: o} = e;
            return a.createElement("div", null, !!r && a.createElement("p", null, r, " ", a.createElement("small", null, "(From Microsoft)")), !!s && a.createElement("p", null, s, " ", a.createElement("small", null, "(From ChatGPT)")), !!o && !!o.length && a.createElement("div", null, a.createElement("p", null, a.createElement("button", {
                className: "btn btn-xs btn-default",
                onClick: () => n(!t)
            }, a.createElement(l.default, {
                name: "collapse-" + (t ? "up" : "down")
            }), " Example sentences")), t && a.createElement("ul", {
                className: "list-unstyled"
            }, o.map(( (e, t) => a.createElement("li", {
                key: t
            }, e[0], a.createElement("br", null), a.createElement("small", null, e[1])))))))
        }
    },
    20997: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            componentDidMount() {
                $(this.el).slideDown()
            }
            render() {
                return a.createElement("div", {
                    ref: e => this.el = e,
                    style: {
                        display: "none"
                    }
                }, this.props.children)
            }
        }
    },
    18173: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40961);
        n(94708);
        class s extends a.Component {
            componentDidMount() {
                this.$slideout = $(this.slideout),
                this.$backdrop = $(this.backdrop);
                const e = this.$slideout.width();
                this.$slideout.css({
                    right: -e,
                    width: e
                }),
                this.show()
            }
            show() {
                const {onShown: e} = this.props;
                this.$slideout.animate({
                    right: 0,
                    opacity: 1
                }, ( () => e && e())),
                this.$backdrop.css({
                    opacity: 0
                }).show().animate({
                    opacity: .5
                })
            }
            hide() {
                const {onHidden: e} = this.props
                  , t = this.$slideout.width();
                this.$backdrop.animate({
                    opacity: 0
                }, ( () => this.$backdrop.hide())),
                this.$slideout.animate({
                    opacity: 0,
                    right: -t
                }, ( () => e && e()))
            }
            onBackdropClick(e) {
                e.preventDefault(),
                e.stopPropagation(),
                this.hide()
            }
            renderBackdrop() {
                return a.createElement("div", {
                    ref: e => this.backdrop = e,
                    onClick: e => this.onBackdropClick(e),
                    style: {
                        position: "fixed",
                        top: 0,
                        right: 0,
                        bottom: 0,
                        left: 0,
                        zIndex: 1055,
                        backgroundColor: "#000",
                        opacity: 0
                    }
                })
            }
            renderContent() {
                return a.createElement("div", {
                    style: {
                        display: "flex",
                        flexDirection: "column",
                        height: "100%"
                    }
                }, !1 !== this.props.header && a.createElement("div", {
                    style: {
                        background: "#464646",
                        color: "#fff",
                        height: 40,
                        padding: "10px 15px"
                    }
                }, a.createElement("span", {
                    className: "joystix"
                }, this.props.heading), a.createElement("button", {
                    type: "button",
                    className: "close",
                    onClick: () => this.hide(),
                    "aria-label": "Close",
                    style: {
                        color: "#fff"
                    }
                }, a.createElement("span", {
                    "aria-hidden": "true"
                }, "\xd7"))), a.createElement("div", {
                    style: {
                        display: "flex",
                        flex: 1,
                        flexDirection: "column",
                        padding: 15
                    }
                }, this.props.children), this.props.footer)
            }
            render() {
                return l.createPortal(a.createElement(a.Fragment, null, this.renderBackdrop(), a.createElement("div", {
                    className: "slideout " + this.props.className,
                    ref: e => this.slideout = e
                }, this.renderContent())), document.querySelector("body"))
            }
        }
    },
    69204: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40727);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    voices: null
                }
            }
            componentDidMount() {
                if (!window.speechSynthesis)
                    return null;
                this.voicesChangedListener = window.speechSynthesis.addEventListener("voiceschanged", ( () => {
                    this.updateVoices()
                }
                )),
                this.updateVoices()
            }
            updateVoices() {
                const {languageCode: e, languageIso: t} = this.props;
                this.setState({
                    voices: window.clozemaster.getSystemTtsVoices(t, e)
                })
            }
            play() {
                const {languageCode: e, languageIso: t, text: n} = this.props
                  , {voices: a} = this.state;
                window.clozemaster.playSystemUtterance(n, a[0])
            }
            render() {
                const {voices: e} = this.state;
                if (!e || !e.length)
                    return null;
                const {className: t, style: n, text: s} = this.props;
                return a.createElement("button", {
                    className: t,
                    onClick: this.play.bind(this),
                    style: n,
                    title: "Play audio " + s
                }, a.createElement(l.default, {
                    name: "volume-up"
                }))
            }
        }
    },
    46752: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(31580)
          , s = n(99738);
        const r = n(99738);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    displayText: "Ready...",
                    recording: !1
                }
            }
            componentDidMount() {
                this.getTokenOrRefresh()
            }
            getTokenOrRefresh() {
                const {speechTokenUrl: e} = this.props;
                return new Promise(( (t, n) => {
                    const a = new l.A
                      , s = a.get("speech-token-2");
                    if (s) {
                        const e = s.indexOf(":");
                        return t({
                            authToken: s.slice(e + 1),
                            region: s.slice(0, e)
                        })
                    }
                    $.ajax({
                        url: e
                    }).done((e => {
                        const {region: n, token: l} = e;
                        a.set("speech-token", n + ":" + l, {
                            maxAge: 540,
                            path: "/"
                        }),
                        t({
                            authToken: l,
                            region: n
                        })
                    }
                    )).fail(( () => {
                        t({
                            authToken: null,
                            error: err.response.data
                        })
                    }
                    ))
                }
                ))
            }
            async speechToText() {
                const {languageLocale: e, onRecordingComplete: t} = this.props
                  , n = await this.getTokenOrRefresh()
                  , a = r.SpeechConfig.fromAuthorizationToken(n.authToken, n.region);
                a.speechRecognitionLanguage = e;
                const l = r.AudioConfig.fromDefaultMicrophoneInput()
                  , o = new r.SpeechRecognizer(a,l);
                this.setState({
                    displayText: "Recording...",
                    recording: !0
                }),
                o.recognizeOnceAsync((e => {
                    let t;
                    console.log("RESULT", e),
                    t = e.reason === s.ResultReason.RecognizedSpeech ? e.text : "Oh no! Recording was cancelled or could not be recognized. Please ensure your microphone is working properly and try again.",
                    this.setState({
                        displayText: t,
                        recording: !1
                    })
                }
                ), (e => {
                    console.log("ERROR", e),
                    this.setState({
                        displayText: "Error",
                        recording: !1
                    })
                }
                ))
            }
            render() {
                const {displayText: e, recording: t} = this.state;
                return a.createElement("div", null, a.createElement("p", null, e), a.createElement("button", {
                    className: "btn btn-default",
                    disabled: t,
                    onClick: this.speechToText.bind(this)
                }, "Record"))
            }
        }
    },
    90350: function(e, t, n) {
        "use strict";
        n.r(t);
        var a = n(96540);
        t.default = ({children: e, className: t, ...n}) => a.createElement("div", Object.assign({
            className: ["strike", t].join(" ")
        }, n), a.createElement("span", null, e))
    },
    41305: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return u
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(45133)
          , r = n(40727)
          , o = n(73898)
          , i = n(3917)
          , c = n(86956)
          , d = n(28358);
        class u extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    cloning: !1,
                    collections: [],
                    collectionEditorCollection: null,
                    collectionEditorModalVisible: !1,
                    loading: !0,
                    page: 1,
                    sharedCollectionsModalVisible: !1
                }
            }
            componentDidMount() {
                this.loadCollections()
            }
            loadCollections() {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        filter: "mine"
                    },
                    url: this.props.collectionsUrl
                }).done((e => {
                    this.setState({
                        collections: e.collections,
                        loading: !1,
                        page: 1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the collections. Sorry about that. Please try again and let us know if you see this message again.")
                }
                ))
            }
            renderCollections() {
                const {clozeSentencesUrl: e, isAdmin: t} = this.props
                  , {collections: n, loading: l, page: s} = this.state;
                return l ? a.createElement(o.default, null) : n.length ? a.createElement("div", null, n.slice(20 * (s - 1), 20 * s).map((n => a.createElement(i.default, {
                    clozeSentencesUrl: e,
                    crosswordsUrl: this.props.crosswordsUrl,
                    collection: n,
                    isAdmin: t,
                    key: n.id,
                    onEdit: e => this.setState({
                        collectionEditorCollection: e,
                        collectionEditorModalVisible: !0
                    })
                }))), a.createElement(c.default, {
                    onNextClick: () => this.setState({
                        page: s + 1
                    }),
                    onPrevClick: () => this.setState({
                        page: s - 1
                    }),
                    page: s,
                    perPage: 20,
                    total: n.length
                })) : a.createElement("h2", {
                    className: "text-center",
                    style: {
                        marginTop: 30
                    }
                }, "No collections yet - check out shared collections or create your own!")
            }
            renderContent() {
                const {baseLanguageName: e, targetLanguageName: t} = this.props;
                return a.createElement("div", null, a.createElement("h1", null, "Teaching ", t, " from ", e), a.createElement("p", null, "Clozemaster Teaching Collections are collections of cloze-sentences that you can share with your students. They are meant to be played anonymously, meaning students can play through the sentences ", a.createElement("em", null, "without"), " having to create an account, and at they end of the round they can enter their name so you can see the results. Teaching Collections are capped at 50 sentences, and are meant to be played through in a single round. You can share a link to your teaching collection, or embed a teaching collection on your site or blog. Questions? Feedback? Let us know ", a.createElement("a", {
                    href: "/forum"
                }, "on the forum"), "."), a.createElement("p", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-success joystix",
                    onClick: () => this.setState({
                        sharedCollectionsModalVisible: !0
                    }),
                    style: {
                        marginRight: 10
                    }
                }, a.createElement(r.default, {
                    name: "users",
                    type: "fa"
                }), " Shared"), a.createElement("button", {
                    className: "btn btn-success joystix",
                    onClick: () => this.setState({
                        collectionEditorModalVisible: !0
                    })
                }, a.createElement(r.default, {
                    name: "plus"
                }), " Create")), this.renderCollections())
            }
            renderCollectionEditorModal() {
                return this.state.collectionEditorModalVisible ? a.createElement(s.default, {
                    collection: this.state.collectionEditorCollection,
                    collectionsUrl: this.props.collectionsUrl,
                    isPro: this.props.isPro,
                    onCreate: e => this.setState({
                        collections: [e].concat(this.state.collections)
                    }),
                    onDelete: e => this.setState({
                        collections: this.state.collections.filter((t => t.id !== e.id))
                    }),
                    onUpdate: e => this.setState({
                        collections: this.state.collections.map((t => t.id === e.id ? e : t))
                    }),
                    onHidden: () => this.setState({
                        collectionEditorCollection: null,
                        collectionEditorModalVisible: !1
                    }),
                    proPromoCan: "",
                    proPromoSecondary: ""
                }) : null
            }
            clone(e) {
                this.setState({
                    cloning: !0
                }),
                $.ajax({
                    method: "post",
                    url: e.cloneUrl
                }).done((e => {
                    this.setState({
                        collections: [e.collection].concat(this.state.collections)
                    }, ( () => this.sharedCollectionsModal.hide()))
                }
                )).fail(( () => {
                    alert("Oh no! There was an error cloning the collection. Please try again and let us know if you see this error message again."),
                    this.setState({
                        cloning: !1
                    })
                }
                ))
            }
            renderSharedCollectionsModal() {
                return this.state.sharedCollectionsModalVisible ? a.createElement(d.default, {
                    isPro: this.props.isPro,
                    onHidden: () => this.setState({
                        sharedCollectionsModalVisible: !1
                    }),
                    ref: e => this.sharedCollectionsModal = e,
                    renderSharedCollection: e => a.createElement("div", {
                        className: "row shared-collection",
                        key: e.id,
                        style: {
                            borderBottom: "1px solid #efefef",
                            marginBottom: 10,
                            paddingBottom: 10
                        }
                    }, a.createElement("div", {
                        className: "col-xs-12 col-sm-6"
                    }, a.createElement("h3", {
                        style: {
                            margin: 0
                        }
                    }, e.name), a.createElement("div", null, e.sentencesCount, " sentences / Created by ", a.createElement("a", {
                        href: e.user.url,
                        target: "_blank"
                    }, e.user.username)), a.createElement("div", null, e.description), a.createElement("div", null, a.createElement("button", {
                        className: "btn btn-success joystix",
                        disabled: !this.props.isPro || this.state.cloning,
                        onClick: () => this.clone(e)
                    }, "Clone"), !this.props.isPro && a.createElement("span", {
                        className: "joystix",
                        style: {
                            marginLeft: 6
                        }
                    }, "Pro!"))), a.createElement("div", {
                        className: "col-xs-12 col-sm-6"
                    }, a.createElement("div", {
                        className: "scrollbar-always-visible",
                        style: {
                            maxHeight: 100,
                            overflowY: "scroll"
                        }
                    }, a.createElement("ol", null, e.sentences.map((e => {
                        const t = (0,
                        l.UE)(e.text);
                        return a.createElement("li", {
                            key: e.id
                        }, t.preClozeStr, a.createElement("strong", null, a.createElement("u", null, t.cloze)), t.postClozeStr, a.createElement("br", null), a.createElement("small", null, e.translation))
                    }
                    )))))),
                    url: this.props.collectionsUrl
                }) : null
            }
            render() {
                return a.createElement("div", {
                    className: "container"
                }, a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12"
                }, this.renderContent(), this.renderCollectionEditorModal(), this.renderSharedCollectionsModal())))
            }
        }
    },
    75404: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(73898)
          , r = n(86956);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    bulkAddVisible: !1,
                    clozeSentences: null,
                    context: "text",
                    loading: !0,
                    page: 1,
                    perPage: 20,
                    query: e.query || "",
                    total: 0
                }
            }
            componentDidMount() {
                this.search()
            }
            search() {
                this.setState({
                    loading: !0
                });
                const {context: e, page: t, perPage: n, query: a} = this.state;
                $.ajax({
                    data: {
                        context: e,
                        page: t,
                        per_page: n,
                        query: a
                    },
                    method: "get",
                    url: this.props.url
                }).done((e => {
                    console.log(e),
                    this.setState({
                        clozeSentences: e.clozeSentences,
                        loading: !1,
                        total: e.total
                    })
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error searching sentences. Please try again and let us know if you see this error message again.")
                }
                ))
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    page: 1
                }, ( () => this.search()))
            }
            renderForm() {
                const {loading: e} = this.state;
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-8"
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "cloze-sentence-search-query"
                }, "Query"), a.createElement("input", {
                    id: "cloze-sentences-query",
                    disabled: e,
                    className: "form-control",
                    type: "text",
                    value: this.state.query,
                    onChange: e => this.setState({
                        query: e.target.value
                    })
                }))), a.createElement("div", {
                    className: "col-xs-4"
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "cloze-sentence-search-context"
                }, "Context"), a.createElement("select", {
                    id: "cloze-sentence-search-context",
                    disabled: e,
                    className: "form-control",
                    value: this.state.context,
                    onChange: e => this.setState({
                        context: e.target.value
                    })
                }, a.createElement("option", {
                    value: "cloze"
                }, "Cloze"), a.createElement("option", {
                    value: "text"
                }, "Text"), a.createElement("option", {
                    value: "translation"
                }, "Translation"))))), a.createElement("button", {
                    disabled: e,
                    type: "submit",
                    className: "btn btn-success btn-sm btn-block joystix"
                }, "Search"))
            }
            renderClozeSentences() {
                return this.state.loading ? a.createElement(s.default, null) : a.createElement("div", {
                    style: {
                        marginTop: 10
                    }
                }, this.state.clozeSentences.map((e => {
                    const t = (0,
                    l.UE)(e.text);
                    return a.createElement("div", {
                        className: "cloze-sentence",
                        key: e.id,
                        style: {
                            borderBottom: "1px solid #efefef",
                            marginBottom: 10,
                            paddingBottom: 10,
                            position: "relative"
                        }
                    }, a.createElement("label", {
                        style: {
                            fontWeight: "normal",
                            margin: 0
                        }
                    }, a.createElement("input", {
                        checked: this.props.sentencesMap.has(e.text),
                        onChange: t => t.target.checked ? this.props.add(e) : this.props.remove(e),
                        style: {
                            position: "absolute",
                            left: 0,
                            top: 4
                        },
                        type: "checkbox"
                    }), a.createElement("div", {
                        style: {
                            marginLeft: 20
                        }
                    }, a.createElement("div", {
                        className: "text",
                        style: {
                            fontSize: "2rem"
                        }
                    }, a.createElement("span", null, t.preClozeStr, a.createElement("strong", null, a.createElement("u", null, t.cloze)), t.postClozeStr)), a.createElement("div", null, e.translation))))
                }
                )))
            }
            renderPagination() {
                if (this.state.loading)
                    return null;
                const {page: e, perPage: t, total: n} = this.state;
                return a.createElement(r.default, {
                    onNextClick: () => this.setState({
                        page: this.state.page + 1
                    }, ( () => this.search())),
                    onPrevClick: () => this.setState({
                        page: this.state.page - 1
                    }, ( () => this.search())),
                    page: e,
                    perPage: t,
                    total: n
                })
            }
            render() {
                return a.createElement("div", null, this.renderForm(), this.renderClozeSentences(), this.renderPagination())
            }
        }
    },
    6996: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {}
            }
            onChange(e) {
                this.setState({
                    loading: !0
                });
                const {collection: t} = this.props;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        collection: {
                            contributors_enabled: e
                        }
                    }),
                    method: "patch",
                    url: t.url
                }).fail(( () => {
                    alert("Error updating contributors status! Sorry about that. Please let someone know and refresh the page to try again.")
                }
                )),
                this.props.onChange(e)
            }
            render() {
                const {collection: e, enabled: t} = this.props;
                return a.createElement("div", null, a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: t,
                    name: "contributors_enabled",
                    onChange: e => this.onChange(e.target.checked),
                    type: "checkbox"
                }), "Allow others to add/edit sentences in this collection via the link below. No sign up/in required.")), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("input", {
                    className: "form-control",
                    readOnly: !0,
                    value: e.sentencesUrl
                })))
            }
        }
    },
    30854: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(73898);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    sentences: e.sentences
                }
            }
            componentDidMount() {
                this.loadPreview()
            }
            loadPreview() {
                $.ajax({
                    url: this.props.crosswordsUrl,
                    method: "post",
                    data: {
                        sentences: JSON.stringify(this.state.sentences)
                    }
                }).done((e => {
                    this.setState({
                        loading: !1,
                        crossword: e.crossword
                    })
                }
                )).fail(( () => {
                    alert("Something went wrong, please try again or contact an admin.")
                }
                ))
            }
            emailPdf() {
                $.ajax({
                    url: this.props.crosswordsUrl,
                    method: "post",
                    data: {
                        email_pdf: !0,
                        sentences: JSON.stringify(this.state.sentences)
                    }
                }).done((e => {
                    alert("PDF will be sent to your email shortly!")
                }
                )).fail(( () => {
                    alert("Something went wrong, please try again or contact an admin.")
                }
                ))
            }
            renderCrossword() {
                return a.createElement("div", {
                    dangerouslySetInnerHTML: {
                        __html: this.state.crossword.html
                    }
                })
            }
            renderDownloadButtons() {
                return a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-success",
                    onClick: () => this.emailPdf()
                }, "Send PDF to email"))
            }
            render() {
                return this.state.loading ? a.createElement(l.default, null) : a.createElement("div", null, this.renderCrossword(), this.renderDownloadButtons())
            }
        }
    },
    87394: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = (n(48318),
        n(68135))
          , s = n(28499);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    mode: "multiple_choice",
                    results: !0
                }
            }
            onTextInputClick() {
                this.textInput.select();
                try {
                    document.execCommand("copy") && (clearTimeout(this.copyTimeout),
                    this.setState({
                        copied: !0
                    }, ( () => this.copyTimeout = setTimeout(( () => this.setState({
                        copied: !1
                    })), 3e3))))
                } catch (e) {}
            }
            getUrl() {
                const e = new URLSearchParams;
                return e.append("mode", this.state.mode),
                e.append("results", this.state.results),
                this.props.url + "?" + e.toString()
            }
            getCode() {
                return '<iframe style="border: 2px solid #000;" src="' + this.getUrl() + '" width="100%" height="640"></iframe>'
            }
            render() {
                return a.createElement("div", null, a.createElement("p", null, "You can embed the code below into your website or blog just like you would with a Youtube video. Your students will then be able to play through all the sentences in the collection on your website or blog in a single round without having to sign in."), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("strong", null, "Mode:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, a.createElement(s.default, {
                    checked: "multiple_choice" === this.state.mode,
                    label: "Multiple Choice",
                    name: "mode",
                    onChange: e => this.setState({
                        mode: e.target.value
                    }),
                    value: "multiple_choice"
                }), a.createElement(s.default, {
                    checked: "text_input" === this.state.mode,
                    label: "Text Input",
                    name: "mode",
                    onChange: e => this.setState({
                        mode: e.target.value
                    }),
                    value: "text_input"
                }))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement(l.default, {
                    checked: this.state.results,
                    label: "Allow players to submit their results at the end of the round",
                    name: "results",
                    onChange: e => this.setState({
                        results: e.target.checked
                    })
                })), a.createElement("textarea", {
                    className: "form-control",
                    onClick: () => this.onTextInputClick(),
                    readOnly: !0,
                    ref: e => this.textInput = e,
                    value: this.getCode()
                }), this.state.copied && a.createElement("div", null, "Copied!"))
            }
        }
    },
    68989: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = (n(48318),
        n(68135))
          , s = n(28499);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    mode: "multiple_choice",
                    results: !0
                }
            }
            onTextInputClick() {
                this.textInput.select();
                try {
                    document.execCommand("copy") && (clearTimeout(this.copyTimeout),
                    this.setState({
                        copied: !0
                    }, ( () => this.copyTimeout = setTimeout(( () => this.setState({
                        copied: !1
                    })), 3e3))))
                } catch (e) {}
            }
            getUrl() {
                const e = new URLSearchParams;
                return e.append("mode", this.state.mode),
                e.append("results", this.state.results),
                this.props.url + "?" + e.toString()
            }
            render() {
                return a.createElement("div", null, a.createElement("p", null, "You can share the link below with your students. They'll be able to play through all the sentences in the collection in a single round without having to sign in."), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("strong", null, "Mode:"), a.createElement("div", {
                    style: {
                        marginLeft: 15
                    }
                }, a.createElement(s.default, {
                    checked: "multiple_choice" === this.state.mode,
                    label: "Multiple Choice",
                    name: "mode",
                    onChange: e => this.setState({
                        mode: e.target.value
                    }),
                    value: "multiple_choice"
                }), a.createElement(s.default, {
                    checked: "text_input" === this.state.mode,
                    label: "Text Input",
                    name: "mode",
                    onChange: e => this.setState({
                        mode: e.target.value
                    }),
                    value: "text_input"
                }))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement(l.default, {
                    checked: this.state.results,
                    label: "Allow players to submit their results at the end of the round",
                    name: "results",
                    onChange: e => this.setState({
                        results: e.target.checked
                    })
                })), a.createElement("input", {
                    className: "form-control",
                    onClick: () => this.onTextInputClick(),
                    readOnly: !0,
                    ref: e => this.textInput = e,
                    type: "text",
                    value: this.getUrl()
                }), this.state.copied && a.createElement("div", null, "Copied!"))
            }
        }
    },
    3917: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return g
            }
        });
        var a = n(96540)
          , l = n(6996)
          , s = n(30854)
          , r = n(87394)
          , o = n(40727)
          , i = n(68989)
          , c = n(40897)
          , d = n(508)
          , u = n(18152)
          , m = n(39384)
          , h = n(49081);
        class g extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    contributorsEnabled: !!e.collection.contributorsEnabled,
                    contributorsModalVisible: !1,
                    embedModalVisible: !1,
                    linkModalVisible: !1,
                    resultsModalVisible: !1,
                    sentences: e.collection.sentences,
                    sentencesModalVisible: !1
                }
            }
            renderResultsModal() {
                if (!this.state.resultsModalVisible)
                    return null;
                const {collection: e} = this.props;
                return a.createElement(c.default, {
                    footer: a.createElement(d.default, null),
                    onHidden: () => this.setState({
                        resultsModalVisible: !1
                    }),
                    size: "large",
                    title: e.name + " Results"
                }, a.createElement(m.default, {
                    resultsUrl: e.resultsUrl,
                    sentences: e.sentences
                }))
            }
            renderSentencesModal() {
                if (!this.state.sentencesModalVisible)
                    return null;
                const {clozeSentencesUrl: e, collection: t} = this.props;
                return a.createElement(c.default, {
                    backdrop: "static",
                    dialogStyle: {
                        width: "90%"
                    },
                    onHidden: () => this.setState({
                        sentencesModalVisible: !1
                    }),
                    ref: e => this.sentencesModal = e,
                    size: "large",
                    title: t.name + " Sentences"
                }, a.createElement(h.default, {
                    clozeSentencesUrl: this.props.clozeSentencesUrl,
                    collectionUrl: t.url,
                    onCancel: () => this.sentencesModal.hide(),
                    onSave: e => this.setState({
                        sentences: e
                    }, ( () => this.sentencesModal.hide())),
                    sentences: this.state.sentences
                }))
            }
            renderLinkModal() {
                if (!this.state.linkModalVisible)
                    return null;
                const {collection: e} = this.props;
                return a.createElement(c.default, {
                    footer: a.createElement(d.default, null),
                    onHidden: () => this.setState({
                        linkModalVisible: !1
                    }),
                    title: e.name + " Link"
                }, a.createElement(i.default, {
                    url: e.playWebUrl
                }))
            }
            renderEmbedModal() {
                if (!this.state.embedModalVisible)
                    return null;
                const {collection: e} = this.props;
                return a.createElement(c.default, {
                    footer: a.createElement(d.default, null),
                    onHidden: () => this.setState({
                        embedModalVisible: !1
                    }),
                    title: "Embed " + e.name
                }, a.createElement(r.default, {
                    url: e.embeddedPlayUrl
                }))
            }
            renderCrosswordModal() {
                if (!this.state.crosswordModalVisible)
                    return null;
                const {sentences: e} = this.state
                  , {collection: t, crosswordsUrl: n} = this.props;
                return a.createElement(c.default, {
                    footer: a.createElement(d.default, null),
                    onHidden: () => this.setState({
                        crosswordModalVisible: !1
                    }),
                    size: "large",
                    title: t.name + " Crossword"
                }, a.createElement(s.default, {
                    crosswordsUrl: n,
                    sentences: e
                }))
            }
            renderContributorsModal() {
                if (!this.state.contributorsModalVisible)
                    return null;
                const {collection: e} = this.props
                  , {contributorsEnabled: t} = this.state;
                return a.createElement(c.default, {
                    footer: a.createElement(d.default, null),
                    onHidden: () => this.setState({
                        contributorsModalVisible: !1
                    }),
                    title: e.name + " Contributors"
                }, a.createElement(l.default, {
                    collection: e,
                    enabled: t,
                    onChange: e => this.setState({
                        contributorsEnabled: e
                    })
                }))
            }
            render() {
                const {collection: e, isAdmin: t} = this.props
                  , {contributorsEnabled: n} = this.state;
                return a.createElement(u.default, {
                    className: "my-teaching-collection"
                }, a.createElement("div", {
                    className: "pull-right"
                }, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.props.onEdit(e)
                }, "Edit")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        sentencesModalVisible: !0
                    })
                }, "Sentences")), !!t && a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        contributorsModalVisible: !0
                    })
                }, "Contributors ", a.createElement(o.default, {
                    name: n ? "check" : "lock",
                    type: "fa"
                }))), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        resultsModalVisible: !0
                    })
                }, "Results")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        linkModalVisible: !0
                    })
                }, "Link")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        embedModalVisible: !0
                    })
                }, "Embed")), a.createElement("li", null, a.createElement("a", {
                    className: "btn btn-default",
                    href: e.playWebUrl,
                    target: "_blank"
                }, "Preview")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        crosswordModalVisible: !0
                    })
                }, "Crossword")))), a.createElement("h3", {
                    style: {
                        marginTop: 0
                    }
                }, e.name), a.createElement("div", null, "Sentences: ", this.state.sentences.length, " Results: ", e.resultsCount), this.renderSentencesModal(), this.renderContributorsModal(), this.renderResultsModal(), this.renderLinkModal(), this.renderEmbedModal(), this.renderCrosswordModal())
            }
        }
    },
    39384: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(73898);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.sentencesMap = new Map(e.sentences.map((e => [e.id, e.text]))),
                this.state = {
                    loading: !0,
                    results: []
                }
            }
            componentDidMount() {
                this.loadResults()
            }
            loadResults() {
                $.ajax({
                    url: this.props.resultsUrl
                }).done((e => {
                    this.setState({
                        loading: !1,
                        results: e.teachingCollectionResults
                    })
                }
                )).fail(( () => {}
                ))
            }
            renderResultsTable() {
                return a.createElement("table", {
                    className: "table table-striped"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", null, "Name"), a.createElement("th", null, "Date"), a.createElement("th", null, "Stats"), a.createElement("th", null, "Incorrect"))), a.createElement("tbody", null, this.state.results.map((e => a.createElement("tr", {
                    className: "result",
                    key: e.createdAt
                }, a.createElement("td", null, e.name), a.createElement("td", null, e.createdAt), a.createElement("td", null, a.createElement("ul", null, a.createElement("li", null, "Time: ", Math.floor(e.stats.elapsedTime / 60) + ":" + (e.stats.elapsedTime % 60 > 9 ? "" : "0") + e.stats.elapsedTime % 60), a.createElement("li", null, "Correct: ", e.stats.numCorrect), a.createElement("li", null, "Incorrect: ", e.stats.numIncorrect))), a.createElement("td", null, a.createElement("div", {
                    className: "scrollbar-always-visible",
                    style: {
                        maxHeight: 80,
                        overflowY: "scroll"
                    }
                }, a.createElement("ol", null, (e.stats.answerTape || []).filter((e => !e.correct)).map((e => a.createElement("li", {
                    key: e.id
                }, this.sentencesMap.get(e.id))))))))))))
            }
            renderIncorrectSentences() {
                const e = new Map;
                return this.state.results.forEach((t => {
                    (t.stats.answerTape || []).forEach((t => {
                        if (!t.correct) {
                            const n = this.sentencesMap.get(t.id);
                            e.set(n, (e.get(n) || 0) + 1)
                        }
                    }
                    ))
                }
                )),
                e.size ? a.createElement("div", null, a.createElement("h3", null, "Sentences answered incorrectly one or more times ordered by count:"), a.createElement("table", {
                    className: "table"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", null, "Count"), a.createElement("th", null, "Text"))), a.createElement("tbody", null, [...e.entries()].sort(( (e, t) => e[1] > t[1])).map((e => a.createElement("tr", null, a.createElement("td", null, e[1]), a.createElement("td", null, e[0]))))))) : null
            }
            render() {
                return this.state.loading ? a.createElement(l.default, null) : a.createElement("div", null, this.renderResultsTable(), this.renderIncorrectSentences())
            }
        }
    },
    49081: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(33829)
          , s = n(21663)
          , r = n(75404);
        n(73898);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    mode: "editor",
                    saving: !1,
                    sentences: e.sentences
                }
            }
            saveSentences() {
                this.setState({
                    saving: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        collection: {
                            sentences: this.state.sentences
                        }
                    }),
                    method: "patch",
                    url: this.props.collectionUrl
                }).done((e => {
                    if (e.errors)
                        return alert(e.errors.join(" ")),
                        this.setState({
                            saving: !1
                        }),
                        !1;
                    this.props.onSave && this.props.onSave(this.state.sentences)
                }
                )).fail(( () => {
                    alert("Oh no! There was an error saving the sentences - sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        saving: !1
                    })
                }
                ))
            }
            onTextMouseUp(e, t, n) {
                if (this.state.saving)
                    return !1;
                const a = window.getSelection().toString();
                a && t.text.replace(/\{\{|\}\}/g, "").match(a) && this.setState({
                    sentences: this.state.sentences.map(( (e, t) => t === n ? {
                        ...e,
                        text: e.text.replace(/\{\{|\}\}/g, "").replace(a, "{{" + a + "}}")
                    } : e))
                })
            }
            getNewId() {
                return (0,
                l.A)()
            }
            renderSentences() {
                const {sentences: e} = this.state;
                return a.createElement("div", null, a.createElement("table", {
                    className: "table sentences"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    style: {
                        width: "30%"
                    }
                }, "Text"), a.createElement("th", null, "Translation"), a.createElement("th", null, "Multiple choice options", a.createElement("br", null), "(comma-separated list, optional)"), a.createElement("th", null, "Notes (optional)"), a.createElement("th", null))), a.createElement("tbody", null, e.map(( (t, n) => a.createElement("tr", {
                    key: t.id
                }, a.createElement("td", {
                    className: !t.text.match(/\{\{.+\}\}/) || t.text.match(/\{\{\s|\s\}\}/) ? "has-error bg-danger" : ""
                }, a.createElement(s.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "text",
                    onChange: a => this.setState({
                        sentences: e.map(( (e, l) => n === l ? {
                            ...t,
                            text: a.target.value
                        } : e))
                    }),
                    value: t.text
                }), a.createElement("small", {
                    onMouseUp: e => this.onTextMouseUp(e, t, n),
                    style: {
                        display: "block",
                        marginLeft: 13,
                        marginTop: 5
                    }
                }, t.text.split("{{")[0], a.createElement("strong", null, a.createElement("u", null, (t.text.split("{{")[1] || "").split("}}")[0])), t.text.split("}}")[1])), a.createElement("td", null, a.createElement(s.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "translation",
                    onChange: a => this.setState({
                        sentences: e.map(( (e, l) => n === l ? {
                            ...t,
                            translation: a.target.value
                        } : e))
                    }),
                    value: t.translation || ""
                })), a.createElement("td", null, a.createElement(s.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "multiple_choice_options",
                    onChange: a => this.setState({
                        sentences: e.map(( (e, l) => n === l ? {
                            ...t,
                            multiple_choice_options: a.target.value
                        } : e))
                    }),
                    value: t.multiple_choice_options || ""
                })), a.createElement("td", null, a.createElement(s.A, {
                    className: "form-control",
                    disabled: this.state.saving,
                    name: "notes",
                    onChange: a => this.setState({
                        sentences: e.map(( (e, l) => n === l ? {
                            ...t,
                            notes: a.target.value
                        } : e))
                    }),
                    value: t.notes || ""
                })), a.createElement("td", null, a.createElement("button", {
                    className: "btn btn-sm btn-danger delete-sentence",
                    disabled: this.state.saving,
                    onClick: () => {
                        confirm("Are you sure you want to delete this sentence?") && this.setState({
                            sentences: e.filter(( (e, t) => t !== n))
                        })
                    }
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-trash"
                })))))))), a.createElement("div", {
                    className: "pull-left"
                }, a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: this.state.saving,
                    onClick: () => this.setState({
                        sentences: this.state.sentences.concat([{
                            id: this.getNewId(),
                            text: ""
                        }])
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-plus"
                }), " Add Row")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: this.state.saving,
                    onClick: () => this.setState({
                        mode: "search"
                    })
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-search"
                }), " Add via Search")))), a.createElement("div", {
                    className: "text-right"
                }, a.createElement("button", {
                    className: "btn btn-lg btn-success joystix",
                    disabled: this.state.saving || !this.state.sentences.every((e => e.text.match(/\{\{.+\}\}/))),
                    onClick: () => this.saveSentences()
                }, "Save"), a.createElement("button", {
                    className: "btn btn-link",
                    onClick: () => this.props.onCancel()
                }, "Cancel")))
            }
            renderSearch() {
                return a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        mode: "editor"
                    }),
                    style: {
                        marginBottom: 10
                    }
                }, "Back"), a.createElement(r.default, {
                    add: e => this.setState({
                        sentences: [{
                            id: this.getNewId(),
                            text: e.text,
                            translation: e.translation,
                            tts: e.tts
                        }].concat(this.state.sentences)
                    }),
                    remove: e => this.setState({
                        sentences: this.state.sentences.filter((t => t.text !== e.text))
                    }),
                    sentencesMap: new Map(this.state.sentences.map((e => [e.text, !0]))),
                    url: this.props.clozeSentencesUrl
                }), a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        mode: "editor"
                    }),
                    style: {
                        marginBottom: 10
                    }
                }, "Back"))
            }
            render() {
                return "search" === this.state.mode ? this.renderSearch() : this.renderSentences()
            }
        }
    },
    24367: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        n(40961),
        n(36460);
        class l extends a.Component {
            componentDidMount() {
                const {content: e, context: t} = this.props;
                clearTimeout(window.toastTimeout),
                $("#toast").remove(),
                $("body").append(`\n      <div class="alert alert-${t}" id="toast" role="alert" style="bottom: 15px; font-weight: bold; margin-bottom: 0; max-width: 150px; position: fixed; right: 15px; z-index: 1050">\n        ${e}\n      </div>\n    `),
                window.toastTimeout = setTimeout(( () => $("#toast").fadeOut()), 3e3)
            }
            render() {
                return null
            }
        }
    },
    39359: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(21663);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    editing: !1,
                    originalValue: e.value,
                    saving: !1,
                    value: e.value
                }
            }
            save() {
                this.setState({
                    saving: !0
                }),
                $.ajax({
                    data: {
                        user: {
                            [this.props.name]: this.state.value
                        }
                    },
                    method: "put",
                    url: this.props.url
                }).done((e => {
                    if (e.errors)
                        return alert("Oh no! " + e.errors),
                        this.setState({
                            saving: !1
                        }),
                        !1;
                    this.setState({
                        editing: !1,
                        originalValue: this.state.value,
                        saving: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error updating. Sorry about that. Please try again and let us know if you see this message again."),
                    this.setState({
                        saving: !1
                    })
                }
                ))
            }
            render() {
                if (this.state.editing) {
                    const e = {
                        className: "form-control",
                        disabled: this.state.saving,
                        name: this.props.name,
                        onChange: e => this.setState({
                            value: e.target.value
                        }),
                        ref: e => {
                            this.input = e
                        }
                        ,
                        value: this.state.value
                    };
                    return a.createElement("div", {
                        className: "user-" + this.props.name,
                        style: {
                            display: "inline-block",
                            maxWidth: 300,
                            textAlign: "left"
                        }
                    }, a.createElement("div", {
                        className: "form-group"
                    }, a.createElement("label", {
                        htmlFor: this.props.name
                    }, this.props.label, ":"), this.props.textarea ? a.createElement(l.A, e) : a.createElement("input", e)), a.createElement("p", {
                        className: "text-right"
                    }, a.createElement("button", {
                        className: "btn btn-sm btn-success",
                        disabled: this.state.saving,
                        onClick: () => this.save()
                    }, "Save"), a.createElement("button", {
                        className: "btn btn-sm btn-link",
                        disabled: this.state.saving,
                        onClick: () => this.setState({
                            editing: !1,
                            value: this.state.originalValue
                        })
                    }, "Cancel")))
                }
                return a.createElement("p", {
                    className: "stat user-" + this.props.name,
                    style: {
                        display: "inline-block",
                        maxWidth: 300
                    }
                }, this.props.label, ": ", this.state.value || "Unknown", this.props.isCurrentUser && a.createElement("button", {
                    className: "btn btn-link btn-xs edit",
                    onClick: () => this.setState({
                        editing: !0
                    }, ( () => this.input && this.input.focus()))
                }, a.createElement("span", {
                    className: "glyphicon glyphicon-pencil"
                })))
            }
        }
    },
    65851: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            render() {
                const {children: e, item: t, legend: n, onDelete: l} = this.props;
                return a.createElement("fieldset", {
                    className: t.type,
                    key: t.id
                }, a.createElement("legend", null, n || t.type, a.createElement("button", {
                    className: "btn btn-danger btn-xs",
                    onClick: () => {
                        confirm("Are you sure?") && l(t)
                    }
                    ,
                    style: {
                        marginLeft: 10
                    }
                }, a.createElement("i", {
                    className: "fa fa-trash"
                }))), e)
            }
        }
    },
    81670: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(65851)
          , s = n(66630);
        class r extends a.Component {
            render() {
                const {index: e, onDelete: t, onChange: n, sentence: r} = this.props
                  , {text: o, translation: i, textError: c, translationError: d} = r;
                return a.createElement(l.default, {
                    item: {
                        id: r.id,
                        type: "sentence"
                    },
                    legend: "Sentence " + (e + 1),
                    onDelete: t
                }, a.createElement(s.default, {
                    onTextChange: e => {
                        r.text = e,
                        n(r)
                    }
                    ,
                    onTranslationChange: e => {
                        r.translation = e,
                        n(r)
                    }
                    ,
                    text: o,
                    textError: c,
                    translation: i,
                    translationError: d
                }))
            }
        }
    },
    66630: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(46177);
        function s(e) {
            const {disabled: t, onTextChange: n, onTranslationChange: s, text: r, textError: o, translation: i, translationError: c} = e
              , d = o ? "form-group has-error" : "form-group"
              , u = c ? "form-group has-error" : "form-group";
            return a.createElement("div", null, a.createElement("p", {
                style: {
                    fontSize: "1.25em"
                }
            }, a.createElement(l.default, {
                onChange: e => n(e),
                text: r
            })), a.createElement("div", {
                className: d
            }, a.createElement("input", {
                className: "form-control sentence-text",
                disabled: t,
                onChange: e => n(e.target.value),
                placeholder: "Cloze sentence",
                type: "text",
                value: r
            }), o && a.createElement("span", {
                className: "help-block"
            }, o)), a.createElement("div", {
                className: u
            }, a.createElement("input", {
                className: "form-control sentence-translation",
                disabled: t,
                onChange: e => s(e.target.value),
                placeholder: "Translation",
                type: "text",
                value: i
            }), c && a.createElement("span", {
                className: "help-block"
            }, c)))
        }
    },
    2986: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(33829)
          , s = n(40897)
          , r = n(508)
          , o = n(86956)
          , i = n(26890);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    context: "text",
                    loading: !1,
                    page: 1,
                    perPage: 50,
                    query: "",
                    selectedMap: new Map(e.sentences.map((e => [e.text, e.id]))),
                    sentences: [],
                    total: 0
                }
            }
            search() {
                this.setState({
                    loading: !0
                });
                const {context: e, page: t, perPage: n, query: a} = this.state;
                $.ajax({
                    data: {
                        context: e,
                        page: t,
                        per_page: n,
                        query: a
                    },
                    method: "get",
                    url: this.props.url
                }).done((e => {
                    console.log(e),
                    this.setState({
                        loading: !1,
                        sentences: e.sentences,
                        total: e.total
                    })
                }
                )).fail(( () => {
                    this.setState({
                        loading: !1
                    }),
                    alert("Oh no! There was an error searching sentences. Please try again and let us know if you see this error message again.")
                }
                ))
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    page: 1
                }, ( () => this.search()))
            }
            renderForm() {
                const {context: e, loading: t, query: n} = this.state;
                return a.createElement("form", {
                    onSubmit: e => this.onSubmit(e),
                    style: {
                        marginBottom: 10
                    }
                }, a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-8"
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "query"
                }, "Query"), a.createElement("input", {
                    className: "form-control",
                    disabled: t,
                    id: "query",
                    onChange: e => this.setState({
                        query: e.target.value
                    }),
                    type: "text",
                    value: n
                }))), a.createElement("div", {
                    className: "col-xs-4"
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "context"
                }, "Context"), a.createElement("select", {
                    className: "form-control",
                    disabled: t,
                    id: "context",
                    onChange: e => this.setState({
                        context: e.target.value
                    }),
                    value: e
                }, a.createElement("option", {
                    value: "cloze"
                }, "Cloze"), a.createElement("option", {
                    value: "text"
                }, "Text"), a.createElement("option", {
                    value: "translation"
                }, "Translation"))))), a.createElement("button", {
                    className: "btn btn-success btn-sm btn-block joystix",
                    disabled: t,
                    type: "submit"
                }, "Search"))
            }
            renderPagination() {
                if (this.state.loading)
                    return null;
                const {page: e, perPage: t, total: n} = this.state;
                return a.createElement(o.default, {
                    onNextClick: () => this.setState({
                        page: this.state.page + 1
                    }, ( () => this.search())),
                    onPrevClick: () => this.setState({
                        page: this.state.page - 1
                    }, ( () => this.search())),
                    page: e,
                    perPage: t,
                    total: n
                })
            }
            renderResults() {
                const {loading: e, sentences: t, selectedMap: n} = this.state
                  , {onSentenceAdd: s, onSentenceDelete: r} = this.props;
                return e ? "Loading..." : t.length ? a.createElement(a.Fragment, null, t.map(( (e, t) => a.createElement(i.default, {
                    key: t,
                    onToggle: ({text: e, translation: t}) => {
                        const a = n.get(e);
                        if (a)
                            n.delete(e),
                            this.setState({
                                selectedMap: new Map(n)
                            }),
                            r({
                                id: a
                            });
                        else {
                            const a = (0,
                            l.A)();
                            n.set(e, a),
                            this.setState({
                                selectedMap: new Map(n)
                            }),
                            s({
                                id: a,
                                text: e,
                                translation: t
                            })
                        }
                    }
                    ,
                    selectedMap: n,
                    sentence: e
                })))) : "No results!"
            }
            renderContent() {
                return a.createElement(a.Fragment, null, this.renderForm(), this.renderResults(), this.renderPagination())
            }
            render() {
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: this.props.onHidden,
                    size: "large",
                    title: "Sentence Search"
                }, this.renderContent())
            }
        }
    },
    26890: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(40727)
          , s = n(66630);
        const r = {
            borderBottom: "1px solid #ccc",
            display: "flex",
            flexDirection: "row",
            marginBottom: 15,
            paddingBottom: 15
        };
        class o extends a.Component {
            constructor(e) {
                super(e);
                const {text: t, translation: n} = e.sentence;
                this.state = {
                    text: t,
                    translation: n
                }
            }
            render() {
                const {text: e, translation: t} = this.state
                  , {onToggle: n, selectedMap: o} = this.props;
                return a.createElement("div", {
                    style: r
                }, a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-" + (o.has(e) ? "success active" : "default") + " btn-lg toggle",
                    onClick: () => n({
                        text: e,
                        translation: t
                    })
                }, a.createElement(l.default, {
                    name: "ok"
                }))), a.createElement("div", {
                    style: {
                        flex: 1,
                        paddingLeft: 20
                    }
                }, a.createElement(s.default, {
                    disabled: o.has(e),
                    onTextChange: e => this.setState({
                        text: e
                    }),
                    onTranslationChange: e => this.setState({
                        translation: e
                    }),
                    text: e,
                    translation: t
                })))
            }
        }
    },
    65979: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(15901)
          , s = n(33829)
          , r = n(58108)
          , o = n(65851)
          , i = n(81670)
          , c = n(2986);
        class d extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    sentenceSearchModalVisible: !1
                }
            }
            renderSentenceSearchModal() {
                if (!this.state.sentenceSearchModalVisible)
                    return null;
                const {item: e, onSentenceAdd: t, onSentenceDelete: n, sentenceSearchUrl: l} = this.props;
                return a.createElement(c.default, {
                    onHidden: () => this.setState({
                        sentenceSearchModalVisible: !1
                    }),
                    onSentenceAdd: t,
                    onSentenceDelete: n,
                    sentences: e.sentences,
                    url: l
                })
            }
            render() {
                const {item: e, onSentenceAdd: t, onDelete: n, onSentenceChange: c, onSentenceDelete: d, onSentencesChange: u} = this.props;
                return a.createElement(o.default, {
                    item: e,
                    legend: "Sentences",
                    onDelete: n
                }, a.createElement(l.ReactSortable, {
                    handle: "legend",
                    list: e.sentences,
                    setList: u
                }, e.sentences.map(( (e, t) => a.createElement(i.default, {
                    index: t,
                    key: e.id,
                    onChange: c,
                    onDelete: d,
                    sentence: e
                })))), a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-default sentence-search",
                    onClick: () => this.setState({
                        sentenceSearchModalVisible: !0
                    })
                }, "Sentence Search"), a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => t({
                        id: (0,
                        s.A)(),
                        text: "",
                        translation: ""
                    }),
                    style: {
                        marginLeft: 10
                    }
                }, "Add Sentence"), a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => u((0,
                    r.R3)(e.sentences)),
                    style: {
                        marginLeft: 10
                    }
                }, "Shuffle Sentences")), this.renderSentenceSearchModal())
            }
        }
    },
    51100: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(21663)
          , s = n(65851);
        class r extends a.Component {
            renderInput() {
                const {item: e, onChange: t, textarea: n} = this.props;
                return n ? a.createElement(l.A, {
                    className: `form-control ${e.type}`,
                    onChange: t,
                    value: e.text
                }) : a.createElement("input", {
                    className: `form-control ${e.type}`,
                    onChange: t,
                    type: "text",
                    value: e.text
                })
            }
            render() {
                const {item: e, onDelete: t, renderErrorMessage: n} = this.props
                  , {error: l} = e
                  , r = l ? "form-group has-error" : "form-group";
                return a.createElement(s.default, {
                    item: e,
                    legend: e.type.charAt(0).toUpperCase() + e.type.slice(1),
                    onDelete: t
                }, a.createElement("div", {
                    className: r
                }, this.renderInput(), n(l)))
            }
        }
    },
    9324: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(15901)
          , s = n(33829)
          , r = n(65979)
          , o = n(51100);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    blocks: this.setupBlocks(e.blocks || []),
                    editable: e.editable,
                    title: e.title || ""
                }
            }
            setupBlocks(e) {
                return e.forEach((e => {
                    e.id = (0,
                    s.A)(),
                    "sentences_block" === e.type && (e.sentences = e.sentences || [],
                    0 !== e.sentences.length && (e.sentences = Object.values(e.sentences),
                    e.sentences.forEach((e => {
                        e.id = (0,
                        s.A)()
                    }
                    ))))
                }
                )),
                e
            }
            addBlock(e) {
                const {blocks: t} = this.state
                  , n = {};
                "sentences_block" === e ? n.sentences = [] : n.text = "",
                n.type = e,
                n.id = (0,
                s.A)(),
                t.push(n),
                this.setState({
                    blocks: t
                }, ( () => window.scrollTo(0, document.body.scrollHeight)))
            }
            makeEditable(e) {
                $.ajax({
                    data: {
                        worksheet: {
                            editable: e
                        }
                    },
                    method: "put",
                    url: this.props.worksheetUrl
                }).done(( () => {
                    this.setState({
                        editable: e
                    })
                }
                )).fail(( () => {
                    alert("Something is wrong")
                }
                ))
            }
            validate() {
                const {blocks: e} = this.state;
                let t = !0;
                return e.forEach((e => {
                    "sentences_block" === e.type ? e.sentences && e.sentences.forEach((e => {
                        0 === e.text.length ? (e.textError = "Can't be empty.",
                        t = !1) : e.text.match(/{{.*}}/) ? e.textError = null : (e.textError = "Should contain a cloze.",
                        t = !1),
                        0 === e.translation.length ? (e.translationError = "Can't be empty.",
                        t = !1) : e.translationError = null
                    }
                    )) : 0 === e.text.length ? (e.error = "Can't be empty.",
                    t = !1) : e.error = null
                }
                )),
                this.setState({
                    blocks: e
                }),
                t
            }
            save() {
                if (!this.validate())
                    return alert("Some fields have errors, please correct them and try again."),
                    !1;
                const {blocks: e, title: t} = this.state
                  , {admin: n, editable: a} = this.props;
                $.ajax({
                    data: {
                        worksheet: {
                            content: e,
                            editable: a,
                            title: t
                        }
                    },
                    method: "put",
                    url: this.props.worksheetUrl
                }).done(( () => {
                    a || n ? alert("Saved!") : (alert("Thank you!"),
                    window.location.href = "/")
                }
                )).fail(( () => {
                    alert("Something is wrong. Please try again and please let someone know if you see this message again.")
                }
                ))
            }
            renderErrorMessage(e) {
                return e ? a.createElement("span", {
                    className: "help-block"
                }, e) : null
            }
            renderSentencesBlock(e) {
                const {blocks: t} = this.state
                  , {sentenceSearchUrl: n} = this.props;
                return a.createElement(r.default, {
                    item: e,
                    key: e.id,
                    onDelete: () => this.setState({
                        blocks: t.filter((t => t.id !== e.id))
                    }),
                    onSentenceAdd: n => {
                        e.sentences.push(n),
                        this.setState({
                            blocks: t
                        })
                    }
                    ,
                    onSentenceChange: n => {
                        e.sentences = e.sentences.map((e => e.id === n.id ? n : e)),
                        this.setState({
                            blocks: t
                        })
                    }
                    ,
                    onSentenceDelete: n => {
                        e.sentences = e.sentences.filter((e => e.id !== n.id)),
                        this.setState({
                            blocks: t
                        })
                    }
                    ,
                    onSentencesChange: n => {
                        e.sentences = n,
                        this.setState({
                            blocks: t
                        })
                    }
                    ,
                    sentenceSearchUrl: n
                })
            }
            renderTextBlock(e) {
                const {blocks: t} = this.state;
                return a.createElement(o.default, {
                    item: e,
                    key: e.id,
                    onChange: n => {
                        e.text = n.target.value,
                        this.setState({
                            blocks: t
                        })
                    }
                    ,
                    onDelete: () => this.setState({
                        blocks: t.filter((t => t.id !== e.id))
                    }),
                    renderErrorMessage: this.renderErrorMessage.bind(this),
                    textarea: "explainer" === e.type
                })
            }
            renderTitle() {
                const {title: e} = this.state;
                return a.createElement("input", {
                    className: "form-control",
                    onChange: e => {
                        this.setState({
                            title: e.target.value
                        })
                    }
                    ,
                    placeholder: "Title",
                    type: "text",
                    value: e
                })
            }
            renderBlocks() {
                const {blocks: e} = this.state;
                return a.createElement(l.ReactSortable, {
                    handle: "legend",
                    list: e,
                    setList: e => this.setState({
                        blocks: e
                    })
                }, e.map((e => "sentences_block" === e.type ? this.renderSentencesBlock(e) : this.renderTextBlock(e))))
            }
            renderFooter() {
                const {editable: e} = this.state
                  , {admin: t, previewUrl: n} = this.props;
                return a.createElement("div", {
                    className: "footer"
                }, a.createElement("button", {
                    className: "btn btn-success btn-lg",
                    onClick: () => this.save(),
                    style: {
                        marginRight: 10
                    }
                }, "Save"), a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.addBlock("header")
                }, "Add Header"), a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.addBlock("explainer")
                }, "Add Explainer"), a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.addBlock("sentences_block")
                }, "Add Sentences Block"), e && !t && a.createElement("button", {
                    className: "btn btn-warning btn-sm",
                    onClick: () => {
                        confirm("Are you sure?") && this.setState({
                            editable: !1
                        }, ( () => this.save()))
                    }
                    ,
                    type: "button"
                }, "Submit"), e && t && a.createElement("button", {
                    className: "btn btn-warning btn-sm",
                    onClick: () => this.makeEditable(!1)
                }, "Lock"), !e && t && a.createElement("button", {
                    className: "btn btn-warning btn-sm",
                    onClick: () => this.makeEditable(!0)
                }, "Make Editable"), a.createElement("a", {
                    className: "btn btn-default btn-sm",
                    href: n,
                    rel: "noreferrer",
                    target: "_blank"
                }, "Preview"))
            }
            render() {
                return a.createElement("div", {
                    id: "worksheet-editor"
                }, this.renderTitle(), a.createElement("hr", null), this.renderBlocks(), a.createElement("hr", null), this.renderFooter())
            }
        }
    },
    13942: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        function l({languagePairingId: e, languagePairings: t, url: n}) {
            const [l,s] = a.useState(e)
              , [r,o] = a.useState(!1)
              , i = a.useRef(!1);
            return a.useEffect(( () => {
                i.current ? (o(!0),
                fetch(n, {
                    body: JSON.stringify({
                        blog_post: {
                            language_pairing_id: l
                        }
                    }),
                    headers: {
                        Accept: "application/json",
                        "Content-Type": "application/json"
                    },
                    method: "put"
                }).then((e => {
                    if (!e.ok)
                        throw e.status
                }
                )).catch((e => {
                    alert(`${e} - please refresh and try again. Please let someone know if error persists.`)
                }
                )).finally(( () => {
                    o(!1)
                }
                ))) : i.current = !0
            }
            ), [l]),
            a.createElement("select", {
                disabled: r,
                onChange: e => s(e.target.value),
                value: l || ""
            }, a.createElement("option", null), t.map((e => a.createElement("option", {
                key: e.id,
                value: e.id
            }, e.name))))
        }
    },
    33009: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(68135);
        function s(e) {
            const {context: t, disabled: n, excludeModerated: s, query: r, onChange: o, onSubmit: i, order: c, withHint: d, withNotes: u} = e
              , m = "\u21e7"
              , h = "\u21e9";
            return a.createElement("form", {
                onSubmit: i
            }, a.createElement("div", {
                className: "row"
            }, a.createElement("div", {
                className: "col-xs-12 col-sm-6"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentences-query"
            }, "Query"), a.createElement("input", {
                className: "form-control",
                disabled: n,
                id: "cloze-sentences-query",
                name: "query",
                onChange: o,
                type: "text",
                value: r
            }))), a.createElement("div", {
                className: "col-xs-12 col-sm-3"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentence-search-context"
            }, "Context"), a.createElement("select", {
                className: "form-control",
                disabled: n,
                id: "cloze-sentence-search-context",
                name: "context",
                onChange: o,
                value: t
            }, a.createElement("option", {
                value: "cloze"
            }, "Cloze"), a.createElement("option", {
                value: "text"
            }, "Text"), a.createElement("option", {
                value: "translation"
            }, "Translation")))), a.createElement("div", {
                className: "col-xs-12 col-sm-3"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentences-order"
            }, "Order"), a.createElement("select", {
                className: "form-control",
                disabled: n,
                id: "cloze-sentences-order",
                name: "order",
                onChange: o,
                value: c
            }, a.createElement("option", {
                value: "difficulty_asc"
            }, "Difficulty ", m), a.createElement("option", {
                value: "difficulty_desc"
            }, "Difficulty ", h), a.createElement("option", {
                value: "moderated_asc"
            }, "Moderated ", m), a.createElement("option", {
                value: "moderated_desc"
            }, "Moderated ", h), a.createElement("option", {
                value: "num_ignored_asc"
            }, "Num ignored ", m), a.createElement("option", {
                value: "num_ignored_desc"
            }, "Num ignored ", h), a.createElement("option", {
                value: "num_incorrect_asc"
            }, "Num incorrect ", m), a.createElement("option", {
                value: "num_incorrect_desc"
            }, "Num incorrect ", h), a.createElement("option", {
                value: "num_played_asc"
            }, "Num played ", m), a.createElement("option", {
                value: "num_played_desc"
            }, "Num played ", h), a.createElement("option", {
                value: "text_length_asc"
            }, "Text length ", m), a.createElement("option", {
                value: "text_length_desc"
            }, "Text length ", h), a.createElement("option", {
                value: "text_asc"
            }, "Text ", m), a.createElement("option", {
                value: "text_desc"
            }, "Text ", h), a.createElement("option", {
                value: "tokens_count_asc"
            }, "Tokens count ", m), a.createElement("option", {
                value: "tokens_count_desc"
            }, "Tokens count ", h))))), a.createElement("ul", {
                className: "list-inline"
            }, a.createElement("li", null, a.createElement("div", {
                className: "form-group"
            }, a.createElement(l.default, {
                checked: !s,
                label: "Include moderated",
                name: "excludeModerated",
                onChange: e => o({
                    target: {
                        name: e.target.name,
                        value: !e.target.checked
                    }
                })
            }))), a.createElement("li", {
                className: "form-inline"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentence-search-with-hint"
            }, "With hint"), a.createElement("select", {
                className: "form-control",
                disabled: n,
                id: "cloze-sentence-search-with-hint",
                name: "withHint",
                onChange: o,
                style: {
                    marginLeft: 5
                },
                value: d
            }, a.createElement("option", {
                value: ""
            }), a.createElement("option", {
                value: "present"
            }, "Present"), a.createElement("option", {
                value: "blank"
            }, "Blank")))), a.createElement("li", {
                className: "form-inline"
            }, a.createElement("div", {
                className: "form-group"
            }, a.createElement("label", {
                htmlFor: "cloze-sentence-search-with-notes"
            }, "With notes"), a.createElement("select", {
                className: "form-control",
                disabled: n,
                id: "cloze-sentence-search-with-notes",
                name: "withNotes",
                onChange: o,
                style: {
                    marginLeft: 5
                },
                value: u
            }, a.createElement("option", {
                value: ""
            }), a.createElement("option", {
                value: "present"
            }, "Present"), a.createElement("option", {
                value: "blank"
            }, "Blank"))))), a.createElement("button", {
                disabled: n,
                type: "submit",
                className: "btn btn-success btn-sm btn-block joystix"
            }, "Search"))
        }
    },
    2e4: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(36052)
          , s = n(1988)
          , r = n(10065)
          , o = n(83915)
          , i = n(57297);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    editorVisible: !1,
                    resourcesEditorVisible: !1,
                    tokensCount: e.collectionClozeSentence.tokensCount,
                    tokensEditorVisible: !1,
                    ttsEditorVisible: !1
                }
            }
            renderTokensEditor() {
                if (!this.state.tokensEditorVisible)
                    return null;
                const {collectionClozeSentence: e, testEnv: t} = this.props;
                return a.createElement(i.default, {
                    clozeText: e.text,
                    onHidden: ({tokensCount: e}) => this.setState({
                        tokensCount: e,
                        tokensEditorVisible: !1
                    }),
                    testEnv: t,
                    tokensUrl: e.tokensUrl
                })
            }
            renderTtsModal() {
                if (!this.state.ttsEditorVisible)
                    return !1;
                const {collectionClozeSentence: e} = this.props;
                return a.createElement(o.default, {
                    clozeSentenceTtsJobUrl: e.clozeSentenceTtsJobUrl,
                    clozeSentenceUrl: e.clozeSentenceUrl,
                    collectionClozeSentenceTtsJobUrl: e.collectionClozeSentenceTtsJobUrl,
                    collectionClozeSentenceUrl: e.url,
                    onHidden: () => this.setState({
                        ttsEditorVisible: !1
                    })
                })
            }
            renderEditorModal() {
                if (!this.state.editorVisible)
                    return !1;
                const {collectionClozeSentence: e, onUpdate: t} = this.props;
                return a.createElement(r.default, {
                    collectionClozeSentence: e,
                    collectionClozeSentenceUrl: e.url,
                    clozeSentenceUrl: e.clozeSentenceUrl,
                    onHidden: () => this.setState({
                        editorVisible: !1
                    }),
                    onUpdate: t
                })
            }
            renderChangesModal() {
                const {collectionClozeSentence: e} = this.props
                  , {changesModalVisible: t} = this.state;
                return t ? a.createElement(s.default, {
                    onHidden: () => this.setState({
                        changesModalVisible: !1
                    }),
                    url: e.collectionClozeSentenceChangesUrl
                }) : null
            }
            renderModals() {
                return a.createElement(a.Fragment, null, this.renderChangesModal(), this.renderEditorModal(), this.renderTtsModal(), this.renderTokensEditor())
            }
            renderModerated() {
                const {collectionClozeSentence: e, onUpdate: t} = this.props;
                return e.moderated ? "\u2705" : a.createElement("input", {
                    type: "checkbox",
                    onChange: () => {
                        $.ajax({
                            contentType: "application/json",
                            data: JSON.stringify({
                                collection_cloze_sentence: {
                                    moderated: !0
                                }
                            }),
                            method: "patch",
                            url: e.url
                        }).fail(( () => {
                            alert("Oh no! There was an error marking that sentence as moderated. Please refresh the page and try again, and let someone know if you see this message again.")
                        }
                        )),
                        t({
                            moderated: !0
                        })
                    }
                })
            }
            renderAudio() {
                const {collectionClozeSentence: e} = this.props
                  , {tts: t} = e;
                return t && t.length ? a.createElement(a.Fragment, null, a.createElement("hr", null), a.createElement("ul", null, t.map((e => a.createElement("li", {
                    key: e.id
                }, a.createElement("strong", null, e.voice_id), a.createElement("br", null), a.createElement("audio", {
                    controls: !0,
                    preload: "none",
                    src: e.audioUrl
                })))))) : null
            }
            render() {
                const {collectionClozeSentence: e, languagePairing: t} = this.props
                  , {jsonVisible: n, tokensCount: s} = this.state
                  , {baseLanguageIso: r, targetLanguageIso: o} = t || {};
                return a.createElement("tr", {
                    className: "collection-cloze-sentence"
                }, a.createElement("td", {
                    className: "text-center"
                }, this.renderModerated()), a.createElement("td", null, a.createElement(l.default, {
                    baseLanguageIso: r,
                    clozeSentence: e,
                    clozeSentenceStyle: {
                        fontSize: "1.5em"
                    },
                    includeTranslationLinks: !!r && !!o,
                    targetLanguageIso: o
                }), a.createElement("div", null, this.renderAudio()), a.createElement("div", null, a.createElement("small", null, a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    onClick: () => this.setState({
                        jsonVisible: !n
                    })
                }, n ? "Less" : "More"))), !!n && a.createElement("pre", {
                    style: {
                        maxHeight: 200,
                        maxWidth: 400
                    }
                }, JSON.stringify(e, null, 2))), a.createElement("td", null, e.numPlayed, " \ud83c\udfae"), a.createElement("td", null, e.numIncorrect, " \u274c"), a.createElement("td", null, e.numIgnored, " \ud83d\udeab"), a.createElement("td", null, s), a.createElement("td", null, a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-default btn-block",
                    onClick: () => this.setState({
                        editorVisible: !0
                    })
                }, "Edit")), a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    onClick: () => this.setState({
                        changesModalVisible: !0
                    })
                }, "Changes")), a.createElement("td", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        ttsEditorVisible: !0
                    })
                }, "TTS")), a.createElement("td", null, a.createElement("button", {
                    className: "btn btn-default",
                    onClick: () => this.setState({
                        tokensEditorVisible: !0
                    })
                }, "Tokens")), a.createElement("td", null, a.createElement("button", {
                    className: "btn btn-link btn-xs",
                    onClick: () => alert("Please try editing/changing the sentence but keeping the cloze word the same. If you'd really like to delete it, please let someone know. We'll get this implemented soon!")
                }, "Delete")), this.renderModals())
            }
        }
    },
    1503: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(2e4)
          , s = n(40727)
          , r = n(86956)
          , o = n(33009);
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    collectionClozeSentences: [],
                    context: e.context || "text",
                    excludeModerated: !1,
                    loading: !1,
                    order: "difficulty_asc",
                    page: 1,
                    perPage: 100,
                    query: e.query || "",
                    total: 0,
                    withHint: "",
                    withNotes: ""
                }
            }
            componentDidMount() {
                this.loadCollectionClozeSentences(),
                $("body").tooltip({
                    selector: "[data-toggle=tooltip]"
                })
            }
            loadCollectionClozeSentences() {
                this.setState({
                    loading: !0
                });
                const {url: e} = this.props
                  , {context: t, excludeModerated: n, order: a, page: l, perPage: s, query: r, withHint: o, withNotes: i} = this.state;
                $.ajax({
                    data: {
                        context: t,
                        exclude_moderated: n,
                        include_stats: !0,
                        include_tts: !0,
                        order: a,
                        page: l,
                        per_page: s,
                        query: r,
                        with_conditions: {
                            hint: o,
                            notes: i
                        }
                    },
                    url: e
                }).done((e => {
                    console.log(e),
                    this.setState({
                        collectionClozeSentences: e.collectionClozeSentences,
                        loading: !1,
                        relativeNextPageUrl: e.relativeNextPageUrl,
                        total: e.total
                    })
                }
                )).fail(( () => {
                    alert("Error loading sentences! Please tell someone."),
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            onSearchSubmit(e) {
                return e.preventDefault(),
                this.setState({
                    page: 1
                }, ( () => this.loadCollectionClozeSentences())),
                !1
            }
            renderPagination() {
                const {loading: e, page: t, perPage: n, total: l} = this.state;
                return e ? null : a.createElement(r.default, {
                    onNextClick: () => this.setState({
                        page: t + 1
                    }, ( () => this.loadCollectionClozeSentences())),
                    onPrevClick: () => this.setState({
                        page: t - 1
                    }, ( () => this.loadCollectionClozeSentences())),
                    page: t,
                    perPage: n,
                    total: l,
                    updating: e
                })
            }
            render() {
                const {collectionClozeSentences: e, context: t, excludeModerated: n, loading: r, order: i, query: c, withHint: d, withNotes: u} = this.state
                  , {languagePairing: m, testEnv: h} = this.props;
                return r ? "Loading..." : a.createElement("div", null, a.createElement(o.default, {
                    context: t,
                    disabled: r,
                    excludeModerated: n,
                    onChange: e => this.setState({
                        [e.target.name]: e.target.value
                    }),
                    onSubmit: e => this.onSearchSubmit(e),
                    order: i,
                    query: c,
                    withHint: d,
                    withNotes: u
                }), a.createElement("br", null), a.createElement("table", {
                    className: "table table-striped"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", {
                    style: {
                        whiteSpace: "nowrap"
                    }
                }, "Moderated", a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-trigger": "hover",
                    style: {
                        marginLeft: 4
                    },
                    title: "Check this option once you've confirmed this is a high quality sentence + translation with good TTS."
                }, a.createElement(s.default, {
                    name: "question-sign"
                }))), a.createElement("th", null, "Sentence"), a.createElement("th", {
                    style: {
                        whiteSpace: "nowrap"
                    }
                }, "Played", a.createElement("span", {
                    "data-toggle": "tooltip",
                    "data-trigger": "hover",
                    style: {
                        marginLeft: 4
                    },
                    title: "Played, Incorrect, and Ignored stats are updated once per day."
                }, a.createElement(s.default, {
                    name: "question-sign"
                }))), a.createElement("th", null, "Incorrect"), a.createElement("th", null, "Ignored"), a.createElement("th", null, "Tokens"), a.createElement("th", null), a.createElement("th", null), a.createElement("th", null), a.createElement("th", null))), a.createElement("tbody", null, e.map((t => a.createElement(l.default, {
                    collectionClozeSentence: t,
                    key: t.id,
                    languagePairing: m,
                    onUpdate: n => {
                        this.setState({
                            collectionClozeSentences: e.map((e => e.id === t.id ? Object.assign(t, n) : e))
                        })
                    }
                    ,
                    testEnv: h
                }))))), this.renderPagination())
            }
        }
    },
    56744: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !1,
                    status: e.status
                }
            }
            onStatusChange(e) {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        common_voice_sentence: {
                            status: e.target.value
                        }
                    },
                    method: "put",
                    url: this.props.url
                }).done((e => {
                    this.setState({
                        status: e.commonVoiceSentence.status
                    })
                }
                )).fail(( () => {
                    alert("Error saving status! Please try again and let someone know if you see this message again.")
                }
                )).always(( () => {
                    this.setState({
                        loading: !1
                    })
                }
                ))
            }
            render() {
                const {audioUrl: e, difficulty: t, duration: n, id: l, text: s} = this.props
                  , {loading: r, status: o} = this.state
                  , i = "approved" === o ? "success" : "rejected" === o ? "danger" : null;
                return a.createElement(a.Fragment, null, a.createElement("td", {
                    className: i,
                    style: {
                        maxWidth: 300
                    }
                }, s), a.createElement("td", {
                    className: i
                }, a.createElement("audio", {
                    controls: !0,
                    preload: "none",
                    src: e
                })), a.createElement("td", {
                    className: i
                }, n, "s"), a.createElement("td", {
                    className: i
                }, a.createElement("div", {
                    className: "radio"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: "unknown" === o,
                    disabled: r,
                    name: `status-${l}`,
                    onChange: this.onStatusChange.bind(this),
                    type: "radio",
                    value: "unknown"
                }), " Unknown")), a.createElement("div", {
                    className: "radio"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: "approved" === o,
                    disabled: r,
                    name: `status-${l}`,
                    onChange: this.onStatusChange.bind(this),
                    type: "radio",
                    value: "approved"
                }), " Approved")), a.createElement("div", {
                    className: "radio"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: "rejected" === o,
                    disabled: r,
                    name: `status-${l}`,
                    onChange: this.onStatusChange.bind(this),
                    type: "radio",
                    value: "rejected"
                }), " Rejected"))))
            }
        }
    },
    30579: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return d
            }
        });
        var a = n(96540)
          , l = n(36052)
          , s = n(10065)
          , r = n(83915)
          , o = n(73898)
          , i = n(28878)
          , c = n(57297);
        class d extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    index: 0,
                    loading: !0,
                    sentences: [],
                    togglingModerated: !1,
                    total: 0,
                    url: e.collectionClozeSentencesUrl
                }
            }
            componentDidMount() {
                this.loadSentences(),
                $(window).on("keydown", (e => {
                    if ($(".modal").is(":visible") || this.state.togglingModerated)
                        return !0;
                    if (39 === e.which || 68 === e.which)
                        return this.nextSentence();
                    if (37 === e.which || 65 === e.which)
                        return this.prevSentence();
                    const {index: t, sentences: n} = this.state;
                    if (!n[t])
                        return !1;
                    if (69 === e.which)
                        return this.showSentenceEditor();
                    if (83 === e.which)
                        return this.showTtsEditor();
                    if (84 === e.which)
                        return this.showTokensEditor();
                    if (e.which >= 49 && e.which <= 57) {
                        const t = $("audio").get(e.which - 49);
                        return t && t.play(),
                        !0
                    }
                    return 82 === e.which ? this.toggleModerated() : void 0
                }
                ))
            }
            componentDidUpdate(e, t) {
                const {index: n, loading: a, moreSentencesAvailable: l, sentences: s} = this.state;
                a || s[n] || !l || this.loadSentences()
            }
            loadSentences() {
                const {url: e} = this.state;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        include_stats: !0,
                        include_tts: !0,
                        order: "num_incorrect_desc",
                        per_page: 100,
                        scope: "unmoderated"
                    },
                    url: e
                }).done((e => {
                    if (!e.collectionClozeSentences.length)
                        return this.setState({
                            moreSentencesAvailable: !1,
                            loading: !1
                        }),
                        !1;
                    this.setState({
                        moreSentencesAvailable: !!e.relativeNextPageUrl,
                        loading: !1,
                        sentences: this.state.sentences.concat(e.collectionClozeSentences),
                        url: e.relativeNextPageUrl
                    })
                }
                )).fail(( () => {
                    alert("Oh no! Something's gone terribly wrong. Please refresh the page and let someone know if you see this message again.")
                }
                ))
            }
            nextSentence() {
                const {index: e, sentences: t} = this.state;
                this.setState({
                    index: Math.min(e + 1, t.length)
                })
            }
            prevSentence() {
                const {index: e, sentences: t} = this.state;
                if (e <= 0)
                    return !1;
                this.setState({
                    index: e - 1
                })
            }
            renderTts() {
                const {index: e, sentences: t} = this.state
                  , n = t[e];
                return a.createElement("ul", null, n.tts.map(( (e, t) => a.createElement("li", {
                    key: e.voice_id
                }, a.createElement("strong", null, e.voice_id), " ", a.createElement("small", null, "(", e.service, ")"), " (", t + 1, ")", a.createElement("br", null), a.createElement("audio", {
                    controls: !0,
                    preload: "none",
                    src: e.audioUrl,
                    style: {
                        maxWidth: "100%"
                    }
                })))))
            }
            renderTokens() {
                const {index: e, sentences: t} = this.state
                  , n = t[e];
                return a.createElement(i.default, {
                    key: n.id,
                    url: n.tokensUrl
                })
            }
            showSentenceEditor() {
                this.setState({
                    sentenceEditorVisible: !0
                })
            }
            showTtsEditor() {
                this.setState({
                    ttsEditorVisible: !0
                })
            }
            showTokensEditor() {
                this.setState({
                    tokensEditorVisible: !0
                })
            }
            toggleModerated() {
                this.setState({
                    togglingModerated: !0
                });
                const {index: e, sentences: t} = this.state
                  , n = t[e];
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        moderated: !n.moderated
                    }),
                    method: "patch",
                    url: n.url
                }).done((e => {
                    this.setState({
                        sentences: t.map((t => t.id === n.id ? Object.assign({}, n, e.collectionClozeSentence) : t))
                    })
                }
                )).fail(( () => alert("Oh no! There was an error updating the sentence. Sorry about that. Please try again and let us know if you see this message again."))).always(( () => this.setState({
                    togglingModerated: !1
                })))
            }
            renderControls() {
                const {index: e, sentences: t, togglingModerated: n} = this.state
                  , l = t[e];
                return a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: n,
                    onClick: this.showSentenceEditor.bind(this)
                }, "Edit"), " ", a.createElement("span", null, "(e)")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: n,
                    onClick: this.showTtsEditor.bind(this)
                }, "TTS"), " ", a.createElement("span", null, "(s)")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: n,
                    onClick: this.showTokensEditor.bind(this)
                }, "Tokens"), " ", a.createElement("span", null, "(t)")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: !(e > 0) || n,
                    onClick: () => this.prevSentence()
                }, "Back"), " ", a.createElement("span", null, "(\u2b05\ufe0f or a)")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-default",
                    disabled: n,
                    onClick: () => this.nextSentence()
                }, "Next"), " ", a.createElement("span", null, "(\u27a1\ufe0f or d)")), a.createElement("li", null, a.createElement("button", {
                    className: `btn btn-${l.moderated ? "success" : "default"} btn-lg`,
                    disabled: n,
                    onClick: () => this.toggleModerated()
                }, l.moderated ? "\u2705 Moderated \ud83c\udf89" : "\u2796 Moderated"), " ", a.createElement("span", null, "(r)")))
            }
            renderSentenceEditor() {
                if (!this.state.sentenceEditorVisible)
                    return !1;
                const {index: e, sentences: t} = this.state
                  , n = t[e];
                return a.createElement(s.default, {
                    collectionClozeSentence: n,
                    collectionClozeSentenceUrl: n.url,
                    clozeSentenceUrl: n.clozeSentenceUrl,
                    onHidden: () => this.setState({
                        sentenceEditorVisible: !1
                    }),
                    onUpdate: e => {
                        this.setState({
                            sentences: t.map((t => t.id === n.id ? Object.assign(n, e) : t))
                        })
                    }
                })
            }
            renderTtsEditor() {
                if (!this.state.ttsEditorVisible)
                    return !1;
                const {index: e, sentences: t} = this.state
                  , n = t[e];
                return a.createElement(r.default, {
                    clozeSentenceTtsJobUrl: n.clozeSentenceTtsJobUrl,
                    clozeSentenceUrl: n.clozeSentenceUrl,
                    collectionClozeSentenceTtsJobUrl: n.collectionClozeSentenceTtsJobUrl,
                    collectionClozeSentenceUrl: n.url,
                    onHidden: () => this.setState({
                        ttsEditorVisible: !1
                    })
                })
            }
            renderTokensEditor() {
                if (!this.state.tokensEditorVisible)
                    return null;
                const {index: e, sentences: t} = this.state
                  , n = t[e];
                return a.createElement(c.default, {
                    clozeText: n.text,
                    onHidden: ({tokensCount: e}) => this.setState({
                        tokensEditorVisible: !1
                    }),
                    tokensUrl: n.tokensUrl
                })
            }
            render() {
                const {index: e, loading: t, sentences: n} = this.state;
                if (t && !n[e])
                    return a.createElement(o.default, null);
                if (!n[e])
                    return a.createElement(a.Fragment, null, a.createElement("p", null, "No more sentences! \ud83c\udf89"), a.createElement("button", {
                        className: "btn btn-default",
                        onClick: () => this.prevSentence()
                    }, "Back"));
                const s = n[e];
                console.log(s);
                const {languagePairing: r} = this.props
                  , {baseLanguageIso: i, targetLanguageIso: c} = r || {};
                return a.createElement(a.Fragment, null, a.createElement("hr", null), a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, "Index: ", e + 1), a.createElement("li", null, "Moderated this session: ", n.filter((e => e.moderated)).length)), this.renderControls(), a.createElement("div", {
                    style: {
                        marginTop: 30
                    }
                }, a.createElement(l.default, {
                    baseLanguageIso: i,
                    clozeSentence: s,
                    clozeSentenceStyle: {
                        fontSize: "1.5em"
                    },
                    includeTranslationLinks: !!i && !!c,
                    targetLanguageIso: c
                }), a.createElement("br", null), this.renderTts(), a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, s.numPlayed, " \ud83c\udfae"), a.createElement("li", null, s.numIncorrect, " \u274c"), a.createElement("li", null, s.numIgnored, " \ud83d\udeab"), a.createElement("li", null, "Tokens: ", s.tokensCount))), this.renderSentenceEditor(), this.renderTtsEditor(), this.renderTokensEditor())
            }
        }
    },
    28878: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    tokens: null
                }
            }
            componentDidMount() {
                const {url: e} = this.props;
                $.ajax({
                    data: {
                        include: "morphological_features,pos_tags"
                    },
                    url: e
                }).done((e => {
                    this.setState({
                        loading: !1,
                        morphologicalFeatures: e.morphologicalFeatures,
                        posTags: e.posTags,
                        tokens: e.tokens
                    })
                }
                )).fail(( () => {
                    alert("Failed to get tokens! Please refresh the page to try again and let someone know if you see this message again.")
                }
                ))
            }
            render() {
                const {loading: e, tokens: t} = this.state;
                return e ? "Loading..." : t && t.length ? a.createElement("div", null, t.map((e => a.createElement("div", {
                    style: {
                        display: "inline-block",
                        marginBottom: 10,
                        marginRight: 15,
                        textAlign: "center",
                        verticalAlign: "top"
                    }
                }, e.text, e.posTag && a.createElement(a.Fragment, null, a.createElement("br", null), e.posTag.key), e.lemma && e.lemma.text && e.lemma.text !== e.text && a.createElement(a.Fragment, null, a.createElement("br", null), e.lemma.text))))) : null
            }
        }
    },
    76994: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(62477)
          , s = n.n(l);
        class r extends a.Component {
            componentDidMount() {
                const e = ["rgb(255, 99, 132)", "rgb(54, 162, 235)", "#560391", "#70e904", "#328bef", "#16800e", "#1f65e0", "#a3bfca", "#896ab7", "#495a40", "#8dae12", "#3495f", "#7c341d", "#2d3cb4", "#4fb679", "#853531", "#3db719", "#479575", "#ca1d4c", "#823dcf", "#1558e2", "#ba8313"]
                  , t = {
                    type: "line",
                    data: {
                        labels: this.props.dates,
                        datasets: this.props.lines.map(( (t, n) => ({
                            backgroundColor: e[n],
                            borderColor: e[n],
                            data: t.data,
                            fill: !1,
                            label: t.label
                        })))
                    },
                    options: {
                        responsive: !0,
                        tooltips: {
                            mode: "index",
                            intersect: !1
                        },
                        hover: {
                            mode: "nearest",
                            intersect: !0
                        }
                    }
                }
                  , n = document.getElementById("canvas").getContext("2d");
                new (s())(n,t)
            }
            render() {
                return a.createElement("canvas", {
                    id: "canvas"
                })
            }
        }
    },
    37574: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(64100);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    voices: e.voices
                }
            }
            renderVoiceRow(e) {
                const {languages: t} = this.props
                  , {voices: n} = this.state;
                return a.createElement(l.default, {
                    key: e.id,
                    languages: t,
                    onUpdate: t => this.setState({
                        voices: n.map((n => n.id === e.id ? t : n))
                    }),
                    voice: e
                })
            }
            render() {
                const {voices: e} = this.state;
                return a.createElement("div", {
                    className: "table-responsive"
                }, a.createElement("table", {
                    className: "table table-striped table-hover table-condensed"
                }, a.createElement("thead", null, a.createElement("tr", null, a.createElement("th", null, "Active"), a.createElement("th", null, "Provider"), a.createElement("th", null, "Language code"), a.createElement("th", null, "Name"), a.createElement("th", null, "Sample"), a.createElement("th", null, "Language"), a.createElement("th", null, "Display name"), a.createElement("th", null, "Gender"))), a.createElement("tbody", null, e.map((e => this.renderVoiceRow(e))))))
            }
        }
    },
    64100: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(21663);
        class s extends a.Component {
            constructor(e) {
                super(e);
                const t = e.voice || {};
                this.state = {
                    languageId: t.languageId || "",
                    sampleAudioText: t.sampleAudioText,
                    updating: !1
                }
            }
            componentDidMount() {
                const {voice: e} = this.props;
                this.shouldCheckSampleAudioStatus(e.sampleAudioStatus) && this.checkSampleAudioStatus()
            }
            shouldCheckSampleAudioStatus(e) {
                return "sample_audio_queued" === e || "sample_audio_working" === e
            }
            checkSampleAudioStatus() {
                const {onUpdate: e, voice: t} = this.props;
                this.setState({
                    updating: !0
                }),
                setTimeout(( () => {
                    $.ajax({
                        url: t.url
                    }).done((t => {
                        const {ttsVoice: n} = t;
                        e && e(n),
                        this.shouldCheckSampleAudioStatus(n.sampleAudioStatus) ? this.checkSampleAudioStatus() : this.setState({
                            updating: !1
                        })
                    }
                    )).fail(( () => {
                        alert("Error checking sample audio status."),
                        this.setState({
                            updating: !1
                        })
                    }
                    ))
                }
                ), 3e3)
            }
            update(e) {
                this.setState({
                    updating: !0
                });
                const {onUpdate: t, voice: n} = this.props;
                console.log(n),
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        tts_voice: e
                    }),
                    dataType: "json",
                    method: "put",
                    url: n.url
                }).done((e => {
                    if (e.errors)
                        alert(e.errors),
                        this.setState({
                            updating: !1
                        });
                    else {
                        const {ttsVoice: n} = e;
                        t && t(n),
                        this.shouldCheckSampleAudioStatus(n.sampleAudioStatus) ? this.checkSampleAudioStatus() : this.setState({
                            updating: !1
                        })
                    }
                }
                )).fail(( () => {
                    alert("Something's gone awry! Failed to update."),
                    this.setState({
                        updating: !1
                    })
                }
                ))
            }
            render() {
                const {languages: e, voice: t} = this.props
                  , {sampleAudioText: n, updating: s} = this.state;
                return a.createElement("tr", {
                    className: "voice " + (t.languageId ? t.active ? "success" : "warning" : "danger")
                }, a.createElement("td", null, a.createElement("input", {
                    disabled: s,
                    type: "checkbox",
                    onChange: e => this.update({
                        active: e.target.checked
                    }),
                    checked: t.active
                })), a.createElement("td", null, t.ttsProvider), a.createElement("td", null, t.languageCode), a.createElement("td", null, t.name), a.createElement("td", null, !!t.sampleAudioUrl && a.createElement("audio", {
                    controls: !0,
                    preload: "none",
                    src: t.sampleAudioUrl
                }), a.createElement("div", {
                    className: "status"
                }, a.createElement("small", null, "Status: ", t.sampleAudioStatus)), !!t.sampleAudioErrorMessage && a.createElement("div", {
                    className: "alert alert-danger"
                }, t.sampleAudioErrorMessage), !!t.sampleAudioErrorBacktrace && a.createElement("pre", {
                    style: {
                        maxHeight: 200,
                        overflow: "scroll"
                    }
                }, JSON.stringify(t.sampleAudioErrorBacktrace, null, 2)), a.createElement("div", null, a.createElement(l.A, {
                    disabled: s,
                    name: "sample_audio_text",
                    onChange: e => this.setState({
                        sampleAudioText: e.target.value
                    }),
                    style: {
                        marginRight: 5
                    },
                    value: n
                }), a.createElement("button", {
                    className: "btn btn-xs btn-default submit",
                    disabled: s,
                    onClick: () => this.update({
                        sample_audio_text: n
                    }),
                    style: {
                        verticalAlign: "top"
                    }
                }, "Save"))), a.createElement("td", null, a.createElement("select", {
                    onChange: e => this.update({
                        language_id: e.target.value
                    }),
                    value: t.languageId || ""
                }, a.createElement("option", null), e.map((e => a.createElement("option", {
                    key: e.id,
                    value: e.id
                }, e.englishName))))), a.createElement("td", null, t.displayName), a.createElement("td", null, t.gender))
            }
        }
    },
    18157: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return r
            }
        });
        var a = n(96540)
          , l = n(86956)
          , s = n(28906);
        class r extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    page: parseInt(e.page) || 1,
                    query: e.query || "",
                    total: 0,
                    words: []
                }
            }
            componentDidMount() {
                this.loadWords()
            }
            updateUrlSearchParams() {
                const {page: e, query: t} = this.state;
                if ("URLSearchParams"in window) {
                    var n = new URLSearchParams(window.location.search);
                    n.set("page", e),
                    n.set("query", t);
                    var a = window.location.pathname + "?" + n.toString();
                    history.pushState(null, "", a)
                }
            }
            loadWords() {
                this.setState({
                    loading: !0
                });
                const {page: e, query: t} = this.state
                  , {perPage: n, url: a} = this.props;
                $.ajax({
                    data: {
                        query: t,
                        page: e,
                        per_page: n
                    },
                    url: a
                }).done((e => {
                    console.log(e);
                    const {total: t, words: n} = e;
                    this.setState({
                        loading: !1,
                        total: t,
                        words: n
                    }, ( () => this.updateUrlSearchParams()))
                }
                )).fail(( () => {
                    alert("Something's gone terribly wrong! Please let someone know.")
                }
                ))
            }
            nextPage() {
                const {page: e} = this.state;
                this.setState({
                    page: e + 1
                }, ( () => this.loadWords()))
            }
            prevPage() {
                const {page: e} = this.state;
                this.setState({
                    page: e - 1
                }, ( () => this.loadWords()))
            }
            updateWord({attrs: e, word: t}) {
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        word: e
                    },
                    method: "put",
                    url: t.url
                }).done((e => {
                    e.errors && alert(e.errors),
                    this.setState({
                        loading: !1
                    })
                }
                )).fail(( () => {
                    alert("Something's gone terribly wrong! Please let someone know.")
                }
                ))
            }
            deleteWord({word: e}) {
                this.setState({
                    loading: !0
                });
                const {page: t} = this.state
                  , {perPage: n} = this.props;
                $.ajax({
                    data: {
                        page: t,
                        per_page: n
                    },
                    method: "delete",
                    url: e.url
                }).done((e => {
                    console.log(e);
                    const {total: t, words: n} = e;
                    this.setState({
                        loading: !1,
                        total: t,
                        words: n
                    })
                }
                )).fail(( () => {
                    alert("Something's gone terribly wrong! Please let someone know.")
                }
                ))
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    page: 1
                }, ( () => this.loadWords()))
            }
            render() {
                const {perPage: e} = this.props
                  , {loading: t, page: n, query: r, total: o, words: i} = this.state;
                return a.createElement(a.Fragment, null, a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("input", {
                    className: "form-control",
                    disabled: t,
                    onChange: e => this.setState({
                        query: e.target.value
                    }),
                    placeholder: "Search...",
                    type: "text",
                    value: r
                }))), i.map((e => a.createElement(s.default, {
                    destroy: () => this.deleteWord({
                        word: e
                    }),
                    key: e.text,
                    loading: t,
                    update: t => this.updateWord({
                        attrs: t,
                        word: e
                    }),
                    text: e.text
                }))), a.createElement("hr", null), a.createElement("div", {
                    style: {
                        display: "inline-block",
                        width: 500
                    }
                }, a.createElement(l.default, {
                    onNextClick: () => this.nextPage(),
                    onPrevClick: () => this.prevPage(),
                    page: n,
                    perPage: e,
                    total: o,
                    updating: t
                })))
            }
        }
    },
    28906: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    editing: !1,
                    text: e.text
                }
            }
            componentDidUpdate(e, t) {
                e.loading && !this.props.loading && this.state.editing && this.setState({
                    editing: !1
                })
            }
            render() {
                const {editing: e, text: t} = this.state
                  , {destroy: n, loading: l, update: s} = this.props;
                return e ? a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, a.createElement("input", {
                    className: "form-control",
                    disabled: l,
                    onChange: e => this.setState({
                        text: e.target.value
                    }),
                    value: t
                })), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    disabled: l,
                    onClick: () => s({
                        text: t
                    })
                }, "Save")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-xs btn-default",
                    disabled: l,
                    onClick: () => this.setState({
                        editing: !1,
                        text: this.props.text
                    })
                }, "Cancel"))) : a.createElement("ul", {
                    className: "list-inline"
                }, a.createElement("li", null, t), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    disabled: l,
                    onClick: () => this.setState({
                        editing: !0
                    })
                }, "Edit")), a.createElement("li", null, a.createElement("button", {
                    className: "btn btn-xs btn-link",
                    disabled: l,
                    onClick: () => confirm("Are you sure? This cannot be undone") && n()
                }, "Delete")))
            }
        }
    },
    94513: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return i
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(46177)
          , r = n(40727);
        const o = ["alternativeAnswers", "hint", "idiom", "moderated", "multipleChoiceOptions", "notes", "nsfw", "pronunciation", "tatoebaId", "text", "translation"];
        class i extends a.Component {
            constructor(e) {
                super(e),
                this.state = Object.assign({
                    deleted: !1,
                    errors: null,
                    loading: !0,
                    tatoebaLink: !0
                }, this.getSentenceState(e.sentence || {}))
            }
            componentDidMount() {
                const {sentence: e, type: t, url: n} = this.props;
                if (e)
                    return this.setState({
                        loading: !1
                    }),
                    !0;
                $.ajax({
                    url: n
                }).done((e => {
                    this.setState(Object.assign({
                        loading: !1
                    }, this.getSentenceState(e[(0,
                    l.tr)(t)])))
                }
                )).fail(( () => {
                    alert("Failed to load sentence! Please let someone know.")
                }
                ))
            }
            isDisabled() {
                return this.state.deleted || this.props.disabled || this.state.loading
            }
            getSentenceState(e) {
                e = e || {};
                const t = {};
                return o.forEach((n => t[n] = "alternativeAnswers" === n || "multipleChoiceOptions" === n ? (e[n] || []).join(",") : e[n] || "")),
                t
            }
            handleChange(e) {
                const t = {};
                "checkbox" === e.target.type ? t[e.target.name] = e.target.checked : t[e.target.name] = e.target.value,
                this.setState(t)
            }
            onSubmit(e) {
                e.preventDefault(),
                this.setState({
                    errors: null,
                    loading: !0
                });
                const {onUpdate: t, type: n, url: a} = this.props
                  , {alternativeAnswers: s, hint: r, idiom: i, multipleChoiceOptions: c, notes: d, nsfw: u, pronunciation: m, tatoebaId: h, text: g, translation: p} = this.state
                  , b = {
                    alternative_answers: s,
                    hint: r,
                    idiom: i,
                    multiple_choice_options: c,
                    notes: d,
                    nsfw: u,
                    pronunciation: m,
                    tatoeba_id: h,
                    text: g,
                    translation: p
                };
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        [n]: b
                    }),
                    method: "patch",
                    url: a
                }).done((e => {
                    if (e.errors)
                        return this.setState({
                            errors: e.errors,
                            loading: !1
                        }, ( () => {
                            $(".modal").animate({
                                scrollTop: 0
                            })
                        }
                        )),
                        !1;
                    const a = e[(0,
                    l.tr)(n)];
                    t && t({
                        attrs: o.reduce(( (e, t) => (e[t] = a[t],
                        e)), {}),
                        data: b
                    });
                    const s = this.getSentenceState(a);
                    this.setState(Object.assign(s, {
                        loading: !1
                    }))
                }
                )).fail(( () => {
                    alert("Failed to save sentence! Sorry about that. Please let someone know.")
                }
                ))
            }
            onDeleteClick() {
                if ("delete" !== prompt("Are you sure you want to delete this sentence? This action cannot be undone. Please type delete to confirm."))
                    return !1;
                const {onDelete: e, url: t} = this.props;
                $.ajax({
                    method: "delete",
                    url: t
                }).done(( () => {
                    this.setState({
                        deleted: !0,
                        loading: !1
                    }),
                    e && e()
                }
                )).fail(( () => {
                    alert("Failed to delete sentence! Sorry about that. Please let someone know.")
                }
                ))
            }
            render() {
                const {alternativeAnswers: e, deleted: t, errors: n, hint: o, idiom: i, multipleChoiceOptions: c, notes: d, nsfw: u, pronunciation: m, tatoebaId: h, tatoebaLink: g, text: p, translation: b} = this.state
                  , {textEditingDisabled: f, translationEditingDisabled: E, type: y} = this.props;
                return a.createElement("div", {
                    className: y.replace(/_/g, "-")
                }, a.createElement("form", {
                    onSubmit: e => this.onSubmit(e)
                }, n && a.createElement("p", {
                    className: "alert alert-danger"
                }, n), t && a.createElement("p", {
                    className: "alert alert-danger"
                }, "Deleted!"), a.createElement("p", {
                    style: {
                        fontSize: "1.5em"
                    }
                }, a.createElement(s.default, {
                    onChange: e => this.setState({
                        text: e
                    }),
                    text: p
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "text"
                }, "Text"), a.createElement("input", {
                    disabled: this.isDisabled() || f,
                    className: "form-control",
                    name: "text",
                    ref: e => this.textInput = e,
                    value: p,
                    onChange: e => this.handleChange(e)
                }), a.createElement("small", null, "Wrap the cloze-word in ", a.createElement("code", null, "{{"), a.createElement("code", null, "}}"), ", for example ", a.createElement("code", null, "A ", "{{", "missing", "}}", " word."), "."), f && a.createElement("div", null, a.createElement("small", null, "Text editing is disabled for this collection. Please let someone at Clozemaster know if this text should be changed."))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "translation"
                }, "Translation"), a.createElement("input", {
                    disabled: this.isDisabled() || E,
                    className: "form-control",
                    name: "translation",
                    value: b,
                    onChange: e => this.handleChange(e)
                }), E && a.createElement("div", null, a.createElement("small", null, "Translation editing is disabled for this collection. Please let someone at Clozemaster know if this translation should be changed."))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "pronunciation"
                }, "Pronunciation"), a.createElement("input", {
                    disabled: this.isDisabled(),
                    className: "form-control",
                    name: "pronunciation",
                    value: m,
                    onChange: e => this.handleChange(e)
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "notes"
                }, "Notes"), a.createElement("input", {
                    disabled: this.isDisabled(),
                    className: "form-control",
                    name: "notes",
                    value: d,
                    onChange: e => this.handleChange(e)
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "alternativeAnswers"
                }, "Alternative answers (comma-separated list)"), a.createElement("input", {
                    disabled: this.isDisabled(),
                    className: "form-control",
                    name: "alternativeAnswers",
                    value: e,
                    onChange: e => this.handleChange(e)
                })), !!c && !!c.length && a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "multipleChoiceOptions"
                }, "Multiple choice options (comma-separated list)"), a.createElement("input", {
                    disabled: this.isDisabled(),
                    className: "form-control",
                    name: "multipleChoiceOptions",
                    value: c,
                    onChange: e => this.handleChange(e)
                })), this.props.sentence && this.props.sentence.tatoebaId && a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    name: "tatoeba_link",
                    type: "checkbox",
                    onChange: e => this.setState({
                        tatoebaId: e.target.checked ? this.props.sentence.tatoebaId : null,
                        tatoebaLink: e.target.checked
                    }),
                    checked: g
                }), "Link to Tatoeba"), a.createElement("a", {
                    href: (0,
                    l.Ok)(h),
                    rel: "noreferrer",
                    style: {
                        marginLeft: 5
                    },
                    target: "_blank"
                }, "View ", a.createElement(r.default, {
                    name: "new-window"
                })), !g && a.createElement("p", {
                    className: "alert alert-danger",
                    style: {
                        marginTop: 5
                    }
                }, "This will remove the Tatoeba ID associated with this sentence. This cannot be undone at the moment. Please be sure.")), a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    name: "idiom",
                    type: "checkbox",
                    onChange: e => this.handleChange(e),
                    checked: i
                }), "Idiom")), a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    name: "nsfw",
                    type: "checkbox",
                    onChange: e => this.handleChange(e),
                    checked: u
                }), "NSFW")), a.createElement("p", null, a.createElement("button", {
                    disabled: this.isDisabled(),
                    className: "joystix btn btn-lg btn-success btn-block"
                }, "Save")), a.createElement("p", null, a.createElement("small", null, "Text-to-speech (TTS) is automatically updated when text is changed."))), a.createElement("div", null, a.createElement("button", {
                    className: "btn btn-xs btn-danger",
                    disabled: this.isDisabled(),
                    onClick: () => this.onDeleteClick()
                }, "Delete"), a.createElement("small", {
                    style: {
                        marginLeft: 5
                    }
                }, "Please avoid deleting sentences whenever possible. Edits are preferred.")))
            }
        }
    },
    36052: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(58108)
          , s = n(68462)
          , r = n(40727);
        function o(e) {
            const {baseLanguageIso: t, clozeSentence: n, clozeSentenceStyle: o, includeTranslationLinks: i, targetLanguageIso: c} = e
              , d = n
              , u = d.text.replace(/{{|}}/g, "")
              , m = ["bg", "cs", "da", "de", "el", "en", "es", "et", "fi", "fr", "hu", "it", "ja", "lt", "lv", "nl", "pl", "pt", "ro", "ru", "sk", "sl", "sv", "zh"]
              , h = m.indexOf(t) >= 0 && m.indexOf(c) >= 0;
            console.log("baseLanguageIso", t, "targetLanguageIso", c);
            const g = "he" === c ? "iw" : c
              , p = "he" === t ? "iw" : t;
            return a.createElement(a.Fragment, null, a.createElement("div", {
                style: o
            }, a.createElement("div", {
                className: (0,
                l.V8)(d.text) ? "rtl" : null
            }, a.createElement(s.default, {
                text: d.text
            }))), i && a.createElement("ul", {
                className: "list-inline",
                style: {
                    marginBottom: 0
                }
            }, a.createElement("li", null, a.createElement("small", null, a.createElement("a", {
                href: `https://translate.google.com/?sl=${g}&tl=${p}&text=${encodeURIComponent(u)}&op=translate`,
                target: "_blank"
            }, "Google ", a.createElement(r.default, {
                name: "new-window"
            })))), h && a.createElement("li", null, a.createElement("small", null, a.createElement("a", {
                href: `https://www.deepl.com/translator#${c}/${t}/${encodeURIComponent(u)}`,
                target: "_blank"
            }, "DeepL ", a.createElement(r.default, {
                name: "new-window"
            })))), a.createElement("li", null, a.createElement("small", null, a.createElement("a", {
                href: `https://www.bing.com/translator/?from=${c}&to=${t}&text=${encodeURIComponent(u)}`,
                target: "_blank"
            }, "Bing ", a.createElement(r.default, {
                name: "new-window"
            }))))), a.createElement("div", null, a.createElement("div", {
                className: (0,
                l.V8)(d.translation) ? "rtl" : null
            }, d.translation), i && a.createElement("ul", {
                className: "list-inline",
                style: {
                    marginBottom: 0
                }
            }, a.createElement("li", null, a.createElement("small", null, a.createElement("a", {
                href: `https://translate.google.com/?sl=${p}&tl=${g}&text=${encodeURIComponent(d.translation)}&op=translate`,
                target: "_blank"
            }, "Google ", a.createElement(r.default, {
                name: "new-window"
            })))), h && a.createElement("li", null, a.createElement("small", null, a.createElement("a", {
                href: `https://www.deepl.com/translator#${t}/${c}/${encodeURIComponent(d.translation)}`,
                target: "_blank"
            }, "DeepL ", a.createElement(r.default, {
                name: "new-window"
            })))), a.createElement("li", null, a.createElement("small", null, a.createElement("a", {
                href: `https://www.bing.com/translator/?from=${t}&to=${c}&text=${encodeURIComponent(d.translation)}`,
                target: "_blank"
            }, "Bing ", a.createElement(r.default, {
                name: "new-window"
            })))))), !!d.pronunciation && a.createElement("div", null, a.createElement("small", null, a.createElement("strong", null, "Pronunciation:"), " ", d.pronunciation)), !!d.hint && a.createElement("div", null, a.createElement("small", null, a.createElement("strong", null, "Hint:"), " ", d.hint)), !!d.notes && a.createElement("div", null, a.createElement("small", null, a.createElement("strong", null, "Notes:"), " ", d.notes)), !!(d.alternativeAnswers || []).length && a.createElement("div", null, a.createElement("small", null, a.createElement("strong", null, "Alternative answers:"), " ", d.alternativeAnswers.join(","))), !!d.tatoebaId && a.createElement("small", null, a.createElement("a", {
                href: (0,
                l.Ok)(d.tatoebaId),
                rel: "noreferrer",
                target: "_blank"
            }, "Tatoeba ", a.createElement(r.default, {
                name: "new-window"
            }))))
        }
    },
    60011: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(58108);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    tts: [],
                    ttsErrorMessage: null,
                    ttsStatus: null
                }
            }
            componentDidMount() {
                this.getTts()
            }
            getTts() {
                const {type: e, url: t} = this.props;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        include: "tts,tts_voices"
                    },
                    url: t
                }).done((t => {
                    const n = t[(0,
                    l.tr)(e)];
                    if (("" + n.ttsStatus).match(/queued|working/))
                        return setTimeout(( () => this.getTts()), 2e3),
                        !1;
                    this.setState({
                        loading: !1,
                        text: n.text,
                        tts: n.tts,
                        ttsErrorMessage: n.ttsErrorMessage,
                        ttsStatus: n.ttsStatus,
                        ttsVoiceId: n.ttsVoiceId,
                        ttsVoices: t.ttsVoices
                    })
                }
                )).fail(( () => {
                    alert("Failed to get TTS! Please let someone know.")
                }
                ))
            }
            regenerate() {
                const {ttsJobUrl: e, type: t} = this.props
                  , {ttsVoiceId: n} = this.state;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    contentType: "application/json",
                    dataType: "json",
                    method: "post",
                    data: JSON.stringify({
                        [t]: {
                            tts_voice_id: n || null
                        }
                    }),
                    url: e
                }).done(( () => {
                    setTimeout(( () => this.getTts()), 2e3)
                }
                )).fail(( () => {
                    alert("Failed to regenerate TTS! Please let someone know.")
                }
                ))
            }
            render() {
                const {type: e} = this.props
                  , {loading: t, text: n, tts: l, ttsErrorMessage: s, ttsStatus: r, ttsVoiceId: o, ttsVoices: i} = this.state;
                return t || ("" + r).match(/queued|working/) ? "Loading... This may take a few minutes." : a.createElement("div", null, !!s && a.createElement("p", {
                    className: "alert alert-danger"
                }, s), a.createElement("p", null, n), a.createElement("pre", {
                    style: {
                        display: "none"
                    }
                }, JSON.stringify(l, null, 2)), l.map((e => a.createElement("p", {
                    key: e.voice_id
                }, a.createElement("strong", {
                    className: "voice-id"
                }, e.voice_id), a.createElement("br", null), a.createElement("audio", {
                    controls: !0,
                    src: e.audioUrl,
                    preload: "none",
                    style: {
                        maxWidth: "100%"
                    }
                })))), a.createElement("hr", null), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", null, "Voice"), a.createElement("pre", {
                    style: {
                        display: "none"
                    }
                }, JSON.stringify(i, null, 2)), a.createElement("select", {
                    className: "form-control",
                    name: e + "[tts_voice_id]",
                    onChange: e => this.setState({
                        ttsVoiceId: e.target.value || ""
                    }),
                    value: o
                }, a.createElement("option", {
                    value: ""
                }, "Random"), (i || []).map((e => a.createElement("option", {
                    key: e.id,
                    value: e.id
                }, "(", e.languageCode, ") ", e.name, " (", e.gender, ") (", e.ttsProvider, ")"))))), a.createElement("hr", null), a.createElement("button", {
                    className: "btn btn-default btn-block joystix",
                    onClick: () => this.regenerate()
                }, "Regenerate"))
            }
        }
    },
    21270: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return s
            }
        });
        var a = n(96540)
          , l = n(40727);
        class s extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    moreVisible: !1
                }
            }
            render() {
                const e = this.props.change
                  , {moreVisible: t} = this.state;
                return a.createElement("div", {
                    style: {
                        borderBottom: "1px solid #ccc",
                        marginBottom: 10
                    }
                }, a.createElement("ul", null, e.languagePairing && a.createElement("li", null, a.createElement("strong", null, e.languagePairing)), a.createElement("li", null, a.createElement("strong", null, "Created at:"), " ", e.createdAt), e.collection && a.createElement("li", null, a.createElement("strong", null, "Collection:"), " ", e.collection), a.createElement("li", null, a.createElement("strong", null, "User:"), " ", e.user && e.user.username), e.deleted && a.createElement("li", null, a.createElement("span", {
                    className: "label label-danger"
                }, "Deleted")), !e.deleted && Object.keys(e.newAttributes).filter((t => (e.newAttributes[t] || e.oldAttributes[t]) && e.newAttributes[t] !== e.oldAttributes[t])).map((t => a.createElement("li", {
                    key: t
                }, a.createElement("strong", null, t.charAt(0).toUpperCase() + t.slice(1).replace(/_/g, " "), ":"), " ", "" + e.oldAttributes[t], " \u27a1\ufe0f ", "" + e.newAttributes[t]))), a.createElement("li", {
                    style: {
                        listStyle: "none"
                    }
                }, a.createElement("small", null, a.createElement("a", {
                    href: "#",
                    role: "button",
                    onClick: e => {
                        e.preventDefault(),
                        this.setState({
                            moreVisible: !t
                        })
                    }
                }, "JSON ", a.createElement(l.default, {
                    name: t ? "chevron-up" : "chevron-down"
                }))))), t && a.createElement("pre", null, JSON.stringify(e, ( (e, t) => null !== t ? t : void 0), 2)))
            }
        }
    },
    1988: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(21270)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    changes: null,
                    loading: !0
                }
            }
            componentDidMount() {
                this.loadChanges()
            }
            loadChanges() {
                const {url: e} = this.props;
                $.ajax({
                    url: e
                }).done((e => {
                    this.setState({
                        changes: e.collectionClozeSentenceChanges,
                        loading: !1
                    })
                }
                )).fail(( () => {
                    alert("Oh no! There was an error loading the changes. Sorry about that. Please try again and let someone know if you see this message again.")
                }
                ))
            }
            renderContent() {
                const {changes: e, loading: t} = this.state;
                return t ? "Loading..." : e && e.length ? e.map(( (e, t) => a.createElement(l.default, {
                    change: e,
                    key: t
                }))) : "No changes!"
            }
            render() {
                const {onHidden: e} = this.props;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: e,
                    size: "large",
                    title: "Collection Cloze Sentence Changes"
                }, this.renderContent())
            }
        }
    },
    10065: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(94513)
          , s = n(40897)
          , r = n(508);
        class o extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    clozeSentenceKey: 0,
                    editBoth: !0,
                    loading: !1
                }
            }
            componentDidMount() {
                setTimeout(( () => $(".modal .collection-cloze-sentence [name=text]").focus()), 500)
            }
            renderCollectionClozeSentenceEditor() {
                const {clozeSentenceUrl: e, collectionClozeSentence: t, collectionClozeSentenceUrl: n, onDelete: s, onUpdate: r, textEditingDisabled: o, translationEditingDisabled: i} = this.props
                  , {clozeSentenceKey: c, editBoth: d, loading: u} = this.state;
                return a.createElement(l.default, {
                    disabled: u,
                    onDelete: s,
                    onUpdate: ({attrs: t, data: n}) => {
                        d && e && (this.setState({
                            loading: !0
                        }),
                        $.ajax({
                            contentType: "application/json",
                            data: JSON.stringify({
                                cloze_sentence: n
                            }),
                            method: "patch",
                            url: e
                        }).done(( () => {
                            this.setState({
                                clozeSentenceKey: c + 1,
                                loading: !1
                            })
                        }
                        )).fail(( () => {
                            alert("Failed to save parent sentence! Sorry about that. Please let someone know."),
                            this.setState({
                                loading: !1
                            })
                        }
                        ))),
                        this.modalRef && this.modalRef.$modal.focus(),
                        r && r(t)
                    }
                    ,
                    sentence: t,
                    textEditingDisabled: o,
                    translationEditingDisabled: i,
                    type: "collection_cloze_sentence",
                    url: n
                })
            }
            renderClozeSentenceEditor() {
                const {clozeSentenceUrl: e, translationEditingDisabled: t} = this.props
                  , {clozeSentenceKey: n, editBoth: s, loading: r} = this.state;
                return e ? a.createElement(l.default, {
                    disabled: s || r,
                    key: n,
                    onUpdate: () => {
                        this.modalRef && this.modalRef.$modal.focus()
                    }
                    ,
                    translationEditingDisabled: t,
                    type: "cloze_sentence",
                    url: e
                }) : null
            }
            renderEditors() {
                const {clozeSentenceUrl: e} = this.props;
                return e ? a.createElement("div", {
                    className: "row"
                }, a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("p", null, a.createElement("strong", null, "Collection Cloze-Sentence")), a.createElement("hr", null), this.renderCollectionClozeSentenceEditor()), a.createElement("div", {
                    className: "col-xs-12 col-sm-6"
                }, a.createElement("p", null, a.createElement("strong", null, "Parent Cloze-Sentence")), a.createElement("hr", null), this.renderClozeSentenceEditor())) : this.renderCollectionClozeSentenceEditor()
            }
            renderEditBothCheckbox() {
                const {clozeSentenceUrl: e} = this.props;
                if (!e)
                    return !1;
                const {editBoth: t} = this.state;
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "checkbox"
                }, a.createElement("label", null, a.createElement("input", {
                    checked: t,
                    name: "edit_both",
                    onChange: e => this.setState({
                        editBoth: e.target.checked
                    }),
                    type: "checkbox"
                }), "Apply Collection Cloze-Sentence changes to Parent Cloze-Sentence")), a.createElement("hr", null))
            }
            render() {
                const {clozeSentenceUrl: e, onHidden: t} = this.props
                  , {editBoth: n} = this.state;
                return a.createElement(s.default, {
                    footer: a.createElement(r.default, null),
                    onHidden: t,
                    ref: e => this.modalRef = e,
                    size: e ? "large" : null,
                    title: "Edit Sentence"
                }, this.renderEditBothCheckbox(), this.renderEditors())
            }
        }
    },
    83915: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return o
            }
        });
        var a = n(96540)
          , l = n(60011)
          , s = n(40897)
          , r = n(508);
        function o(e) {
            const {clozeSentenceTtsJobUrl: t, clozeSentenceUrl: n, collectionClozeSentenceTtsJobUrl: o, collectionClozeSentenceUrl: i, onHidden: c} = e
              , d = !!n;
            return a.createElement(s.default, {
                footer: a.createElement(r.default, null),
                onHidden: c,
                size: d ? "large" : null,
                title: "TTS"
            }, a.createElement("div", {
                className: "row"
            }, a.createElement("div", {
                className: "collection-cloze-sentence col-xs-12" + (d ? " col-sm-6" : "")
            }, a.createElement("p", null, a.createElement("strong", null, "Collection Cloze Sentence")), a.createElement(l.default, {
                ttsJobUrl: o,
                type: "collection_cloze_sentence",
                url: i
            })), d && a.createElement("div", {
                className: "cloze-sentence col-xs-12 col-sm-6"
            }, a.createElement("p", null, a.createElement("strong", null, "Parent Cloze Sentence")), a.createElement(l.default, {
                ttsJobUrl: t,
                type: "cloze_sentence",
                url: n
            }))))
        }
    },
    57297: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return c
            }
        });
        var a = n(96540)
          , l = n(33829)
          , s = n(68462)
          , r = n(40897)
          , o = n(508)
          , i = n(19622);
        class c extends a.Component {
            constructor(e) {
                super(e),
                this.state = {
                    loading: !0,
                    tokens: []
                }
            }
            componentDidMount() {
                this.loadTokens()
            }
            loadTokens() {
                const {testEnv: e, tokensUrl: t} = this.props;
                this.setState({
                    loading: !0
                }),
                $.ajax({
                    data: {
                        include: "morphological_features,pos_tags"
                    },
                    url: t
                }).done((t => {
                    console.log("loadTokens", t);
                    const {tokenizationErrorMessage: n, tokenizationStatus: a, tokens: s} = t;
                    return "tokenization_failed" === a ? (this.setState({
                        loading: !1
                    }),
                    alert("Tokenization failed! Please try again."),
                    !1) : "tokenization_queued" === a || "tokenization_working" === a ? (setTimeout(this.loadTokens.bind(this), e ? 500 : 3e3),
                    !1) : (s.forEach((e => e.uuid = (0,
                    l.A)())),
                    void this.setState({
                        loading: !1,
                        morphologicalFeatures: t.morphologicalFeatures,
                        posTags: t.posTags,
                        tokens: s
                    }))
                }
                )).fail(( () => {
                    alert("Error loading tokens! Please tell someone.")
                }
                ))
            }
            renderContent() {
                const {loading: e, morphologicalFeatures: t, posTags: n, tokens: l} = this.state
                  , {clozeText: r, tokensUrl: o} = this.props;
                return e ? "Loading... This may take a few moments if the sentence is being tokenized." : a.createElement("div", {
                    id: "tokens",
                    style: {
                        overflowX: "auto",
                        whiteSpace: "nowrap",
                        width: "100%"
                    }
                }, a.createElement("p", {
                    style: {
                        fontSize: "2em"
                    }
                }, a.createElement(s.default, {
                    text: r
                })), l.sort(( (e, t) => e.index - t.index)).map((e => a.createElement(i.default, {
                    key: e.id || e.index,
                    morphologicalFeatures: t,
                    onDelete: () => {
                        this.setState({
                            tokens: l.filter((t => e.uuid !== t.uuid))
                        })
                    }
                    ,
                    onSave: ({token: e, uuid: t}) => {
                        this.setState({
                            tokens: l.map((n => n.uuid === t ? e : n))
                        })
                    }
                    ,
                    posTags: n,
                    token: e,
                    tokensUrl: o
                }))), a.createElement("div", null, "Scrollable \u27a1\ufe0f"))
            }
            addToken() {
                const {tokens: e} = this.state;
                this.setState({
                    tokens: e.concat([{
                        index: e.length ? Math.max(...e.map((e => e.index))) + 1 : 1,
                        uuid: (0,
                        l.A)()
                    }])
                }, ( () => $("#tokens").scrollLeft(1e4)))
            }
            regenerateTokens() {
                if ("confirmed" !== prompt("Are you sure? This will delete all existing tokens and regenerate new ones. This cannot be undone, and this may take a few minutes. Please type confirmed to continue."))
                    return !1;
                this.setState({
                    loading: !0
                });
                const {testEnv: e, tokensUrl: t} = this.props;
                $.ajax({
                    method: "put",
                    url: t
                }).done(( () => {
                    setTimeout(this.loadTokens.bind(this), e ? 500 : 3e3)
                }
                )).fail(( () => {
                    alert("Error regenerating tokens! Please tell someone.")
                }
                ))
            }
            render() {
                const {onHidden: e} = this.props
                  , {tokens: t} = this.state;
                return a.createElement(r.default, {
                    footer: a.createElement(a.Fragment, null, a.createElement("button", {
                        className: "btn btn-default",
                        onClick: () => this.regenerateTokens(),
                        style: {
                            marginRight: 5
                        }
                    }, "Regenerate Tokens"), a.createElement("button", {
                        className: "btn btn-default",
                        onClick: () => this.addToken(),
                        style: {
                            marginRight: 5
                        }
                    }, "Add Token"), a.createElement(o.default, null)),
                    onHidden: () => e({
                        tokensCount: t.length
                    }),
                    size: "large",
                    title: "Tokens"
                }, this.renderContent())
            }
        }
    },
    19622: function(e, t, n) {
        "use strict";
        n.r(t),
        n.d(t, {
            default: function() {
                return l
            }
        });
        var a = n(96540);
        class l extends a.Component {
            constructor(e) {
                super(e),
                this.state = Object.assign({
                    loading: !1
                }, this.getTokenStateFromProps()),
                this.handleChange = e => {
                    const {target: t} = e
                      , {name: n, selectedOptions: a, value: l} = t;
                    if ("morphologicalFeatureIds" === n) {
                        const e = Array.from(a, (e => parseInt(e.value)));
                        this.setState({
                            [n]: e
                        })
                    } else
                        this.setState({
                            [n]: ("" + l).match(/^\d+$/) ? parseInt(l) : l
                        })
                }
            }
            getTokenStateFromProps() {
                const {index: e, lemma: t, morphologicalFeatures: n, posTag: a, pronunciation: l, text: s} = this.props.token;
                return {
                    index: e,
                    lemmaPronunciation: (t || {}).pronunciation || "",
                    lemmaText: (t || {}).text || "",
                    morphologicalFeatureIds: (n || []).map((e => e.id)),
                    posTagId: (a || {}).id || "",
                    pronunciation: l || "",
                    text: s || ""
                }
            }
            onSubmit(e) {
                e.preventDefault();
                const {onSave: t, token: n, tokensUrl: a} = this.props
                  , {index: l, lemmaPronunciation: s, lemmaText: r, morphologicalFeatureIds: o, posTagId: i, pronunciation: c, text: d} = this.state;
                this.setState({
                    loading: !0
                });
                const u = !!n.url;
                $.ajax({
                    contentType: "application/json",
                    data: JSON.stringify({
                        lemma: {
                            pronunciation: s,
                            text: r
                        },
                        token: {
                            index: l,
                            morphological_feature_ids: o,
                            pos_tag_id: i,
                            pronunciation: c,
                            text: d
                        }
                    }),
                    method: u ? "put" : "post",
                    url: u ? n.url : a
                }).done((e => {
                    e.errors ? alert(e.errors) : t({
                        token: e.token,
                        uuid: n.uuid
                    }),
                    this.setState({
                        loading: !1
                    })
                }
                )).fail(( () => {
                    alert("Error saving token! Please tell someone.")
                }
                ))
            }
            resetToken(e) {
                return e.preventDefault(),
                confirm("Are you sure? This will reset the fields to the last saved values.") && this.setState(Object.assign(this.state, this.getTokenStateFromProps())),
                !1
            }
            deleteToken(e) {
                if (e.preventDefault(),
                !confirm("Are you sure? This action cannot be undone."))
                    return !1;
                this.setState({
                    loading: !0
                });
                const {onDelete: t, token: n} = this.props;
                return console.log(n),
                n.url || t(),
                $.ajax({
                    method: "delete",
                    url: n.url
                }).done(( () => {
                    t()
                }
                )).fail(( () => {
                    alert("Error deleting token! Please tell someone.")
                }
                )),
                !1
            }
            render() {
                const {index: e, lemmaPronunciation: t, lemmaText: n, loading: l, morphologicalFeatureIds: s, posTagId: r, pronunciation: o, text: i} = this.state
                  , {morphologicalFeatures: c, posTags: d, token: u} = this.props
                  , m = this.handleChange;
                return a.createElement("form", {
                    className: "token",
                    onSubmit: e => this.onSubmit(e),
                    style: {
                        display: "inline-block",
                        paddingRight: 10,
                        verticalAlign: "top",
                        whiteSpace: "normal",
                        width: 250
                    }
                }, a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "index"
                }, "Index"), a.createElement("input", {
                    className: "form-control",
                    disabled: l,
                    name: "index",
                    onChange: m,
                    type: "number",
                    value: e
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "text"
                }, "Text"), a.createElement("input", {
                    className: "form-control",
                    disabled: l,
                    name: "text",
                    onChange: m,
                    type: "text",
                    value: i
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "pronunciation"
                }, "Pronunciation"), a.createElement("input", {
                    className: "form-control",
                    disabled: l,
                    name: "pronunciation",
                    onChange: m,
                    type: "text",
                    value: o
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "posTagId"
                }, "Part-of-Speech"), a.createElement("select", {
                    className: "form-control",
                    disabled: l,
                    name: "posTagId",
                    onChange: m,
                    value: r
                }, a.createElement("option", {
                    value: ""
                }), d.map((e => a.createElement("option", {
                    key: e.id,
                    value: e.id
                }, e.key, " (", e.label, ")"))))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "morphologicalFeatureIds"
                }, "Morphological Features"), a.createElement("p", {
                    style: {
                        minHeight: 20,
                        overflowY: "scroll",
                        whiteSpace: "nowrap"
                    }
                }, c.filter((e => s.indexOf(e.id) >= 0)).map((e => a.createElement("span", {
                    key: e.id
                }, a.createElement("span", {
                    className: "label label-default"
                }, e.key, " - ", e.value), " ")))), a.createElement("select", {
                    className: "form-control",
                    disabled: l,
                    multiple: !0,
                    name: "morphologicalFeatureIds",
                    onChange: m,
                    style: {
                        height: 250,
                        overflow: "auto"
                    },
                    value: s
                }, c.map((e => a.createElement("option", {
                    key: e.id,
                    value: e.id
                }, e.key, " (", e.keyLabel, ") - ", e.value, " (", e.valueLabel, ")"))))), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "lemmaText"
                }, "Lemma Text"), a.createElement("input", {
                    className: "form-control",
                    disabled: l,
                    name: "lemmaText",
                    onChange: m,
                    type: "text",
                    value: n
                })), a.createElement("div", {
                    className: "form-group"
                }, a.createElement("label", {
                    htmlFor: "lemmaPronunciation"
                }, "Lemma Pronunciation"), a.createElement("input", {
                    className: "form-control",
                    disabled: l,
                    name: "lemmaPronunciation",
                    onChange: m,
                    type: "text",
                    value: t
                })), a.createElement("p", null, a.createElement("button", {
                    className: "btn btn-success btn-block joystix",
                    disabled: l
                }, "Save"), a.createElement("a", {
                    className: "btn btn-link btn-xs",
                    disabled: l,
                    href: "#",
                    onClick: e => this.resetToken(e),
                    role: "button"
                }, "Reset"), a.createElement("small", null, " / "), a.createElement("a", {
                    className: "btn btn-link btn-xs",
                    disabled: l,
                    href: "#",
                    onClick: e => this.deleteToken(e),
                    role: "button"
                }, "Delete")), a.createElement("div", null, a.createElement("strong", null, a.createElement("small", null, "JSON (for debugging, updates after save, fine to ignore)"))), a.createElement("pre", {
                    style: {
                        height: 300,
                        overflow: "auto",
                        width: "100%"
                    }
                }, JSON.stringify(u, null, 2)))
            }
        }
    },
    58108: function(e, t, n) {
        "use strict";
        n.d(t, {
            Ae: function() {
                return h
            },
            B8: function() {
                return o
            },
            DT: function() {
                return p
            },
            E: function() {
                return l
            },
            HL: function() {
                return i
            },
            Ok: function() {
                return E
            },
            Qd: function() {
                return a
            },
            R3: function() {
                return s
            },
            R4: function() {
                return c
            },
            RH: function() {
                return v
            },
            UE: function() {
                return r
            },
            V8: function() {
                return S
            },
            Xc: function() {
                return d
            },
            YS: function() {
                return m
            },
            ZJ: function() {
                return b
            },
            fG: function() {
                return g
            },
            n2: function() {
                return y
            },
            tf: function() {
                return u
            },
            tr: function() {
                return f
            }
        });
        const a = function(e, t) {
            const n = e.replace(/[,\.]/, "").match(/(^\d+)(.+)/)
              , a = t.replace(/[,\.]/, "").match(/(^\d+)(.+)/);
            return n && a ? parseInt(n[0]) - parseInt(a[0]) || (n[1] > a[1] ? 1 : -1) : e > t ? 1 : -1
        }
          , l = (e, t) => {
            const n = /(\D*)(\d*)/
              , a = e.name.match(n)
              , l = t.name.match(n)
              , s = a[1]
              , r = parseInt(a[2], 10)
              , o = l[1]
              , i = parseInt(l[2], 10);
            return s !== o ? s.localeCompare(o) : isNaN(r) && !isNaN(i) ? -1 : !isNaN(r) && isNaN(i) ? 1 : isNaN(r) || isNaN(i) ? e.name.localeCompare(t.name) : r - i
        }
          , s = e => {
            for (let t = e.length - 1; t > 0; t--) {
                const n = Math.floor(Math.random() * (t + 1));
                [e[t],e[n]] = [e[n], e[t]]
            }
            return e
        }
          , r = e => {
            const t = e.split("{{");
            return {
                preClozeStr: t[0],
                cloze: (t[1] || "").split("}}")[0],
                postClozeStr: (t[1] || "").split("}}")[1] || ""
            }
        }
          , o = (e, t) => {
            const n = window.localStorage && window.localStorage.getItem(e);
            return n ? "true" === n : t
        }
          , i = (e, t) => {
            window.localStorage && window.localStorage.setItem(e, t.toString())
        }
          , c = () => Math.round(new Date / 1e3)
          , d = (e, t) => t ? Math.round(e / t * 100 * 1e3) / 1e3 + "%" : "0%"
          , u = (e, t) => {
            const n = e["num" + t.charAt(0).toUpperCase() + t.slice(1)];
            return d(n, e.numSentences)
        }
        ;
        function m(e) {
            const t = Math.floor(e / 3600)
              , n = e % 3600
              , a = Math.floor(n / 60)
              , l = n % 60;
            return t + ":" + (a < 10 ? "0" : "") + a + ":" + (l < 10 ? "0" : "") + l
        }
        function h(e) {
            const t = Math.floor(e / 60)
              , n = e % 60;
            return `${String(t).padStart(2, "0")}:${String(n).padStart(2, "0")}`
        }
        function g(e) {
            if (0 === e)
                return "";
            switch (e % 10) {
            case 1:
                return 11 === e ? "th" : "st";
            case 2:
                return 12 === e ? "th" : "nd";
            case 3:
                return 13 === e ? "th" : "rd";
            default:
                return "th"
            }
        }
        function p(e) {
            return /\S+@\S+\.\S+/.test(e)
        }
        const b = {
            ca: {
                A: "\xe0",
                C: "\xe7",
                E: "\xe8\xe9",
                I: "\xed",
                O: "\xf3\xf2",
                U: "\xfa"
            },
            cs: {
                A: "\xe1",
                C: "\u010d",
                D: "\u010f",
                E: "\xe9\u011b",
                I: "\xed",
                N: "\u0148",
                O: "\xf3",
                R: "\u0159",
                S: "\u0161",
                T: "\u0165",
                U: "\xfa\u016f",
                Y: "\xfd",
                Z: "\u017e"
            },
            cy: {
                A: "\xe1\xe2",
                E: "\xe9\xea",
                I: "\xed\xee",
                O: "\xf3\xf4",
                W: "\u0175",
                Y: "\u0177"
            },
            da: {
                A: "\xe5\xe6",
                O: "\xf8"
            },
            de: {
                A: "\xe4",
                O: "\xf6",
                U: "\xfc",
                S: "\xdf"
            },
            eo: {
                C: "\u0109",
                G: "\u011d",
                H: "\u0125",
                J: "\u0135",
                S: "\u015d",
                U: "\u016d"
            },
            es: {
                A: "\xe1",
                E: "\xe9",
                I: "\xed",
                O: "\xf3",
                U: "\xfa\xfc",
                N: "\xf1"
            },
            et: {
                A: "\xe4",
                O: "\xf6\xf5",
                U: "\xfc"
            },
            fi: {
                A: "\xe5\xe4",
                O: "\xf6"
            },
            fr: {
                A: "\xe0\xe2\xe6",
                E: "\xe8\xe9\xea\xeb",
                I: "\xee\xef",
                O: "\xf4\u0153",
                U: "\xf9\xfb\xfc",
                C: "\xe7"
            },
            ga: {
                A: "\xe1",
                E: "\xe9",
                I: "\xed",
                O: "\xf3",
                U: "\xfa"
            },
            gd: {
                A: "\xe0",
                E: "\xe8",
                I: "\xec",
                O: "\xf2",
                U: "\xf9"
            },
            gn: {
                A: "\xe3",
                E: "\u1ebd",
                I: "\u0129",
                N: "\xf1",
                O: "\xf5",
                U: "\u0169",
                Y: "\xfd\u1ef9",
                "'": "\u02bc"
            },
            hu: {
                A: "\xe1",
                E: "\xe9",
                I: "\xed",
                O: "\xf6\xf3\u0151",
                U: "\xfc\xfa\u0171"
            },
            is: {
                A: "\xe1\xe6",
                D: "\xf0\xfe",
                E: "\xe9",
                I: "\xed",
                O: "\xf3\xf6",
                U: "\xfa",
                Y: "\xfd"
            },
            it: {
                A: "\xe0\xe1",
                E: "\xe8\xe9",
                I: "\xec\xed",
                O: "\xf2\xf3",
                U: "\xf9\xfa"
            },
            mi: {
                A: "\u0101",
                E: "\u0113",
                I: "\u012b",
                O: "\u014d",
                U: "\u016b"
            },
            nl: {
                A: "\xe1",
                E: "\xe9\xe8\xeb",
                I: "\xef",
                O: "\xf3\xf6",
                U: "\xfc"
            },
            no: {
                A: "\xe5\xe6",
                O: "\xf8",
                E: "\xe9"
            },
            pl: {
                A: "\u0105",
                C: "\u0107",
                E: "\u0119",
                L: "\u0142",
                N: "\u0144",
                O: "\xf3",
                S: "\u015b",
                Z: "\u017c\u017a"
            },
            pt: {
                A: "\xe3\xe1\xe2\xe0",
                E: "\xe9\xea",
                I: "\xed",
                O: "\xf5\xf3\xf4",
                U: "\xfa\xfc",
                C: "\xe7"
            },
            ro: {
                A: "\u0103\xe2",
                I: "\xee",
                S: "\u015f\u0219",
                T: "\u0163\u021b"
            },
            sk: {
                A: "\xe1\xe4",
                C: "\u010d",
                D: "\u010f",
                E: "\xe9",
                I: "\xed",
                L: "\u013e\u013a",
                N: "\u0148",
                O: "\xf3\xf4",
                R: "\u0155",
                S: "\u0161",
                T: "\u0165",
                U: "\xfa",
                Y: "\xfd",
                Z: "\u017e"
            },
            sl: {
                C: "\u010d",
                S: "\u0161",
                Z: "\u017e"
            },
            sr: {
                C: "\u010d\u0107",
                D: "\u0111",
                S: "\u0161",
                Z: "\u017e"
            },
            sv: {
                A: "\xe5\xe4",
                O: "\xf6",
                E: "\xe9"
            },
            tr: {
                C: "\xe7",
                G: "\u011f",
                I: "\u0131\u0130",
                O: "\xf6",
                S: "\u015f",
                U: "\xfc"
            }
        }
          , f = e => e.replace(/_(.)/g, ( (e, t) => t.toUpperCase()))
          , E = e => "https://tatoeba.org/eng/sentences/show/" + e;
        function y(e) {
            return `How do you eat an elephant? \ud83d\udc18 One bite at a time. These progress bars show your progress in chunks of ${e} sentnces at a time. You can change your chunk size or switch to absolute progress bars via your Dashboard settings at the bottom of the Dashboard.`
        }
        function S(e) {
            return new RegExp("^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]").test(e)
        }
        function v() {
            if (window.testEnv)
                return !0;
            if (document.querySelector("#google-ads-script"))
                return !0;
            const e = document.createElement("script");
            e.src = "//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",
            e.async = !0,
            e.defer = !0,
            e.id = "google-ads-script",
            document.body.insertBefore(e, document.body.firstChild)
        }
    },
    35358: function(e, t, n) {
        var a = {
            "./af": 25177,
            "./af.js": 25177,
            "./ar": 61509,
            "./ar-dz": 41488,
            "./ar-dz.js": 41488,
            "./ar-kw": 58676,
            "./ar-kw.js": 58676,
            "./ar-ly": 42353,
            "./ar-ly.js": 42353,
            "./ar-ma": 24496,
            "./ar-ma.js": 24496,
            "./ar-ps": 6947,
            "./ar-ps.js": 6947,
            "./ar-sa": 82682,
            "./ar-sa.js": 82682,
            "./ar-tn": 89756,
            "./ar-tn.js": 89756,
            "./ar.js": 61509,
            "./az": 95533,
            "./az.js": 95533,
            "./be": 28959,
            "./be.js": 28959,
            "./bg": 47777,
            "./bg.js": 47777,
            "./bm": 54903,
            "./bm.js": 54903,
            "./bn": 61290,
            "./bn-bd": 17357,
            "./bn-bd.js": 17357,
            "./bn.js": 61290,
            "./bo": 31545,
            "./bo.js": 31545,
            "./br": 11470,
            "./br.js": 11470,
            "./bs": 44429,
            "./bs.js": 44429,
            "./ca": 7306,
            "./ca.js": 7306,
            "./cs": 56464,
            "./cs.js": 56464,
            "./cv": 73635,
            "./cv.js": 73635,
            "./cy": 64226,
            "./cy.js": 64226,
            "./da": 93601,
            "./da.js": 93601,
            "./de": 77853,
            "./de-at": 26111,
            "./de-at.js": 26111,
            "./de-ch": 54697,
            "./de-ch.js": 54697,
            "./de.js": 77853,
            "./dv": 60708,
            "./dv.js": 60708,
            "./el": 54691,
            "./el.js": 54691,
            "./en-au": 53872,
            "./en-au.js": 53872,
            "./en-ca": 28298,
            "./en-ca.js": 28298,
            "./en-gb": 56195,
            "./en-gb.js": 56195,
            "./en-ie": 66584,
            "./en-ie.js": 66584,
            "./en-il": 65543,
            "./en-il.js": 65543,
            "./en-in": 9033,
            "./en-in.js": 9033,
            "./en-nz": 79402,
            "./en-nz.js": 79402,
            "./en-sg": 43004,
            "./en-sg.js": 43004,
            "./eo": 32934,
            "./eo.js": 32934,
            "./es": 97650,
            "./es-do": 20838,
            "./es-do.js": 20838,
            "./es-mx": 17730,
            "./es-mx.js": 17730,
            "./es-us": 56575,
            "./es-us.js": 56575,
            "./es.js": 97650,
            "./et": 3035,
            "./et.js": 3035,
            "./eu": 3508,
            "./eu.js": 3508,
            "./fa": 119,
            "./fa.js": 119,
            "./fi": 90527,
            "./fi.js": 90527,
            "./fil": 95995,
            "./fil.js": 95995,
            "./fo": 52477,
            "./fo.js": 52477,
            "./fr": 85498,
            "./fr-ca": 26435,
            "./fr-ca.js": 26435,
            "./fr-ch": 37892,
            "./fr-ch.js": 37892,
            "./fr.js": 85498,
            "./fy": 37071,
            "./fy.js": 37071,
            "./ga": 41734,
            "./ga.js": 41734,
            "./gd": 70217,
            "./gd.js": 70217,
            "./gl": 77329,
            "./gl.js": 77329,
            "./gom-deva": 32124,
            "./gom-deva.js": 32124,
            "./gom-latn": 93383,
            "./gom-latn.js": 93383,
            "./gu": 95050,
            "./gu.js": 95050,
            "./he": 11713,
            "./he.js": 11713,
            "./hi": 43861,
            "./hi.js": 43861,
            "./hr": 26308,
            "./hr.js": 26308,
            "./hu": 90609,
            "./hu.js": 90609,
            "./hy-am": 17160,
            "./hy-am.js": 17160,
            "./id": 74063,
            "./id.js": 74063,
            "./is": 89374,
            "./is.js": 89374,
            "./it": 88383,
            "./it-ch": 21827,
            "./it-ch.js": 21827,
            "./it.js": 88383,
            "./ja": 23827,
            "./ja.js": 23827,
            "./jv": 89722,
            "./jv.js": 89722,
            "./ka": 41794,
            "./ka.js": 41794,
            "./kk": 27088,
            "./kk.js": 27088,
            "./km": 96870,
            "./km.js": 96870,
            "./kn": 84451,
            "./kn.js": 84451,
            "./ko": 63164,
            "./ko.js": 63164,
            "./ku": 98174,
            "./ku-kmr": 6181,
            "./ku-kmr.js": 6181,
            "./ku.js": 98174,
            "./ky": 78474,
            "./ky.js": 78474,
            "./lb": 79680,
            "./lb.js": 79680,
            "./lo": 15867,
            "./lo.js": 15867,
            "./lt": 45766,
            "./lt.js": 45766,
            "./lv": 69532,
            "./lv.js": 69532,
            "./me": 58076,
            "./me.js": 58076,
            "./mi": 41848,
            "./mi.js": 41848,
            "./mk": 30306,
            "./mk.js": 30306,
            "./ml": 73739,
            "./ml.js": 73739,
            "./mn": 99053,
            "./mn.js": 99053,
            "./mr": 86169,
            "./mr.js": 86169,
            "./ms": 73386,
            "./ms-my": 92297,
            "./ms-my.js": 92297,
            "./ms.js": 73386,
            "./mt": 77075,
            "./mt.js": 77075,
            "./my": 72264,
            "./my.js": 72264,
            "./nb": 22274,
            "./nb.js": 22274,
            "./ne": 8235,
            "./ne.js": 8235,
            "./nl": 92572,
            "./nl-be": 43784,
            "./nl-be.js": 43784,
            "./nl.js": 92572,
            "./nn": 54566,
            "./nn.js": 54566,
            "./oc-lnc": 69330,
            "./oc-lnc.js": 69330,
            "./pa-in": 29849,
            "./pa-in.js": 29849,
            "./pl": 94418,
            "./pl.js": 94418,
            "./pt": 79834,
            "./pt-br": 48303,
            "./pt-br.js": 48303,
            "./pt.js": 79834,
            "./ro": 24457,
            "./ro.js": 24457,
            "./ru": 82271,
            "./ru.js": 82271,
            "./sd": 1221,
            "./sd.js": 1221,
            "./se": 33478,
            "./se.js": 33478,
            "./si": 17538,
            "./si.js": 17538,
            "./sk": 5784,
            "./sk.js": 5784,
            "./sl": 46637,
            "./sl.js": 46637,
            "./sq": 86794,
            "./sq.js": 86794,
            "./sr": 45719,
            "./sr-cyrl": 3322,
            "./sr-cyrl.js": 3322,
            "./sr.js": 45719,
            "./ss": 56e3,
            "./ss.js": 56e3,
            "./sv": 41011,
            "./sv.js": 41011,
            "./sw": 40748,
            "./sw.js": 40748,
            "./ta": 11025,
            "./ta.js": 11025,
            "./te": 11885,
            "./te.js": 11885,
            "./tet": 28861,
            "./tet.js": 28861,
            "./tg": 86571,
            "./tg.js": 86571,
            "./th": 55802,
            "./th.js": 55802,
            "./tk": 59527,
            "./tk.js": 59527,
            "./tl-ph": 29231,
            "./tl-ph.js": 29231,
            "./tlh": 31052,
            "./tlh.js": 31052,
            "./tr": 85096,
            "./tr.js": 85096,
            "./tzl": 79846,
            "./tzl.js": 79846,
            "./tzm": 81765,
            "./tzm-latn": 97711,
            "./tzm-latn.js": 97711,
            "./tzm.js": 81765,
            "./ug-cn": 48414,
            "./ug-cn.js": 48414,
            "./uk": 16618,
            "./uk.js": 16618,
            "./ur": 57777,
            "./ur.js": 57777,
            "./uz": 57609,
            "./uz-latn": 72475,
            "./uz-latn.js": 72475,
            "./uz.js": 57609,
            "./vi": 21135,
            "./vi.js": 21135,
            "./x-pseudo": 64051,
            "./x-pseudo.js": 64051,
            "./yo": 82218,
            "./yo.js": 82218,
            "./zh-cn": 52648,
            "./zh-cn.js": 52648,
            "./zh-hk": 1632,
            "./zh-hk.js": 1632,
            "./zh-mo": 31541,
            "./zh-mo.js": 31541,
            "./zh-tw": 50304,
            "./zh-tw.js": 50304
        };
        function l(e) {
            var t = s(e);
            return n(t)
        }
        function s(e) {
            if (!n.o(a, e)) {
                var t = new Error("Cannot find module '" + e + "'");
                throw t.code = "MODULE_NOT_FOUND",
                t
            }
            return a[e]
        }
        l.keys = function() {
            return Object.keys(a)
        }
        ,
        l.resolve = s,
        e.exports = l,
        l.id = 35358
    },
    3927: function() {},
    42250: function() {},
    29645: function() {},
    88632: function() {},
    13678: function() {},
    44573: function() {},
    10952: function() {}
}]);
//# sourceMappingURL=850-a32133428df63c5f49fd.js.map
